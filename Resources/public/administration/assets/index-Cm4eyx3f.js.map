{"version":3,"file":"index-Cm4eyx3f.js","sources":["../../../app/administration/src/module/sw-settings-delivery-times/page/sw-settings-delivery-time-detail/sw-settings-delivery-time-detail.html.twig","../../../app/administration/src/module/sw-settings-delivery-times/page/sw-settings-delivery-time-detail/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_delivery_time_detail %}\n<sw-page class=\"sw-settings-delivery-time-detail\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_delivery_time_detail_smart_bar_header %}\n    <template #smart-bar-header>\n        <h2>{{ displayName }}</h2>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_delivery_time_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch\n            :disabled=\"!$route.params.id || undefined\"\n            @on-change=\"onChangeLanguage\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_delivery_time_detail_smart_bar_actions %}\n    <template #smart-bar-actions>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_delivery_time_detail_smart_bar_actions_cancel %}\n        <sw-button\n            v-tooltip.bottom=\"tooltipCancel\"\n            @click=\"onCancel\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_delivery_time_detail_smart_bar_actions_save %}\n        <sw-button-process\n            v-tooltip.bottom=\"tooltipSave\"\n            class=\"sw-settings-delivery-time-detail__save\"\n            :is-loading=\"isLoading\"\n            :process-success=\"isSaveSuccessful\"\n            :disabled=\"!allowSave || undefined\"\n            variant=\"primary\"\n            @update:process-success=\"saveFinish\"\n            @click.prevent=\"onSave\"\n        >\n            {{ $tc('sw-settings-delivery-time.general.buttonSave') }}\n        </sw-button-process>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_delivery_time_detail_content %}\n    <template #content>\n        <sw-card-view>\n\n            <sw-skeleton v-if=\"isLoading\" />\n\n            <template v-else>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_delivery_time_language_info %}\n                <sw-language-info\n                    :entity-description=\"displayName\"\n                    :is-new-entity=\"!$route.params.id\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_delivery_time_detail_form %}\n                <sw-card\n                    :is-loading=\"isLoading\"\n                    position-identifier=\"sw-settings-delivery-time-detail-form\"\n                >\n                    <template v-if=\"deliveryTime\">\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_delivery_time_detail_name_field %}\n                        <sw-text-field\n                            v-model:value=\"deliveryTime.name\"\n                            name=\"sw-field--deliveryTime-name\"\n                            :label=\"$tc('sw-settings-delivery-time.detail.labelName')\"\n                            :error=\"deliveryTimeNameError\"\n                            :disabled=\"!acl.can('delivery_times.editor') || undefined\"\n                            required\n                        />\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_delivery_time_detail_unit_field %}\n                        <sw-single-select\n                            v-model:value=\"deliveryTime.unit\"\n                            name=\"sw-field--deliveryTime-unit\"\n                            class=\"sw-delivery-time-detail__field-unit\"\n                            :options=\"deliveryTimeUnits\"\n                            :error=\"deliveryTimeUnitError\"\n                            :label=\"$tc('sw-settings-delivery-time.detail.labelUnit')\"\n                            :disabled=\"!acl.can('delivery_times.editor') || undefined\"\n                            required\n                            show-clearable-button\n                        />\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_delivery_time_min_max_container %}\n                        <sw-container\n                            columns=\"1fr 1fr\"\n                            gap=\"30px\"\n                        >\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_settings_delivery_time_detail_min_field %}\n                            <sw-number-field\n                                v-model:value=\"deliveryTime.min\"\n                                name=\"sw-field--deliveryTime-min\"\n                                :label=\"$tc('sw-settings-delivery-time.detail.labelMin')\"\n                                :error=\"deliveryTimeMinError || invalidMinError\"\n                                :min=\"0\"\n                                :max=\"deliveryTime.max\"\n                                :disabled=\"!acl.can('delivery_times.editor') || undefined\"\n                                required\n                            />\n                            {% endblock %}\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_settings_delivery_time_detail_max_field %}\n                            <sw-number-field\n                                v-model:value=\"deliveryTime.max\"\n                                name=\"sw-field--deliveryTime-max\"\n                                :label=\"$tc('sw-settings-delivery-time.detail.labelMax')\"\n                                :error=\"deliveryTimeMaxError\"\n                                :min=\"deliveryTime.min\"\n                                :disabled=\"!acl.can('delivery_times.editor') || undefined\"\n                                required\n                            />\n                            {% endblock %}\n                        </sw-container>\n                        {% endblock %}\n                    </template>\n                </sw-card>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_delivery_time_detail_custom_field_sets %}\n                <sw-card\n                    v-if=\"showCustomFields\"\n                    position-identifier=\"sw-settings-delivery-time-detail-custom-field-sets\"\n                    :title=\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\"\n                    :is-loading=\"isLoading\"\n                >\n                    <sw-custom-field-set-renderer\n                        :entity=\"deliveryTime\"\n                        :disabled=\"!acl.can('delivery_times.editor') || undefined\"\n                        :sets=\"customFieldSets\"\n                    />\n                </sw-card>\n                {% endblock %}\n            </template>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","import template from './sw-settings-delivery-time-detail.html.twig';\n\n/**\n * @package discovery\n */\n\nconst { Component, Mixin } = Cicada;\nconst CicadaError = Cicada.Classes.CicadaError;\nconst { mapPropertyErrors } = Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n        'customFieldDataProviderService',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': {\n            active() {\n                return this.allowSave;\n            },\n            method: 'onSave',\n        },\n\n        ESCAPE: 'onCancel',\n    },\n\n    data() {\n        return {\n            deliveryTime: null,\n            isLoading: false,\n            isSaveSuccessful: false,\n            customFieldSets: null,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    computed: {\n        ...mapPropertyErrors('deliveryTime', [\n            'name',\n            'min',\n            'max',\n            'unit',\n        ]),\n\n        deliveryTimeRepository() {\n            return this.repositoryFactory.create('delivery_time');\n        },\n\n        deliveryTimeUnits() {\n            return [\n                {\n                    value: 'hour',\n                    label: this.$tc('sw-settings-delivery-time.detail.selectionUnitHour'),\n                },\n                {\n                    value: 'day',\n                    label: this.$tc('sw-settings-delivery-time.detail.selectionUnitDay'),\n                },\n                {\n                    value: 'week',\n                    label: this.$tc('sw-settings-delivery-time.detail.selectionUnitWeek'),\n                },\n                {\n                    value: 'month',\n                    label: this.$tc('sw-settings-delivery-time.detail.selectionUnitMonth'),\n                },\n                {\n                    value: 'year',\n                    label: this.$tc('sw-settings-delivery-time.detail.selectionUnitYear'),\n                },\n            ];\n        },\n\n        displayName() {\n            if (this.deliveryTime && this.deliveryTime.name) {\n                return this.deliveryTime.name;\n            }\n            return this.$tc('sw-settings-delivery-time.detail.textHeadlineNew');\n        },\n\n        isInvalidMinField() {\n            return this.deliveryTime.min > this.deliveryTime.max;\n        },\n\n        invalidMinError() {\n            if (this.isInvalidMinField) {\n                return new CicadaError({ code: 'DELIVERY_TIME_MIN_INVALID' });\n            }\n            return null;\n        },\n\n        allowSave() {\n            if (!this.deliveryTime) {\n                return false;\n            }\n\n            if (this.deliveryTime.isNew()) {\n                return this.acl.can('delivery_times.creator');\n            }\n\n            return this.acl.can('delivery_times.editor');\n        },\n\n        tooltipSave() {\n            if (!this.allowSave) {\n                return {\n                    message: this.$tc('sw-privileges.tooltip.warning'),\n                    disabled: this.allowSave,\n                    showOnDisabledElements: true,\n                };\n            }\n\n            const systemKey = this.$device.getSystemKey();\n\n            return {\n                message: `${systemKey} + S`,\n                appearance: 'light',\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        showCustomFields() {\n            return this.deliveryTime && this.customFieldSets && this.customFieldSets.length > 0;\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.isLoading = true;\n            this.loadCustomFieldSets();\n\n            this.deliveryTimeRepository\n                .get(this.$route.params.id)\n                .then((deliveryTime) => {\n                    this.deliveryTime = deliveryTime;\n                    this.isLoading = false;\n                })\n                .catch((exception) => {\n                    this.createNotificationError({\n                        message: this.$tc('sw-settings-delivery-time.detail.errorLoad'),\n                    });\n\n                    this.isLoading = false;\n                    throw exception;\n                });\n        },\n\n        loadCustomFieldSets() {\n            this.customFieldDataProviderService.getCustomFieldSets('delivery_time').then((sets) => {\n                this.customFieldSets = sets;\n            });\n        },\n\n        onSave() {\n            this.isLoading = true;\n            this.isSaveSuccessful = false;\n\n            return this.deliveryTimeRepository\n                .save(this.deliveryTime, Cicada.Context.api)\n                .then(() => {\n                    this.isLoading = false;\n                    this.isSaveSuccessful = true;\n                })\n                .catch((exception) => {\n                    this.createNotificationError({\n                        message: this.$tc('sw-settings-delivery-time.detail.errorSave'),\n                    });\n\n                    this.isLoading = false;\n                    throw exception;\n                });\n        },\n\n        onChangeLanguage() {\n            this.createdComponent();\n        },\n\n        saveFinish() {\n            this.isSaveSuccessful = false;\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.settings.delivery.time.index' });\n        },\n    },\n};\n"],"names":["template","Component","Mixin","CicadaError","mapPropertyErrors","index","deliveryTime","exception","sets"],"mappings":"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"}
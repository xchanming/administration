{"version":3,"file":"index-BKK_5yFz.js","sources":["../../../app/administration/src/module/sw-users-permissions/components/sw-users-permissions-detailed-additional-permissions/sw-users-permissions-detailed-additional-permissions.html.twig","../../../app/administration/src/module/sw-users-permissions/components/sw-users-permissions-detailed-additional-permissions/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_users_permissions_detailed_additional_permissions %}\n<sw-card\n    class=\"sw-users-permissions-detailed-additional-permissions\"\n    position-identifier=\"sw-users-permissions-detailed-additional-permissions\"\n    :title=\"$tc('sw-users-permissions.roles.detailed-additional-permissions.title')\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_users_permissions_detailed_additional_permissions_additional_privileges %}\n    <template\n        v-for=\"privilege in detailedAdditionalPermissions\"\n        :key=\"privilege.key\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_users_permissions_detailed_additional_permissions_additional_privileges_headline %}\n        <h4\n            :class=\"'sw-users-permissions-additional-permissions_' + privilege.key\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_detailed_additional_permissions_additional_privileges_headline_content %}\n            <strong>\n                {{ $tc('sw-privileges.additional_permissions.' + privilege.key + '.label') }}\n            </strong>\n            {% endblock %}\n        </h4>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_users_permissions_detailed_additional_permissions_additional_privileges_switches %}\n        <div\n            class=\"sw-users-permissions-detailed-additional-permissions__switches\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_detailed_additional_permissions_additional_privileges_switches_content %}\n            <template\n                v-for=\"(value, roleName) in privilege.roles\"\n                :key=\"roleName\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_users_permissions_detailed_additional_permissions_additional_privileges_switches_content_switch %}\n                <sw-switch-field\n                    :class=\"'sw_users_permissions_detailed_additional_permissions_' + privilege.key + '_' + roleName\"\n                    :value=\"isEntitySelected(roleName)\"\n                    :disabled=\"isEntityDisabled(roleName) || disabled\"\n                    :label=\"roleName\"\n                    :bordered=\"true\"\n                    @update:value=\"changePermissionForEntity(roleName)\"\n                />\n                {% endblock %}\n            </template>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n","/**\n * @package services-settings\n */\nimport template from './sw-users-permissions-detailed-additional-permissions.html.twig';\nimport './sw-users-permissions-detailed-additional-permissions.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'privileges',\n        'aclApiService',\n    ],\n\n    props: {\n        role: {\n            type: Object,\n            required: true,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        detailedPrivileges: {\n            type: Array,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            detailedAdditionalPermissions: [],\n        };\n    },\n\n    computed: {\n        allGeneralSelectedPrivileges() {\n            return this.privileges.getPrivilegesForAdminPrivilegeKeys(this.role.privileges);\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.setDetailedAdditionalPermissions();\n        },\n\n        setDetailedAdditionalPermissions() {\n            this.aclApiService.additionalPrivileges().then((additionalPrivileges) => {\n                const roles = {};\n                additionalPrivileges.forEach((privilege) => {\n                    roles[privilege] = {\n                        privileges: [privilege],\n                        dependencies: [],\n                    };\n                });\n\n                this.detailedAdditionalPermissions.push({\n                    category: 'additional_permissions',\n                    parent: null,\n                    key: 'routes',\n                    roles: roles,\n                });\n            });\n        },\n\n        isEntitySelected(identifier) {\n            const allPrivileges = [\n                ...this.allGeneralSelectedPrivileges,\n                ...this.detailedPrivileges,\n            ];\n\n            return allPrivileges.includes(identifier);\n        },\n\n        isEntityDisabled(identifier) {\n            if (this.disabled) {\n                return true;\n            }\n\n            return this.allGeneralSelectedPrivileges.includes(identifier);\n        },\n\n        changePermissionForEntity(identifier) {\n            const privilegeIndex = this.detailedPrivileges.indexOf(identifier);\n\n            if (privilegeIndex >= 0) {\n                this.detailedPrivileges.splice(privilegeIndex, 1);\n                return;\n            }\n\n            this.detailedPrivileges.push(identifier);\n        },\n    },\n};\n"],"names":["template","index","additionalPrivileges","roles","privilege","identifier","privilegeIndex"],"mappings":"AAAA,MAAeA,EAAA,otDCOAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,aACA,eACH,EAED,MAAO,CACH,KAAM,CACF,KAAM,OACN,SAAU,EACb,EAED,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EAED,mBAAoB,CAChB,KAAM,MACN,SAAU,EACb,CACJ,EAED,MAAO,CACH,MAAO,CACH,8BAA+B,CAAE,CAC7C,CACK,EAED,SAAU,CACN,8BAA+B,CAC3B,OAAO,KAAK,WAAW,mCAAmC,KAAK,KAAK,UAAU,CACjF,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,iCAAgC,CACxC,EAED,kCAAmC,CAC/B,KAAK,cAAc,qBAAsB,EAAC,KAAME,GAAyB,CACrE,MAAMC,EAAQ,CAAA,EACdD,EAAqB,QAASE,GAAc,CACxCD,EAAMC,CAAS,EAAI,CACf,WAAY,CAACA,CAAS,EACtB,aAAc,CAAE,CACxC,CACA,CAAiB,EAED,KAAK,8BAA8B,KAAK,CACpC,SAAU,yBACV,OAAQ,KACR,IAAK,SACL,MAAOD,CAC3B,CAAiB,CACjB,CAAa,CACJ,EAED,iBAAiBE,EAAY,CAMzB,MALsB,CAClB,GAAG,KAAK,6BACR,GAAG,KAAK,kBACxB,EAEiC,SAASA,CAAU,CAC3C,EAED,iBAAiBA,EAAY,CACzB,OAAI,KAAK,SACE,GAGJ,KAAK,6BAA6B,SAASA,CAAU,CAC/D,EAED,0BAA0BA,EAAY,CAClC,MAAMC,EAAiB,KAAK,mBAAmB,QAAQD,CAAU,EAEjE,GAAIC,GAAkB,EAAG,CACrB,KAAK,mBAAmB,OAAOA,EAAgB,CAAC,EAChD,MACH,CAED,KAAK,mBAAmB,KAAKD,CAAU,CAC1C,CACJ,CACL"}
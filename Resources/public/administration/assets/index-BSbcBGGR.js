const a=`{% block sw_promotion_v2_generate_codes_modal %} <sw-modal class="sw-promotion-v2-generate-codes-modal" :title="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.title')" @modal-close="onClose" > {% block sw_promotion_v2_generate_codes_modal_content %} <div class="sw-promotion-v2-generate-codes-modal__content"> {% block sw_promotion_v2_generate_codes_modal_warning %} <sw-alert v-if="promotion.individualCodes && promotion.individualCodes.length > 0" class="sw-promotion-v2-generate-codes-modal__warning" variant="warning" > {{ $tc('sw-promotion-v2.detail.base.codes.individual.generateModal.warning') }} </sw-alert> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_description %} <p class="sw-promotion-v2-generate-codes-modal__description"> {{ $tc('sw-promotion-v2.detail.base.codes.individual.generateModal.description') }} </p> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_container_pattern %} {% block sw_promotion_v2_generate_codes_modal_container_pattern_simple %} <sw-container v-if="!customPatternMode" class="sw-promotion-v2-generate-codes-modal__container-pattern" columns="1fr 1fr 1fr" gap="0px 32px" > {% block sw_promotion_v2_generate_codes_modal_prefix %} <sw-text-field v-model:value="pattern.prefix" class="sw-promotion-v2-generate-codes-modal__prefix" :label="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.labelPrefix')" :placeholder="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderPrefix')" /> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_replacement %} <sw-number-field v-model:value="pattern.codeLength" class="sw-promotion-v2-generate-codes-modal__replacement" :label="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.labelCodeLength')" :min="1" :max="20" /> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_suffix %} <sw-text-field v-model:value="pattern.suffix" class="sw-promotion-v2-generate-codes-modal__suffix" :label="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.labelSuffix')" :placeholder="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderSuffix')" /> {% endblock %} </sw-container> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_container_pattern_custom %} <sw-text-field v-else v-model:value="promotion.individualCodePattern" class="sw-promotion-v2-generate-codes-modal__custom-pattern" :label="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.labelCustomPattern')" :placeholder="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderCustomPattern')" :help-text="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.helpTextCustomPattern')" /> {% endblock %} {% endblock %} {% block sw_promotion_v2_generate_codes_modal_custom_pattern_switch %} <sw-switch-field v-model:value="customPatternMode" class="sw-promotion-v2-generate-codes-modal__custom-pattern" :label="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.labelUseCustomPattern')" bordered /> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_container_generate %} <sw-container class="sw-promotion-v2-generate-codes-modal__container-generate" columns="1fr 1fr" gap="0px 32px" > {% block sw_promotion_v2_generate_codes_modal_preview %} <sw-text-field v-model:value="preview" class="sw-promotion-v2-generate-codes-modal__preview" :label="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.labelPreview')" disabled /> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_code_amount %} <sw-number-field v-model:value="codeAmount" class="sw-promotion-v2-generate-codes-modal__code-amount" :label="$tc('sw-promotion-v2.detail.base.codes.individual.generateModal.labelCodeAmount')" :min="1" /> {% endblock %} </sw-container> {% endblock %} </div> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_footer %} <template #modal-footer> {% block sw_promotion_v2_generate_codes_modal_cancel %} <sw-button class="sw-promotion-v2-generate-codes-modal__button-cancel" size="small" @click="onClose" > {{ $tc('global.default.cancel') }} </sw-button> {% endblock %} {% block sw_promotion_v2_generate_codes_modal_generate %} <sw-button-process class="sw-promotion-v2-generate-codes-modal__button-generate" variant="primary" size="small" :is-loading="isGenerating" :process-success="false" @click="onGenerate" > {{ $tc('sw-promotion-v2.detail.base.codes.individual.generateModal.buttonGenerate') }} </sw-button-process> {% endblock %} </template> {% endblock %} </sw-modal> {% endblock %}`,n=Cicada.Utils.debounce,i={template:a,compatConfig:Cicada.compatConfig,inject:["promotionCodeApiService"],emits:["generate-finish","close"],mixins:["notification"],props:{promotion:{type:Object,required:!0}},data(){return{isGenerating:!1,customPatternMode:!1,codeAmount:10,preview:"",pattern:{prefix:"",suffix:"",codeLength:5}}},watch:{pattern:{deep:!0,handler(){this.customPatternMode||this.updatePattern(),this.updatePreview()}},"promotion.individualCodePattern"(){this.updatePreview()},customPatternMode(){this.customPatternMode||this.updatePattern(),this.updatePreview()}},created(){this.createdComponent()},methods:{createdComponent(){const e=this.promotion.individualCodePattern;if(!e||!e.length>0){this.pattern={prefix:"",suffix:"",codeLength:5};return}const o=/(?<prefix>[^%]*)(?<replacement>(%[sd])+)(?<suffix>.*)/g.exec(e).groups;this.customPatternMode=o.replacement.includes("d"),this.pattern={...o,codeLength:o.replacement.length/2||1},this.updatePreview()},updatePattern(){const e=Array(Number(this.pattern.codeLength)+1).join("%s");this.promotion.individualCodePattern=`${this.pattern.prefix}${e}${this.pattern.suffix}`},updatePreview:n(function(){this.isGenerating=!0,this.promotionCodeApiService.generatePreview(this.promotion.individualCodePattern).then(t=>{this.isGenerating=!1,this.preview=t})},500),onGenerate(){this.isGenerating=!0,this.promotionCodeApiService.replaceIndividualCodes(this.promotion.id,this.promotion.individualCodePattern,this.codeAmount).then(()=>{this.isGenerating=!1,this.$emit("generate-finish")}).catch(e=>{this.isGenerating=!1,e.response.data.errors.forEach(t=>{let o;switch(t.code){case"PROMOTION__INDIVIDUAL_CODES_PATTERN_INSUFFICIENTLY_COMPLEX":o="notComplexEnoughException";break;case"PROMOTION__INDIVIDUAL_CODES_PATTERN_ALREADY_IN_USE":o="alreadyInUseException";break;default:o="unknownErrorCode";break}this.createNotificationError({autoClose:!1,message:this.$tc(`sw-promotion-v2.detail.base.codes.individual.generateModal.${o}`)})})})},onClose(){this.$emit("close")}}};export{i as default};
//# sourceMappingURL=index-BSbcBGGR.js.map

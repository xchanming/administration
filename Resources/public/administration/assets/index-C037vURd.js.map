{"version":3,"file":"index-C037vURd.js","sources":["../../../app/administration/src/module/sw-sales-channel/component/sw-sales-channel-modal/sw-sales-channel-modal.html.twig","../../../app/administration/src/module/sw-sales-channel/component/sw-sales-channel-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_sales_channel_modal %}\n<sw-modal\n    class=\"sw-sales-channel-modal\"\n    :title=\"$tc(modalTitle)\"\n    @modal-close=\"onCloseModal\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_modal_grid %}\n    <sw-sales-channel-modal-grid\n        v-if=\"!detailType\"\n        :product-streams-exist=\"productStreamsExist\"\n        :product-streams-loading=\"productStreamsLoading\"\n        :add-channel-action=\"addChannelAction\"\n        @grid-detail-open=\"onGridOpenDetails\"\n        @grid-channel-add=\"onAddChannel\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_modal_detail %}\n    <sw-sales-channel-modal-detail\n        v-else\n        :detail-type=\"detailType\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_modal_footer %}\n    <template #modal-footer>\n        <a\n            href=\"#\"\n            class=\"sw-sales-channel-modal__footer_left\"\n            @click.prevent=\"openRoute({ name: 'sw.sales.channel.list' })\"\n        >\n            {{ $tc('sw-sales-channel.general.manageSalesChannels') }}\n        </a>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_modal_footer_detail_actions %}\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_modal_footer_back %}\n        <sw-button\n            v-if=\"detailType\"\n            size=\"small\"\n            @click.prevent=\"detailType = false\"\n        >\n            {{ $tc('sw-sales-channel.modal.buttonBack') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_modal_footer_add_channel %}\n        <sw-button\n            v-if=\"detailType\"\n            v-tooltip=\"{\n                message: $tc('sw-sales-channel.modal.messageNoProductStreams'),\n                showOnDisabledElements: true,\n                disabled: !addChannelAction.disabled(detailType.id)\n            }\"\n            class=\"sw-sales-channel-modal__add-sales-channel-action\"\n            variant=\"primary\"\n            size=\"small\"\n            :is-loading=\"addChannelAction.loading(detailType.id)\"\n            :disabled=\"addChannelAction.disabled(detailType.id)\"\n            @click=\"onAddChannel(detailType.id)\"\n        >\n            {{ $tc('sw-sales-channel.modal.buttonAddChannel') }}\n        </sw-button>\n        {% endblock %}\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_modal_footer_actions %}\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_modal_footer_cancel %}\n        <sw-button\n            v-if=\"!detailType\"\n            size=\"small\"\n            @click=\"onCloseModal\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n        {% endblock %}\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n","/**\n * @package discovery\n */\n\nimport template from './sw-sales-channel-modal.html.twig';\nimport './sw-sales-channel-modal.scss';\n\nconst { Defaults } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    emits: ['modal-close'],\n\n    data() {\n        return {\n            detailType: null,\n            productStreamsExist: false,\n            productStreamsLoading: false,\n        };\n    },\n\n    computed: {\n        modalTitle() {\n            if (this.detailType) {\n                return this.$tc('sw-sales-channel.modal.titleDetailPrefix', 0, {\n                    name: this.detailType.name,\n                });\n            }\n\n            return this.$tc('sw-sales-channel.modal.title');\n        },\n\n        productStreamRepository() {\n            return this.repositoryFactory.create('product_stream');\n        },\n\n        addChannelAction() {\n            return {\n                loading: (salesChannelTypeId) => {\n                    return this.isProductComparisonSalesChannelType(salesChannelTypeId) && this.productStreamsLoading;\n                },\n\n                disabled: (salesChannelTypeId) => {\n                    return this.isProductComparisonSalesChannelType(salesChannelTypeId) && !this.productStreamsExist;\n                },\n            };\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.productStreamsLoading = true;\n            this.productStreamRepository.search(new Criteria(1, 1)).then((result) => {\n                if (result.total > 0) {\n                    this.productStreamsExist = true;\n                }\n                this.productStreamsLoading = false;\n            });\n        },\n\n        onGridOpenDetails(detailType) {\n            this.detailType = detailType;\n        },\n\n        onCloseModal() {\n            this.$emit('modal-close');\n        },\n\n        onAddChannel(id) {\n            this.onCloseModal();\n\n            if (id) {\n                this.$router.push({\n                    name: 'sw.sales.channel.create',\n                    params: { typeId: id },\n                });\n            }\n        },\n\n        openRoute(route) {\n            this.onCloseModal();\n\n            this.$router.push(route);\n        },\n\n        isProductComparisonSalesChannelType(salesChannelTypeId) {\n            return salesChannelTypeId === Defaults.productComparisonTypeId;\n        },\n    },\n};\n"],"names":["template","Defaults","Criteria","index","salesChannelTypeId","result","detailType","id","route"],"mappings":"AAAA,MAAeA,EAAA,65DCOT,CAAE,SAAAC,CAAU,EAAG,OACf,CAAE,SAAAC,CAAQ,EAAK,OAAO,KAGbC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,aAAa,EAErB,MAAO,CACH,MAAO,CACH,WAAY,KACZ,oBAAqB,GACrB,sBAAuB,EACnC,CACK,EAED,SAAU,CACN,YAAa,CACT,OAAI,KAAK,WACE,KAAK,IAAI,2CAA4C,EAAG,CAC3D,KAAM,KAAK,WAAW,IAC1C,CAAiB,EAGE,KAAK,IAAI,8BAA8B,CACjD,EAED,yBAA0B,CACtB,OAAO,KAAK,kBAAkB,OAAO,gBAAgB,CACxD,EAED,kBAAmB,CACf,MAAO,CACH,QAAUI,GACC,KAAK,oCAAoCA,CAAkB,GAAK,KAAK,sBAGhF,SAAWA,GACA,KAAK,oCAAoCA,CAAkB,GAAK,CAAC,KAAK,mBAEjG,CACS,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,sBAAwB,GAC7B,KAAK,wBAAwB,OAAO,IAAIF,EAAS,EAAG,CAAC,CAAC,EAAE,KAAMG,GAAW,CACjEA,EAAO,MAAQ,IACf,KAAK,oBAAsB,IAE/B,KAAK,sBAAwB,EAC7C,CAAa,CACJ,EAED,kBAAkBC,EAAY,CAC1B,KAAK,WAAaA,CACrB,EAED,cAAe,CACX,KAAK,MAAM,aAAa,CAC3B,EAED,aAAaC,EAAI,CACb,KAAK,aAAY,EAEbA,GACA,KAAK,QAAQ,KAAK,CACd,KAAM,0BACN,OAAQ,CAAE,OAAQA,CAAI,CAC1C,CAAiB,CAER,EAED,UAAUC,EAAO,CACb,KAAK,aAAY,EAEjB,KAAK,QAAQ,KAAKA,CAAK,CAC1B,EAED,oCAAoCJ,EAAoB,CACpD,OAAOA,IAAuBH,EAAS,uBAC1C,CACJ,CACL"}
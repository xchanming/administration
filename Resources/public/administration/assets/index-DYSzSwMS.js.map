{"version":3,"file":"index-DYSzSwMS.js","sources":["../../../app/administration/src/module/sw-property/page/sw-property-detail/sw-property-detail.html.twig","../../../app/administration/src/module/sw-property/page/sw-property-detail/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_property_detail %}\n<sw-page class=\"sw-property-detail\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_detail_smart_bar_header %}\n    <template #smart-bar-header>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_property_detail_smart_bar_header_title %}\n        <h2>{{ placeholder(propertyGroup, 'name', $tc('sw-property.detail.textHeadline')) }}</h2>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_detail_smart_bar_actions %}\n    <template #smart-bar-actions>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_property_detail_smart_bar_actions_cancel %}\n        <sw-button\n            v-tooltip.bottom=\"tooltipCancel\"\n            class=\"sw-property-detail__back-action\"\n            :disabled=\"isLoading || undefined\"\n            @click=\"onCancel\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_property_detail_smart_bar_actions_save %}\n        <sw-button-process\n            v-tooltip=\"tooltipSave\"\n            class=\"sw-property-detail__save-action\"\n            :is-loading=\"isLoading || undefined\"\n            :process-success=\"isSaveSuccessful\"\n            :disabled=\"isLoading || !acl.can('property.editor') || undefined\"\n            variant=\"primary\"\n            @update:process-success=\"saveFinish\"\n            @click.prevent=\"onSave\"\n        >\n            {{ $tc('sw-property.detail.buttonSave') }}\n        </sw-button-process>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch\n            :save-changes-function=\"saveOnLanguageChange\"\n            :abort-change-function=\"abortOnLanguageChange\"\n            :save-permission=\"acl.can('property.editor')\"\n            @on-change=\"onChangeLanguage\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_detail_content %}\n    <template #content>\n        <sw-card-view>\n            <template v-if=\"isLoading\">\n                <sw-skeleton variant=\"detail-bold\" />\n                <sw-skeleton />\n            </template>\n\n            {# v-show is used here as underlying components influence the loading state and v-if would destroy this behaviour #}\n            <div v-show=\"!isLoading\">\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_property_detail_content_language_info %}\n                <sw-language-info\n                    :entity-description=\"placeholder(propertyGroup, 'name', $tc('sw-property.detail.textHeadline'))\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_property_detail_content_detail_base %}\n                <sw-property-detail-base\n                    v-if=\"propertyGroup\"\n                    :property-group=\"propertyGroup\"\n                    :allow-edit=\"acl.can('property.editor')\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_property_detail_content_option_list %}\n                <sw-property-option-list\n                    v-if=\"propertyGroup\"\n                    ref=\"optionListing\"\n                    :is-loading=\"isLoading || undefined\"\n                    :option-repository=\"optionRepository\"\n                    :property-group=\"propertyGroup\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_property_detail_custom_field_sets %}\n                <sw-card\n                    v-if=\"showCustomFields\"\n                    position-identifier=\"sw-property-detail\"\n                    :title=\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\"\n                >\n                    <sw-custom-field-set-renderer\n                        :entity=\"propertyGroup\"\n                        :disabled=\"!acl.can('property.editor') || undefined\"\n                        :sets=\"customFieldSets\"\n                    />\n                </sw-card>\n                {% endblock %}\n            </div>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport template from './sw-property-detail.html.twig';\nimport './sw-property-detail.scss';\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n        'customFieldDataProviderService',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('placeholder'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': {\n            active() {\n                return this.acl.can('product.editor');\n            },\n            method: 'onSave',\n        },\n        ESCAPE: 'onCancel',\n    },\n\n    props: {\n        groupId: {\n            type: String,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            propertyGroup: null,\n            isLoading: false,\n            isSaveSuccessful: false,\n            customFieldSets: null,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.placeholder(this.propertyGroup, 'name');\n        },\n\n        optionRepository() {\n            return this.repositoryFactory.create(this.propertyGroup.options.entity, this.propertyGroup.options.source);\n        },\n\n        propertyRepository() {\n            return this.repositoryFactory.create('property_group');\n        },\n\n        tooltipSave() {\n            if (!this.acl.can('property.editor')) {\n                return {\n                    message: this.$tc('sw-privileges.tooltip.warning'),\n                    disabled: this.acl.can('property.editor'),\n                    showOnDisabledElements: true,\n                };\n            }\n\n            const systemKey = this.$device.getSystemKey();\n\n            return {\n                message: `${systemKey} + S`,\n                appearance: 'light',\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        defaultCriteria() {\n            const criteria = new Criteria(this.page, this.limit);\n            criteria.addAssociation('options');\n            criteria.setTerm(this.term);\n\n            return criteria;\n        },\n\n        useNaturalSorting() {\n            return this.sortBy === 'property.name';\n        },\n\n        showCustomFields() {\n            return this.propertyGroup && this.customFieldSets && this.customFieldSets.length > 0;\n        },\n    },\n\n    watch: {\n        groupId() {\n            this.loadEntityData();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            Cicada.ExtensionAPI.publishData({\n                id: 'sw-property-group-detail__propertyGroup',\n                path: 'propertyGroup',\n                scope: this,\n            });\n            this.loadEntityData();\n            this.loadCustomFieldSets();\n        },\n\n        loadEntityData() {\n            this.isLoading = true;\n\n            this.propertyRepository\n                .get(this.groupId, Cicada.Context.api, this.defaultCriteria)\n                .then((currentGroup) => {\n                    this.propertyGroup = currentGroup;\n                    this.isLoading = false;\n                })\n                .catch(() => {\n                    this.isLoading = false;\n                });\n        },\n\n        loadCustomFieldSets() {\n            this.customFieldDataProviderService.getCustomFieldSets('property_group').then((sets) => {\n                this.customFieldSets = sets;\n            });\n        },\n\n        saveFinish() {\n            this.isSaveSuccessful = false;\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        abortOnLanguageChange() {\n            return this.propertyRepository.hasChanges(this.propertyGroup);\n        },\n\n        onChangeLanguage() {\n            this.loadEntityData();\n        },\n\n        onSave() {\n            this.isSaveSuccessful = false;\n            this.isLoading = true;\n\n            return this.propertyRepository\n                .save(this.propertyGroup)\n                .then(() => {\n                    this.loadEntityData();\n                    this.isLoading = false;\n                    this.isSaveSuccessful = true;\n                })\n                .catch((exception) => {\n                    this.createNotificationError({\n                        message: this.$tc('sw-property.detail.messageSaveError'),\n                    });\n                    this.isLoading = false;\n                    throw exception;\n                });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.property.index' });\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","criteria","currentGroup","sets","exception"],"mappings":"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"}
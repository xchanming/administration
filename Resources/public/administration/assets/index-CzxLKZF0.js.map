{"version":3,"file":"index-CzxLKZF0.js","sources":["../../../app/administration/src/app/component/form/sw-text-editor/sw-text-editor-toolbar/sw-text-editor-toolbar.html.twig","../../../app/administration/src/app/component/form/sw-text-editor/sw-text-editor-toolbar/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_text_editor_toolbar %}\n<!-- eslint-disable-next-line vuejs-accessibility/click-events-have-key-events -->\n<div\n    class=\"sw-text-editor-toolbar\"\n    :style=\"[position, arrowPosition]\"\n    :class=\"classes\"\n    role=\"menu\"\n    tabindex=\"0\"\n    @click=\"handleToolbarClick\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_buttons %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_buttons_left %}\n    <div\n        v-if=\"leftButtons.length > 0\"\n        class=\"sw-text-editor-buttons is--left\"\n    >\n        <sw-text-editor-toolbar-button\n            v-for=\"button in leftButtons\"\n            :key=\"button.type\"\n            :is-inline-edit=\"isInlineEdit\"\n            :button-config=\"setButtonValues(button)\"\n            :disabled=\"isDisabled(button)\"\n            @button-click=\"onButtonClick\"\n            @menu-toggle=\"onToggleMenu\"\n        />\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_buttons_middle %}\n    <div\n        v-if=\"middleButtons.length > 0\"\n        class=\"sw-text-editor-buttons is--middle\"\n    >\n        <sw-text-editor-toolbar-button\n            v-for=\"button in middleButtons\"\n            :key=\"button.type\"\n            :is-inline-edit=\"isInlineEdit\"\n            :button-config=\"setButtonValues(button)\"\n            :disabled=\"isDisabled(button)\"\n            @button-click=\"onButtonClick\"\n            @menu-toggle=\"onToggleMenu\"\n        />\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_buttons_right %}\n    <div\n        v-if=\"rightButtons.length > 0\"\n        class=\"sw-text-editor-buttons is--right\"\n    >\n        <sw-text-editor-toolbar-button\n            v-for=\"button in rightButtons\"\n            :key=\"button.type\"\n            :is-inline-edit=\"isInlineEdit\"\n            :button-config=\"setButtonValues(button)\"\n            :disabled=\"isDisabled(button)\"\n            @button-click=\"onButtonClick\"\n            @menu-toggle=\"onToggleMenu\"\n        />\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_slot %}\n    <slot name=\"itemsSlot\"></slot>\n    {% endblock %}\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-text-editor-toolbar.html.twig';\nimport './sw-text-editor-toolbar.scss';\n\nconst { Component, Utils } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n */\nComponent.register('sw-text-editor-toolbar', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: [\n        'created-el',\n        'destroyed-el',\n        'remove-link',\n        'text-style-change',\n        'table-edit',\n        'on-set-link',\n    ],\n\n    props: {\n        parentIsActive: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        isInlineEdit: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        selection: {\n            required: false,\n            default: null,\n        },\n\n        buttonConfig: {\n            type: Array,\n            required: true,\n        },\n\n        isCodeEdit: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        isTableEdit: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            position: {},\n            range: null,\n            arrowPosition: {\n                '--left': '49%',\n            },\n            activeTags: [],\n            currentColor: null,\n            currentLink: null,\n            leftButtons: [],\n            middleButtons: [],\n            rightButtons: [],\n            tableEdit: false,\n            scrollEventHandler: undefined,\n        };\n    },\n\n    computed: {\n        classes() {\n            return {\n                'is--boxedEdit': !this.isInlineEdit,\n            };\n        },\n    },\n\n    watch: {\n        isTableEdit: {\n            handler() {\n                this.tableEdit = this.isTableEdit;\n                this.$nextTick(() => {\n                    this.setActiveTags();\n                });\n            },\n        },\n\n        position: {\n            handler(newValue) {\n                if (newValue.top.replace('px', '') < 0) {\n                    this.closeExpandedMenu();\n                }\n            },\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    unmounted() {\n        this.destroyedComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.setButtonPositions();\n            this.setActiveTags();\n        },\n\n        mountedComponent() {\n            if (this.isInlineEdit) {\n                const body = document.querySelector('body');\n                body.appendChild(this.$el);\n\n                this.scrollEventHandler = Utils.throttle(() => {\n                    this.setToolbarPosition();\n                }, 16);\n\n                document.addEventListener('scroll', this.scrollEventHandler, true);\n\n                this.$device.onResize({\n                    listener: this.setToolbarPosition,\n                });\n            }\n\n            document.addEventListener('mouseup', this.onMouseUp);\n            this.setToolbarPosition();\n\n            this.$emit('created-el', this.$el);\n            this.$nextTick(() => {\n                this.isOverlayingLeft();\n            });\n        },\n\n        isOverlayingLeft() {\n            if (!this.isInlineEdit) {\n                return;\n            }\n\n            const el = this.$el;\n            const leftSidebar = document.querySelector('.sw-admin-menu');\n            if (!leftSidebar) {\n                return;\n            }\n\n            const leftSidebarWidth = leftSidebar.offsetLeft + leftSidebar.offsetWidth;\n            if (el.offsetLeft < leftSidebarWidth) {\n                this.position.left = `${leftSidebarWidth + 4}px`;\n                this.position.right = 'unset';\n                const arrowWidth = 8;\n                const selectionBoundary = this.range.getBoundingClientRect();\n\n                let left = selectionBoundary.right - selectionBoundary.width / 2;\n                left -= leftSidebarWidth + arrowWidth;\n                this.arrowPosition['--left'] = `${left}px`;\n                this.arrowPosition['--right'] = 'unset';\n            }\n        },\n\n        destroyedComponent() {\n            this.closeExpandedMenu();\n\n            document.removeEventListener('scroll', this.scrollEventListener, true);\n            document.removeEventListener('mouseup', this.onMouseUp);\n\n            if (this.$el?.parentElement?.contains(this.$el)) {\n                this.$el.parentElement.removeChild(this.$el);\n            }\n\n            this.$emit('destroyed-el');\n        },\n\n        onMouseUp(event) {\n            const path = [];\n            let source = event.target;\n\n            while (source) {\n                path.push(source);\n                source = source.parentNode;\n            }\n\n            if (path.some((element) => element.classList?.contains('sw-popover__wrapper'))) {\n                return;\n            }\n\n            if (!path.includes(this.$el)) {\n                if (!this.isInlineEdit && this.selection) {\n                    this.setActiveTags();\n                } else if (this.activeTags.length > 0) {\n                    this.activeTags = [];\n                }\n\n                this.closeExpandedMenu();\n                return;\n            }\n\n            if (path.indexOf(this.$el) > -1 || !this.parentIsActive) {\n                return;\n            }\n\n            this.setToolbarPosition();\n        },\n\n        setToolbarPosition() {\n            if (!this.selection) {\n                return;\n            }\n\n            if (!this.isInlineEdit) {\n                this.setSelectionRange();\n                return;\n            }\n\n            this.setSelectionRange();\n            const boundary = this.range?.getBoundingClientRect?.();\n\n            if (!boundary) {\n                return;\n            }\n\n            let offsetTop = window.pageYOffset;\n            const arrowHeight = 8;\n\n            offsetTop += boundary.top - (this.$el.clientHeight + arrowHeight);\n\n            const middleBoundary = boundary.left + boundary.width / 2 + 4;\n            const halfWidth = this.$el.clientWidth / 2;\n            const offsetLeft = middleBoundary - halfWidth;\n\n            this.position = {\n                left: `${offsetLeft}px`,\n                top: `${offsetTop}px`,\n            };\n        },\n\n        setSelectionRange() {\n            if (this.selection.anchorNode && this.selection.rangeCount > 0) {\n                this.range = this.selection.getRangeAt(0);\n            }\n        },\n\n        setButtonValues(button) {\n            if (this.isCodeEdit && button.type !== 'codeSwitch') {\n                return button;\n            }\n\n            if (button.children) {\n                if (typeof button.expanded === 'undefined') {\n                    if (this.isCompatEnabled('INSTANCE_SET')) {\n                        this.$set(button, 'expanded', false);\n                    } else {\n                        button.expanded = false;\n                    }\n                }\n\n                button.children.forEach((child) => {\n                    if (this.isCompatEnabled('INSTANCE_SET')) {\n                        this.$set(child, 'active', !!this.activeTags.includes(child.tag));\n                    } else {\n                        child.active = !!this.activeTags.includes(child.tag);\n                    }\n                });\n            }\n\n            if (button.type === 'foreColor' && this.currentColor) {\n                button.value = this.currentColor;\n                this.currentColor = null;\n            }\n\n            if (button.type === 'link') {\n                button.value = this.currentLink?.url ?? '';\n                button.newTab = this.currentLink?.newTab ?? false;\n                button.displayAsButton = this.currentLink?.displayAsButton ?? false;\n                button.buttonVariant = this.currentLink?.buttonVariant ?? 'primary';\n            }\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                this.$set(button, 'active', !!this.activeTags.includes(button.tag));\n            } else {\n                button.active = !!this.activeTags.includes(button.tag);\n            }\n\n            return button;\n        },\n\n        isDisabled(button) {\n            if (!this.isCodeEdit) {\n                return false;\n            }\n\n            return button.type !== 'codeSwitch';\n        },\n\n        handleToolbarClick(event) {\n            if (!event.target.classList.contains('sw-text-editor-toolbar')) {\n                return;\n            }\n\n            this.keepSelection();\n        },\n\n        onButtonClick(button, parent = null) {\n            if (button.type === 'link') {\n                this.handleTextStyleChangeLink(button);\n                return;\n            }\n\n            if (button.type === 'linkRemove') {\n                this.$emit('remove-link');\n            }\n\n            if (button.type === 'foreColor') {\n                this.keepSelection(true);\n            }\n\n            if (!button.children) {\n                this.closeExpandedMenu();\n            }\n\n            if (parent) {\n                parent.children.forEach((child) => {\n                    child.active = false;\n                });\n            }\n\n            this.keepSelection();\n\n            if (button.handler) {\n                button.handler(button, parent);\n                button.expanded = false;\n\n                return;\n            }\n\n            this.$emit('text-style-change', button.type, button.value);\n\n            if (this.isInlineEdit) {\n                this.setToolbarPosition();\n            }\n\n            this.$nextTick(() => {\n                this.setActiveTags();\n                button.active = !!this.activeTags.includes(button.tag);\n            });\n        },\n\n        closeExpandedMenu() {\n            this.buttonConfig.forEach((item) => {\n                if (item.expanded) {\n                    if (item.type !== 'codeSwitch') {\n                        item.expanded = false;\n                    }\n                }\n            });\n        },\n\n        setActiveTags() {\n            this.currentColor = null;\n            this.currentLink = null;\n\n            if (!this.selection || !this.selection.anchorNode) {\n                return;\n            }\n\n            let parentNode = this.selection.anchorNode.parentNode;\n            this.activeTags = [];\n\n            while (parentNode.tagName !== 'DIV') {\n                if (parentNode.tagName === 'FONT') {\n                    this.currentColor = parentNode.color;\n                }\n\n                if (parentNode.tagName === 'A') {\n                    const buttonType = parentNode.classList.contains('btn-secondary') ? 'secondary' : 'primary';\n                    const buttonSizeSuffix = parentNode.classList.contains('btn-sm') ? '-sm' : '';\n\n                    this.currentLink = {\n                        url: parentNode.getAttribute('href'),\n                        newTab: parentNode.target === '_blank',\n                        displayAsButton: parentNode.classList.contains('btn'),\n                        buttonVariant: `${buttonType}${buttonSizeSuffix}`,\n                    };\n                }\n\n                if (parentNode.tagName === 'TABLE') {\n                    if (!this.tableEdit) {\n                        this.tableEdit = true;\n                        this.$emit('table-edit', this.tableEdit);\n                    }\n                }\n\n                this.activeTags.push(parentNode.tagName.toLowerCase());\n\n                parentNode = parentNode.parentNode;\n            }\n\n            if (this.tableEdit && !this.activeTags.includes('table')) {\n                this.tableEdit = false;\n                this.$emit('table-edit', this.tableEdit);\n            }\n        },\n\n        setButtonPositions() {\n            this.buttonConfig.forEach((item) => {\n                if (!item.position || item.position === 'left') {\n                    this.leftButtons.push(item);\n                } else if (item.position === 'middle') {\n                    this.middleButtons.push(item);\n                } else if (item.position === 'right') {\n                    this.rightButtons.push(item);\n                }\n            });\n        },\n\n        handleTextStyleChangeLink(button) {\n            let target = '_self';\n            if (button.newTab) {\n                target = '_blank';\n            }\n\n            this.keepSelection(true);\n\n            if (button.value) {\n                if (!this.selection || this.selection.rangeCount < 1) {\n                    button.expanded = false;\n                    return;\n                }\n\n                this.$emit('on-set-link', button.value, target, button.displayAsButton, button.buttonVariant);\n                this.range = document.getSelection().getRangeAt(0);\n                this.range.setStart(this.range.startContainer, 0);\n                button.expanded = false;\n            }\n        },\n\n        keepSelection(keepRange) {\n            if (!this.selection) {\n                return;\n            }\n\n            if (!keepRange) {\n                this.setSelectionRange();\n            }\n\n            this.selection.removeAllRanges();\n            this.selection.addRange(this.range);\n        },\n\n        onToggleMenu(event, button) {\n            this.keepSelection();\n\n            this.buttonConfig.forEach((item) => {\n                if (item === button || item.type === 'codeSwitch') {\n                    return;\n                }\n                if (item.expanded) {\n                    item.expanded = false;\n                }\n            });\n\n            button.expanded = !button.expanded;\n        },\n    },\n});\n"],"names":["template","Component","Utils","newValue","el","leftSidebar","leftSidebarWidth","arrowWidth","selectionBoundary","left","_a","_b","event","path","source","element","boundary","offsetTop","middleBoundary","halfWidth","offsetLeft","button","_c","_d","child","parent","item","parentNode","buttonType","buttonSizeSuffix","target","keepRange"],"mappings":"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"}
{"version":3,"file":"index-C644YiOv.js","sources":["../../../app/administration/src/app/component/entity/sw-many-to-many-assignment-card/sw-many-to-many-assignment-card.html.twig","../../../app/administration/src/app/component/entity/sw-many-to-many-assignment-card/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_entity_many_to_many_assignment_card %}\n<sw-card\n    class=\"sw-many-to-many-assignment-card\"\n    position-identifier=\"sw-many-to-many-assignment\"\n    v-bind=\"$attrs\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_entity_many_to_many_assignment_card_content %}\n    <template #default>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_entity_many_to_many_assignment_card_head %}\n        <div class=\"sw-many-to-many-assignment-card__select-container\">\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_entity_many_to_many_assignment_card_pre_select %}\n            <slot name=\"prepend-select\"></slot>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_entity_many_to_many_assignment_card_select %}\n            <slot name=\"select\">\n                <sw-select-base\n                    ref=\"selectBase\"\n                    class=\"sw-entity-many-to-many-select\"\n                    :disabled=\"disabled || undefined\"\n                    :label=\"selectLabel\"\n                    :is-loading=\"isLoadingResults\"\n                    v-bind=\"$attrs\"\n                    @select-expanded=\"onSelectExpanded\"\n                    @select-collapsed=\"onSelectCollapsed\"\n                    v-on=\"listeners\"\n                >\n\n                    <template #sw-select-selection=\"{ identification, error, disabled, size, expand, collapse }\">\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_entity_many_to_many_assignment_card_search_field %}\n                        <input\n                            ref=\"searchInput\"\n                            tabindex=\"-1\"\n                            :placeholder=\"placeholder\"\n                            :value=\"searchTerm\"\n                            :disabled=\"disabled\"\n                            @input=\"onSearchTermChange\"\n                        >\n                        {% endblock %}\n                    </template>\n\n                    <template #results-list>\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_entity_many_to_many_assignment_card_results_list %}\n                        <sw-select-result-list\n                            ref=\"swSelectResultList\"\n                            :options=\"resultCollection\"\n                            :is-loading=\"isLoadingResults\"\n                            :empty-message=\"$tc('global.sw-entity-many-to-many-select.messageNoResults', 0, { term: searchTerm })\"\n                            :focus-el=\"$refs.searchInput\"\n                            @paginate=\"paginateResult\"\n                            @item-select=\"onItemSelect\"\n                        >\n\n                            <template #before-item-list>\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_entity_many_to_many_assignment_card_results_list_before %}\n                                <slot name=\"before-item-list\"></slot>\n                                {% endblock %}\n                            </template>\n\n                            <template #result-item=\"{ item, index }\">\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_entity_many_to_many_assignment_card_results_list_result %}\n                                <slot\n                                    name=\"result-item\"\n                                    v-bind=\"{ item, index, labelProperty, valueProperty: 'id', searchTerm, highlightSearchTerm, isSelected, onItemSelect, getKey }\"\n                                >\n\n                                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                    {% block sw_entity_many_to_many_assignment_card_results_list_list_item %}\n                                    <sw-select-result\n                                        :selected=\"isSelected(item)\"\n                                        v-bind=\"{ item, index }\"\n                                        @item-select=\"onItemSelect\"\n                                    >\n\n                                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                        {% block sw_entity_many_to_many_assignment_card_results_list_list_item_label %}\n                                        <slot\n                                            name=\"result-label-property\"\n                                            v-bind=\"{ item, index, labelProperty, valueProperty: 'id', searchTerm, highlightSearchTerm, getKey }\"\n                                        >\n\n                                            <sw-highlight-text\n                                                v-if=\"highlightSearchTerm\"\n                                                :text=\"getKey(item,labelProperty) || getKey(item, `translated.${labelProperty}`)\"\n                                                :search-term=\"searchTerm\"\n                                            />\n\n                                            <template v-else>\n                                                {{ getKey(item,labelProperty) || getKey(item, `translated.${labelProperty}`) }}\n                                            </template>\n                                        </slot>\n                                        {% endblock %}\n                                    </sw-select-result>\n                                    {% endblock %}\n                                </slot>\n                                {% endblock %}\n                            </template>\n\n                            <template #after-item-list>\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_entity_many_to_many_assignment_card_results_list_after %}\n                                <slot name=\"after-item-list\"></slot>\n                                {% endblock %}\n                            </template>\n\n                        </sw-select-result-list>\n                        {% endblock %}\n                    </template>\n                </sw-select-base>\n            </slot>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_entity_many_to_many_assignment_card_grid %}\n    <template #grid>\n        <slot name=\"data-grid\">\n            <sw-data-grid\n                class=\"sw-many-to-many-assignment-card__grid\"\n                :data-source=\"gridData\"\n                :is-loading=\"isLoadingGrid\"\n                :columns=\"columns\"\n                :v-bind=\"$attrs\"\n                :show-selection=\"false\"\n                :plain-appearance=\"true\"\n            >\n\n                <template\n                    v-for=\"column in columns\"\n                    #[`column-${column.property}`]=\"columnProps\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_entity_many_to_many_assignment_card_grid_column %}\n                    <slot\n                        :name=\"`column-${column.property}`\"\n                        v-bind=\"{ ...columnProps, searchTerm, highlightSearchTerm }\"\n                    ></slot>\n                    {% endblock %}\n                </template>\n\n                <template #actions=\"{ item }\">\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_entity_many_to_many_assignment_card_grid_column_actions %}\n                    <sw-context-menu-item\n                        variant=\"danger\"\n                        :disabled=\"disabled || undefined\"\n                        @click=\"removeFromGrid(item)\"\n                    >\n                        {{ $tc('global.entity-components.labelRemoveAssociation') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n                </template>\n\n                <template #pagination>\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_entity_many_to_many_assignment_card_grid_footer %}\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_entity_many_to_many_assignment_card_grid_footer_remote_mode %}\n                    <template v-if=\"!localMode\">\n                        <sw-pagination\n                            v-if=\"total > 0\"\n                            v-bind=\"{ limit, page, total }\"\n                            :auto-hide=\"false\"\n                            @page-change=\"paginateGrid\"\n                        />\n\n                        <div\n                            v-else-if=\"!!searchTerm\"\n                            class=\"sw-many-to-many-assignment-card__empty-state\"\n                        >\n                            <sw-icon\n                                name=\"regular-search\"\n                                size=\"20px\"\n                            />\n                            {{ $tc('global.sw-select-result-list.messageNoResults') }}\n                        </div>\n\n                        <div\n                            v-else\n                            class=\"sw-many-to-many-assignment-card__empty-state\"\n                        >\n                            <slot name=\"empty-state\"></slot>\n                        </div>\n                    </template>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_entity_many_to_many_assignment_card_grid_footer_local_mode %}\n                    <template v-else>\n                        <div\n                            v-if=\"total === 0\"\n                            class=\"sw-many-to-many-assignment-card__empty-state\"\n                        >\n                            <slot name=\"empty-state\"></slot>\n                        </div>\n                    </template>\n                    {% endblock %}\n                    {% endblock %}\n                </template>\n            </sw-data-grid>\n        </slot>\n    </template>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n","import template from './sw-many-to-many-assignment-card.html.twig';\nimport './sw-many-to-many-assignment-card.scss';\n\nconst { Component } = Cicada;\nconst { debounce, get } = Cicada.Utils;\nconst { Criteria, EntityCollection } = Cicada.Data;\n\n/**\n * @package admin\n *\n * @private\n * @status ready\n * @example-type code-only\n * @component-example\n * <sw-many-to-many-assignment-card\n *     title=\"your card title\"\n *     :entityCollection=\"entity.association\"\n *     :localMode=\"entity.isNew()\"\n *     :searchableFields=\"['entity.fieldName', 'entity.otherFieldName']\">\n * </sw-many-to-many-assignment-card>\n */\nComponent.register('sw-many-to-many-assignment-card', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inheritAttrs: false,\n\n    inject: [\n        'repositoryFactory',\n        'feature',\n    ],\n\n    emits: [\n        'update:entityCollection',\n        'paginate',\n    ],\n\n    props: {\n        columns: {\n            type: Array,\n            required: true,\n        },\n\n        entityCollection: {\n            type: Array,\n            required: true,\n        },\n\n        localMode: {\n            type: Boolean,\n            required: true,\n        },\n\n        resultLimit: {\n            type: Number,\n            required: false,\n            default: 25,\n        },\n\n        criteria: {\n            type: Object,\n            required: false,\n            default(props) {\n                return new Criteria(1, props.resultLimit);\n            },\n        },\n\n        highlightSearchTerm: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n\n        labelProperty: {\n            type: String,\n            required: false,\n            default: 'name',\n        },\n\n        selectLabel: {\n            type: String,\n            required: false,\n            default: '',\n        },\n\n        placeholder: {\n            type: String,\n            required: false,\n            default() {\n                return Cicada.Snippet.tc('global.entity-components.placeholderToManyAssociationCard');\n            },\n        },\n\n        searchableFields: {\n            type: Array,\n            required: false,\n            default() {\n                return [];\n            },\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            gridCriteria: null,\n            searchCriteria: null,\n            isLoadingResults: false,\n            isLoadingGrid: false,\n            selectedIds: [],\n            resultCollection: null,\n            gridData: [],\n            searchTerm: '',\n            totalAssigned: 0,\n            loadingGridState: false,\n        };\n    },\n\n    computed: {\n        context() {\n            return this.entityCollection.context;\n        },\n\n        languageId() {\n            return this.context.languageId;\n        },\n\n        assignmentRepository() {\n            return this.repositoryFactory.create(this.entityCollection.entity, this.entityCollection.source);\n        },\n\n        searchRepository() {\n            return this.repositoryFactory.create(this.entityCollection.entity);\n        },\n\n        page: {\n            get() {\n                return this.gridCriteria.page;\n            },\n            set(page) {\n                this.gridCriteria.page = page;\n            },\n        },\n\n        limit: {\n            get() {\n                return this.gridCriteria.limit;\n            },\n            set(limit) {\n                this.gridCriteria.page = limit;\n            },\n        },\n\n        total() {\n            return this.localMode ? this.entityCollection.length : this.gridData.total || 0;\n        },\n\n        focusEl() {\n            return this.$refs.searchInput;\n        },\n\n        originalFilters() {\n            return this.criteria.filters;\n        },\n\n        listeners() {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access\n            if (this.isCompatEnabled('INSTANCE_LISTENERS')) {\n                return this.$listeners;\n            }\n\n            return {};\n        },\n    },\n\n    watch: {\n        criteria: {\n            immediate: true,\n            handler() {\n                this.gridCriteria = Criteria.fromCriteria(this.criteria);\n                this.searchCriteria = Criteria.fromCriteria(this.criteria);\n\n                if (!this.localMode) {\n                    this.paginateGrid();\n                }\n            },\n        },\n\n        entityCollection() {\n            this.selectedIds = this.entityCollection.getIds();\n\n            if (!this.localMode) {\n                this.paginateGrid();\n                return;\n            }\n\n            this.gridData = this.entityCollection;\n        },\n\n        languageId() {\n            if (!this.localMode) {\n                this.paginateGrid();\n            }\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initData();\n        },\n\n        initData() {\n            this.page = 1;\n            if (!this.localMode) {\n                this.selectedIds = this.entityCollection.getIds();\n                return;\n            }\n            this.gridData = this.entityCollection;\n        },\n\n        onSearchTermChange(input) {\n            this.searchTerm = input.target.value || null;\n\n            this.debouncedSearch();\n        },\n\n        debouncedSearch: debounce(function debouncedSearch() {\n            this.resetSearchCriteria();\n            this.searchCriteria.term = this.searchTerm || null;\n\n            this.addContainsFilter(this.searchCriteria);\n\n            this.searchItems().then((searchResult) => {\n                this.resultCollection = searchResult;\n            });\n        }, 500),\n\n        onSelectExpanded() {\n            this.resetSearchCriteria();\n            this.focusEl.select();\n\n            this.searchItems().then((searchResult) => {\n                this.resultCollection = searchResult;\n            });\n        },\n\n        paginateResult() {\n            if (this.resultCollection.length >= this.resultCollection.total) {\n                return;\n            }\n\n            this.searchCriteria.page += 1;\n\n            this.searchItems().then((searchResult) => {\n                this.resultCollection.push(...searchResult);\n            });\n        },\n\n        searchItems() {\n            return this.searchRepository.search(this.searchCriteria, this.context).then((result) => {\n                if (!this.localMode) {\n                    const criteria = new Criteria(1, this.searchCriteria.limit);\n                    criteria.setIds(result.getIds());\n\n                    this.assignmentRepository.searchIds(criteria, this.context).then(({ data }) => {\n                        data.forEach((id) => {\n                            if (!this.isSelected({ id })) {\n                                this.selectedIds.push(id);\n                            }\n                        });\n                    });\n                }\n\n                return result;\n            });\n        },\n\n        onItemSelect(item) {\n            if (this.isSelected(item)) {\n                this.removeItem(item);\n                return;\n            }\n\n            if (this.localMode) {\n                const newCollection = EntityCollection.fromCollection(this.entityCollection);\n                newCollection.push(item);\n\n                this.selectedIds = newCollection.getIds();\n                this.gridData = newCollection;\n\n                this.$emit('update:entityCollection', newCollection);\n\n                return;\n            }\n\n            this.assignmentRepository.assign(item.id, this.context).then(() => {\n                this.selectedIds.push(item.id);\n            });\n        },\n\n        removeItem(item) {\n            if (this.localMode) {\n                const newCollection = this.entityCollection.filter((selected) => {\n                    return selected.id !== item.id;\n                });\n\n                this.selectedIds = newCollection.getIds();\n                this.gridData = newCollection;\n\n                this.$emit('update:entityCollection', newCollection);\n\n                return Promise.resolve();\n            }\n\n            return this.assignmentRepository.delete(item.id, this.context).then(() => {\n                this.selectedIds = this.selectedIds.filter((selectedId) => {\n                    return selectedId !== item.id;\n                });\n            });\n        },\n\n        isSelected(item) {\n            return this.selectedIds.some((selectedId) => {\n                return item.id === selectedId;\n            });\n        },\n\n        resetActiveItem() {\n            this.$refs.swSelectResultList.setActiveItemIndex(0);\n        },\n\n        onSelectCollapsed() {\n            this.resultCollection = null;\n            this.focusEl.blur();\n\n            if (!this.localMode) {\n                this.paginateGrid();\n            }\n        },\n\n        resetSearchCriteria() {\n            this.searchCriteria.page = 1;\n            this.searchCriteria.term = this.searchTerm || null;\n            this.searchCriteria.limit = this.resultLimit;\n\n            this.addContainsFilter(this.searchCriteria);\n        },\n\n        getKey(object, keyPath, defaultValue) {\n            return get(object, keyPath, defaultValue);\n        },\n\n        paginateGrid({ page, limit } = this.gridCriteria) {\n            this.gridCriteria.page = page;\n            this.gridCriteria.limit = limit;\n            this.setGridFilter();\n\n            this.isLoadingGrid = true;\n            this.assignmentRepository.search(this.gridCriteria, this.context).then((assignments) => {\n                this.gridData = assignments;\n                this.isLoadingGrid = false;\n                this.$emit('paginate', this.gridData);\n            });\n        },\n\n        setGridFilter() {\n            this.gridCriteria.term = this.searchTerm || null;\n            this.addContainsFilter(this.gridCriteria);\n        },\n\n        addContainsFilter(criteria) {\n            if (criteria.term === null) {\n                criteria.filters = [...this.originalFilters];\n                return;\n            }\n\n            if (this.searchableFields.length > 0) {\n                const containsFilter = this.searchableFields.map((field) => {\n                    return Criteria.contains(field, criteria.term);\n                });\n\n                criteria.filters = [\n                    ...this.criteria.filters,\n                    Criteria.multi('OR', containsFilter),\n                ];\n                criteria.term = null;\n            }\n        },\n\n        removeFromGrid(item) {\n            this.removeItem(item).then(() => {\n                if (!this.localMode) {\n                    this.paginateGrid();\n                }\n            });\n        },\n    },\n});\n"],"names":["template","Component","debounce","get","Criteria","EntityCollection","props","page","limit","input","searchResult","result","criteria","data","id","item","newCollection","selected","selectedId","object","keyPath","defaultValue","assignments","containsFilter","field"],"mappings":"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"}
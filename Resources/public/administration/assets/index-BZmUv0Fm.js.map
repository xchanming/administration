{"version":3,"file":"index-BZmUv0Fm.js","sources":["../../../app/administration/src/module/sw-settings-tax/component/sw-settings-tax-provider-sorting-modal/sw-settings-tax-provider-sorting-modal.html.twig","../../../app/administration/src/module/sw-settings-tax/component/sw-settings-tax-provider-sorting-modal/index.ts"],"sourcesContent":["<sw-modal\n    class=\"sw-settings-tax-provider-sorting-modal\"\n    :title=\"$tc('sw-settings-tax.list.taxProvider.sorting-modal.modalTitle')\"\n    @modal-close=\"closeModal\"\n>\n    <template #body>\n        <div class=\"sw-modal__body sw-settings-tax-provider-sorting-modal__subtitle\">\n            {{ $tc('sw-settings-tax.list.taxProvider.sorting-modal.subTitle') }}\n        </div>\n\n        <div class=\"sw-modal__body\">\n            <sw-sortable-list\n                class=\"sw-settings-tax-provider-sorting-modal__tax-provider-list\"\n                :items=\"sortedTaxProviders\"\n                @items-sorted=\"onSort\"\n            >\n                <template #item=\"{ item: taxProvider }\">\n                    <div\n                        class=\"sw-settings-tax-provider-sorting-modal__tax-provider-list-item\"\n                        :class=\"!taxProvider.active ? 'is--disabled' : ''\"\n                    >\n                        <sw-icon\n                            class=\"sw-settings-tax-provider-sorting-modal__tax-provider-list-item__action\"\n                            name=\"regular-grip-vertical\"\n                        />\n\n                        <div class=\"sw-settings-tax-provider-sorting-modal__tax-provider-list-item__name\">\n                            {{ taxProvider.translated.name }}\n                        </div>\n                    </div>\n                </template>\n            </sw-sortable-list>\n        </div>\n    </template>\n\n    <template #modal-footer>\n        <sw-button\n            class=\"sw-settings-tax-provider-sorting-modal__cancel-button\"\n            @click=\"closeModal\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n\n        <sw-button-process\n            class=\"sw-settings-tax-provider-sorting-modal__save-button\"\n            variant=\"primary\"\n            :is-loading=\"isSaving\"\n            :disabled=\"!acl.can('tax.editor')\"\n            :process-success=\"false\"\n            @click=\"applyChanges\"\n        >\n            {{ $tc('global.default.save') }}\n        </sw-button-process>\n    </template>\n</sw-modal>\n","import type { PropType } from 'vue';\nimport type { Entity } from '@cicada-ag/meteor-admin-sdk/es/_internals/data/Entity';\nimport type Repository from 'src/core/data/repository.data';\nimport type EntityCollection from '@cicada-ag/meteor-admin-sdk/es/_internals/data/EntityCollection';\nimport template from './sw-settings-tax-provider-sorting-modal.html.twig';\nimport './sw-settings-tax-provider-sorting-modal.scss';\n\nconst { Component, Mixin } = Cicada;\n\n/**\n * @package checkout\n *\n * @private\n */\nexport default Component.wrapComponentConfig({\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'acl',\n        'repositoryFactory',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        taxProviders: {\n            type: Array as unknown as PropType<EntityCollection<'tax_provider'>>,\n            required: true,\n        },\n    },\n\n    data(): {\n        isSaving: boolean;\n        originalTaxProviders: EntityCollection<'tax_provider'>;\n        sortedTaxProviders: EntityCollection<'tax_provider'>;\n    } {\n        return {\n            isSaving: false,\n            originalTaxProviders: this.taxProviders,\n            sortedTaxProviders: this.taxProviders,\n        };\n    },\n\n    computed: {\n        taxProviderRepository(): Repository<'tax_provider'> {\n            return this.repositoryFactory.create('tax_provider');\n        },\n    },\n\n    methods: {\n        closeModal(): void {\n            this.$emit('modal-close');\n        },\n\n        applyChanges(): void {\n            this.isSaving = true;\n\n            this.sortedTaxProviders.map((taxProvider: Entity<'tax_provider'>, index: number) => {\n                taxProvider.priority = this.sortedTaxProviders.length - index;\n                return taxProvider;\n            });\n\n            this.taxProviderRepository\n                .saveAll(this.sortedTaxProviders)\n                .then(() => {\n                    this.isSaving = false;\n                    this.$emit('modal-close');\n                    this.$emit('modal-save');\n\n                    this.createNotificationSuccess({\n                        message: this.$tc('sw-settings-tax.list.taxProvider.sorting-modal.saveSuccessful'),\n                    });\n                })\n                .catch(() => {\n                    this.createNotificationError({\n                        message: this.$tc('sw-settings-tax.list.taxProvider.sorting-modal.errorMessage'),\n                    });\n                });\n        },\n\n        onSort(sortedItems: EntityCollection<'tax_provider'>): void {\n            this.sortedTaxProviders = sortedItems;\n        },\n    },\n});\n"],"names":["template","Component","Mixin","index","taxProvider","sortedItems"],"mappings":"AAAA,MAAeA,EAAA,44CCOT,CAAE,UAAAC,EAAW,MAAAC,CAAU,EAAA,OAOdC,EAAAF,EAAU,oBAAoB,CACzC,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,MACA,mBACJ,EAEA,OAAQ,CACJE,EAAM,UAAU,cAAc,CAClC,EAEA,MAAO,CACH,aAAc,CACV,KAAM,MACN,SAAU,EACd,CACJ,EAEA,MAIE,CACS,MAAA,CACH,SAAU,GACV,qBAAsB,KAAK,aAC3B,mBAAoB,KAAK,YAAA,CAEjC,EAEA,SAAU,CACN,uBAAoD,CACzC,OAAA,KAAK,kBAAkB,OAAO,cAAc,CACvD,CACJ,EAEA,QAAS,CACL,YAAmB,CACf,KAAK,MAAM,aAAa,CAC5B,EAEA,cAAqB,CACjB,KAAK,SAAW,GAEhB,KAAK,mBAAmB,IAAI,CAACE,EAAqCD,KAClDC,EAAA,SAAW,KAAK,mBAAmB,OAASD,EACjDC,EACV,EAED,KAAK,sBACA,QAAQ,KAAK,kBAAkB,EAC/B,KAAK,IAAM,CACR,KAAK,SAAW,GAChB,KAAK,MAAM,aAAa,EACxB,KAAK,MAAM,YAAY,EAEvB,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,+DAA+D,CAAA,CACpF,CAAA,CACJ,EACA,MAAM,IAAM,CACT,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,6DAA6D,CAAA,CAClF,CAAA,CACJ,CACT,EAEA,OAAOC,EAAqD,CACxD,KAAK,mBAAqBA,CAC9B,CACJ,CACJ,CAAC"}
{"version":3,"file":"index-BjZ_fFlL.js","sources":["../../../app/administration/src/module/sw-cms/elements/cross-selling/component/sw-cms-el-cross-selling.html.twig","../../../app/administration/src/module/sw-cms/elements/cross-selling/component/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_element_cross_selling %}\n<div class=\"sw-cms-el-cross-selling\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_cross_selling_title %}\n    <h2 class=\"sw-cms-el-cross-selling__title\">\n        {{ placeholder(crossSelling, 'name', crossSelling.name) }}\n    </h2>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_cross_selling_content %}\n    <div class=\"sw-cms-el-cross-selling__content\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_cross_selling_arrow_left %}\n        <div class=\"sw-cms-el-cross-selling__navigation\">\n            <sw-icon\n                class=\"sw-cms-el-cross-selling__navigation-button\"\n                name=\"regular-chevron-left\"\n                size=\"24\"\n            />\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_cross_selling_product_holder %}\n        <div\n            ref=\"productHolder\"\n            class=\"sw-cms-el-cross-selling__product-holder\"\n            :style=\"sliderBoxMinWidth\"\n        >\n            <template v-if=\"!element.data.product || !element.data.product.crossSellings.length\">\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_cross_selling_demo_data %}\n                <sw-cms-el-product-box\n                    v-for=\"index in sliderBoxLimit\"\n                    :key=\"index\"\n                    :element=\"demoProductElement\"\n                />\n                {% endblock %}\n            </template>\n\n            <template v-else>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_cross_selling_products %}\n                <template\n                    v-for=\"(crossSelling, index) in crossSellingProducts\"\n                    :key=\"index\"\n                >\n                    <sw-cms-el-product-box\n                        v-if=\"index < sliderBoxLimit\"\n                        :element=\"getProductEl(crossSelling.product)\"\n                    />\n                </template>\n                {% endblock %}\n            </template>\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_cross_selling_arrow_right %}\n        <div class=\"sw-cms-el-cross-selling__navigation\">\n            <sw-icon\n                class=\"sw-cms-el-cross-selling__navigation-button\"\n                name=\"regular-chevron-right\"\n                size=\"24\"\n            />\n        </div>\n        {% endblock %}\n    </div>\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-cms-el-cross-selling.html.twig';\nimport './sw-cms-el-cross-selling.scss';\n\nconst { Mixin } = Cicada;\nconst { isEmpty } = Cicada.Utils.types;\n\n/**\n * @private\n * @package discovery\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n        Mixin.getByName('placeholder'),\n    ],\n\n    data() {\n        return {\n            sliderBoxLimit: 3,\n        };\n    },\n\n    computed: {\n        demoProductElement() {\n            return {\n                config: {\n                    boxLayout: {\n                        source: 'static',\n                        value: this.element.config.boxLayout.value,\n                    },\n                    displayMode: {\n                        source: 'static',\n                        value: this.element.config.displayMode.value,\n                    },\n                    elMinWidth: {\n                        source: 'static',\n                        value: this.element.config.elMinWidth.value,\n                    },\n                },\n            };\n        },\n\n        sliderBoxMinWidth() {\n            if (this.element.config.elMinWidth.value && this.element.config.elMinWidth.value.indexOf('px') > -1) {\n                return `repeat(auto-fit, minmax(${this.element.config.elMinWidth.value}, 1fr))`;\n            }\n\n            return null;\n        },\n\n        currentDeviceView() {\n            return this.cmsPageState.currentCmsDeviceView;\n        },\n\n        crossSelling() {\n            if (!this.element.data.product || !this.element.data.product.crossSellings.length) {\n                return {\n                    name: 'Cross selling title',\n                };\n            }\n\n            return this.element.data.product.crossSellings[0];\n        },\n\n        crossSellingProducts() {\n            return this.element.data.product.crossSellings.length\n                ? this.element.data.product.crossSellings[0].assignedProducts\n                : [];\n        },\n\n        currentDemoEntity() {\n            if (this.cmsPageState.currentMappingEntity === 'product') {\n                return this.cmsPageState.currentDemoEntity;\n            }\n\n            return null;\n        },\n    },\n\n    watch: {\n        'element.config.elMinWidth.value': {\n            handler() {\n                this.setSliderRowLimit();\n            },\n        },\n\n        currentDeviceView() {\n            setTimeout(() => {\n                this.setSliderRowLimit();\n            }, 400);\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('cross-selling');\n            this.initElementData('cross-selling');\n        },\n\n        mountedComponent() {\n            this.setSliderRowLimit();\n        },\n\n        setSliderRowLimit() {\n            if (isEmpty(this.element.config)) {\n                this.createdComponent();\n            }\n\n            if (\n                this.currentDeviceView === 'mobile' ||\n                (this.$refs.productHolder && this.$refs.productHolder.offsetWidth < 500)\n            ) {\n                this.sliderBoxLimit = 1;\n                return;\n            }\n\n            if (\n                !this.element.config.elMinWidth.value ||\n                this.element.config.elMinWidth.value === 'px' ||\n                this.element.config.elMinWidth.value.indexOf('px') === -1\n            ) {\n                this.sliderBoxLimit = 3;\n                return;\n            }\n\n            if (parseInt(this.element.config.elMinWidth.value.replace('px', ''), 10) <= 0) {\n                return;\n            }\n\n            // Subtract to fake look in storefront which has more width\n            const fakeLookWidth = 100;\n            const boxWidth = this.$refs.productHolder.offsetWidth;\n            const elGap = 32;\n            let elWidth = parseInt(this.element.config.elMinWidth.value.replace('px', ''), 10);\n\n            if (elWidth >= 300) {\n                elWidth -= fakeLookWidth;\n            }\n\n            this.sliderBoxLimit = Math.floor(boxWidth / (elWidth + elGap));\n        },\n\n        getProductEl(product) {\n            return {\n                config: {\n                    boxLayout: {\n                        source: 'static',\n                        value: this.element.config.boxLayout.value,\n                    },\n                    displayMode: {\n                        source: 'static',\n                        value: this.element.config.displayMode.value,\n                    },\n                },\n                data: {\n                    product,\n                },\n            };\n        },\n    },\n};\n"],"names":["template","Mixin","isEmpty","index","fakeLookWidth","boxWidth","elGap","elWidth","product"],"mappings":"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"}
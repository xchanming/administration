{"version":3,"file":"index-DJCqpQIN.js","sources":["../../../app/administration/src/module/sw-custom-entity/component/sw-generic-social-media-card/sw-generic-social-media-card.html.twig","../../../app/administration/src/module/sw-custom-entity/component/sw-generic-social-media-card/index.ts"],"sourcesContent":["<sw-card\n    class=\"sw-generic-social-media-card\"\n    position-identifier=\"sw-generic-social-media-card\"\n    :title=\"$tc('sw-landing-page.base.seo.titleSocialMedia')\"\n>\n    <sw-text-field\n        class=\"sw-generic-social-media-card__og-title-input\"\n        maxlength=\"255\"\n        :value=\"ogTitle\"\n        :label=\"$tc('sw-landing-page.base.seo.labelSocialMediaTitle')\"\n        :help-text=\"$tc('sw-landing-page.base.seo.helpTextMetaTitle')\"\n        :placeholder=\"$tc('sw-landing-page.base.seo.placeholderSocialMediaTitle')\"\n        @update:value=\"emitOgTitle\"\n    />\n\n    <sw-textarea-field\n        class=\"sw-generic-social-media-card__og-description-input\"\n        :value=\"ogDescription\"\n        maxlength=\"255\"\n        :label=\"$tc('sw-landing-page.base.seo.labelSocialMediaDescription')\"\n        :help-text=\"$tc('sw-landing-page.base.seo.helpTextMetaDescription')\"\n        :placeholder=\"$tc('sw-landing-page.base.seo.placeholderSocialMediaDescription')\"\n        @update:value=\"emitOgDescription\"\n    />\n\n    <sw-media-upload-v2\n        class=\"sw-generic-social-media-card__og-image-upload\"\n        variant=\"regular\"\n        :upload-tag=\"uploadTag\"\n        :source=\"ogImageEntity\"\n        :allow-multi-select=\"false\"\n        :caption=\"$tc('sw-cms.elements.general.config.caption.mediaUpload')\"\n        @media-upload-sidebar-open=\"onOpenMediaModal\"\n        @media-upload-remove-image=\"removeOgImage\"\n    />\n\n    <sw-upload-listener\n        class=\"sw-generic-social-media-card__og-image-upload-listener\"\n        :upload-tag=\"uploadTag\"\n        auto-upload\n        @media-upload-finish=\"onImageUpload\"\n    />\n\n    <div class=\"sw-generic-social-media-card__media-preview\">\n        <div class=\"sw-generic-social-media-card__media-preview-title\">\n            {{ $tc('sw-landing-page.base.seo.socialMediaPreview') }} &lt;= 600px\n        </div>\n\n        <div\n            class=\"sw-generic-social-media-card__media-preview-container media-preview--sm\"\n        >\n            <img\n                v-if=\"ogImageEntity?.url\"\n                class=\"sw-generic-social-media-card__media-preview-image\"\n                :src=\"ogImageEntity?.url\"\n                :alt=\"ogImageEntity?.alt\"\n            >\n            <div class=\"sw-generic-social-media-card__media-preview-content\">\n                <a\n                    class=\"sw-generic-social-media-card__media-preview-content-link\"\n                    href=\"#\"\n                >example.com</a>\n                <h3 class=\"sw-generic-social-media-card__media-preview-content-title\">\n                    {{ ogTitle }}\n                </h3>\n                <p class=\"sw-generic-social-media-card__media-preview-content-description\">\n                    {{ ogDescription }}\n                </p>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"sw-generic-social-media-card__media-preview\">\n        <div class=\"sw-generic-social-media-card__media-preview-title\">\n            {{ $tc('sw-landing-page.base.seo.socialMediaPreview') }} &gt; 600px\n        </div>\n\n        <div class=\"sw-generic-social-media-card__media-preview-container media-preview--lg\">\n            <img\n                v-if=\"ogImageEntity?.url\"\n                class=\"sw-generic-social-media-card__media-preview-image\"\n                :src=\"ogImageEntity?.url\"\n                :alt=\"ogImageEntity?.alt\"\n            >\n            <div class=\"sw-generic-social-media-card__media-preview-content\">\n                <a\n                    class=\"sw-generic-social-media-card__media-preview-content-link\"\n                    href=\"#\"\n                >\n                    example.com\n                </a>\n                <h3 class=\"sw-generic-social-media-card__media-preview-content-title\">\n                    {{ ogTitle }}\n                </h3>\n            </div>\n        </div>\n    </div>\n\n    <sw-media-modal-v2\n        v-if=\"mediaModalIsOpen\"\n        class=\"sw-generic-social-media-card__media-modal\"\n        variant=\"regular\"\n        :caption=\"$tc('sw-cms.elements.general.config.caption.mediaUpload')\"\n        :allow-multi-select=\"false\"\n        @media-modal-selection-change=\"onSelectionChanges\"\n        @modal-close=\"onCloseMediaModal\"\n    />\n</sw-card>\n","import './sw-generic-social-media-card.scss';\n\nimport type { Entity } from '@cicada-ag/meteor-admin-sdk/es/_internals/data/Entity';\nimport type { PropType } from 'vue';\n\nimport type Repository from 'src/core/data/repository.data';\nimport template from './sw-generic-social-media-card.html.twig';\n\nconst createId = Cicada.Utils.createId;\n\n/**\n * @private\n */\nexport default Cicada.Component.wrapComponentConfig({\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n    ],\n\n    props: {\n        ogTitle: {\n            type: String as PropType<string | null>,\n            required: false,\n            default: '',\n        },\n        ogDescription: {\n            type: String as PropType<string | null>,\n            required: false,\n            default: '',\n        },\n        ogImageId: {\n            type: String as PropType<string | null>,\n            required: false,\n            default: null,\n        },\n    },\n\n    data(): {\n        ogImageEntity: Entity<'media'> | null;\n        mediaModalIsOpen: boolean;\n    } {\n        return {\n            ogImageEntity: null as Entity<'media'> | null,\n            mediaModalIsOpen: false,\n        };\n    },\n\n    created(): void {\n        void this.onCreated();\n    },\n\n    watch: {\n        ogImageId: {\n            handler(): void {\n                void this.loadOgImage();\n            },\n        },\n    },\n\n    computed: {\n        mediaRepository(): Repository<'media'> {\n            return this.repositoryFactory.create('media');\n        },\n\n        uploadTag(): string {\n            return `sw-generic-social-media-card-${createId().substring(0, 8)}`;\n        },\n    },\n\n    methods: {\n        onCreated(): void {\n            void this.loadOgImage();\n        },\n\n        async loadOgImage(): Promise<void> {\n            if (!this.ogImageId) {\n                return;\n            }\n\n            // Entity is already loaded\n            if (this.ogImageId === this.ogImageEntity?.id) {\n                return;\n            }\n\n            this.ogImageEntity = await this.mediaRepository.get(this.ogImageId);\n        },\n\n        removeOgImage(): void {\n            this.ogImageEntity = null;\n            this.emitMediaId(null);\n        },\n\n        onOpenMediaModal(): void {\n            this.mediaModalIsOpen = true;\n        },\n\n        onCloseMediaModal(): void {\n            this.mediaModalIsOpen = false;\n        },\n\n        onImageUpload({ targetId }: { targetId: string }) {\n            this.emitMediaId(targetId);\n        },\n\n        onSelectionChanges(result: Entity<'media'>[]): void {\n            if (result.length !== 1) {\n                this.removeOgImage();\n                return;\n            }\n\n            const selection = result[0];\n            this.ogImageEntity = selection;\n            this.emitMediaId(selection.id);\n        },\n\n        emitMediaId(mediaId: string | null) {\n            this.$emit('update:og-image-id', mediaId);\n        },\n\n        emitOgTitle(ogTitle: string) {\n            this.$emit('update:og-title', ogTitle);\n        },\n\n        emitOgDescription(ogDescription: string) {\n            this.$emit('update:og-description', ogDescription);\n        },\n    },\n});\n"],"names":["template","createId","index","_a","targetId","result","selection","mediaId","ogTitle","ogDescription"],"mappings":"AAAA,MAAeA,EAAA,wlGCQTC,EAAW,OAAO,MAAM,SAK9BC,EAAe,OAAO,UAAU,oBAAoB,CAChD,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,mBACJ,EAEA,MAAO,CACH,QAAS,CACL,KAAM,OACN,SAAU,GACV,QAAS,EACb,EACA,cAAe,CACX,KAAM,OACN,SAAU,GACV,QAAS,EACb,EACA,UAAW,CACP,KAAM,OACN,SAAU,GACV,QAAS,IACb,CACJ,EAEA,MAGE,CACS,MAAA,CACH,cAAe,KACf,iBAAkB,EAAA,CAE1B,EAEA,SAAgB,CACP,KAAK,WACd,EAEA,MAAO,CACH,UAAW,CACP,SAAgB,CACP,KAAK,aACd,CACJ,CACJ,EAEA,SAAU,CACN,iBAAuC,CAC5B,OAAA,KAAK,kBAAkB,OAAO,OAAO,CAChD,EAEA,WAAoB,CAChB,MAAO,gCAAgCC,EAAS,EAAE,UAAU,EAAG,CAAC,CAAC,EACrE,CACJ,EAEA,QAAS,CACL,WAAkB,CACT,KAAK,aACd,EAEA,MAAM,aAA6B,CD7E3C,IAAAE,EC8EiB,KAAK,WAKN,KAAK,cAAcA,EAAA,KAAK,gBAAL,YAAAA,EAAoB,MAI3C,KAAK,cAAgB,MAAM,KAAK,gBAAgB,IAAI,KAAK,SAAS,EACtE,EAEA,eAAsB,CAClB,KAAK,cAAgB,KACrB,KAAK,YAAY,IAAI,CACzB,EAEA,kBAAyB,CACrB,KAAK,iBAAmB,EAC5B,EAEA,mBAA0B,CACtB,KAAK,iBAAmB,EAC5B,EAEA,cAAc,CAAE,SAAAC,GAAkC,CAC9C,KAAK,YAAYA,CAAQ,CAC7B,EAEA,mBAAmBC,EAAiC,CAC5C,GAAAA,EAAO,SAAW,EAAG,CACrB,KAAK,cAAc,EACnB,MACJ,CAEM,MAAAC,EAAYD,EAAO,CAAC,EAC1B,KAAK,cAAgBC,EAChB,KAAA,YAAYA,EAAU,EAAE,CACjC,EAEA,YAAYC,EAAwB,CAC3B,KAAA,MAAM,qBAAsBA,CAAO,CAC5C,EAEA,YAAYC,EAAiB,CACpB,KAAA,MAAM,kBAAmBA,CAAO,CACzC,EAEA,kBAAkBC,EAAuB,CAChC,KAAA,MAAM,wBAAyBA,CAAa,CACrD,CACJ,CACJ,CAAC"}
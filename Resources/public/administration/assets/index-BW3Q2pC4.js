const c=`{% block sw_text_editor_toolbar_button_link_menu %} <div class="sw-text-editor-toolbar-button__link-menu"> {% block sw_text_editor_toolbar_button_link_menu_content %} <div class="sw-text-editor-toolbar-button__link-menu-content"> {% block sw_text_editor_toolbar_button_link_menu_content_type %} <sw-select-field :value="linkCategory" :label="$tc('sw-text-editor-toolbar.link.labelType')" require @update:value="onSelectFieldChange" > {% block sw_text_editor_toolbar_button_link_menu_content_type_options %} <option value="link"> {{ $tc('sw-text-editor-toolbar.link.labelUrl') }} </option> <option value="detail"> {{ $tc('sw-text-editor-toolbar.link.labelProduct') }} </option> <option value="navigation"> {{ $tc('sw-text-editor-toolbar.link.labelCategory') }} </option> <option value="media"> {{ $tc('sw-text-editor-toolbar.link.labelMedia') }} </option> <option value="email"> {{ $tc('sw-text-editor-toolbar.link.labelEmail') }} </option> <option value="phone"> {{ $tc('sw-text-editor-toolbar.link.labelPhoneNumber') }} </option> {% endblock %} </sw-select-field> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_inputs %} {% block sw_text_editor_toolbar_button_link_menu_content_type_inputs_link %} <sw-text-field v-if="linkCategory === 'link'" v-model:value="linkTarget" :label="$tc('sw-text-editor-toolbar.link.linkTo')" :placeholder="$tc('sw-text-editor-toolbar.link.placeholder')" name="sw-field--linkTarget" /> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_inputs_phone %} <sw-text-field v-else-if="linkCategory === 'phone'" v-model:value="linkTarget" :label="$tc('sw-text-editor-toolbar.link.linkTo')" :placeholder="$tc('sw-text-editor-toolbar.link.placeholderPhoneNumber')" name="sw-field--linkTarget" /> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_inputs_email %} <sw-email-field v-else-if="linkCategory === 'email'" v-model:value="linkTarget" :label="$tc('sw-text-editor-toolbar.link.linkTo')" :placeholder="$tc('sw-text-editor-toolbar.link.placeholderEmail')" name="sw-field--linkTarget" /> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_inputs_detail %} <sw-entity-single-select v-else-if="linkCategory === 'detail'" v-model:value="linkTarget" class="sw-text-editor-link-menu__entity-single-select" entity="product" should-show-active-state :criteria="entityFilter" :label="$tc('sw-text-editor-toolbar.link.linkTo')" :placeholder="$tc('sw-text-editor-toolbar.link.placeholderProduct')" show-clearable-button display-variants /> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_inputs_category %} <sw-category-tree-field v-else-if="linkCategory === 'navigation'" :label="$tc('sw-text-editor-toolbar.link.linkTo')" :placeholder="$tc('sw-text-editor-toolbar.link.placeholderCategory')" :categories-collection="categoryCollection" single-select @selection-add="replaceCategorySelection" @selection-remove="removeCategorySelection" /> {% endblock %} {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_inputs_media %} <sw-media-field v-else-if="linkCategory === 'media'" v-model:value="linkTarget" :label="$tc('sw-text-editor-toolbar.link.linkTo')" :criteria="entityFilter" single-select /> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_opens_new_tab %} <sw-switch-field v-if="!['phone', 'email'].includes(linkCategory)" v-model:value="opensNewTab" class="sw-text-editor-toolbar-button__link-menu-switch sw-text-editor-toolbar-button__link-menu-new-tab" :label="$tc('sw-text-editor-toolbar.link.openInNewTab')" no-margin-top /> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_display_as_button %} <sw-switch-field v-model:value="displayAsButton" class="sw-text-editor-toolbar-button__link-menu-switch sw-text-editor-toolbar-button__link-menu-display-button" :label="$tc('sw-text-editor-toolbar.link.displayAsButton')" no-margin-top /> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_content_type_button_type %} <sw-select-field v-if="displayAsButton" v-model:value="buttonVariant" class="sw-text-editor-link-menu__button-variant" :label="$tc('sw-text-editor-toolbar.link.buttonVariant')" :options="buttonVariantList" require /> {% endblock %} </div> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_buttons %} <div class="sw-text-editor-toolbar-button__link-menu-buttons"> {% block sw_text_editor_toolbar_button_link_menu_button_remove %} <sw-button class="sw-text-editor-toolbar-button__link-menu-buttons-button-remove" variant="ghost-danger" size="small" :disabled="!linkTarget" @click="removeLink" > {{ $tc('global.default.remove') }} </sw-button> {% endblock %} {% block sw_text_editor_toolbar_button_link_menu_button_insert %} <sw-button class="sw-text-editor-toolbar-button__link-menu-buttons-button-insert" variant="primary" size="small" :disabled="!linkTarget" @click="setLink" > {{ $tc('global.default.add') }} </sw-button> {% endblock %} </div> {% endblock %} </div> {% endblock %}`,{Component:d}=Cicada,{Criteria:i,EntityCollection:b}=Cicada.Data;d.register("sw-text-editor-link-menu",{template:c,compatConfig:Cicada.compatConfig,inject:["repositoryFactory"],props:{buttonConfig:{type:Object,required:!0}},data(){return{linkTitle:"",linkTarget:"",isHTTPs:!1,opensNewTab:!1,displayAsButton:!1,buttonVariant:"primary",linkCategory:"link",categoryCollection:void 0,buttonVariantList:[{id:"primary",name:this.$tc("sw-text-editor-toolbar.link.buttonVariantPrimary")},{id:"secondary",name:this.$tc("sw-text-editor-toolbar.link.buttonVariantSecondary")},{id:"primary-sm",name:this.$tc("sw-text-editor-toolbar.link.buttonVariantPrimarySmall")},{id:"secondary-sm",name:this.$tc("sw-text-editor-toolbar.link.buttonVariantSecondarySmall")}]}},computed:{seoUrlReplacePrefix(){return"124c71d524604ccbad6042edce3ac799"},entityFilter(){const t=new i(1,25);return t.addAssociation("options.group"),t.addFilter(i.multi("OR",[i.equals("product.childCount",0),i.equals("product.childCount",null)])),t},categoryRepository(){return this.repositoryFactory.create("category")}},watch:{buttonConfig:{async handler(t){const{title:o,newTab:e,displayAsButton:l,buttonVariant:a,value:r,type:s}=t;this.linkTitle=o,this.opensNewTab=e,this.displayAsButton=l,this.buttonVariant=a;const n=await this.parseLink(r,s);this.linkCategory=n.type,this.linkTarget=n.target},immediate:!0}},created(){this.createdComponent()},mounted(){this.mountedComponent()},methods:{createdComponent(){this.categoryCollection=this.getEmptyCategoryCollection()},mountedComponent(){this.$emit("mounted")},getCategoryCollection(t){const o=new i(1,25).addFilter(i.equals("id",t));return this.categoryRepository.search(o)},getEmptyCategoryCollection(){return new b(this.categoryRepository.route,this.categoryRepository.entityName,Cicada.Context.api)},async parseLink(t,o){const e=t.slice(0,-1).split("/");return t.startsWith(this.seoUrlReplacePrefix)&&["navigation","detail","mediaId"].includes(e[1])?(e[1]==="navigation"?this.categoryCollection=await this.getCategoryCollection(e[2]):e[1]==="mediaId"&&(e[1]="media"),{type:e[1],target:e[2]}):t.startsWith("mailto:")?{type:"email",target:t.replace("mailto:","")}:t.startsWith("tel:")?{type:"phone",target:t.replace("tel:","")}:{type:o??"link",target:t}},replaceCategorySelection(t){this.linkTarget=t.id},removeCategorySelection(){this.linkTarget=""},prepareLink(){switch(this.linkCategory){case"detail":return`${this.seoUrlReplacePrefix}/detail/${this.linkTarget}#`;case"navigation":return`${this.seoUrlReplacePrefix}/navigation/${this.linkTarget}#`;case"media":return`${this.seoUrlReplacePrefix}/mediaId/${this.linkTarget}#`;case"email":return`mailto:${this.linkTarget}`;case"phone":return`tel:${this.linkTarget.replace(/\//,"")}`;default:return this.addProtocolToLink(this.linkTarget)}},addProtocolToLink(t){if(/(^(\w+):\/\/)|(mailto:)|(fax:)|(tel:)/.test(t))return t;const o=/^\/[^\/\s]/.test(t),e=t.substring(0,1)==="#",l=/^\/\/[^\/\s]/.test(t);return!o&&!e&&!l&&(t=`http://${t}`),t},setLink(){this.$emit("button-click",{type:"link",value:this.prepareLink(),displayAsButton:this.displayAsButton,buttonVariant:this.buttonVariant,newTab:this.opensNewTab})},removeLink(){this.$emit("button-click",{type:"linkRemove"})},onSelectFieldChange(t){this.linkCategory=t,this.linkTarget=""}}});
//# sourceMappingURL=index-BW3Q2pC4.js.map

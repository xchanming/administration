{"version":3,"file":"index-CmjnaHGa.js","sources":["../../../app/administration/src/module/sw-product/component/sw-product-variants/sw-product-variants-configurator/sw-product-restriction-selection/sw-product-restriction-selection.html.twig","../../../app/administration/src/module/sw-product/component/sw-product-variants/sw-product-variants-configurator/sw-product-restriction-selection/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_product_restriction_selection %}\n<div class=\"sw-product-restriction-selection\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_restriction_selection_container %}\n    <sw-container\n        columns=\"minmax(270px, 350px) 1fr\"\n        gap=\"0\"\n        class=\"sw-product-restriction-selection__container\"\n    >\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_restriction_selection_select_group_wrapper %}\n        <div class=\"sw-product-restriction-selection__select-group-wrapper\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_restriction_selection_select_group %}\n            <sw-select-field\n                v-model:value=\"selectedGroup\"\n                class=\"sw-product-restriction-selection__select-group\"\n            >\n                <option\n                    v-for=\"item in availableGroups\"\n                    :key=\"item.id\"\n                    :value=\"item.group.id\"\n                >\n                    {{ item.group.translated.name }}\n                </option>\n            </sw-select-field>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_restriction_selection_is_from %}\n            <div class=\"sw-product-restriction-selection__isFrom\">\n                <span>{{ $tc('sw-product.variations.configuratorModal.isOneFrom') }}</span>\n            </div>\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_restriction_selection_select_option_wrapper %}\n        <sw-container\n            columns=\"1fr minmax(40px, 40px)\"\n            gap=\"0\"\n            class=\"sw-product-restriction-selection__select-option-wrapper\"\n        >\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_restriction_selection_multi_select %}\n            <sw-multi-select\n                v-if=\"!optionLoading\"\n                v-model:value=\"selectedOptions\"\n                :options=\"options\"\n                value-property=\"optionId\"\n            >\n\n                <template\n                    #selection-label-property=\"{ item }\"\n                >\n                    {{ item.option.translated.name }}\n                </template>\n                <template\n                    #result-label-property=\"{ item }\"\n                >\n                    {{ item.option.translated.name }}\n                </template>\n            </sw-multi-select>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_restriction_selection_context_button %}\n            <sw-context-button>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_restriction_selection_context_button_items %}\n                <sw-context-menu-item\n                    variant=\"danger\"\n                    @click=\"deleteRestriction\"\n                >\n                    {{ $tc('sw-product.variations.configuratorModal.deleteCombination') }}\n                </sw-context-menu-item>\n                {% endblock %}\n            </sw-context-button>\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n    </sw-container>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_restriction_selection_content_after %}\n    <slot name=\"contentAfter\"></slot>\n    {% endblock %}\n</div>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport template from './sw-product-restriction-selection.html.twig';\nimport './sw-product-restriction-selection.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: ['restriction-delete'],\n\n    props: {\n        groupsWithOptions: {\n            type: Array,\n            required: true,\n        },\n\n        restriction: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            optionLoading: true,\n            selectedGroup: '',\n            optionStore: {},\n            selectedOptionStore: {},\n            options: {},\n            selectedOptions: [],\n        };\n    },\n\n    computed: {\n        availableGroups() {\n            return this.groupsWithOptions;\n        },\n    },\n\n    watch: {\n        selectedGroup() {\n            this.optionLoading = true;\n\n            // get all options for the group\n            const optionsForGroup = this.groupsWithOptions.find((groupWithOption) => {\n                return groupWithOption.group.id === this.selectedGroup;\n            }).options;\n\n            // get all selected options for the group\n            const existedOptions = optionsForGroup.reduce((result, option) => {\n                const optionIndex = this.restriction.options.indexOf(option.optionId);\n\n                if (optionIndex >= 0) {\n                    result.push(this.restriction.options[optionIndex]);\n                }\n\n                return result;\n            }, []);\n\n            this.options = optionsForGroup;\n            this.selectedOptions = existedOptions;\n\n            // update the group id in the store\n            this.restriction.group = this.selectedGroup;\n\n            this.optionLoading = false;\n        },\n\n        selectedOptions() {\n            const selectedOptionArray = this.selectedOptions !== null ? this.selectedOptions : [];\n\n            this.restriction.options = selectedOptionArray;\n        },\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        mountedComponent() {\n            if (!this.groupsWithOptions && this.groupsWithOptions.length <= 0) {\n                return;\n            }\n\n            this.selectedGroup = this.restriction.group;\n        },\n\n        deleteRestriction() {\n            this.$emit('restriction-delete', this.restriction);\n        },\n    },\n};\n"],"names":["template","index","optionsForGroup","groupWithOption","existedOptions","result","option","optionIndex","selectedOptionArray"],"mappings":"AAAA,MAAeA,EAAA,+hECQAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,MAAO,CAAC,oBAAoB,EAE5B,MAAO,CACH,kBAAmB,CACf,KAAM,MACN,SAAU,EACb,EAED,YAAa,CACT,KAAM,OACN,SAAU,EACb,CACJ,EAED,MAAO,CACH,MAAO,CACH,cAAe,GACf,cAAe,GACf,YAAa,CAAE,EACf,oBAAqB,CAAE,EACvB,QAAS,CAAE,EACX,gBAAiB,CAAE,CAC/B,CACK,EAED,SAAU,CACN,iBAAkB,CACd,OAAO,KAAK,iBACf,CACJ,EAED,MAAO,CACH,eAAgB,CACZ,KAAK,cAAgB,GAGrB,MAAME,EAAkB,KAAK,kBAAkB,KAAMC,GAC1CA,EAAgB,MAAM,KAAO,KAAK,aAC5C,EAAE,QAGGC,EAAiBF,EAAgB,OAAO,CAACG,EAAQC,IAAW,CAC9D,MAAMC,EAAc,KAAK,YAAY,QAAQ,QAAQD,EAAO,QAAQ,EAEpE,OAAIC,GAAe,GACfF,EAAO,KAAK,KAAK,YAAY,QAAQE,CAAW,CAAC,EAG9CF,CACV,EAAE,CAAE,CAAA,EAEL,KAAK,QAAUH,EACf,KAAK,gBAAkBE,EAGvB,KAAK,YAAY,MAAQ,KAAK,cAE9B,KAAK,cAAgB,EACxB,EAED,iBAAkB,CACd,MAAMI,EAAsB,KAAK,kBAAoB,KAAO,KAAK,gBAAkB,GAEnF,KAAK,YAAY,QAAUA,CAC9B,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACX,CAAC,KAAK,mBAAqB,KAAK,kBAAkB,QAAU,IAIhE,KAAK,cAAgB,KAAK,YAAY,MACzC,EAED,mBAAoB,CAChB,KAAK,MAAM,qBAAsB,KAAK,WAAW,CACpD,CACJ,CACL"}
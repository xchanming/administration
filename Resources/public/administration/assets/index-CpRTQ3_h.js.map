{"version":3,"file":"index-CpRTQ3_h.js","sources":["../../../app/administration/src/app/component/form/sw-price-field/sw-price-field.html.twig","../../../app/administration/src/app/component/form/sw-price-field/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_price_field %}\n<div\n    class=\"sw-price-field\"\n    :class=\"{\n        'sw-price-field--label': label,\n        'sw-price-field--compact': compact,\n        'sw-price-field--disabled': isDisabled\n    }\"\n>\n\n    <div class=\"price-field-grid\">\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_price_field_gross %}\n        {# TODO: check selectors #}\n        <sw-number-field\n            v-model:value=\"priceForCurrency.gross\"\n            class=\"sw-price-field__gross\"\n            :allow-empty=\"allowEmpty\"\n            :placeholder=\"$tc('sw-product.priceForm.placeholderPriceGross')\"\n            :label=\"labelGross\"\n            :help-text=\"grossHelpText\"\n            :validation=\"validation\"\n            :size=\"compact ? 'small' : 'default'\"\n            :min=\"0\"\n            :digits=\"20\"\n            :error=\"grossError\"\n            :disabled=\"isDisabled\"\n            :name=\"grossFieldName\"\n            v-bind=\"attributesWithoutListeners\"\n            @update:value=\"onPriceGrossChange\"\n            @keyup=\"keymonitor\"\n            @input-change=\"onPriceGrossInputChange\"\n            @ends-with-decimal-separator=\"onEndsWithDecimalSeparator\"\n        >\n            <template\n                v-if=\"!disableSuffix\"\n                #suffix\n            >\n                {{ currency.symbol }}\n            </template>\n        </sw-number-field>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_price_field_lock_button %}\n        <button\n            class=\"sw-price-field__lock\"\n            :class=\"{\n                'is--locked': priceForCurrency.linked,\n                'is--disabled': isDisabled\n            }\"\n            :aria-label=\"$t('global.sw-price-field.toggleLinkedCurrency')\"\n            :aria-pressed=\"priceForCurrency.linked\"\n            @click=\"onLockSwitch\"\n        >\n            <sw-icon\n                v-if=\"priceForCurrency.linked\"\n                name=\"regular-lock\"\n                size=\"16\"\n            />\n            <sw-icon\n                v-else\n                name=\"regular-lock-open\"\n                size=\"16\"\n            />\n        </button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_price_field_net %}\n        <sw-number-field\n            v-model:value=\"priceForCurrency.net\"\n            class=\"sw-price-field__net\"\n            :allow-empty=\"allowEmpty\"\n            :placeholder=\"$tc('sw-product.priceForm.placeholderPriceNet')\"\n            :label=\"labelNet\"\n            :help-text=\"netHelpText\"\n            :validation=\"validation\"\n            :size=\"compact ? 'small' : 'default'\"\n            :min=\"0\"\n            :digits=\"20\"\n            :error=\"netError\"\n            :disabled=\"isInherited || disabled\"\n            :name=\"netFieldName\"\n            v-bind=\"attributesWithoutListeners\"\n            @update:value=\"onPriceNetChange\"\n            @keyup=\"keymonitor\"\n            @input-change=\"onPriceNetInputChange\"\n            @ends-with-decimal-separator=\"onEndsWithDecimalSeparator\"\n        >\n            <template\n                v-if=\"!disableSuffix\"\n                #suffix\n            >\n                {{ currency.symbol }}\n            </template>\n        </sw-number-field>\n        {% endblock %}\n    </div>\n\n    <sw-container\n        v-if=\"allowModal\"\n        justify=\"end\"\n        class=\"sw-price-form__links\"\n    >\n        <a\n            class=\"sw-card__quick-link\"\n            role=\"link\"\n            tabindex=\"0\"\n            @click.prevent=\"showModal = true\"\n            @keydown.enter.prevent=\"showModal = true\"\n        >\n            {{ $tc('sw-product.detailBase.linkMaintainCurrencyPrices') }}\n            <sw-icon\n                name=\"regular-long-arrow-right\"\n                small\n            />\n        </a>\n    </sw-container>\n\n    <sw-maintain-currencies-modal\n        v-if=\"showModal\"\n        :prices=\"value\"\n        :default-price=\"priceForCurrency\"\n        :tax-rate=\"taxRate\"\n        :disabled=\"false\"\n        :hide-list-prices=\"hideListPrices\"\n        @modal-close=\"onCloseModal\"\n    />\n\n</div>\n{% endblock %}\n","import template from './sw-price-field.html.twig';\nimport './sw-price-field.scss';\n\nconst { Component, Application } = Cicada;\nconst { debounce } = Cicada.Utils;\n\n/**\n * @package admin\n *\n * @private\n * @status ready\n * @example-type static\n * @component-example\n * <sw-price-field :taxRate=\"{ taxRate: 19 }\"\n *                 :value=\"[{ net: 10, gross: 11.90, currencyId: '...' }, ...]\"\n *                 :defaultPrice=\"{...}\"\n *                 :currency=\"{...}\">\n * </sw-price-field>\n */\nComponent.register('sw-price-field', {\n    template,\n    inheritAttrs: false,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['feature'],\n\n    emits: [\n        'change',\n        'price-lock-change',\n        'price-calculate',\n        'price-gross-change',\n        'price-net-change',\n        'calculating',\n    ],\n\n    props: {\n        value: {\n            type: Array,\n            required: true,\n        },\n\n        allowModal: {\n            type: Boolean,\n            default: false,\n        },\n\n        defaultPrice: {\n            type: Object,\n            required: false,\n            default() {\n                return {};\n            },\n        },\n\n        hideListPrices: {\n            type: Boolean,\n            default: false,\n        },\n\n        taxRate: {\n            type: Object,\n            required: false,\n            default() {\n                return {};\n            },\n        },\n\n        currency: {\n            type: Object,\n            required: true,\n            default() {\n                return {};\n            },\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        validation: {\n            required: false,\n            default: null,\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        label: {\n            required: false,\n            default: true,\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        compact: {\n            required: false,\n            default: false,\n        },\n\n        error: {\n            type: Object,\n            required: false,\n            default: null,\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        disabled: {\n            required: false,\n            default: false,\n        },\n\n        disableSuffix: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        grossLabel: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        netLabel: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        name: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        allowEmpty: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        inherited: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: undefined,\n        },\n\n        grossHelpText: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        netHelpText: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            showModal: false,\n        };\n    },\n\n    computed: {\n        calculatePriceApiService() {\n            return Application.getContainer('factory').apiService.getByName('calculate-price');\n        },\n\n        priceForCurrency: {\n            get() {\n                const priceForCurrency = Object.values(this.value).find((price) => {\n                    return price.currencyId === this.currency?.id;\n                });\n\n                // check if price exists\n                if (priceForCurrency) {\n                    return priceForCurrency;\n                }\n\n                // Calculate values if inherited\n                if (this.isInherited) {\n                    return {\n                        currencyId: this.currency.id,\n                        gross: Number.isNaN(this.defaultPrice.gross) ? null : this.convertPrice(this.defaultPrice.gross),\n                        linked: this.defaultPrice.linked,\n                        net: Number.isNaN(this.defaultPrice.net) ? null : this.convertPrice(this.defaultPrice.net),\n                    };\n                }\n\n                return {\n                    currencyId: this.currency.id,\n                    gross: null,\n                    linked: this.defaultPrice.linked,\n                    net: null,\n                };\n            },\n            set(newValue) {\n                this.priceForCurrency.gross = newValue.gross;\n                this.priceForCurrency.linked = newValue.linked;\n                this.priceForCurrency.net = newValue.net;\n            },\n        },\n\n        attributesWithoutListeners() {\n            if (this.isCompatEnabled('INSTANCE_LISTENERS')) {\n                return this.$attrs;\n            }\n\n            const attributes = {};\n\n            // Filter all listeners from the $attrs object\n            Object.keys(this.$attrs).forEach((key) => {\n                if (!key.startsWith('on')) {\n                    attributes[key] = this.$attrs[key];\n                }\n            });\n\n            return attributes;\n        },\n\n        isInherited() {\n            if (this.inherited !== undefined) {\n                return this.inherited;\n            }\n\n            const priceForCurrency = Object.values(this.value).find((price) => {\n                return price.currencyId === this.currency.id;\n            });\n\n            return !priceForCurrency;\n        },\n\n        isDisabled() {\n            return this.isInherited || this.disabled;\n        },\n\n        labelGross() {\n            const label = this.grossLabel ? this.grossLabel : this.$tc('global.sw-price-field.labelPriceGross');\n            return this.label ? label : '';\n        },\n\n        labelNet() {\n            const label = this.netLabel ? this.netLabel : this.$tc('global.sw-price-field.labelPriceNet');\n            return this.label ? label : '';\n        },\n\n        grossError() {\n            return this.error ? this.error.gross : null;\n        },\n\n        netError() {\n            return this.error ? this.error.net : null;\n        },\n\n        grossFieldName() {\n            return this.name ? `${this.name}-gross` : 'sw-price-field-gross';\n        },\n\n        netFieldName() {\n            return this.name ? `${this.name}-net` : 'sw-price-field-net';\n        },\n    },\n\n    watch: {\n        'priceForCurrency.linked': function priceLinkedWatcher(value) {\n            if (value === true && this.priceForCurrency.gross !== null) {\n                this.convertGrossToNet(this.priceForCurrency.gross);\n            }\n        },\n\n        'taxRate.id': function taxRateWatcher() {\n            if (this.priceForCurrency.linked === true && this.priceForCurrency.gross !== null) {\n                this.convertGrossToNet(this.priceForCurrency.gross);\n            }\n        },\n    },\n\n    methods: {\n        onLockSwitch() {\n            if (this.isDisabled) {\n                return;\n            }\n            this.priceForCurrency.linked = !this.priceForCurrency.linked;\n            this.$emit('price-lock-change', this.priceForCurrency.linked);\n\n            this.$emit('change', this.priceForCurrency);\n        },\n\n        onEndsWithDecimalSeparator(value) {\n            if (value) {\n                // cancel might not be a function if debounce is not active\n                if (this.onPriceGrossChangeDebounce.cancel) {\n                    this.onPriceGrossChangeDebounce.cancel();\n                }\n                if (this.onPriceNetChangeDebounce.cancel) {\n                    this.onPriceNetChangeDebounce.cancel();\n                }\n            }\n        },\n\n        onPriceGrossInputChange(value) {\n            if (this.priceForCurrency.linked) {\n                this.priceForCurrency.gross = value;\n                this.onPriceGrossChangeDebounce();\n            }\n        },\n\n        onPriceNetInputChange(value) {\n            if (this.priceForCurrency.linked) {\n                this.priceForCurrency.net = value;\n                this.onPriceNetChangeDebounce();\n            }\n        },\n\n        onPriceGrossChange(value) {\n            if (this.priceForCurrency.linked) {\n                this.$emit('price-calculate', true);\n                this.$emit('price-gross-change', value);\n                this.$emit('change', this.priceForCurrency);\n                this.convertGrossToNet(value);\n            }\n        },\n\n        onPriceNetChange(value) {\n            if (this.priceForCurrency.linked) {\n                this.$emit('price-calculate', true);\n                this.$emit('price-net-change', value);\n                this.$emit('change', this.priceForCurrency);\n                this.convertNetToGross(value);\n            }\n        },\n\n        convertNetToGross(value) {\n            if (Number.isNaN(value) || value === null) {\n                this.priceForCurrency.gross = this.allowEmpty ? null : 0;\n                return false;\n            }\n\n            if (!value) {\n                this.priceForCurrency.gross = 0;\n                return false;\n            }\n            this.$emit('price-calculate', true);\n\n            this.requestTaxValue(value, 'net').then((res) => {\n                const newValue = this.priceForCurrency.net + res;\n                this.priceForCurrency.gross = parseFloat(newValue.toPrecision(14));\n            });\n            return true;\n        },\n\n        convertGrossToNet(value) {\n            if (Number.isNaN(value) || value === null) {\n                this.priceForCurrency.net = this.allowEmpty ? null : 0;\n                this.$emit('calculating', false);\n                return false;\n            }\n\n            if (!value) {\n                this.priceForCurrency.net = 0;\n                this.$emit('calculating', false);\n                return false;\n            }\n            this.$emit('price-calculate', true);\n\n            this.requestTaxValue(value, 'gross').then((res) => {\n                const newValue = this.priceForCurrency.gross - res;\n                this.priceForCurrency.net = parseFloat(newValue.toPrecision(14));\n            });\n            return true;\n        },\n\n        requestTaxValue(value, outputType) {\n            this.$emit('price-calculate', true);\n            return new Promise((resolve) => {\n                if (!value || typeof value !== 'number' || !this.priceForCurrency[outputType] || !outputType) {\n                    return;\n                }\n\n                if (!this.taxRate.id) {\n                    resolve(0);\n                    this.$emit('price-calculate', false);\n                    return;\n                }\n\n                this.calculatePriceApiService\n                    .calculatePrice({\n                        taxId: this.taxRate.id,\n                        currencyId: this.currency.id,\n                        price: this.priceForCurrency[outputType],\n                        output: outputType,\n                    })\n                    .then(({ data }) => {\n                        let tax = 0;\n\n                        data.calculatedTaxes.forEach((item) => {\n                            tax += item.tax;\n                        });\n\n                        resolve(tax);\n                        this.$emit('price-calculate', false);\n                    });\n            });\n        },\n\n        convertPrice(value) {\n            return value * this.currency.factor;\n        },\n\n        keymonitor(event) {\n            if (event.key === ',') {\n                const value = event.target.value;\n                event.target.value = value.replace(/,/, '.');\n            }\n        },\n\n        onCloseModal() {\n            this.showModal = false;\n        },\n\n        onPriceGrossChangeDebounce: debounce(function onPriceGrossChange() {\n            this.onPriceGrossChange(this.priceForCurrency.gross);\n        }, 300),\n\n        onPriceNetChangeDebounce: debounce(function onPriceNetChange() {\n            this.onPriceNetChange(this.priceForCurrency.net);\n        }, 300),\n    },\n});\n"],"names":["template","Component","Application","debounce","priceForCurrency","price","_a","newValue","attributes","key","label","value","res","outputType","resolve","data","tax","item","event"],"mappings":"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"}
{"version":3,"file":"index-DvD6uQkG.js","sources":["../../../app/administration/src/module/sw-product/view/sw-product-detail-cross-selling/sw-product-detail-cross-selling.html.twig","../../../app/administration/src/module/sw-product/view/sw-product-detail-cross-selling/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_product_detail_cross_selling %}\n<div v-if=\"isLoading\">\n    <sw-skeleton />\n    <sw-skeleton />\n</div>\n\n<div\n    v-else\n    class=\"sw-product-detail-cross-selling\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_cross_selling_items_wrapper %}\n    <template v-if=\"showCrossSellingCard\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_cross_selling_restore_inheritance %}\n        <sw-button\n            v-if=\"isChild\"\n            class=\"sw-product-detail-cross-selling__restore-inheritance-btn\"\n            :disabled=\"!acl.can('product.editor')\"\n            @click=\"onShowRestoreInheritanceModal\"\n        >\n            <sw-icon\n                key=\"inherit-icon\"\n                name=\"regular-link-horizontal\"\n                size=\"16px\"\n            />\n            {{ $tc('sw-product.crossselling.buttonRestoreCrossSellingInheritance') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_cross_selling_items %}\n        <ul class=\"sw-product-detail-cross-selling__cross-selling-list\">\n            <sw-product-cross-selling-form\n                v-for=\"item in product.crossSellings\"\n                :key=\"item.id\"\n                :cross-selling=\"item\"\n                :allow-edit=\"acl.can('product.editor')\"\n            />\n        </ul>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_cross_selling_add %}\n        <sw-button\n            v-tooltip=\"{\n                message: onAddCrossSellingTooltipMessage,\n                disabled: acl.can('product.editor') && isSystemDefaultLanguage,\n                showOnDisabledElements: true\n            }\"\n            class=\"sw-product-detail-cross-selling__add-btn\"\n            variant=\"ghost\"\n            :disabled=\"!acl.can('product.editor') || !isSystemDefaultLanguage\"\n            @click=\"onAddCrossSelling\"\n        >\n            {{ $tc('sw-product.crossselling.buttonAddCrossSelling') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_cross_selling_empty_state_card %}\n    {# @deprecated tag:v6.7.0 - Block will be removed. Use `sw_product_detail_cross_selling_empty_state_card` instead. #}\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_empty_state %}\n    <sw-card\n        v-else\n        position-identifier=\"sw-product-detail-cross-selling-empty-state\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_cross_selling_empty_state %}\n        <sw-empty-state\n            :title=\"$tc('sw-product.crossselling.cardTitleCrossSelling')\"\n            :absolute=\"false\"\n            empty-module\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_cross_selling_empty_state_icon %}\n            <template #icon>\n                <img\n                    :src=\"assetFilter('/administration/static/img/empty-states/products-empty-state.svg')\"\n                    :alt=\"$tc('sw-product.crossselling.cardTitleCrossSelling')\"\n                >\n            </template>\n            {% endblock %}\n\n            <template #default>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_cross_selling_empty_state_content %}\n                <template v-if=\"isChild\">\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_cross_selling_empty_state_content_child %}\n                    <template v-if=\"isInherited\">\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_product_detail_cross_selling_empty_state_content_child_inherited %}\n                        <p>{{ $tc('sw-product.crossselling.inheritedEmptyStateDescription') }}</p>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_product_detail_cross_selling_empty_state_content_child_inherited_link %}\n                        <router-link\n                            v-if=\"isChild && isInherited\"\n                            :to=\"{ name: 'sw.product.detail.crossSelling', params: { id: product.parentId } }\"\n                            class=\"sw-product-detail-cross-selling__parent-cross-sellings-link\"\n                        >\n                            {{ $tc('sw-product.crossselling.linkCrossSellingsOfParent') }}\n                            <sw-icon\n                                name=\"regular-long-arrow-right\"\n                                small\n                            />\n                        </router-link>\n                        {% endblock %}\n                    </template>\n\n                    <template v-else>\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_product_detail_cross_selling_empty_state_content_child_not_inherited %}\n                        <p>{{ $tc('sw-product.crossselling.notInheritedEmptyStateDescription') }}</p>\n                        {% endblock %}\n                    </template>\n                    {% endblock %}\n                </template>\n\n                <template v-else>\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_cross_selling_empty_state_content_empty %}\n                    <p>{{ $tc('sw-product.crossselling.emptyStateDescription') }}</p>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_cross_selling_empty_state_inherit_switch %}\n                <template v-if=\"isChild\">\n                    <div\n                        class=\"sw-product-detail-cross-selling__inherit-toggle-wrapper\"\n                        :class=\"{ 'is--inherited': isInherited }\"\n                    >\n                        <sw-switch-field\n                            v-model:value=\"isInherited\"\n                            class=\"sw-product-detail-cross-selling__inherit-switch\"\n                            :disabled=\"!acl.can('product.editor')\"\n                        />\n                        <sw-inheritance-switch\n                            class=\"sw-product-detail-cross-selling__inheritance-icon\"\n                            :is-inherited=\"isInherited\"\n                            :disabled=\"!acl.can('product.editor')\"\n                            @inheritance-restore=\"restoreInheritance\"\n                            @inheritance-remove=\"removeInheritance\"\n                        />\n                        <!-- eslint-disable-next-line vuejs-accessibility/label-has-for -->\n                        <label class=\"sw-product-detail-cross-selling__inheritance-label\">\n                            {{ $tc('sw-product.crossselling.inheritSwitchLabel') }}\n                        </label>\n                    </div>\n                </template>\n                {% endblock %}\n            </template>\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_cross_selling_empty_state_actions %}\n            {# @deprecated tag:v6.7.0 - Block will be removed. Use `sw_product_detail_cross_selling_empty_state_actions` instead. #}\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_empty_state_cross_selling_add %}\n            <template #actions>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_cross_selling_empty_state_actions_add %}\n                <sw-button\n                    v-tooltip=\"{\n                        message: onAddCrossSellingTooltipMessage,\n                        disabled: acl.can('product.editor') && isSystemDefaultLanguage,\n                        showOnDisabledElements: true\n                    }\"\n                    variant=\"ghost\"\n                    :disabled=\"isInherited || !acl.can('product.editor') || !isSystemDefaultLanguage\"\n                    @click=\"onAddCrossSelling\"\n                >\n                    {{ $tc('sw-product.crossselling.buttonAddCrossSelling') }}\n                </sw-button>\n                {% endblock %}\n            </template>\n            {% endblock %}\n            {% endblock %}\n        </sw-empty-state>\n        {% endblock %}\n    </sw-card>\n    {% endblock %}\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_cross_selling_modal_restore_inheritance %}\n    <sw-modal\n        v-if=\"showRestoreInheritanceModal\"\n        variant=\"small\"\n        :title=\"$tc('sw-product.crossselling.restoreInheritanceConfirmTitle')\"\n        class=\"sw-product-detail-cross-selling__restore-inheritance-modal\"\n        @modal-close=\"onCloseRestoreInheritanceModal\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_cross_selling_modal_restore_inheritance_text %}\n        <p>\n            {{ $tc('sw-product.crossselling.restoreInheritanceConfirmText') }}\n        </p>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_cross_selling_modal_restore_inheritance_footer %}\n        <template #modal-footer>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_cross_selling_modal_restore_inheritance_action_cancel %}\n            <sw-button\n                size=\"small\"\n                @click=\"onCloseRestoreInheritanceModal\"\n            >\n                {{ $tc('global.default.cancel') }}\n            </sw-button>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_cross_selling_modal_restore_inheritance_action_restore %}\n            <sw-button\n                class=\"sw-product-detail-cross-selling__restore-button\"\n                size=\"small\"\n                variant=\"danger\"\n                @click=\"onConfirmRestoreInheritance\"\n            >\n                {{ $tc('sw-product.crossselling.restoreInheritanceButtonRestore') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </sw-modal>\n    {% endblock %}\n</div>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport template from './sw-product-detail-cross-selling.html.twig';\nimport './sw-product-detail-cross-selling.scss';\n\nconst { Criteria, EntityCollection } = Cicada.Data;\nconst { mapState, mapGetters } = Cicada.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n    ],\n\n    props: {\n        allowEdit: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            crossSelling: null,\n            isInherited: false,\n            showRestoreInheritanceModal: false,\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'product',\n        ]),\n\n        ...mapGetters('swProductDetail', [\n            'isLoading',\n            'isChild',\n        ]),\n\n        ...mapGetters('context', [\n            'isSystemDefaultLanguage',\n        ]),\n\n        showCrossSellingCard() {\n            return !this.isLoading && this.product.crossSellings && this.product.crossSellings.length > 0;\n        },\n\n        onAddCrossSellingTooltipMessage() {\n            if (this.isSystemDefaultLanguage) {\n                return this.$tc('sw-privileges.tooltip.warning');\n            }\n\n            return this.$tc('sw-product.crossselling.buttonAddCrossSellingLanguageWarning');\n        },\n\n        assetFilter() {\n            return Cicada.Filter.getByName('asset');\n        },\n\n        crossSellingRepository() {\n            return this.repositoryFactory.create(this.product.crossSellings.entity, this.product.crossSellings.source);\n        },\n    },\n\n    watch: {\n        product(product) {\n            product.crossSellings.forEach((item) => {\n                if (item.assignedProducts.length > 0) {\n                    return;\n                }\n\n                this.loadAssignedProducts(item);\n            });\n        },\n\n        'product.crossSellings': {\n            handler(value) {\n                if (!value) {\n                    return;\n                }\n\n                this.isInherited = this.isChild && !this.product.crossSellings.total;\n            },\n            immediate: true,\n        },\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        mountedComponent() {\n            this.isInherited = this.isChild && !this.product.crossSellings.total;\n        },\n\n        loadAssignedProducts(crossSelling) {\n            const repository = this.repositoryFactory.create(\n                crossSelling.assignedProducts.entity,\n                crossSelling.assignedProducts.source,\n            );\n\n            const criteria = new Criteria(1, 25);\n            criteria\n                .addFilter(Criteria.equals('crossSellingId', crossSelling.id))\n                .addSorting(Criteria.sort('position', 'ASC'))\n                .addAssociation('product');\n\n            repository\n                .search(criteria, {\n                    ...Cicada.Context.api,\n                    inheritance: true,\n                })\n                .then((assignedProducts) => {\n                    crossSelling.assignedProducts = assignedProducts;\n                });\n\n            return crossSelling;\n        },\n\n        onAddCrossSelling() {\n            this.crossSelling = this.crossSellingRepository.create();\n            this.crossSelling.productId = this.product.id;\n            this.crossSelling.position = this.product.crossSellings.length + 1;\n            this.crossSelling.type = 'productStream';\n            this.crossSelling.sortBy = 'name';\n            this.crossSelling.sortDirection = 'ASC';\n            this.crossSelling.limit = 24;\n\n            this.product.crossSellings.push(this.crossSelling);\n        },\n\n        restoreInheritance() {\n            this.isInherited = true;\n        },\n\n        removeInheritance() {\n            this.isInherited = false;\n        },\n\n        onShowRestoreInheritanceModal() {\n            this.showRestoreInheritanceModal = true;\n        },\n\n        onCloseRestoreInheritanceModal() {\n            this.showRestoreInheritanceModal = false;\n        },\n\n        onConfirmRestoreInheritance() {\n            this.onCloseRestoreInheritanceModal();\n\n            this.$nextTick(() => {\n                this.product.crossSellings = new EntityCollection(\n                    this.crossSellingRepository.route,\n                    this.product.crossSellings.entity,\n                    Cicada.Context.api,\n                );\n\n                this.restoreInheritance();\n            });\n        },\n    },\n};\n"],"names":["template","Criteria","EntityCollection","mapState","mapGetters","index","product","item","value","crossSelling","repository","criteria","assignedProducts"],"mappings":"AAAA,MAAeA,EAAA,0jMCOT,CAAE,SAAAC,EAAU,iBAAAC,GAAqB,OAAO,KACxC,CAAE,SAAAC,EAAU,WAAAC,CAAY,EAAG,OAAO,UAAU,mBAAkB,EAGrDC,EAAA,CACX,SAAAL,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,KACH,EAED,MAAO,CACH,UAAW,CACP,KAAM,QACN,SAAU,GAEV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,aAAc,KACd,YAAa,GACb,4BAA6B,EACzC,CACK,EAED,SAAU,CACN,GAAGG,EAAS,kBAAmB,CAC3B,SACZ,CAAS,EAED,GAAGC,EAAW,kBAAmB,CAC7B,YACA,SACZ,CAAS,EAED,GAAGA,EAAW,UAAW,CACrB,yBACZ,CAAS,EAED,sBAAuB,CACnB,MAAO,CAAC,KAAK,WAAa,KAAK,QAAQ,eAAiB,KAAK,QAAQ,cAAc,OAAS,CAC/F,EAED,iCAAkC,CAC9B,OAAI,KAAK,wBACE,KAAK,IAAI,+BAA+B,EAG5C,KAAK,IAAI,8DAA8D,CACjF,EAED,aAAc,CACV,OAAO,OAAO,OAAO,UAAU,OAAO,CACzC,EAED,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,KAAK,QAAQ,cAAc,OAAQ,KAAK,QAAQ,cAAc,MAAM,CAC5G,CACJ,EAED,MAAO,CACH,QAAQE,EAAS,CACbA,EAAQ,cAAc,QAASC,GAAS,CAChCA,EAAK,iBAAiB,OAAS,GAInC,KAAK,qBAAqBA,CAAI,CAC9C,CAAa,CACJ,EAED,wBAAyB,CACrB,QAAQC,EAAO,CACNA,IAIL,KAAK,YAAc,KAAK,SAAW,CAAC,KAAK,QAAQ,cAAc,MAClE,EACD,UAAW,EACd,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,YAAc,KAAK,SAAW,CAAC,KAAK,QAAQ,cAAc,KAClE,EAED,qBAAqBC,EAAc,CAC/B,MAAMC,EAAa,KAAK,kBAAkB,OACtCD,EAAa,iBAAiB,OAC9BA,EAAa,iBAAiB,MAC9C,EAEkBE,EAAW,IAAIV,EAAS,EAAG,EAAE,EACnC,OAAAU,EACK,UAAUV,EAAS,OAAO,iBAAkBQ,EAAa,EAAE,CAAC,EAC5D,WAAWR,EAAS,KAAK,WAAY,KAAK,CAAC,EAC3C,eAAe,SAAS,EAE7BS,EACK,OAAOC,EAAU,CACd,GAAG,OAAO,QAAQ,IAClB,YAAa,EACjC,CAAiB,EACA,KAAMC,GAAqB,CACxBH,EAAa,iBAAmBG,CACpD,CAAiB,EAEEH,CACV,EAED,mBAAoB,CAChB,KAAK,aAAe,KAAK,uBAAuB,OAAM,EACtD,KAAK,aAAa,UAAY,KAAK,QAAQ,GAC3C,KAAK,aAAa,SAAW,KAAK,QAAQ,cAAc,OAAS,EACjE,KAAK,aAAa,KAAO,gBACzB,KAAK,aAAa,OAAS,OAC3B,KAAK,aAAa,cAAgB,MAClC,KAAK,aAAa,MAAQ,GAE1B,KAAK,QAAQ,cAAc,KAAK,KAAK,YAAY,CACpD,EAED,oBAAqB,CACjB,KAAK,YAAc,EACtB,EAED,mBAAoB,CAChB,KAAK,YAAc,EACtB,EAED,+BAAgC,CAC5B,KAAK,4BAA8B,EACtC,EAED,gCAAiC,CAC7B,KAAK,4BAA8B,EACtC,EAED,6BAA8B,CAC1B,KAAK,+BAA8B,EAEnC,KAAK,UAAU,IAAM,CACjB,KAAK,QAAQ,cAAgB,IAAIP,EAC7B,KAAK,uBAAuB,MAC5B,KAAK,QAAQ,cAAc,OAC3B,OAAO,QAAQ,GACnC,EAEgB,KAAK,mBAAkB,CACvC,CAAa,CACJ,CACJ,CACL"}
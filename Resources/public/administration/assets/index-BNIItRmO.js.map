{"version":3,"file":"index-BNIItRmO.js","sources":["../../../app/administration/node_modules/lodash/unionBy.js","../../../app/administration/src/module/sw-import-export/component/profile-wizard/sw-import-export-new-profile-wizard-mapping-page/sw-import-export-new-profile-wizard-mapping-page.html.twig","../../../app/administration/src/module/sw-import-export/component/profile-wizard/sw-import-export-new-profile-wizard-mapping-page/index.js"],"sourcesContent":["var baseFlatten = require('./_baseFlatten'),\n    baseIteratee = require('./_baseIteratee'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    last = require('./last');\n\n/**\n * This method is like `_.union` except that it accepts `iteratee` which is\n * invoked for each element of each `arrays` to generate the criterion by\n * which uniqueness is computed. Result values are chosen from the first\n * array in which the value occurs. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nvar unionBy = baseRest(function(arrays) {\n  var iteratee = last(arrays);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2));\n});\n\nmodule.exports = unionBy;\n","<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_import_export_new_profile_wizard_mapping_page %}\n<div class=\"sw-import-export-new-profile-wizard-mapping-page\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_import_export_new_profile_wizard_mapping_page_text %}\n    <p class=\"sw-import-export-new-profile-wizard-mapping-page__text\">\n        <template v-if=\"automatedCount < 1\">\n            {{ $tc('sw-import-export.profile.mappingDescription') }}\n        </template>\n        <template v-else>\n            {{ $tc('sw-import-export.profile.mappingAutomatedDescription', 0, { automatedCount }) }}\n        </template>\n    </p>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_import_export_new_profile_wizard_mapping_page_mapping %}\n    <sw-import-export-edit-profile-modal-mapping\n        class=\"sw-import-export-new-profile-wizard-mapping-page__mapping\"\n        :profile=\"profile\"\n        :system-required-fields=\"systemRequiredFields\"\n        @update-mapping=\"updateMapping\"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n","/**\n * @package services-settings\n */\nimport unionBy from 'lodash/unionBy';\n\nimport template from './sw-import-export-new-profile-wizard-mapping-page.html.twig';\nimport './sw-import-export-new-profile-wizard-mapping-page.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n    ],\n\n    emits: ['next-allow'],\n\n    props: {\n        profile: {\n            type: Object,\n            required: true,\n        },\n        systemRequiredFields: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            automatedCount: 0,\n        };\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.automatedCount = this.countAutomatedValues();\n            this.mergeMappings();\n\n            this.$emit('next-allow');\n        },\n\n        mergeMappings() {\n            const requiredMappings = Object.entries(this.systemRequiredFields).map((mapping) => {\n                const [\n                    key,\n                    mappedKey,\n                ] = mapping;\n\n                return { key, mappedKey };\n            });\n\n            const unifiedMappings = unionBy(this.profile.mapping, requiredMappings, 'key');\n            unifiedMappings.sort((firstMappings, secondMappings) => {\n                return firstMappings.position - secondMappings.position;\n            });\n\n            this.profile.mapping = unifiedMappings.map((mapping, index) => {\n                if (!mapping.position) {\n                    mapping.position = index;\n                }\n\n                return mapping;\n            });\n        },\n\n        updateMapping(newMapping) {\n            this.profile.mapping = newMapping;\n        },\n\n        countAutomatedValues() {\n            return this.profile.mapping.reduce((count, mapping) => {\n                if (mapping.key !== undefined && mapping.key !== null && mapping.key !== '') {\n                    count += 1;\n                }\n\n                return count;\n            }, 0);\n        },\n    },\n};\n"],"names":["baseFlatten","require$$0","baseIteratee","require$$1","baseRest","require$$2","baseUniq","require$$3","isArrayLikeObject","require$$4","last","require$$5","unionBy","arrays","iteratee","unionBy_1","template","index","requiredMappings","mapping","key","mappedKey","unifiedMappings","firstMappings","secondMappings","newMapping","count"],"mappings":"uMAAA,IAAIA,EAAcC,EACdC,EAAeC,EACfC,EAAWC,EACXC,EAAWC,EACXC,EAAoBC,EACpBC,EAAOC,EAyBPC,EAAUR,EAAS,SAASS,EAAQ,CACtC,IAAIC,EAAWJ,EAAKG,CAAM,EAC1B,OAAIL,EAAkBM,CAAQ,IAC5BA,EAAW,QAENR,EAASN,EAAYa,EAAQ,EAAGL,EAAmB,EAAI,EAAGN,EAAaY,CAAW,CAAC,CAC5F,CAAC,EAEDC,EAAiBH,eCtCFI,EAAA,szBCSAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,mBACH,EAED,MAAO,CAAC,YAAY,EAEpB,MAAO,CACH,QAAS,CACL,KAAM,OACN,SAAU,EACb,EACD,qBAAsB,CAClB,KAAM,OACN,SAAU,EACb,CACJ,EAED,MAAO,CACH,MAAO,CACH,eAAgB,CAC5B,CACK,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,eAAiB,KAAK,uBAC3B,KAAK,cAAa,EAElB,KAAK,MAAM,YAAY,CAC1B,EAED,eAAgB,CACZ,MAAME,EAAmB,OAAO,QAAQ,KAAK,oBAAoB,EAAE,IAAKC,GAAY,CAChF,KAAM,CACFC,EACAC,CACH,EAAGF,EAEJ,MAAO,CAAE,IAAAC,EAAK,UAAAC,EAC9B,CAAa,EAEKC,EAAkBV,EAAQ,KAAK,QAAQ,QAASM,EAAkB,KAAK,EAC7EI,EAAgB,KAAK,CAACC,EAAeC,IAC1BD,EAAc,SAAWC,EAAe,QAClD,EAED,KAAK,QAAQ,QAAUF,EAAgB,IAAI,CAACH,EAASF,KAC5CE,EAAQ,WACTA,EAAQ,SAAWF,GAGhBE,EACV,CACJ,EAED,cAAcM,EAAY,CACtB,KAAK,QAAQ,QAAUA,CAC1B,EAED,sBAAuB,CACnB,OAAO,KAAK,QAAQ,QAAQ,OAAO,CAACC,EAAOP,KACnCA,EAAQ,MAAQ,QAAaA,EAAQ,MAAQ,MAAQA,EAAQ,MAAQ,KACrEO,GAAS,GAGNA,GACR,CAAC,CACP,CACJ,CACL","x_google_ignoreList":[0]}
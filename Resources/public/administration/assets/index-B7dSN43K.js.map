{"version":3,"file":"index-B7dSN43K.js","sources":["../../../app/administration/src/module/sw-order/component/sw-order-user-card/sw-order-user-card.html.twig","../../../app/administration/src/module/sw-order/component/sw-order-user-card/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_order_detail_base_order_overview %}\n<sw-card\n    class=\"sw-order-user-card\"\n    position-identifier=\"sw-order-user-card\"\n    :title=\"$tc('sw-order.detailBase.cardTitleDetails')\"\n    :is-loading=\"isLoading\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_order_detail_base_address_modal %}\n    <sw-order-address-modal\n        v-if=\"addressBeingEdited\"\n        :countries=\"countries\"\n        :address=\"addressBeingEdited\"\n        :order=\"currentOrder\"\n        :version-context=\"versionContext\"\n        @address-select=\"onAddressModalAddressSelected\"\n        @reset=\"onResetOrder\"\n        @save=\"onAddressModalSave\"\n        @error=\"$emit('error')\"\n    />\n    {% endblock %}\n\n    <template #grid>\n        <sw-container rows=\"auto auto\">\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_order_user_card_row_primary %}\n            <sw-card-section divider=\"bottom\">\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_order_user_card_metadata_container %}\n                <sw-container\n                    columns=\"80px 1fr max-content\"\n                    gap=\"0px 30px\"\n                    align=\"center\"\n                    class=\"sw-order-user-card__container\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_order_user_card_avatar %}\n                    <sw-avatar\n                        size=\"80px\"\n                        color=\"$route.meta.$module.color\"\n                        :name=\"currentOrder.orderCustomer.name\"\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_order_user_card_metadata %}\n                    <div class=\"sw-order-user-card__metadata\">\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_user_card_metadata_user_name %}\n                        <div\n                            v-if=\"currentOrder.orderCustomer\"\n                            class=\"sw-order-user-card__metadata-user-name\"\n                        >\n                            {{ fullName }}\n                        </div>\n                        {% endblock %}\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_user_card_metadata_tags %}\n\n                        <sw-entity-tag-select\n                            v-if=\"isEditing || hasTags\"\n                            class=\"sw-order-user-card__tag-select\"\n                            :placeholder=\"$tc('sw-order.detailBase.placeholderTagSelect')\"\n                            :size=\"!isEditing ? 'default' : 'medium'\"\n                            :disabled=\"!isEditing\"\n                            :entity-collection=\"currentOrder.tags\"\n                            @item-add=\"onAddTag\"\n                            @item-remove=\"onRemoveTag\"\n                        />\n                        {% endblock %}\n                    </div>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_order_detail_base_info_summary %}\n                    <div class=\"sw-order-user-card__info-summary\">\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block  sw_order_detail_base_info_summary_entries %}\n                        <div class=\"sw-order-user-card__metadata-price\">\n                            {{ currencyFilter(currentOrder.amountTotal, currentOrder.currency.isoCode) }}\n                        </div>\n\n                        <div class=\"sw-order-user-card__metadata-item\">\n                            {{ orderDate }}\n                        </div>\n                        {% endblock %}\n                    </div>\n                    {% endblock %}\n\n                </sw-container>\n                {% endblock %}\n\n                <slot name=\"additional-actions\">\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_order_user_card_slot_additional_actions %}{% endblock %}\n                </slot>\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_order_detail_base_order_overview_columns %}\n                <sw-container\n                    columns=\"repeat(auto-fit, minmax(250px, 1fr))\"\n                    gap=\"30px 30px\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_order_detail_base_order_overview_left_column %}\n                    <sw-description-list\n                        columns=\"1fr\"\n                        grid=\"1fr\"\n                        class=\"sw-order-user-card__summary-vertical\"\n                    >\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_order_overview_email %}\n                        <dt>{{ $tc('sw-order.detailBase.labelCustomerEmail') }}*</dt>\n                        <dd>\n                            <sw-order-inline-field\n                                v-model:value=\"currentOrder.orderCustomer.email\"\n                                :display-value=\"currentOrder.orderCustomer.email ? currentOrder.orderCustomer.email : $tc('sw-order.detailBase.labelNoEmail')\"\n                                required\n                                :editable=\"isEditing\"\n                                @update:value=\"$emit('order-change')\"\n                            />\n                        </dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_order_overview_billing_address %}\n                        <dt>\n                            {{ $tc('sw-order.detailBase.headlineBillingAddress') }}\n                            <sw-button\n                                v-if=\"isEditing\"\n                                class=\"sw-order-user-card__address-edit-button\"\n                                size=\"small\"\n                                @click=\"onEditBillingAddress\"\n                            >\n                                {{ $tc('sw-order.detailBase.buttonEditAddress') }}\n                            </sw-button>\n                        </dt>\n                        <dd\n                            role=\"button\"\n                            tabindex=\"0\"\n                            @click=\"onEditBillingAddress\"\n                            @keydown.enter=\"onEditBillingAddress\"\n                        >\n                            <sw-address\n                                :address=\"billingAddress\"\n                                :formatting-address=\"formattingAddress\"\n                            />\n                        </dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_order_overview_left_column_slot %}\n                        {% endblock %}\n\n                    </sw-description-list>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_order_detail_base_order_overview_right_column %}\n                    <sw-description-list\n                        columns=\"1fr\"\n                        grid=\"1fr\"\n                        class=\"sw-order-user-card__summary-vertical\"\n                    >\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_order_overview_phone_number %}\n                        <dt>\n                            {{ $tc('sw-order.detailBase.labelCustomerPhoneNumber') }}\n                            <sw-label\n                                v-if=\"hasDifferentBillingAndShippingAddress\"\n                                size=\"small\"\n                                appearance=\"pill\"\n                                class=\"sw-order-user-card__address-phone-label\"\n                            >\n                                {{ $tc('sw-order.detailBase.headlineBillingAddress') }}\n                            </sw-label>\n                        </dt>\n                        <dd>\n                            <sw-order-inline-field\n                                v-model:value=\"billingAddress.phoneNumber\"\n                                :display-value=\"billingAddress.phoneNumber? billingAddress.phoneNumber : $tc('sw-order.detailBase.labelNoPhoneNumber')\"\n                                :editable=\"isEditing\"\n                                class=\"sw-order-inline-field__truncateable\"\n                                @update:value=\"$emit('order-change')\"\n                            />\n                        </dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_order_overview_shipping_address %}\n                        <dt>\n                            {{ $tc('sw-order.detailBase.headlineDeliveryAddress') }}\n                            <sw-button\n                                v-show=\"hasDifferentBillingAndShippingAddress && isEditing\"\n                                class=\"sw-order-user-card__address-edit-button\"\n                                size=\"small\"\n                                @click=\"onEditDeliveryAddress\"\n                            >\n                                {{ $tc('sw-order.detailBase.buttonEditAddress') }}\n                            </sw-button>\n                        </dt>\n\n                        <dd v-if=\"!hasDifferentBillingAndShippingAddress && hasDeliveries\">\n                            <span>\n                                {{ $tc('sw-order.detailBase.labelSameDeliveryAndBillingAddress') }}\n                            </span>\n                            <sw-button\n                                v-show=\"!hasDifferentBillingAndShippingAddress && isEditing\"\n                                class=\"sw-order-user-card__address-add-button\"\n                                size=\"small\"\n                                block\n                                @click=\"onAddNewDeliveryAddress\"\n                            >\n                                {{ $tc('sw-order.detailBase.buttonAddDeliveryAddress') }}\n                            </sw-button>\n                        </dd>\n\n                        <dd\n                            v-else-if=\"hasDeliveries\"\n                            role=\"button\"\n                            tabindex=\"0\"\n                            @click=\"$emit('onEditDeliveryAddress',$event)\"\n                            @keydown.enter=\"$emit('onEditDeliveryAddress',$event)\"\n                        >\n                            <sw-address\n                                :address=\"delivery.shippingOrderAddress\"\n                                :formatting-address=\"formattingAddress\"\n                            />\n                        </dd>\n\n                        <dd v-else>\n                            {{ $tc('sw-order.detailBase.labelNoDeliveriesYet') }}\n                        </dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_order_overview_right_column_slot %}\n                        {% endblock %}\n\n                    </sw-description-list>\n                    {% endblock %}\n\n                </sw-container>\n                {% endblock %}\n\n            </sw-card-section>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_order_user_card_row_secondary %}\n            <sw-card-section\n                secondary\n                slim\n            >\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_order_detail_base_secondary_info_order_overview %}\n                <sw-container\n                    columns=\"repeat(auto-fit, minmax(250px, 1fr))\"\n                    gap=\"30px 30px\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_order_detail_base_secondary_info_order_overview_contents %}\n                    <sw-description-list\n                        columns=\"1fr\"\n                        grid=\"1fr\"\n                        class=\"sw-order-user-card__summary-vertical\"\n                    >\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_order_overview_left_column %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_sales_channel %}\n                        <dt>{{ $tc('sw-order.detailBase.labelSalesChannel') }}</dt>\n                        <dd class=\"sw-order-base__label-sales-channel\">\n                            {{ currentOrder.salesChannel.translated.name }}\n                        </dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_payment %}\n                        <template v-if=\"currentOrder.transactions.length > 0\">\n                            <dt>{{ $tc('sw-order.detailBase.labelPaymentMethod') }}</dt>\n                            <dd>\n                                {{ currentOrder.transactions.last().paymentMethod.translated.distinguishableName }}\n                            </dd>\n                        </template>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_delivery %}\n                        <dt>{{ $tc('sw-order.detailBase.labelShippingMethod') }}</dt>\n                        <dd>{{ hasDeliveries ? delivery.shippingMethod.translated.name :$tc('sw-order.detailBase.labelNoDeliveriesYet') }}</dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_affiliate %}\n                        <dt>{{ $tc('sw-order.detailBase.labelAffiliateCode') }}</dt>\n                        <dd>{{ currentOrder.affiliateCode || '-' }}</dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_order_overview_left_column_slot %}\n                        {% endblock %}\n\n                        {% endblock %}\n                    </sw-description-list>\n\n                    <sw-description-list\n                        columns=\"1fr\"\n                        grid=\"1fr\"\n                        class=\"sw-order-user-card__summary-vertical\"\n                    >\n                        {%  block sw_order_detail_base_secondary_info_order_overview_right_column %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_order_language %}\n                        <dt>{{ $tc('sw-order.detailBase.labelLanguage') }}</dt>\n                        <dd>{{ currentOrder.language.name }}</dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_last_change %}\n                        <dt>{{ $tc('sw-order.detailBase.labelLastChange') }}</dt>\n                        <dd>{{ lastChangedDate }}</dd>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_tracking_codes %}\n                        <template v-if=\"isEditing && delivery\">\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_order_detail_base_secondary_info_tracking_codes_input %}\n                            <dt>\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_order_detail_base_secondary_info_tracking_codes_input_label %}\n                                {{ $tc('sw-order.detailBase.labelTrackingCodes') }}\n                                {% endblock %}\n                            </dt>\n                            <dd>\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_order_detail_base_secondary_info_tracking_codes_input_content %}\n                                <sw-multi-tag-select\n                                    v-model:value=\"delivery.trackingCodes\"\n                                    class=\"sw-order-user-card__tracking-code-select\"\n                                    :placeholder=\"$tc('sw-order.detailBase.placeholderTrackingCodeSelect')\"\n                                    @update:value=\"emitChange\"\n                                >\n                                    <template #message-add-data>\n                                        <span>{{ $tc('sw-order.detailBase.addTrackingCode') }}</span>\n                                    </template>\n                                    <template #message-enter-valid-data>\n                                        <span>{{ $tc('sw-order.detailBase.enterValidTrackingCode') }}</span>\n                                    </template>\n                                </sw-multi-tag-select>\n                                {% endblock %}\n                            </dd>\n                            {% endblock %}\n                        </template>\n                        <template v-else-if=\"delivery\">\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_order_detail_base_secondary_info_tracking_codes_display %}\n                            <dt>\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_order_detail_base_secondary_info_tracking_codes_display_label %}\n                                {{ $tc('sw-order.detailBase.labelTrackingCodes') }}\n                                {% endblock %}\n                            </dt>\n                            <dd>\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_order_detail_base_secondary_info_tracking_codes_display_content %}\n                                <sw-button\n                                    v-for=\"trackingCode in delivery.trackingCodes\"\n                                    :key=\"trackingCode\"\n                                    class=\"sw-order-user-card__tracking-code-link\"\n                                    size=\"x-small\"\n                                    :link=\"renderTrackingUrl(trackingCode, delivery.shippingMethod)\"\n                                    :disabled=\"!renderTrackingUrl(trackingCode, delivery.shippingMethod)\"\n                                >{{ trackingCode }}</sw-button>\n                                {% endblock %}\n                            </dd>\n                            {% endblock %}\n                        </template>\n                        <template v-else>\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_order_detail_base_secondary_info_tracking_codes_empty %}\n                            <dt>\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_order_detail_base_secondary_info_tracking_codes_empty_label %}\n                                {{ $tc('sw-order.detailBase.labelTrackingCodes') }}\n                                {% endblock %}\n                            </dt>\n                            <dd>\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_order_detail_base_secondary_info_tracking_codes_empty_content %}\n                                <span>-</span>\n                                {% endblock %}\n                            </dd>\n                            {% endblock %}\n                        </template>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_campaign %}\n                        <template v-if=\"currentOrder.campaignCode\">\n                            <dt>{{ $tc('sw-order.detailBase.labelCampaignCode') }}</dt>\n                            <dd>{{ currentOrder.campaignCode || '-' }}</dd>\n                        </template>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_order_detail_base_secondary_info_order_overview_right_column_slot %}\n                        {% endblock %}\n\n                        {% endblock %}\n\n                    </sw-description-list>\n                    {% endblock %}\n\n                </sw-container>\n                {% endblock %}\n\n            </sw-card-section>\n            {% endblock %}\n\n        </sw-container>\n    </template>\n</sw-card>\n\n{% endblock %}\n","import template from './sw-order-user-card.html.twig';\nimport './sw-order-user-card.scss';\n\n/**\n * @package checkout\n */\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\nconst ApiService = Cicada.Classes.ApiService;\nconst format = Cicada.Utils.format;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'customSnippetApiService',\n        'orderService',\n        'repositoryFactory',\n        'feature',\n    ],\n\n    emits: [\n        'error',\n        'order-change',\n        'onEditDeliveryAddress',\n        'order-reset',\n    ],\n\n    mixins: [\n        Mixin.getByName('salutation'),\n    ],\n\n    props: {\n        currentOrder: {\n            type: Object,\n            required: true,\n        },\n        versionContext: {\n            type: Object,\n            required: true,\n        },\n        isLoading: {\n            type: Boolean,\n            required: true,\n        },\n        isEditing: {\n            type: Boolean,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            addressBeingEdited: null,\n            countries: null,\n            formattingAddress: '',\n        };\n    },\n\n    computed: {\n        countryRepository() {\n            return this.repositoryFactory.create('country');\n        },\n\n        orderAddressRepository() {\n            return this.repositoryFactory.create('order_address');\n        },\n\n        OrderTagRepository() {\n            return this.repositoryFactory.create(this.currentOrder.tags.entity, this.currentOrder.tags.source);\n        },\n\n        billingAddress() {\n            return this.currentOrder.addresses.find((address) => {\n                return address.id === this.currentOrder.billingAddressId;\n            });\n        },\n\n        delivery() {\n            return this.currentOrder.deliveries[0];\n        },\n\n        orderDate() {\n            if (this.currentOrder && !this.currentOrder.isLoading) {\n                return format.date(this.currentOrder.orderDateTime);\n            }\n            return '';\n        },\n\n        hasDeliveries() {\n            return this.currentOrder.deliveries.length > 0;\n        },\n\n        hasDeliveryTrackingCode() {\n            return this.hasDeliveries && this.delivery.trackingCodes.length;\n        },\n\n        hasDifferentBillingAndShippingAddress() {\n            return this.hasDeliveries && this.billingAddress.id !== this.delivery.shippingOrderAddressId;\n        },\n\n        lastChangedDate() {\n            if (this.currentOrder) {\n                if (this.currentOrder.updatedAt) {\n                    return format.date(this.currentOrder.updatedAt);\n                }\n\n                return format.date(this.currentOrder.orderDateTime);\n            }\n            return '';\n        },\n\n        hasTags() {\n            return this.currentOrder.tags.length !== 0;\n        },\n\n        fullName() {\n            const name = {\n                name: this.salutation(this.currentOrder.orderCustomer),\n                company: this.currentOrder.orderCustomer.company,\n            };\n\n            return Object.values(name)\n                .filter((item) => item !== null)\n                .join(' - ')\n                .trim();\n        },\n\n        currencyFilter() {\n            return Cicada.Filter.getByName('currency');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.reload();\n            this.renderFormattingAddress();\n        },\n\n        renderFormattingAddress() {\n            this.customSnippetApiService\n                .render(this.billingAddress, this.billingAddress.country?.addressFormat)\n                .then((res) => {\n                    this.formattingAddress = res.rendered;\n                });\n        },\n\n        reload() {\n            this.countryRepository.search(this.countryCriteria()).then((response) => {\n                this.countries = response;\n            });\n        },\n\n        countryCriteria() {\n            const criteria = new Criteria(1, 100);\n            criteria.addSorting(Criteria.sort('name', 'ASC'));\n\n            return criteria;\n        },\n\n        onEditBillingAddress() {\n            if (this.isEditing) {\n                this.addressBeingEdited = this.billingAddress;\n            }\n        },\n\n        onEditDeliveryAddress() {\n            if (this.isEditing) {\n                this.addressBeingEdited = this.delivery.shippingOrderAddress;\n            }\n        },\n\n        onAddressModalSave() {\n            this.addressBeingEdited = null;\n            this.$nextTick(() => {\n                this.emitChange();\n            });\n        },\n\n        onResetOrder() {\n            this.addressBeingEdited = null;\n            this.$nextTick(() => {\n                this.$emit('order-reset');\n            });\n        },\n\n        onAddressModalAddressSelected(address) {\n            const oldAddressId = this.addressBeingEdited.id;\n            this.addressBeingEdited = null;\n            this.$nextTick(() => {\n                return this.orderService\n                    .changeOrderAddress(\n                        oldAddressId,\n                        address.id,\n                        {},\n                        ApiService.getVersionHeader(this.currentOrder.versionId),\n                    )\n                    .then(() => {\n                        this.emitChange();\n                    })\n                    .catch((error) => {\n                        this.$emit('error', error);\n                    });\n            });\n        },\n\n        onAddNewDeliveryAddress() {\n            if (!this.isEditing) {\n                return;\n            }\n\n            this.orderAddressRepository\n                .clone(this.delivery.shippingOrderAddressId, {}, this.versionContext)\n                .then((response) => {\n                    this.delivery.shippingOrderAddressId = response.id;\n                    this.emitChange();\n                })\n                .catch((error) => {\n                    this.$emit('error', error);\n                });\n        },\n\n        emitChange() {\n            this.$emit('order-change');\n        },\n\n        onAddTag(item) {\n            this.OrderTagRepository.assign(item.id, Cicada.Context.api).then(() => {\n                this.emitChange();\n            });\n        },\n\n        onRemoveTag(item) {\n            this.OrderTagRepository.delete(item.id).then(() => {\n                this.emitChange();\n            });\n        },\n\n        renderTrackingUrl(trackingCode, shippingMethod) {\n            const urlTemplate = shippingMethod ? shippingMethod.trackingUrl : null;\n\n            return urlTemplate ? urlTemplate.replace('%s', encodeURIComponent(trackingCode)) : '';\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","ApiService","format","index","address","name","item","_a","res","response","criteria","oldAddressId","error","trackingCode","shippingMethod","urlTemplate"],"mappings":"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"}
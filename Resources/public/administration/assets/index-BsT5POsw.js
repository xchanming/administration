const l=`{% block sw_category_entry_point_modal %} <sw-modal class="sw-category-entry-point-modal" :title="$tc('sw-category.base.entry-point-modal.modalTitle')" @modal-close="closeModal" > {% block sw_category_entry_point_modal_sales_channel_selection %} <sw-single-select v-model:value="selectedSalesChannelId" class="sw-category-entry-point-modal__sales-channel-selection" :label="$tc('sw-category.base.entry-point-modal.salesChannelSelection')" :options="salesChannelOptions" show-clearable-button /> {% endblock %} {% block sw_category_entry_point_modal_selected_sales_channel %} <template v-if="selectedSalesChannel"> {% block sw_category_entry_point_modal_selected_sales_channel_show_in_main_navigation %} <sw-switch-field v-model:value="selectedSalesChannel.homeEnabled" class="sw-category-entry-point-modal__show-in-main-navigation" :label="$tc('sw-category.base.entry-point-modal.showInMainNavigation')" :disabled="!acl.can('category.editor') || undefined" /> {% endblock %} {% block sw_category_entry_point_modal_selected_sales_channel_name_in_main_navigation %} <sw-text-field v-model:value="selectedSalesChannel.homeName" class="sw-category-entry-point-modal__name-in-main-navigation" :label="$tc('sw-category.base.entry-point-modal.mainNavigationName')" :help-text="$tc('sw-category.base.entry-point-modal.mainNavigationNameHelpText')" :placeholder="selectedSalesChannel.translated.homeName || $tc('sw-category.base.entry-point-modal.mainNavigationNamePlaceholder')" :disabled="!selectedSalesChannel.homeEnabled || !acl.can('category.editor')" /> {% endblock %} {% block sw_category_entry_point_modal_selected_sales_channel_layout_headline %} <h3 class="sw-category-entry-point-modal__layout-headline"> {{ $tc('sw-category.base.entry-point-modal.layoutHeadline') }} </h3> {% endblock %} {% block sw_category_entry_point_modal_selected_sales_channel_layout_selection %} <div class="sw-category-entry-point-modal__base-layout"> {% block sw_category_entry_point_modal_layout_preview %} <div class="sw-category-entry-point-modal__preview" role="button" tabindex="0" @click="openLayoutModal" @keydown.enter="openLayoutModal" > <sw-cms-list-item class="sw-category-entry-point-modal__layout-item" :page="selectedSalesChannel.homeCmsPage" :disabled="!acl.can('category.editor') || undefined" active /> </div> {% endblock %} {% block sw_category_entry_point_modal_layout_modal %} <sw-cms-layout-modal v-if="showLayoutSelectionModal" :pre-selection="selectedSalesChannel.homeCmsPage" :cms-page-types="pageTypes" @modal-layout-select="onLayoutSelect" @modal-close="closeLayoutModal" /> {% endblock %} {% block sw_category_entry_point_modal_layout_desc %} <div class="sw-category-entry-point-modal__desc"> {% block sw_category_entry_point_modal_layout_desc_info %} <div class="sw-category-entry-point-modal__desc-info"> {% block sw_category_entry_point_modal_layout_desc_info_headline %} <div class="sw-category-entry-point-modal__desc-headline" :class="{ 'is--empty': !selectedSalesChannel.homeCmsPage }" > {{ selectedSalesChannel.homeCmsPage ? selectedSalesChannel.homeCmsPage.name : $tc('sw-category.base.cms.defaultTitle') }} </div> {% endblock %} {% block sw_category_entry_point_modal_layout_desc_info_subheadline %} <div class="sw-category-entry-point-modal__desc-subheadline" :class="{ 'is--empty': !selectedSalesChannel.homeCmsPage }" > {{ getCmsPageTypeName(selectedSalesChannel.homeCmsPage?.type) }} </div> {% endblock %} </div> {% endblock %} {% block sw_category_entry_point_modal_layout_desc_actions %} <div class="sw-category-entry-point-modal__desc-actions"> {% block sw_category_entry_point_modal_layout_desc_actions_layout %} <sw-button class="sw-category-detail-layout__change-layout-action" size="small" :disabled="!acl.can('category.editor')" @click="openLayoutModal" > {{ selectedSalesChannel.homeCmsPage ? $tc('sw-category.base.cms.changeLayout') : $tc('sw-category.base.cms.changeLayoutEmpty') }} </sw-button> {% endblock %} {% block sw_category_entry_point_modal_layout_desc_actions_designer %} <sw-button class="sw-category-detail-layout__open-in-pagebuilder" size="small" :disabled="!acl.can('category.editor')" @click="openInPagebuilder" > {{ selectedSalesChannel.homeCmsPage ? $tc('sw-category.base.cms.editInPagebuilder'): $tc('sw-category.base.cms.editInPagebuilderEmpty') }} </sw-button> {% endblock %} {% block sw_category_entry_point_modal_layout_desc_actions_remove %} <sw-button v-if="selectedSalesChannel.homeCmsPage" size="small" :disabled="!acl.can('category.editor')" class="sw-category-detail-layout__layout-reset" square @click="onLayoutReset" > <sw-icon name="regular-trash" small /> </sw-button> {% endblock %} </div> {% endblock %} </div> {% endblock %} </div> {% endblock %} {% block sw_category_entry_point_modal_selected_sales_channel_seo_settings_headline %} <h2 class="sw-category-entry-point-modal__seo-headline"> {{ $tc('sw-category.base.entry-point-modal.seoSettingsHeadline') }} </h2> {% endblock %} {% block sw_category_entry_point_modal_selected_sales_channel_seo_meta_title %} <sw-text-field v-model:value="selectedSalesChannel.homeMetaTitle" class="sw-category-entry-point-modal__meta-title" :label="$tc('sw-category.base.entry-point-modal.metaTitleLabel')" :placeholder="selectedSalesChannel.translated.homeMetaTitle || $tc('sw-category.base.entry-point-modal.metaTitlePlaceholder')" :disabled="!acl.can('category.editor') || undefined" /> {% endblock %} {% block sw_category_entry_point_modal_selected_sales_channel_seo_meta_description %} <sw-textarea-field v-model:value="selectedSalesChannel.homeMetaDescription" class="sw-category-entry-point-modal__meta-description" :label="$tc('sw-category.base.entry-point-modal.metaDescriptionLabel')" :placeholder="selectedSalesChannel.translated.homeMetaDescription || $tc('sw-category.base.entry-point-modal.metaDescriptionPlaceholder')" :disabled="!acl.can('category.editor') || undefined" /> {% endblock %} {% block sw_category_entry_point_modal_selected_sales_channel_seo_keywords %} <sw-text-field v-model:value="selectedSalesChannel.homeKeywords" class="sw-category-entry-point-modal__seo-keywords" :label="$tc('sw-category.base.entry-point-modal.seoKeywordsLabel')" :placeholder="selectedSalesChannel.translated.homeKeywords || $tc('sw-category.base.entry-point-modal.seoKeywordsPlaceholder')" :disabled="!acl.can('category.editor') || undefined" /> {% endblock %} </template> {% endblock %} {% block sw_category_entry_point_modal_footer %} <template #modal-footer> {% block sw_category_entry_point_modal_footer_cancel_button %} <sw-button class="sw-category-entry-point-modal__cancel-button" @click="closeModal" > {{ $tc('global.default.cancel') }} </sw-button> {% endblock %} {% block sw_category_entry_point_modal_footer_apply_button %} <sw-button class="sw-category-entry-point-modal__apply-button" variant="primary" :disabled="!acl.can('category.editor')" @click="applyChanges" > {{ $tc('global.default.apply') }} </sw-button> {% endblock %} </template> {% endblock %} {% block sw_category_entry_point_modal_discard_changes_modal %} <sw-discard-changes-modal v-if="isDisplayingLeavePageWarning" @keep-editing="onLeaveModalClose()" @discard-changes="onLeaveModalConfirm(nextRoute)" /> {% endblock %} </sw-modal> {% endblock %}`,s={template:l,inject:["acl","cmsPageTypeService"],emits:["modal-close"],props:{salesChannelCollection:{type:Array,required:!0}},data(){return{temporaryCollection:[],salesChannelOptions:[],selectedSalesChannelId:"",showLayoutSelectionModal:!1,pageTypes:["page","landingpage","product_list"],nextRoute:null,isDisplayingLeavePageWarning:!1}},computed:{selectedSalesChannel(){return this.temporaryCollection.find(e=>e.id===this.selectedSalesChannelId)}},created(){this.createdComponent()},methods:{createdComponent(){this.salesChannelCollection.forEach(e=>{this.temporaryCollection.push({id:e.id,name:e.name,homeEnabled:e.homeEnabled,homeName:e.homeName,homeMetaTitle:e.homeMetaTitle,homeMetaDescription:e.homeMetaDescription,homeKeywords:e.homeKeywords,homeCmsPageId:e.homeCmsPageId,homeCmsPage:e.homeCmsPage?{...e.homeCmsPage}:null,translated:e.translated?{...e.translated}:null}),this.salesChannelOptions.push({value:e.id,label:e.translated?e.translated.name:e.name})}),this.salesChannelCollection.length>0&&(this.selectedSalesChannelId=this.salesChannelOptions[0].value)},closeModal(){this.$emit("modal-close")},getCmsPageTypeName(e){var o;const a=this.$tc("sw-category.base.cms.defaultDesc");if(!e)return a;const t=(o=this.cmsPageTypeService.getType(e))==null?void 0:o.title;return t?this.$tc(t):a},onLayoutSelect(e,a){this.selectedSalesChannel.homeCmsPage=a,this.selectedSalesChannel.homeCmsPageId=e},onLayoutReset(){this.onLayoutSelect(null,null)},openInPagebuilder(){let e={name:"sw.cms.create"};if(this.selectedSalesChannel.homeCmsPage&&(e={name:"sw.cms.detail",params:{id:this.selectedSalesChannel.homeCmsPageId}}),this.hasNotAppliedChanges()){this.isDisplayingLeavePageWarning=!0,this.nextRoute=e;return}this.closeModal(),this.$nextTick(()=>{this.$router.push(e)})},openLayoutModal(){this.acl.can("category.editor")&&(this.showLayoutSelectionModal=!0)},closeLayoutModal(){this.showLayoutSelectionModal=!1},applyChanges(){for(let e=0;e<this.temporaryCollection.length;e+=1){const a=this.temporaryCollection[e],t=this.salesChannelCollection[e];t.name=a.name,t.homeEnabled=a.homeEnabled,t.homeName=a.homeName,t.homeMetaTitle=a.homeMetaTitle,t.homeMetaDescription=a.homeMetaDescription,t.homeKeywords=a.homeKeywords,t.homeCmsPageId=a.homeCmsPageId,t.homeCmsPage=a.homeCmsPage}this.closeModal()},hasNotAppliedChanges(){for(let e=0;e<this.temporaryCollection.length;e+=1){const a=this.salesChannelCollection[e],t=this.temporaryCollection[e];if(this.isAttributeEqual(t.name,a.name)||this.isAttributeEqual(t.homeEnabled,a.homeEnabled)||this.isAttributeEqual(t.homeName,a.homeName)||this.isAttributeEqual(t.homeMetaTitle,a.homeMetaTitle)||this.isAttributeEqual(t.homeMetaDescription,a.homeMetaDescription)||this.isAttributeEqual(t.homeKeywords,a.homeKeywords)||this.isAttributeEqual(t.homeCmsPageId,a.homeCmsPageId))return!0}return!1},isAttributeEqual(e,a){return e===null&&(e=""),a===null&&(a=""),e!==a},onLeaveModalClose(){this.nextRoute=null,this.isDisplayingLeavePageWarning=!1},onLeaveModalConfirm(e){this.isDisplayingLeavePageWarning=!1,this.$nextTick(()=>{this.closeModal(),this.$nextTick(()=>{this.$router.push({name:e.name,params:e.params})})})}}};export{s as default};

{"version":3,"file":"index-DaaLlecf.js","sources":["../../../app/administration/src/app/component/structure/sw-sales-channel-switch/sw-sales-channel-switch.html.twig","../../../app/administration/src/app/component/structure/sw-sales-channel-switch/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_sales_channel_switch %}\n<div class=\"sw-sales-channel-switch\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_switch_modal %}\n    <sw-modal\n        v-if=\"showUnsavedChangesModal\"\n        :title=\"$tc('sw-sales-channel-switch.titleModalUnsavedChanges')\"\n        variant=\"small\"\n        @modal-close=\"onCloseChangesModal\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_switch_message %}\n        <p>{{ $tc('sw-sales-channel-switch.messageModalUnsavedChanges') }}</p>\n        {% endblock %}\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_switch_footer %}\n        <template #modal-footer>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_sales_channel_switch_footer_button_close %}\n            <sw-button\n                size=\"small\"\n                @click=\"onCloseChangesModal\"\n            >\n                {{ $tc('global.default.cancel') }}\n            </sw-button>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_sales_channel_switch_footer_button_revert %}\n            <sw-button\n                size=\"small\"\n                @click=\"onClickRevertUnsavedChanges\"\n            >\n                {{ $tc('sw-sales-channel-switch.titleModalButtonRevertUnsavedChanges') }}\n            </sw-button>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_sales_channel_switch_footer_button_save %}\n            <sw-button\n                variant=\"primary\"\n                size=\"small\"\n                @click=\"onClickSaveChanges\"\n            >\n                {{ $tc('global.default.save') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </sw-modal>\n    {% endblock %}\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_switch_select %}\n    <sw-entity-single-select\n        id=\"salesChannelSelect\"\n        ref=\"salesChannelSelect\"\n        :disabled=\"disabled\"\n        :placeholder=\"$tc('sw-sales-channel-switch.labelDefaultOption')\"\n        :label=\"label\"\n        :search-placeholder=\"$tc('sw-sales-channel-switch.placeholderSelect')\"\n        :reset-option=\"$tc('sw-sales-channel-switch.labelDefaultOption')\"\n        :value=\"salesChannelId\"\n        entity=\"sales_channel\"\n        show-clearable-button\n        @update:value=\"onChange\"\n    >\n        <template #labelProperty=\"{item, labelProperty}\">\n            <span v-if=\"item.translated\">{{ item.translated[labelProperty] }}</span>\n        </template>\n    </sw-entity-single-select>\n    {% endblock %}\n</div>\n{% endblock %}\n","/**\n * @package buyers-experience\n */\nimport template from './sw-sales-channel-switch.html.twig';\n\nconst { Component } = Cicada;\nconst { debug } = Cicada.Utils;\n\n/**\n * @private\n * @description\n * Renders a sales channel switcher.\n * @status ready\n * @example-type code-only\n * @component-example\n * <sw-sales-channel-switch></sw-sales-channel-switch>\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nComponent.register('sw-sales-channel-switch', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: ['change-sales-channel-id'],\n\n    props: {\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        // eslint-disable-next-line vue/require-default-prop\n        abortChangeFunction: {\n            type: Function,\n            required: false,\n        },\n        // eslint-disable-next-line vue/require-default-prop\n        saveChangesFunction: {\n            type: Function,\n            required: false,\n        },\n        label: {\n            type: String,\n            required: false,\n            default: '',\n        },\n    },\n\n    data() {\n        return {\n            salesChannelId: '',\n            lastSalesChannelId: '',\n            newSalesChannelId: '',\n            showUnsavedChangesModal: false,\n        };\n    },\n\n    methods: {\n        onChange(id) {\n            this.salesChannelId = id;\n            this.newSalesChannelId = id;\n\n            this.checkAbort();\n        },\n        checkAbort() {\n            // Check if abort function exists und reset the select field if the change should be aborted\n            if (typeof this.abortChangeFunction === 'function') {\n                if (\n                    this.abortChangeFunction({\n                        oldSalesChannelId: this.lastSalesChannelId,\n                        newSalesChannelId: this.salesChannelId,\n                    })\n                ) {\n                    this.showUnsavedChangesModal = true;\n                    this.salesChannelId = this.lastSalesChannelId;\n                    this.$refs.salesChannelSelect.loadSelected();\n                    return;\n                }\n            }\n\n            this.emitChange();\n        },\n        emitChange() {\n            this.lastSalesChannelId = this.salesChannelId;\n\n            this.$emit('change-sales-channel-id', this.salesChannelId);\n        },\n        onCloseChangesModal() {\n            this.showUnsavedChangesModal = false;\n            this.newSalesChannelId = '';\n        },\n        onClickSaveChanges() {\n            let save = {};\n            // Check if save function exists and wait for it before changing the salesChannel\n            if (typeof this.saveChangesFunction === 'function') {\n                save = this.saveChangesFunction();\n            } else {\n                debug.warn('sw-sales-channel-switch', 'You need to implement an own save function to save the changes!');\n            }\n            return Promise.resolve(save).then(() => {\n                this.changeToNewSalesChannel();\n                this.onCloseChangesModal();\n            });\n        },\n        onClickRevertUnsavedChanges() {\n            this.changeToNewSalesChannel();\n            this.onCloseChangesModal();\n        },\n        changeToNewSalesChannel(salesChannelId) {\n            if (salesChannelId) {\n                this.newSalesChannelId = salesChannelId;\n            }\n            this.salesChannelId = this.newSalesChannelId;\n            this.newSalesChannelId = '';\n            this.$refs.salesChannelSelect.loadSelected();\n            this.emitChange();\n        },\n    },\n});\n"],"names":["template","Component","debug","id","save","salesChannelId"],"mappings":"AAAA,MAAeA,EAAA,muDCKT,CAAE,UAAAC,CAAW,EAAG,OAChB,CAAE,MAAAC,CAAK,EAAK,OAAO,MAYzBD,EAAU,SAAS,0BAA2B,CAC1C,SAAAD,EAEA,aAAc,OAAO,aAErB,MAAO,CAAC,yBAAyB,EAEjC,MAAO,CACH,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EAED,oBAAqB,CACjB,KAAM,SACN,SAAU,EACb,EAED,oBAAqB,CACjB,KAAM,SACN,SAAU,EACb,EACD,MAAO,CACH,KAAM,OACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,eAAgB,GAChB,mBAAoB,GACpB,kBAAmB,GACnB,wBAAyB,EACrC,CACK,EAED,QAAS,CACL,SAASG,EAAI,CACT,KAAK,eAAiBA,EACtB,KAAK,kBAAoBA,EAEzB,KAAK,WAAU,CAClB,EACD,YAAa,CAET,GAAI,OAAO,KAAK,qBAAwB,YAEhC,KAAK,oBAAoB,CACrB,kBAAmB,KAAK,mBACxB,kBAAmB,KAAK,cAChD,CAAqB,EACH,CACE,KAAK,wBAA0B,GAC/B,KAAK,eAAiB,KAAK,mBAC3B,KAAK,MAAM,mBAAmB,eAC9B,MACH,CAGL,KAAK,WAAU,CAClB,EACD,YAAa,CACT,KAAK,mBAAqB,KAAK,eAE/B,KAAK,MAAM,0BAA2B,KAAK,cAAc,CAC5D,EACD,qBAAsB,CAClB,KAAK,wBAA0B,GAC/B,KAAK,kBAAoB,EAC5B,EACD,oBAAqB,CACjB,IAAIC,EAAO,CAAA,EAEX,OAAI,OAAO,KAAK,qBAAwB,WACpCA,EAAO,KAAK,sBAEZF,EAAM,KAAK,0BAA2B,iEAAiE,EAEpG,QAAQ,QAAQE,CAAI,EAAE,KAAK,IAAM,CACpC,KAAK,wBAAuB,EAC5B,KAAK,oBAAmB,CACxC,CAAa,CACJ,EACD,6BAA8B,CAC1B,KAAK,wBAAuB,EAC5B,KAAK,oBAAmB,CAC3B,EACD,wBAAwBC,EAAgB,CAChCA,IACA,KAAK,kBAAoBA,GAE7B,KAAK,eAAiB,KAAK,kBAC3B,KAAK,kBAAoB,GACzB,KAAK,MAAM,mBAAmB,eAC9B,KAAK,WAAU,CAClB,CACJ,CACL,CAAC"}
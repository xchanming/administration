{"version":3,"file":"index-CEXYOEYv.js","sources":["../../../app/administration/src/module/sw-manufacturer/page/sw-manufacturer-detail/sw-manufacturer-detail.html.twig","../../../app/administration/src/module/sw-manufacturer/page/sw-manufacturer-detail/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_manufacturer_detail %}\n<sw-page class=\"sw-manufacturer-detail\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_manufacturer_detail_header %}\n    <template #smart-bar-header>\n        <h2>{{ placeholder(manufacturer, 'name', $tc('sw-manufacturer.detail.textHeadline')) }}</h2>\n    </template>\n\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_manufacturer_detail_actions %}\n    <template #smart-bar-actions>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_manufacturer_detail_actions_abort %}\n        <sw-button\n            v-tooltip.bottom=\"tooltipCancel\"\n            :disabled=\"manufacturerIsLoading || undefined\"\n            @click=\"onCancel\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_manufacturer_detail_actions_save %}\n        <sw-button-process\n            v-model:processSuccess=\"isSaveSuccessful\"\n            v-tooltip.bottom=\"tooltipSave\"\n            class=\"sw-manufacturer-detail__save-action\"\n            :is-loading=\"isLoading\"\n            :disabled=\"isLoading || !acl.can('product_manufacturer.editor') || undefined\"\n            variant=\"primary\"\n            @click.prevent=\"onSave\"\n        >\n            {{ $tc('sw-manufacturer.detail.buttonSave') }}\n        </sw-button-process>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_manufacturer_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch\n            :disabled=\"manufacturerId == null || undefined\"\n            :save-changes-function=\"saveOnLanguageChange\"\n            :abort-change-function=\"abortOnLanguageChange\"\n            @on-change=\"onChangeLanguage\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_manufacturer_detail_content %}\n    <template #content>\n        <sw-card-view>\n            <template v-if=\"manufacturerIsLoading\">\n                <sw-skeleton variant=\"detail-bold\" />\n                <sw-skeleton />\n            </template>\n\n            <template v-else>\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_manufacturer_detail_content_language_info %}\n                <sw-language-info\n                    :entity-description=\"placeholder(manufacturer, 'name', $tc('sw-manufacturer.detail.textHeadline'))\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_manufacturer_detail_base_basic_info_card %}\n                <sw-card\n                    position-identifier=\"sw-manufacturer-detail-basic-info\"\n                    :title=\"$tc('sw-manufacturer.detail.cardTitleManufacturerInfo')\"\n                >\n                    <sw-container\n                        class=\"sw-manufacturer-detail__container\"\n                        columns=\"repeat(auto-fit, minmax(250px, 1fr))\"\n                        gap=\"0 30px\"\n                    >\n                        <div class=\"sw-manufacturer-detail__base-info-wrapper\">\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_manufacturer_detail_base_info_field_name %}\n                            <sw-text-field\n                                v-model:value=\"manufacturer.name\"\n                                :label=\"$tc('sw-manufacturer.detail.labelName')\"\n                                :placeholder=\"placeholder(manufacturer, 'name', $tc('sw-manufacturer.detail.placeholderName'))\"\n                                name=\"name\"\n                                validation=\"required\"\n                                required\n                                :error=\"manufacturerNameError\"\n                                :disabled=\"!acl.can('product_manufacturer.editor') || undefined\"\n                            />\n                            {% endblock %}\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_manufacturer_detail_base_info_field_link %}\n                            <sw-text-field\n                                v-model:value=\"manufacturer.link\"\n                                :label=\"$tc('sw-manufacturer.detail.labelLink')\"\n                                :placeholder=\"$tc('sw-manufacturer.detail.placeholderLink')\"\n                                name=\"link\"\n                                :disabled=\"!acl.can('product_manufacturer.editor') || undefined\"\n                            />\n                            {% endblock %}\n                        </div>\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_manufacturer_detail_logo_upload %}\n                        <sw-upload-listener\n                            :upload-tag=\"mediaUploadTag\"\n                            auto-upload\n                            @media-upload-finish=\"setMediaItem\"\n                        />\n                        <sw-media-upload-v2\n                            class=\"sw-manufacturer-detail__logo-upload\"\n                            :source=\"manufacturer.mediaId\"\n                            :allow-multi-select=\"false\"\n                            variant=\"regular\"\n                            :upload-tag=\"mediaUploadTag\"\n                            :label=\"$tc('sw-manufacturer.detail.labelLogo')\"\n                            :default-folder=\"manufacturerRepository.entityName\"\n                            :disabled=\"!acl.can('product_manufacturer.editor') || undefined\"\n                            @sw-media-upload-v2-media-upload-success=\"setMediaItem\"\n                            @media-drop=\"onDropMedia\"\n                            @media-upload-sidebar-open=\"openMediaSidebar\"\n                            @media-upload-remove-image=\"onUnlinkLogo\"\n                        />\n                        {% endblock %}\n                    </sw-container>\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_manufacturer_detail_base_info_field_description %}\n                    <sw-text-editor\n                        v-model:value=\"manufacturer.description\"\n                        :label=\"$tc('sw-manufacturer.detail.labelDescription')\"\n                        :placeholder=\"placeholder(manufacturer, 'description', $tc('sw-manufacturer.detail.placeholderDescription'))\"\n                        name=\"description\"\n                        sanitize-input\n                        sanitize-field-name=\"product_manufacturer_translation.description\"\n                        :disabled=\"!acl.can('product_manufacturer.editor') || undefined\"\n                    />\n                    {% endblock %}\n                </sw-card>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_manufacturer_detail_custom_field_sets %}\n                <sw-card\n                    v-if=\"customFieldSets.length > 0\"\n                    position-identifier=\"sw-manufacturer-detail-custom-field-sets\"\n                    :title=\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\"\n                    :is-loading=\"manufacturerIsLoading\"\n                >\n                    <sw-custom-field-set-renderer\n                        v-if=\"manufacturer\"\n                        :entity=\"manufacturer\"\n                        :sets=\"customFieldSets\"\n                        :disabled=\"!acl.can('product_manufacturer.editor') || undefined\"\n                    />\n                </sw-card>\n                {% endblock %}\n            </template>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_manufacturer_detail_sidebar %}\n    <template #sidebar>\n        <sw-sidebar :propagate-width=\"true\">\n            <sw-sidebar-media-item\n                ref=\"mediaSidebarItem\"\n                :disabled=\"!acl.can('product_manufacturer.editor') || undefined\"\n            >\n                <template\n                    #context-menu-items=\"media\"\n                >\n                    <sw-context-menu-item @click=\"setMediaFromSidebar(media.mediaItem)\">\n                        {{ $tc('sw-manufacturer.detail.labelUseAsLogo') }}\n                    </sw-context-menu-item>\n                </template>\n            </sw-sidebar-media-item>\n        </sw-sidebar>\n    </template>\n    {% endblock %}\n\n</sw-page>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport template from './sw-manufacturer-detail.html.twig';\nimport './sw-manufacturer-detail.scss';\n\nconst {\n    Mixin,\n    Data: { Criteria },\n} = Cicada;\n\nconst { mapPropertyErrors } = Cicada.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n    ],\n\n    mixins: [\n        Mixin.getByName('placeholder'),\n        Mixin.getByName('notification'),\n        Mixin.getByName('discard-detail-page-changes')('manufacturer'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    props: {\n        manufacturerId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            manufacturer: null,\n            customFieldSets: [],\n            isLoading: false,\n            isSaveSuccessful: false,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.placeholder(this.manufacturer, 'name');\n        },\n\n        manufacturerIsLoading() {\n            return this.isLoading || this.manufacturer == null;\n        },\n\n        manufacturerRepository() {\n            return this.repositoryFactory.create('product_manufacturer');\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        customFieldSetRepository() {\n            return this.repositoryFactory.create('custom_field_set');\n        },\n\n        customFieldSetCriteria() {\n            const criteria = new Criteria(1, null);\n            criteria.addFilter(Criteria.equals('relations.entityName', 'product_manufacturer'));\n\n            return criteria;\n        },\n\n        mediaUploadTag() {\n            return `sw-manufacturer-detail--${this.manufacturer.id}`;\n        },\n\n        tooltipSave() {\n            if (this.acl.can('product_manufacturer.editor')) {\n                const systemKey = this.$device.getSystemKey();\n\n                return {\n                    message: `${systemKey} + S`,\n                    appearance: 'light',\n                };\n            }\n\n            return {\n                showDelay: 300,\n                message: this.$tc('sw-privileges.tooltip.warning'),\n                disabled: this.acl.can('order.editor'),\n                showOnDisabledElements: true,\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        ...mapPropertyErrors('manufacturer', ['name']),\n    },\n\n    watch: {\n        manufacturerId() {\n            this.createdComponent();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            Cicada.ExtensionAPI.publishData({\n                id: 'sw-manufacturer-detail__manufacturer',\n                path: 'manufacturer',\n                scope: this,\n            });\n            if (this.manufacturerId) {\n                this.loadEntityData();\n                return;\n            }\n\n            Cicada.State.commit('context/resetLanguageToDefault');\n            this.manufacturer = this.manufacturerRepository.create();\n        },\n\n        async loadEntityData() {\n            this.isLoading = true;\n\n            const [\n                manufacturerResponse,\n                customFieldResponse,\n            ] = await Promise.allSettled([\n                this.manufacturerRepository.get(this.manufacturerId),\n                this.customFieldSetRepository.search(this.customFieldSetCriteria),\n            ]);\n\n            if (manufacturerResponse.status === 'fulfilled') {\n                this.manufacturer = manufacturerResponse.value;\n            }\n\n            if (customFieldResponse.status === 'fulfilled') {\n                this.customFieldSets = customFieldResponse.value;\n            }\n\n            if (manufacturerResponse.status === 'rejected' || customFieldResponse.status === 'rejected') {\n                this.createNotificationError({\n                    message: this.$tc('global.notification.notificationLoadingDataErrorMessage'),\n                });\n            }\n\n            this.isLoading = false;\n        },\n\n        abortOnLanguageChange() {\n            return this.manufacturerRepository.hasChanges(this.manufacturer);\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        onChangeLanguage() {\n            this.loadEntityData();\n        },\n\n        setMediaItem({ targetId }) {\n            this.manufacturer.mediaId = targetId;\n        },\n\n        setMediaFromSidebar(media) {\n            this.manufacturer.mediaId = media.id;\n        },\n\n        onUnlinkLogo() {\n            this.manufacturer.mediaId = null;\n        },\n\n        openMediaSidebar() {\n            this.$refs.mediaSidebarItem.openContent();\n        },\n\n        onDropMedia(dragData) {\n            this.setMediaItem({ targetId: dragData.id });\n        },\n\n        onSave() {\n            if (!this.acl.can('product_manufacturer.editor')) {\n                return;\n            }\n\n            this.isLoading = true;\n\n            this.manufacturerRepository\n                .save(this.manufacturer)\n                .then(() => {\n                    this.isLoading = false;\n                    this.isSaveSuccessful = true;\n                    if (this.manufacturerId === null) {\n                        this.$router.push({\n                            name: 'sw.manufacturer.detail',\n                            params: { id: this.manufacturer.id },\n                        });\n                        return;\n                    }\n\n                    this.loadEntityData();\n                })\n                .catch((exception) => {\n                    this.isLoading = false;\n                    this.createNotificationError({\n                        message: this.$tc('global.notification.notificationSaveErrorMessageRequiredFieldsInvalid'),\n                    });\n                    throw exception;\n                });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.manufacturer.index' });\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","mapPropertyErrors","index","criteria","manufacturerResponse","customFieldResponse","targetId","media","dragData","exception"],"mappings":"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"}
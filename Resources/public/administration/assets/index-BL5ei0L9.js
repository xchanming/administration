const s=`{% block sw_custom_field_detail %} <sw-modal class="sw-custom-field-detail" :title="modalTitle" @modal-close="onCancel" > {% block sw_custom_field_detail_modal %} <sw-container columns="1fr 1fr" gap="20px" > {% block sw_custom_field_detail_modal_type %} <sw-select-field v-model:value="currentCustomField.config.customFieldType" :label="$tc('sw-settings-custom-field.customField.detail.labelCustomFieldType')" :placeholder="$tc('sw-settings-custom-field.customField.detail.placeholderCustomFieldType')" class="sw-custom-field-detail__modal-type" type="select" :help-text="$tc('sw-settings-custom-field.general.tooltipType')" :disabled="!currentCustomField._isNew || !acl.can('custom_field.editor') || undefined" > <option v-for="(option, key) in fieldTypes" :key="key" :value="key" > {{ $tc(\`sw-settings-custom-field.types.\${key}\`) }} </option> </sw-select-field> {% endblock %} {% block sw_custom_field_detail_modal_technical_name %} <sw-text-field v-model:value="currentCustomField.name" class="sw-custom-field-detail__technical-name" :label="$tc('sw-settings-custom-field.customField.detail.labelTechnicalName')" :help-text="$tc('sw-settings-custom-field.general.tooltipTechnicalName')" :disabled="!currentCustomField._isNew || !acl.can('custom_field.editor') || undefined" /> {% endblock %} {% block sw_custom_field_detail_modal_position %} <sw-number-field v-model:value="currentCustomField.config.customFieldPosition" class="sw-custom-field-detail__modal-position" :help-text="$tc('sw-settings-custom-field.customField.detail.tooltipCustomFieldPosition')" number-type="int" :label="$tc('sw-settings-custom-field.customField.detail.labelCustomFieldPosition')" :disabled="!acl.can('custom_field.editor') || undefined" /> {% endblock %} {# @deprecated tag:v6.7.0 - Block will be removed without replacement #} {% block sw_custom_field_detail_modal_required %}{% endblock %} {% block sw_custom_field_detail_modal_allow_cart_expose %} <sw-switch-field v-if="isProductCustomField" v-model:value="currentCustomField.allowCartExpose" v-tooltip="getCartExposeTooltipConfig()" bordered :help-text="$tc('sw-settings-custom-field.customField.detail.tooltipAllowCartExpose')" class="sw-custom-field-detail__allow-cart-expose" :label="$tc('sw-settings-custom-field.customField.detail.labelAllowCartExpose')" :disabled="!acl.can('custom_field.editor') || disableCartExpose || undefined" /> <div v-else></div> {% endblock %} {% block sw_custom_field_detail_modal_allow_customer_write %} <sw-switch-field v-model:value="currentCustomField.allowCustomerWrite" bordered :help-text="$tc('sw-settings-custom-field.customField.detail.tooltipAllowCustomerWrite')" class="sw-custom-field-detail__allow-customer-write" :label="$tc('sw-settings-custom-field.customField.detail.labelAllowCustomerWrite')" :disabled="!acl.can('custom_field.editor') || undefined" /> {% endblock %} {% block sw_custom_field_detail_modal_store_api_aware %} <sw-switch-field v-model:value="currentCustomField.storeApiAware" bordered :help-text="$tc('sw-settings-custom-field.customField.detail.tooltipStoreApiAware')" class="sw-custom-field-detail__store-api-aware" :label="$tc('sw-settings-custom-field.customField.detail.labelStoreApiAware')" :disabled="!acl.can('custom_field.editor') || undefined" /> {% endblock %} {% block sw_custom_field_detail_modal_snippet_info %} <sw-alert class="sw-custom-field-detail__info"> {{ $tc('sw-settings-custom-field.customField.detail.infoText', { name: currentCustomField.name }, 0) }} </sw-alert> {% endblock %} </sw-container> {% block sw_custom_field_detail_modal_render_component %} <div v-if="currentCustomField.config.customFieldType?.length > 0"> <component :is="renderComponentName" :current-custom-field="currentCustomField" :set="set" /> </div> {% endblock %} {% block sw_custom_field_detail_modal_footer %} <template #modal-footer> {% block sw_custom_field_detail_modal_footer_cancel %} <sw-button size="small" @click="onCancel" > {{ $tc('global.default.cancel') }} </sw-button> {% endblock %} {% block sw_custom_field_detail_modal_footer_save %} <sw-button class="sw-custom-field-detail__footer-save" variant="primary" size="small" :disabled="!canSave || !acl.can('custom_field.editor') || undefined" @click="onSave" > {{ labelSaveButton }} </sw-button> {% endblock %} </template> {% endblock %} {% endblock %} </sw-modal> {% endblock %}`,{Mixin:l,Context:o}=Shopware,{Criteria:i}=Shopware.Data,d={template:s,inject:["repositoryFactory","customFieldDataProviderService","SwCustomFieldListIsCustomFieldNameUnique","acl"],emits:["custom-field-edit-cancel","custom-field-edit-save"],mixins:[l.getByName("notification")],props:{currentCustomField:{type:Object,required:!0},set:{type:Object,required:!0}},data(){return{fieldTypes:{},disableCartExpose:!0}},computed:{locales(){return this.set.config.translated&&this.set.config.translated===!0?Object.keys(this.$root.$i18n.messages):[this.$root.$i18n.fallbackLocale]},canSave(){return this.currentCustomField.config.customFieldType},renderComponentName(){var e;return(e=this.fieldTypes[this.currentCustomField.config.customFieldType])==null?void 0:e.configRenderComponent},modalTitle(){return this.currentCustomField._isNew?this.$tc("sw-settings-custom-field.customField.detail.titleNewCustomField"):this.$tc("sw-settings-custom-field.customField.detail.titleEditCustomField")},labelSaveButton(){return this.currentCustomField._isNew?this.$tc("global.default.add"):this.$tc("sw-settings-custom-field.customField.detail.buttonEditApply")},isProductCustomField(){return this.set.relations?this.set.relations.filter(e=>e.entityName==="product").length!==0:!1},ruleConditionRepository(){return this.repositoryFactory.create("rule_condition")}},created(){this.createdComponent()},methods:{createdComponent(){if(this.fieldTypes=this.customFieldDataProviderService.getTypes(),this.currentCustomField.config||(this.currentCustomField.config={}),this.currentCustomField.config.hasOwnProperty("customFieldType")||(this.currentCustomField.config.customFieldType=""),this.currentCustomField.name||(this.currentCustomField.name=`${this.set.name.toLowerCase()}_`),this.currentCustomField.config.hasOwnProperty("customFieldPosition")||(this.currentCustomField.config.customFieldPosition=1),!this.currentCustomField.allowCartExpose){this.disableCartExpose=!1;return}const e=new i(1,1);e.addFilter(i.multi("AND",[i.equals("type","cartLineItemCustomField"),i.equals("value.renderedField.name",this.currentCustomField.name)])),this.ruleConditionRepository.search(e,o.api).then(t=>{this.disableCartExpose=t.length>0})},onCancel(){this.$emit("custom-field-edit-cancel",this.currentCustomField)},onSave(){if(this.applyTypeConfiguration(),!this.currentCustomField._isNew){this.$emit("custom-field-edit-save",this.currentCustomField);return}if(this.currentCustomField.config.customFieldType==="entity"&&!this.currentCustomField.config.entity){this.createEntityTypeRequiredNotification();return}this.SwCustomFieldListIsCustomFieldNameUnique(this.currentCustomField).then(e=>{if(e){this.$emit("custom-field-edit-save",this.currentCustomField);return}this.createNameNotUniqueNotification()})},createNameNotUniqueNotification(){const e=this.$tc("global.default.error"),t=this.$tc("sw-settings-custom-field.set.detail.messageNameNotUnique");this.createNotificationError({title:e,message:t})},createEntityTypeRequiredNotification(){const e=this.$tc("global.default.error"),t=this.$tc("sw-settings-custom-field.set.detail.entityTypeRequired");this.createNotificationError({title:e,message:t})},applyTypeConfiguration(){const e=this.currentCustomField.config.customFieldType;this.currentCustomField.type||(this.currentCustomField.type=this.fieldTypes[e].type||e),this.currentCustomField.config={...this.fieldTypes[e].config,...this.currentCustomField.config}},getCartExposeTooltipConfig(){return this.disableCartExpose?{disabled:!1,width:260,message:this.$t("sw-settings-custom-field.customField.detail.tooltipCartExposeDisabled")}:{message:"",disabled:!0}}}};export{d as default};

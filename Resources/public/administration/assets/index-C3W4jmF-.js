const o=`{% block sw_product_seo_form %} <div class="sw-product-seo-form"> {% block sw_product_seo_form_meta_title %} <sw-inherit-wrapper v-model:value="product.metaTitle" :has-parent="hasParent" :label="$tc('sw-product.seoForm.labelMetaTitle')" :help-text="$tc('sw-product.seoForm.helpTextMetaTitle')" :inherited-value="parentProduct.metaTitle" > <template #content="props"> <sw-text-field :placeholder="$tc('sw-product.seoForm.placeholderMetaTitle')" :error="productMetaTitleError" :disabled="props.isInherited || !allowEdit" :value="props.currentValue" @update:value="props.updateCurrentValue" /> </template> </sw-inherit-wrapper> {% endblock %} {% block sw_product_seo_form_meta_description %} <sw-inherit-wrapper v-model:value="product.metaDescription" :has-parent="hasParent" :label="$tc('sw-product.seoForm.labelMetaDescription')" :help-text="$tc('sw-product.seoForm.helpTextMetaDescription')" :inherited-value="parentProduct.metaDescription" > <template #content="props"> <sw-textarea-field :placeholder="$tc('sw-product.seoForm.placeholderMetaDescription')" :error="productMetaDescriptionError" :disabled="props.isInherited || !allowEdit" :value="props.currentValue" @update:value="props.updateCurrentValue" /> </template> </sw-inherit-wrapper> {% endblock %} {% block sw_product_seo_form_keywords %} <sw-inherit-wrapper v-model:value="product.keywords" :has-parent="hasParent" :label="$tc('sw-product.seoForm.labelKeywords')" :help-text="$tc('sw-product.seoForm.helpTextKeywords')" :inherited-value="parentProduct.keywords" > <template #content="props"> <sw-text-field :placeholder="$tc('sw-product.seoForm.placeholderKeywords')" :error="productKeywordsError" :disabled="props.isInherited || !allowEdit" :value="props.currentValue" @update:value="props.updateCurrentValue" /> </template> </sw-inherit-wrapper> {% endblock %} {% block sw_product_seo_form_canonical_url %} <template v-if="!hasParent && hasVariants"> {% block sw_product_seo_form_canonical_url_switch %} <sw-switch-field v-model:value="canonicalProductSwitchEnabled" :label="$tc('sw-product.seoForm.labelCanonicalUrlMode')" /> {% endblock %} {% block sw_product_seo_form_canonical_url_select %} <sw-single-select ref="canonicalProductSelect" v-model:value="product.canonicalProductId" :options="variants" :disabled="!canonicalProductSwitchEnabled" value-property="id" :label="$tc('sw-product.seoForm.labelCanonicalProduct')" :placeholder="$tc('sw-product.seoForm.placeholderCanonicalProduct')" show-clearable-button @search="onSearch" > <template #selection-label-property="{ item }"> {% block sw_product_seo_form_canonical_url_select_selection %} <sw-product-variant-info :variations="item.variation" :show-tooltip="false" > {{ getItemName(item) }} </sw-product-variant-info> {% endblock %} </template> <template #result-label-property="{ item }"> {% block sw_product_seo_form_canonical_url_select_result %} <sw-product-variant-info :variations="item.variation" :show-tooltip="false" > {{ getItemName(item) }} </sw-product-variant-info> {% endblock %} </template> </sw-single-select> {% endblock %} </template> {% endblock %} </div> {% endblock %}`,{Mixin:c}=Cicada,{Criteria:r}=Cicada.Data,{mapPropertyErrors:s,mapState:i,mapGetters:l}=Cicada.Component.getComponentHelper(),n={template:o,compatConfig:Cicada.compatConfig,inject:["repositoryFactory"],mixins:[c.getByName("placeholder")],props:{allowEdit:{type:Boolean,required:!1,default:!0}},data(){return{variants:[],searchTerm:"",canonicalProductSwitchEnabled:!1,switchStateHasBeenSet:!1,shouldKeepSelectValue:!1,selectValue:null}},computed:{productRepository(){return this.repositoryFactory.create("product")},hasParent(){return!!this.parentProduct.id},hasVariants(){return this.product.childCount>0},variantCriteria(){const e=new r(1,25);return e.addAssociation("options.group"),e.addFilter(r.equals("parentId",this.product.id)),this.searchTerm&&(e.setTerm(this.searchTerm),this.searchTerm.split(" ").filter(t=>t!=="").forEach(t=>{e.addQuery(r.equals("product.options.name",t),3500),e.addQuery(r.contains("product.options.name",t),500)})),e},isCanonicalUrlSelectLoading(){return this.variants.length<1},variantsWithResetOption(){const e=this.variants;return e.unshift({id:null,name:this.$tc("sw-product.seoForm.placeholderCanonicalProduct")}),e},...l("swProductDetail",["isLoading"]),...i("swProductDetail",["product","parentProduct"]),...s("product",["keywords","metaDescription","metaTitle"])},watch:{"product.canonicalProductId":{handler(e){e===void 0||this.switchStateHasBeenSet||(this.canonicalProductSwitchEnabled=!!e,this.switchStateHasBeenSet=!0)},immediate:!0},"product.id":{handler:function(e){e&&this.fetchVariants()},immediate:!0},canonicalProductSwitchEnabled(e){if(!this.shouldKeepSelectValue){this.shouldKeepSelectValue=!0;return}if(e){this.product.canonicalProductId=this.selectValue,this.selectValue=null;return}this.selectValue=this.product.canonicalProductId,this.product.canonicalProductId=null},isLoading(e){e||(this.selectValue=this.product.canonicalProductId)}},methods:{fetchVariants(){return this.productRepository.search(this.variantCriteria).then(e=>(this.variants=e,e))},getItemName(e){return e.id?e.translated.name||this.product.translated.name:e.name},onSearch(e){this.searchTerm=e,this.fetchVariants().then(a=>{this.$refs.canonicalProductSelect.results=a,this.$nextTick().then(()=>{this.$refs.canonicalProductSelect.resetActiveItem()})})}}};export{n as default};
//# sourceMappingURL=index-C3W4jmF-.js.map

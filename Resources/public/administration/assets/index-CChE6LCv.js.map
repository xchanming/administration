{"version":3,"file":"index-CChE6LCv.js","sources":["../../../app/administration/src/app/component/rule/condition-type/sw-condition-line-item-in-category/sw-condition-line-item-in-category.html.twig","../../../app/administration/src/app/component/rule/condition-type/sw-condition-line-item-in-category/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_condition_value_content %}\n<div class=\"sw-condition-line-item-in-category sw-condition__condition-value\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_condition_line_item_in_category_field_operator %}\n    <sw-condition-operator-select\n        v-bind=\"{ operators, condition }\"\n        :plural=\"matchesAll\"\n        :disabled=\"disabled || undefined\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_condition_line_item_in_category_field_identifiers %}\n    <sw-entity-multi-select\n        v-if=\"!isEmpty\"\n        size=\"medium\"\n        :disabled=\"disabled || undefined\"\n        entity=\"category\"\n        :entity-collection=\"categories\"\n        description-position=\"bottom\"\n        @update:entity-collection=\"setCategoryIds\"\n    >\n        <template #result-item=\"{ item, index, isSelected, addItem, displayLabelProperty, isSelectionDisabled, descriptionPosition, highlightSearchTerm, searchTerm }\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_condition_line_item_in_category_field_result_item %}\n            <sw-select-result\n                :selected=\"isSelected(item)\"\n                v-bind=\"{ item, index }\"\n                :disabled=\"isSelectionDisabled(item)\"\n                :description-position=\"descriptionPosition\"\n                @item-select=\"addItem\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_condition_line_item_in_category_field_result_item_content %}\n                <span class=\"sw-condition-line-item-in-category__result-item\">\n                    <sw-highlight-text\n                        v-if=\"highlightSearchTerm\"\n                        :text=\"displayLabelProperty(item)\"\n                        :search-term=\"searchTerm\"\n                    />\n                    <template v-else>\n                        {{ displayLabelProperty(item) }}\n                    </template>\n\n                    <sw-help-text\n                        v-if=\"item.productAssignmentType === 'product_stream'\"\n                        class=\"sw-condition-line-item-in-category__help-text\"\n                        :text=\"$tc('global.sw-condition.condition.categoryWithProductStreamTooltip')\"\n                    />\n                </span>\n                {% endblock %}\n\n                <template #description>\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_condition_line_item_in_category_field_description %}\n                    <slot\n                        name=\"result-description-property\"\n                        v-bind=\"{ item }\"\n                    >\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_condition_line_item_in_category_field_description_default %}\n                        {{ getCategoryBreadcrumb(item) }}\n                        {% endblock %}\n                    </slot>\n                    {% endblock %}\n                </template>\n            </sw-select-result>\n            {% endblock %}\n        </template>\n    </sw-entity-multi-select>\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-condition-line-item-in-category.html.twig';\nimport './sw-condition-line-item-in-category.scss';\n\nconst { Component, Context } = Cicada;\nconst { mapPropertyErrors } = Component.getComponentHelper();\nconst { EntityCollection, Criteria } = Cicada.Data;\n\n/**\n * @package services-settings\n */\nComponent.extend('sw-condition-line-item-in-category', 'sw-condition-base-line-item', {\n    template,\n    inheritAttrs: false,\n\n    inject: [\n        'repositoryFactory',\n        'feature',\n    ],\n\n    data() {\n        return {\n            categories: null,\n            inputKey: 'categoryIds',\n        };\n    },\n\n    computed: {\n        categoryRepository() {\n            return this.repositoryFactory.create('category');\n        },\n\n        operators() {\n            return this.conditionDataProviderService.addEmptyOperatorToOperatorSet(\n                this.conditionDataProviderService.getOperatorSet('multiStore'),\n            );\n        },\n\n        categoryIds: {\n            get() {\n                this.ensureValueExist();\n                return this.condition.value.categoryIds || [];\n            },\n            set(categoryIds) {\n                this.ensureValueExist();\n                this.condition.value = {\n                    ...this.condition.value,\n                    categoryIds,\n                };\n            },\n        },\n\n        ...mapPropertyErrors('condition', [\n            'value.operator',\n            'value.categoryIds',\n        ]),\n\n        currentError() {\n            return this.conditionValueOperatorError || this.conditionValueCategoryIdsError;\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.categories = new EntityCollection(\n                this.categoryRepository.route,\n                this.categoryRepository.entityName,\n                Context.api,\n            );\n\n            if (this.categoryIds.length <= 0) {\n                return Promise.resolve();\n            }\n\n            const criteria = new Criteria(1, 25);\n            criteria.setIds(this.categoryIds);\n\n            return this.categoryRepository.search(criteria, Context.api).then((categories) => {\n                this.categories = categories;\n            });\n        },\n\n        setCategoryIds(categories) {\n            this.categoryIds = categories.getIds();\n            this.categories = categories;\n        },\n\n        getCategoryBreadcrumb(category) {\n            if (!category.breadcrumb || Object.keys(category.breadcrumb).length === 0) {\n                return category.name;\n            }\n\n            return Object.values(category.breadcrumb).join(' / ');\n        },\n    },\n});\n"],"names":["template","Component","Context","mapPropertyErrors","EntityCollection","Criteria","categoryIds","criteria","categories","category"],"mappings":"AAAA,MAAeA,EAAA,k6DCGT,CAAE,UAAAC,EAAW,QAAAC,CAAS,EAAG,OACzB,CAAE,kBAAAC,CAAmB,EAAGF,EAAU,qBAClC,CAAE,iBAAAG,EAAkB,SAAAC,GAAa,OAAO,KAK9CJ,EAAU,OAAO,qCAAsC,8BAA+B,CAClF,SAAAD,EACA,aAAc,GAEd,OAAQ,CACJ,oBACA,SACH,EAED,MAAO,CACH,MAAO,CACH,WAAY,KACZ,SAAU,aACtB,CACK,EAED,SAAU,CACN,oBAAqB,CACjB,OAAO,KAAK,kBAAkB,OAAO,UAAU,CAClD,EAED,WAAY,CACR,OAAO,KAAK,6BAA6B,8BACrC,KAAK,6BAA6B,eAAe,YAAY,CAC7E,CACS,EAED,YAAa,CACT,KAAM,CACF,YAAK,iBAAgB,EACd,KAAK,UAAU,MAAM,aAAe,CAAA,CAC9C,EACD,IAAIM,EAAa,CACb,KAAK,iBAAgB,EACrB,KAAK,UAAU,MAAQ,CACnB,GAAG,KAAK,UAAU,MAClB,YAAAA,CACpB,CACa,CACJ,EAED,GAAGH,EAAkB,YAAa,CAC9B,iBACA,mBACZ,CAAS,EAED,cAAe,CACX,OAAO,KAAK,6BAA+B,KAAK,8BACnD,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CAOf,GANA,KAAK,WAAa,IAAIC,EAClB,KAAK,mBAAmB,MACxB,KAAK,mBAAmB,WACxBF,EAAQ,GACxB,EAEgB,KAAK,YAAY,QAAU,EAC3B,OAAO,QAAQ,UAGnB,MAAMK,EAAW,IAAIF,EAAS,EAAG,EAAE,EACnC,OAAAE,EAAS,OAAO,KAAK,WAAW,EAEzB,KAAK,mBAAmB,OAAOA,EAAUL,EAAQ,GAAG,EAAE,KAAMM,GAAe,CAC9E,KAAK,WAAaA,CAClC,CAAa,CACJ,EAED,eAAeA,EAAY,CACvB,KAAK,YAAcA,EAAW,SAC9B,KAAK,WAAaA,CACrB,EAED,sBAAsBC,EAAU,CAC5B,MAAI,CAACA,EAAS,YAAc,OAAO,KAAKA,EAAS,UAAU,EAAE,SAAW,EAC7DA,EAAS,KAGb,OAAO,OAAOA,EAAS,UAAU,EAAE,KAAK,KAAK,CACvD,CACJ,CACL,CAAC"}
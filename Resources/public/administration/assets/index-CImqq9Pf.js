const a=`{% block sw_order_create_options %} <div class="sw-order-create-options"> {% block sw_order_create_options_container %} {% block sw_order_create_options_order %} {% block sw_order_create_options_order_headline %} <h3 class="sw-order-create-options__headline"> {{ $tc('sw-order.initialModal.options.textHeadlineOrder') }} </h3> {% endblock %} {% block sw_order_create_options_order_switch_disable_auto_promotion %} <sw-switch-field class="sw-order-create-options__disable-auto-promotion" :value="disabledAutoPromotion" :label="$tc('sw-order.createBase.labelToggleAutomaticPromotions')" @update:value="onToggleAutoPromotion" /> {% endblock %} {% block sw_order_create_options_order_field_container %} <sw-container class="sw-order-create-options__order-container" gap="0px 32px" columns="1fr 1fr" > {% block sw_order_create_options_order_language %} <sw-entity-single-select v-model:value="context.languageId" entity="language" class="sw-order-create-options__order-language" :criteria="salesChannelCriteria" :label="$tc('sw-order.createBase.labelOrderLanguage')" :placeholder="$tc('sw-order.createBase.placeholderOrderLanguage')" show-clearable-button /> {% endblock %} {% block sw_order_create_options_promotions %} <sw-multi-tag-select class="sw-order-create-options__promotion-code" :value="promotionCodes" :label="$tc('sw-order.createBase.labelPromotions')" :validate="validatePromotions" @update:value="changePromotionCodes" > <template #message-add-data> <span>{{ $tc('sw-order.initialModal.options.placeholderAddPromotion') }}</span> </template> <template #message-enter-valid-data> <span>{{ $tc('sw-order.createBase.placeholderAddPromotion') }}</span> </template> </sw-multi-tag-select> {% endblock %} </sw-container> {% endblock %} {% endblock %} {% block sw_order_create_options_payment %} {% block sw_order_create_options_payment_headline %} <h3>{{ $tc('sw-order.initialModal.options.textHeadlinePayment') }}</h3> {% endblock %} {% block sw_order_create_options_payment_container %} <sw-container class="sw-order-create-options__payment-container" gap="0px 32px" columns="1fr 1fr" > {% block sw_order_create_options_payment_method %} <sw-entity-single-select v-model:value="context.paymentMethodId" entity="payment_method" label-property="distinguishableName" class="sw-order-create-options__payment-method" :criteria="paymentMethodCriteria" :label="$tc('sw-order.createBase.labelPaymentMethod')" :placeholder="$tc('sw-order.createBase.placeholderPaymentMethod')" show-clearable-button /> {% endblock %} {% block sw_order_create_options_billing_address %} <sw-order-customer-address-select v-model:value="context.billingAddressId" class="sw-order-create-options__billing-address" :label="$tc('sw-order.createBase.labelBillingAddress')" :placeholder="$tc('sw-order.createBase.placeholderBillingAddress')" :same-address-value="context.shippingAddressId" :customer="customer" /> {% endblock %} {% block sw_order_create_options_order_currency %} <sw-entity-single-select v-model:value="context.currencyId" class="sw-order-create-options__currency-select" entity="currency" :criteria="salesChannelCriteria" :label="$tc('sw-order.createBase.labelCurrency')" :placeholder="$tc('sw-order.createBase.placeholderCurrency')" show-clearable-button /> {% endblock %} </sw-container> {% endblock %} {% endblock %} {% block sw_order_create_options_shipment %} {% block sw_order_create_options_shipment_headline %} <h3>{{ $tc('sw-order.initialModal.options.textHeadlineShipment') }}</h3> {% endblock %} <sw-container class="sw-order-create-options__shipping-container" gap="0px 32px" columns="1fr 1fr" > {% block sw_order_create_options_shipping_method %} <sw-entity-single-select v-model:value="context.shippingMethodId" class="sw-order-create-options__shipping-method" entity="shipping_method" show-clearable-button :criteria="shippingMethodCriteria" :label="$tc('sw-order.createBase.labelShippingMethod')" :placeholder="$tc('sw-order.createBase.placeholderShippingMethod')" /> {% endblock %} <sw-number-field v-model:value="shippingCost" class="sw-order-create-options__shipping-cost" :label="$tc('sw-order.initialModal.options.labelShippingCosts')" @update:value="onChangeShippingCost" > <template #suffix> {{ currency.symbol }} </template> </sw-number-field> <sw-switch-field v-model:value="isSameAsBillingAddress" name="sw-field--isSameAsBillingAddress" :label="$tc('sw-order.initialModal.options.labelSameAsBillingAddress')" /> {% block sw_order_create_options_shipping_address %} <sw-order-customer-address-select v-model:value="context.shippingAddressId" class="sw-order-create-options__shipping-address" :label="$tc('sw-order.createBase.labelShippingAddress')" :placeholder="$tc('sw-order.createBase.placeholderShippingAddress')" :same-address-label="$tc('sw-order.initialModal.options.textSameAsBillingAddress')" :same-address-value="context.billingAddressId" :customer="customer" :disabled="isSameAsBillingAddress" /> {% endblock %} </sw-container> {% endblock %} {% endblock %} </div> {% endblock %}`,{Component:i,Store:o}=Shopware,{Criteria:s}=Shopware.Data,d=i.wrapComponentConfig({template:a,props:{promotionCodes:{type:Array,required:!0},disabledAutoPromotion:{type:Boolean,required:!0},context:{type:Object,required:!0}},data(){return{shippingCost:0,isSameAsBillingAddress:!1,promotionCodeTags:[]}},computed:{salesChannelId(){var e,t;return((t=(e=o.get("swOrder").context)==null?void 0:e.salesChannel)==null?void 0:t.id)??""},salesChannelCriteria(){const e=new s;return this.salesChannelId&&e.addFilter(s.equals("salesChannels.id",this.salesChannelId)),e},shippingMethodCriteria(){const e=new s;return e.addFilter(s.equals("active",1)),this.salesChannelId&&e.addFilter(s.equals("salesChannels.id",this.salesChannelId)),e},paymentMethodCriteria(){const e=new s;return e.addFilter(s.equals("active",1)),this.salesChannelId&&e.addFilter(s.equals("salesChannels.id",this.salesChannelId)),e},customer(){return o.get("swOrder").customer},currency(){return o.get("swOrder").context.currency},cart(){return o.get("swOrder").cart},cartDelivery(){var e;return(e=this.cart)==null?void 0:e.deliveries[0]}},watch:{cartDelivery:{immediate:!0,handler(e){var t;this.shippingCost=((t=e==null?void 0:e.shippingCosts)==null?void 0:t.totalPrice)??0}},"context.currencyId":{async handler(){await this.updateCartContext()}},"context.shippingAddressId":{handler(){this.updateSameAsBillingAddressToggle()}},"context.billingAddressId":{handler(){this.updateSameAsBillingAddressToggle()}},"context.shippingMethodId":{async handler(){await this.updateCartContext()}},"context.languageId"(e){e&&(o.get("context").api.languageId=e)},isSameAsBillingAddress(e){e&&(this.context.shippingAddressId=this.context.billingAddressId)}},created(){this.createdComponent()},methods:{updateSameAsBillingAddressToggle(){this.isSameAsBillingAddress=this.context.shippingAddressId===this.context.billingAddressId},createdComponent(){this.promotionCodeTags=[...this.promotionCodes],this.isSameAsBillingAddress=this.context.shippingAddressId===this.context.billingAddressId},validatePromotions(e){const t=e.trim();return t.length<=0?!1:!this.promotionCodes.find(r=>r===t)},onToggleAutoPromotion(e){this.$emit("auto-promotion-toggle",e)},changePromotionCodes(e){this.$emit("promotions-change",e)},async updateCartContext(){this.salesChannelId&&(await this.updateOrderContext(),await this.loadCart())},async updateOrderContext(){await o.get("swOrder").updateOrderContext({context:this.context,salesChannelId:this.salesChannelId,contextToken:this.cart.token})},async loadCart(){await o.get("swOrder").getCart({salesChannelId:this.salesChannelId,contextToken:this.cart.token})},onChangeShippingCost(e){this.$emit("shipping-cost-change",e)}}});export{d as default};

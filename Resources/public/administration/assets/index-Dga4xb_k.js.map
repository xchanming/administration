{"version":3,"file":"index-Dga4xb_k.js","sources":["../../../app/administration/src/app/component/form/select/base/sw-select-result-list/sw-select-result-list.html.twig","../../../app/administration/src/app/component/form/select/base/sw-select-result-list/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_select_result_list %}\n<div class=\"sw-select-result-list\">\n    <sw-popover\n        class=\"sw-select-result-list-popover\"\n        :popover-class=\"popoverClass\"\n        :z-index=\"1100\"\n        :resize-width=\"popoverResizeWidth\"\n        :popover-config-extension=\"{ stopScrollPropagation: true }\"\n    >\n        <div\n            ref=\"popoverContent\"\n            class=\"sw-select-result-list__content\"\n            :class=\"{ 'sw-select-result-list__content_empty': isLoading && (!options || options.length <= 0) }\"\n            @scroll=\"onScroll\"\n        >\n            <slot name=\"before-item-list\"></slot>\n\n            <ul class=\"sw-select-result-list__item-list\">\n                <template v-for=\"(item, index) in options\">\n                    <slot\n                        name=\"result-item\"\n                        v-bind=\"{ item, index }\"\n                    ></slot>\n                </template>\n            </ul>\n\n            <slot name=\"after-item-list\"></slot>\n\n            <div\n                v-if=\"!isLoading && options && options.length < 1\"\n                class=\"sw-select-result-list__empty\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_select_result_list_empty_icon %}\n                <sw-icon\n                    name=\"regular-search\"\n                    size=\"20px\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_select_result_list_empty_text %}\n                {{ emptyMessageText }}\n                {% endblock %}\n            </div>\n        </div>\n    </sw-popover>\n</div>\n{% endblock %}\n","import template from './sw-select-result-list.html.twig';\nimport './sw-select-result-list.scss';\n\nconst { Component } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n * @status ready\n * @description Base component for rendering result lists.\n * @example-type code-only\n */\nComponent.register('sw-select-result-list', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    provide() {\n        return {\n            setActiveItemIndex: this.setActiveItemIndex,\n        };\n    },\n\n    inject: ['feature'],\n\n    emits: [\n        'item-select',\n        'active-item-change',\n        'outside-click',\n        'paginate',\n        'item-select-by-keyboard',\n    ],\n\n    props: {\n        options: {\n            type: Array,\n            required: false,\n            default() {\n                return [];\n            },\n        },\n\n        emptyMessage: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        focusEl: {\n            type: [\n                HTMLDocument,\n                HTMLElement,\n            ],\n            required: false,\n            default() {\n                return document;\n            },\n        },\n\n        isLoading: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        popoverClasses: {\n            type: Array,\n            required: false,\n            default() {\n                return [];\n            },\n        },\n\n        popoverResizeWidth: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            activeItemIndex: -1,\n        };\n    },\n\n    computed: {\n        emptyMessageText() {\n            return this.emptyMessage || this.$tc('global.sw-select-result-list.messageNoResults');\n        },\n\n        popoverClass() {\n            return [\n                ...this.popoverClasses,\n                'sw-select-result-list-popover-wrapper',\n            ];\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    beforeUnmount() {\n        this.beforeDestroyedComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.addEventListeners();\n        },\n\n        // @deprecated tag:v6.7.0 - Will be removed without replacement\n        mountedComponent() {},\n\n        beforeDestroyedComponent() {\n            this.removeEventListeners();\n        },\n\n        setActiveItemIndex(index) {\n            this.activeItemIndex = index;\n            this.emitActiveItemIndex();\n        },\n\n        addEventListeners() {\n            document.addEventListener('keydown', this.navigate);\n            document.addEventListener('click', this.checkOutsideClick);\n\n            Cicada.Utils.EventBus.on('item-select', this.onItemSelect);\n        },\n\n        removeEventListeners() {\n            document.removeEventListener('keydown', this.navigate);\n            document.removeEventListener('click', this.checkOutsideClick);\n\n            Cicada.Utils.EventBus.off('item-select', this.onItemSelect);\n        },\n\n        onItemSelect(item) {\n            this.$emit('item-select', item);\n        },\n\n        emitActiveItemIndex(shouldFocus = false) {\n            this.$emit('active-item-change', this.activeItemIndex, {\n                shouldFocus,\n            });\n            Cicada.Utils.EventBus.emit('active-item-change', this.activeItemIndex, {\n                shouldFocus,\n            });\n        },\n\n        /**\n         *\n         * @param event {Event}\n         */\n        checkOutsideClick(event) {\n            event.stopPropagation();\n\n            const popoverContentClicked = this.$refs.popoverContent?.contains(event.target);\n            const componentClicked = this.$el.contains(event.target);\n            const parentClicked = this.$parent.$parent.$el.contains(event.target);\n\n            if (popoverContentClicked || componentClicked || parentClicked) {\n                return;\n            }\n\n            this.$emit('outside-click');\n        },\n\n        navigate({ key }) {\n            key = key.toUpperCase();\n            if (key === 'ARROWDOWN') {\n                this.navigateNext();\n                return;\n            }\n\n            if (key === 'ARROWUP') {\n                this.navigatePrevious();\n                return;\n            }\n\n            if (key === 'ENTER') {\n                this.emitClicked();\n            }\n        },\n\n        navigateNext() {\n            if (this.activeItemIndex >= this.options.length - 1) {\n                this.$emit('paginate');\n                return;\n            }\n\n            this.activeItemIndex += 1;\n\n            this.emitActiveItemIndex({ shouldFocus: true });\n            this.updateScrollPosition();\n        },\n\n        navigatePrevious() {\n            if (this.activeItemIndex === -1) {\n                // Set the active item to the last item in the list\n                this.activeItemIndex = this.options.length - 1;\n            } else if (this.activeItemIndex > 0) {\n                this.activeItemIndex -= 1;\n            }\n\n            this.emitActiveItemIndex({ shouldFocus: true });\n            this.updateScrollPosition();\n        },\n\n        updateScrollPosition() {\n            // wait until the new active item is rendered and has the active class\n            this.$nextTick(() => {\n                const resultContainer = document.querySelector('.sw-select-result-list__content');\n                const activeItem = resultContainer.querySelector('.is--active');\n                const itemHeight = activeItem.offsetHeight;\n                const activeItemPosition = activeItem.offsetTop;\n                const actualScrollTop = resultContainer.scrollTop;\n\n                if (activeItemPosition === 0) {\n                    return;\n                }\n\n                // Check if we need to scroll down\n                if (resultContainer.offsetHeight + actualScrollTop < activeItemPosition + itemHeight) {\n                    resultContainer.scrollTop += itemHeight;\n                }\n\n                // Check if we need to scroll up\n                if (actualScrollTop !== 0 && activeItemPosition - actualScrollTop - itemHeight <= 0) {\n                    resultContainer.scrollTop -= itemHeight;\n                }\n            });\n        },\n\n        emitClicked() {\n            // This emit is subscribed in the sw-result component. They can for example be disabled and need\n            // choose on their own if they are selected\n            this.$emit('item-select-by-keyboard', this.activeItemIndex);\n            Cicada.Utils.EventBus.emit('item-select-by-keyboard', this.activeItemIndex);\n        },\n\n        onScroll(event) {\n            if (this.getBottomDistance(event.target) > 0) {\n                return;\n            }\n\n            this.$emit('paginate');\n        },\n\n        getBottomDistance(element) {\n            return element.scrollHeight - element.clientHeight - element.scrollTop;\n        },\n    },\n});\n"],"names":["template","Component","index","item","shouldFocus","event","_a","popoverContentClicked","componentClicked","parentClicked","key","resultContainer","activeItem","itemHeight","activeItemPosition","actualScrollTop","element"],"mappings":"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"}
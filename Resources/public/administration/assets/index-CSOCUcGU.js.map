{"version":3,"file":"index-CSOCUcGU.js","sources":["../../../app/administration/src/module/sw-cms/elements/buy-box/config/sw-cms-el-config-buy-box.html.twig","../../../app/administration/src/module/sw-cms/elements/buy-box/config/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_element_buy_box_config %}\n<div class=\"sw-cms-el-config-buy-box\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_buy_box_config_tabs %}\n    <sw-tabs\n        position-identifier=\"sw-cms-element-config-buy-box\"\n        class=\"sw-cms-el-config-buy-box__tabs\"\n        default-item=\"content\"\n    >\n        <template #default=\"{ active }\">\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_element_buy_box_config_tab_content %}\n            <sw-tabs-item\n                name=\"content\"\n                :title=\"$tc('sw-cms.elements.general.config.tab.content')\"\n                :active-tab=\"active\"\n            >\n                {{ $tc('sw-cms.elements.general.config.tab.content') }}\n            </sw-tabs-item>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_element_buy_box_config_tab_option %}\n            <sw-tabs-item\n                name=\"options\"\n                :title=\"$tc('sw-cms.elements.general.config.tab.options')\"\n                :active-tab=\"active\"\n            >\n                {{ $tc('sw-cms.elements.general.config.tab.options') }}\n            </sw-tabs-item>\n            {% endblock %}\n        </template>\n\n        <template #content=\"{ active }\">\n            <div\n                v-if=\"active === 'content'\"\n                class=\"sw-cms-el-config-buy-box__tab-content\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_buy_box_config_content_warning %}\n                <sw-alert\n                    v-if=\"isProductPage\"\n                    class=\"sw-cms-el-config-buy-box__warning\"\n                    variant=\"info\"\n                >\n                    {{ $tc('sw-cms.elements.buyBox.infoText.tooltipSettingDisabled') }}\n                </sw-alert>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_buy_box_config_product_select %}\n                <sw-entity-single-select\n                    v-if=\"!isProductPage\"\n                    ref=\"cmsProductSelection\"\n                    v-model:value=\"element.config.product.value\"\n                    entity=\"product\"\n                    :label=\"$tc('sw-cms.elements.buyBox.config.label.selection')\"\n                    :placeholder=\"$tc('sw-cms.elements.buyBox.config.placeholder.selection')\"\n                    :criteria=\"productCriteria\"\n                    :context=\"productSelectContext\"\n                    show-clearable-button\n                    @update:value=\"onProductChange\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_cms_element_buy_box_config_product_variant_label %}\n                    <template #selection-label-property=\"{ item }\">\n                        <sw-product-variant-info :variations=\"item.variation\">\n                            {{ item.translated.name || item.name }}\n                        </sw-product-variant-info>\n                    </template>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_cms_element_buy_box_config_product_select_result_item %}\n                    <template #result-item=\"{ item, index }\">\n                        <sw-select-result\n                            v-bind=\"{ item, index }\"\n                        >\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_entity_single_select_base_results_list_result_label %}\n                            <span class=\"sw-select-result__result-item-text\">\n                                <sw-product-variant-info :variations=\"item.variation\">\n                                    {{ item.translated.name || item.name }}\n                                </sw-product-variant-info>\n                            </span>\n                            {% endblock %}\n                        </sw-select-result>\n                    </template>\n                    {% endblock %}\n\n                </sw-entity-single-select>\n                {% endblock %}\n            </div>\n\n            <div\n                v-if=\"active === 'options'\"\n                class=\"sw-cms-el-config-buy-box__tab-options\"\n            >\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_buy_box_config_options %}\n                <sw-select-field\n                    v-model:value=\"element.config.alignment.value\"\n                    class=\"sw-cms-el-config-buy-box__alignment\"\n                    :label=\"$tc('sw-cms.elements.general.config.label.alignment')\"\n                    :placeholder=\"$tc('sw-cms.elements.general.config.label.alignment')\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_cms_element_product_box_config_alignment_options %}\n                    <option value=\"flex-start\">\n                        {{ $tc('sw-cms.elements.general.config.label.verticalAlignTop') }}\n                    </option>\n                    <option value=\"center\">\n                        {{ $tc('sw-cms.elements.general.config.label.verticalAlignCenter') }}\n                    </option>\n                    <option value=\"flex-end\">\n                        {{ $tc('sw-cms.elements.general.config.label.verticalAlignBottom') }}\n                    </option>\n                    {% endblock %}\n\n                </sw-select-field>\n                {% endblock %}\n\n            </div>\n        </template>\n    </sw-tabs>\n    {% endblock %}\n\n</div>\n{% endblock %}\n","import template from './sw-cms-el-config-buy-box.html.twig';\nimport './sw-cms-el-config-buy-box.scss';\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n/**\n * @private\n * @package discovery\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    emits: ['element-update'],\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    computed: {\n        productRepository() {\n            return this.repositoryFactory.create('product');\n        },\n\n        productSelectContext() {\n            return {\n                ...Cicada.Context.api,\n                inheritance: true,\n            };\n        },\n\n        productCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('options.group');\n\n            return criteria;\n        },\n\n        selectedProductCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('deliveryTime');\n\n            return criteria;\n        },\n\n        isProductPage() {\n            return this.cmsPageState?.currentPage?.type === 'product_detail';\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('buy-box');\n        },\n\n        async onProductChange(productId) {\n            if (productId) {\n                await this.fetchProduct(productId);\n            } else {\n                this.deleteProduct();\n            }\n\n            this.$emit('element-update', this.element);\n        },\n\n        async fetchProduct(productId) {\n            const product = await this.productRepository.get(\n                productId,\n                this.productSelectContext,\n                this.selectedProductCriteria,\n            );\n\n            this.element.config.product.value = productId;\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                this.$set(this.element.data, 'productId', productId);\n                this.$set(this.element.data, 'product', product);\n            } else {\n                this.element.data.productId = productId;\n                this.element.data.product = product;\n            }\n        },\n\n        deleteProduct() {\n            this.element.config.product.value = null;\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                this.$set(this.element.data, 'productId', null);\n                this.$set(this.element.data, 'product', null);\n            } else {\n                this.element.data.productId = null;\n                this.element.data.product = null;\n            }\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","criteria","_a","_b","productId","product"],"mappings":"AAAA,MAAeA,EAAA,+qGCGT,CAAE,MAAAC,CAAO,EAAG,OACZ,CAAE,SAAAC,CAAQ,EAAK,OAAO,KAMbC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,gBAAgB,EAExB,OAAQ,CACJC,EAAM,UAAU,aAAa,CAChC,EAED,SAAU,CACN,mBAAoB,CAChB,OAAO,KAAK,kBAAkB,OAAO,SAAS,CACjD,EAED,sBAAuB,CACnB,MAAO,CACH,GAAG,OAAO,QAAQ,IAClB,YAAa,EAC7B,CACS,EAED,iBAAkB,CACd,MAAMG,EAAW,IAAIF,EAAS,EAAG,EAAE,EACnC,OAAAE,EAAS,eAAe,eAAe,EAEhCA,CACV,EAED,yBAA0B,CACtB,MAAMA,EAAW,IAAIF,EAAS,EAAG,EAAE,EACnC,OAAAE,EAAS,eAAe,cAAc,EAE/BA,CACV,EAED,eAAgB,CDjDxB,IAAAC,EAAAC,ECkDY,QAAOA,GAAAD,EAAA,KAAK,eAAL,YAAAA,EAAmB,cAAnB,YAAAC,EAAgC,QAAS,gBACnD,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAkB,SAAS,CACnC,EAED,MAAM,gBAAgBC,EAAW,CACzBA,EACA,MAAM,KAAK,aAAaA,CAAS,EAEjC,KAAK,cAAa,EAGtB,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,EAED,MAAM,aAAaA,EAAW,CAC1B,MAAMC,EAAU,MAAM,KAAK,kBAAkB,IACzCD,EACA,KAAK,qBACL,KAAK,uBACrB,EAEY,KAAK,QAAQ,OAAO,QAAQ,MAAQA,EAEhC,KAAK,gBAAgB,cAAc,GACnC,KAAK,KAAK,KAAK,QAAQ,KAAM,YAAaA,CAAS,EACnD,KAAK,KAAK,KAAK,QAAQ,KAAM,UAAWC,CAAO,IAE/C,KAAK,QAAQ,KAAK,UAAYD,EAC9B,KAAK,QAAQ,KAAK,QAAUC,EAEnC,EAED,eAAgB,CACZ,KAAK,QAAQ,OAAO,QAAQ,MAAQ,KAEhC,KAAK,gBAAgB,cAAc,GACnC,KAAK,KAAK,KAAK,QAAQ,KAAM,YAAa,IAAI,EAC9C,KAAK,KAAK,KAAK,QAAQ,KAAM,UAAW,IAAI,IAE5C,KAAK,QAAQ,KAAK,UAAY,KAC9B,KAAK,QAAQ,KAAK,QAAU,KAEnC,CACJ,CACL"}
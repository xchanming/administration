{"version":3,"file":"index-BjIf12PB.js","sources":["../../../app/administration/src/module/sw-settings-media/page/sw-settings-media/sw-settings-media.html.twig","../../../app/administration/src/module/sw-settings-media/page/sw-settings-media/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_media_index %}\n<sw-page class=\"sw-settings-media\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_media_header %}\n    <template #smart-bar-header>\n        <h2>{{ $tc('sw-settings.index.title') }} <sw-icon\n            name=\"regular-chevron-right-xs\"\n            small\n        /> {{ $tc('sw-settings-media.general.title') }} </h2>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_media_smart_bar_actions %}\n    <template #smart-bar-actions>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_media_actions_save %}\n        <sw-button-process\n            class=\"sw-settings-media__save-action\"\n            :is-loading=\"isLoading\"\n            :process-success=\"isSaveSuccessful\"\n            :disabled=\"isLoading\"\n            variant=\"primary\"\n            @update:process-success=\"saveFinish\"\n            @click=\"onSave\"\n        >\n            {{ $tc('sw-settings-media.general.buttonSave') }}\n        </sw-button-process>\n            {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_media_content %}\n    <template #content>\n        <sw-card-view>\n            <template v-if=\"isLoading\">\n                <sw-skeleton />\n                <sw-skeleton />\n            </template>\n\n            <sw-system-config\n                v-show=\"!isLoading\"\n                ref=\"systemConfig\"\n                domain=\"core.media\"\n                @loading-changed=\"onLoadingChanged\"\n            >\n                <template #card-element-last>\n                    <mt-slider\n                        v-if=\"!isLoading\"\n                        v-model=\"sliderValue\"\n                        :min=\"0\"\n                        :max=\"100\"\n                        @input=\"onSliderChange\"\n                    />\n                </template>\n            </sw-system-config>\n\n        </sw-card-view>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","/**\n * @package innovation\n */\n\nimport template from './sw-settings-media.html.twig';\n\nconst { Mixin } = Cicada;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'systemConfigApiService',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    data() {\n        return {\n            isLoading: false,\n            isSaveSuccessful: false,\n            sliderValue: 0,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        async createdComponent() {\n            this.isLoading = true;\n            try {\n                const values = await this.systemConfigApiService.getValues('core.media');\n                this.sliderValue =\n                    values['core.media.defaultLightIntensity'] !== undefined\n                        ? values['core.media.defaultLightIntensity']\n                        : 100;\n            } catch (error) {\n                if (error?.response?.data?.errors) {\n                    this.createErrorNotification(error.response.data.errors);\n                }\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        saveFinish() {\n            this.isSaveSuccessful = false;\n        },\n\n        onSave() {\n            this.isSaveSuccessful = false;\n            this.isLoading = true;\n\n            this.$refs.systemConfig\n                .saveAll()\n                .then(async () => {\n                    this.isLoading = false;\n                    this.isSaveSuccessful = true;\n\n                    await this.systemConfigApiService.batchSave({\n                        null: {\n                            'core.media.defaultLightIntensity': this.sliderValue,\n                        },\n                    });\n                })\n                .catch((err) => {\n                    this.isLoading = false;\n                    this.createNotificationError({\n                        message: err,\n                    });\n                });\n        },\n\n        onLoadingChanged(loading) {\n            this.isLoading = loading;\n        },\n\n        onSliderChange(value) {\n            this.sliderValue = value;\n        },\n    },\n};\n"],"names":["template","Mixin","index","_a","_b","values","error","err","loading","value"],"mappings":"AAAA,MAAeA,EAAA,6tCCMT,CAAE,MAAAC,CAAO,EAAG,OAGHC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,wBACH,EAED,OAAQ,CACJC,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,MAAO,CACH,UAAW,GACX,iBAAkB,GAClB,YAAa,CACzB,CACK,EAED,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAc,CACtC,CACK,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,MAAM,kBAAmB,CDzCjC,IAAAE,EAAAC,EC0CY,KAAK,UAAY,GACjB,GAAI,CACA,MAAMC,EAAS,MAAM,KAAK,uBAAuB,UAAU,YAAY,EACvE,KAAK,YACDA,EAAO,kCAAkC,IAAM,OACzCA,EAAO,kCAAkC,EACzC,GACb,OAAQC,EAAO,EACRF,GAAAD,EAAAG,GAAA,YAAAA,EAAO,WAAP,YAAAH,EAAiB,OAAjB,MAAAC,EAAuB,QACvB,KAAK,wBAAwBE,EAAM,SAAS,KAAK,MAAM,CAE3E,QAAsB,CACN,KAAK,UAAY,EACpB,CACJ,EAED,YAAa,CACT,KAAK,iBAAmB,EAC3B,EAED,QAAS,CACL,KAAK,iBAAmB,GACxB,KAAK,UAAY,GAEjB,KAAK,MAAM,aACN,QAAS,EACT,KAAK,SAAY,CACd,KAAK,UAAY,GACjB,KAAK,iBAAmB,GAExB,MAAM,KAAK,uBAAuB,UAAU,CACxC,KAAM,CACF,mCAAoC,KAAK,WAC5C,CACzB,CAAqB,CACrB,CAAiB,EACA,MAAOC,GAAQ,CACZ,KAAK,UAAY,GACjB,KAAK,wBAAwB,CACzB,QAASA,CACjC,CAAqB,CACrB,CAAiB,CACR,EAED,iBAAiBC,EAAS,CACtB,KAAK,UAAYA,CACpB,EAED,eAAeC,EAAO,CAClB,KAAK,YAAcA,CACtB,CACJ,CACL"}
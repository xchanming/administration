{"version":3,"file":"index-Ct5vDQcA.js","sources":["../../../app/administration/src/module/sw-product/component/sw-product-category-form/sw-product-category-form.html.twig","../../../app/administration/src/module/sw-product/component/sw-product-category-form/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_product_category_form %}\n<div class=\"sw-product-category-form\">\n    <sw-container class=\"sw-product-category-form__description\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_category_form_visibility_title %}\n        <span class=\"sw-product-category-form__visibility-title\">\n            {{ $tc('sw-product.visibility.labelVisibility') }}\n        </span>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_category_form_visibility_body %}\n        <p class=\"sw-product-category-form__visibility-body\">\n            {{ $tc('sw-product.visibility.bodyVisibility') }}\n        </p>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_category_form_visibility_field %}\n        <sw-inherit-wrapper\n            ref=\"productVisibilitiesInheritance\"\n            v-model:value=\"product.visibilities\"\n            :has-parent=\"!!parentProduct.id\"\n            class=\"sw-product-category-form__visibility_field\"\n            :inherited-value=\"parentProduct.visibilities\"\n            :label=\"$tc('sw-product.visibility.labelVisibility')\"\n            :custom-remove-inheritance-function=\"visibilitiesRemoveInheritanceFunction\"\n            is-association\n        >\n            <template #content=\"{ currentValue, isInherited, updateCurrentValue }\">\n                <sw-product-visibility-select\n                    v-if=\"!loading.product && !loading.parentProduct && multiSelectVisible\"\n                    ref=\"productVisibility\"\n                    :key=\"isInherited\"\n                    class=\"sw-product-detail__select-visibility\"\n                    :entity-collection=\"currentValue\"\n                    :placeholder=\"$tc('sw-product.visibility.placeholderVisibility')\"\n                    :disabled=\"isInherited || !allowEdit\"\n                    @update:entity-collection=\"updateCurrentValue\"\n                />\n            </template>\n        </sw-inherit-wrapper>\n        {% endblock %}\n    </sw-container>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_category_form_visibility_field_link %}\n    <sw-container\n        columns=\"repeat(auto-fit, minmax(250px, 1fr))\"\n        align=\"center\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_category_form_active_field %}\n        <sw-inherit-wrapper\n            v-model:value=\"product.active\"\n            :has-parent=\"!!parentProduct.id\"\n            :inherited-value=\"parentProduct.active\"\n        >\n            <template #content=\"props\">\n                <sw-switch-field\n                    class=\"sw-field--product-active no-margin\"\n                    :error=\"productActiveError\"\n                    :map-inheritance=\"props\"\n                    :label=\"$tc('sw-product.settingsForm.labelActive')\"\n                    :disabled=\"props.isInherited || !allowEdit\"\n                    :value=\"props.currentValue\"\n                    @update:value=\"props.updateCurrentValue\"\n                />\n            </template>\n        </sw-inherit-wrapper>\n        {% endblock %}\n        <a\n            v-if=\"hasSelectedVisibilities && showModeSetting\"\n            class=\"sw-card__quick-link advanced-visibility\"\n            style=\"text-align: right; display: block\"\n            role=\"button\"\n            tabindex=\"0\"\n            @click=\"displayAdvancedVisibility\"\n            @keydown.enter=\"displayAdvancedVisibility\"\n        >\n            {{ $tc('sw-product.visibility.linkAdvancedVisibility') }} <sw-icon\n                name=\"regular-long-arrow-right\"\n                small\n            />\n        </a>\n    </sw-container>\n\n    <sw-modal\n        v-if=\"displayVisibilityDetail\"\n        :title=\"$tc('sw-product.visibility.textHeadline')\"\n        class=\"sw-product-category-form__visibility_modal\"\n        variant=\"large\"\n        @modal-close=\"closeAdvancedVisibility\"\n    >\n        <p>{{ $tc('sw-product.visibility.visibilityModalDescription') }}</p>\n\n        <sw-product-visibility-detail :disabled=\"!allowEdit\" />\n\n        <template #modal-footer>\n            <sw-button\n                variant=\"primary\"\n                size=\"small\"\n                @click=\"closeAdvancedVisibility\"\n            >\n                {{ $tc('global.default.apply') }}\n            </sw-button>\n        </template>\n    </sw-modal>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_category_form_category_field %}\n    <sw-container\n        rows=\"2em 4em 4em\"\n        class=\"sw-product-feature-set-form__description\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_category_form_categories_title %}\n        <span class=\"sw-product-category-form__visibility-title\">\n            {{ $tc('sw-product.categoryForm.categoriesTitle') }}\n        </span>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_category_form_categories_body %}\n        <p class=\"sw-product-category-form__categories-body\">\n            {{ $tc('sw-product.categoryForm.descriptionCategories') }}\n        </p>\n        <p class=\"sw-product-category-form__categories-body\">\n            {{ $tc('sw-product.categoryForm.descriptionTags') }}\n        </p>\n        {% endblock %}\n        <sw-inherit-wrapper\n            v-model:value=\"product.categories\"\n            is-association\n            :has-parent=\"!!parentProduct.id\"\n            :inherited-value=\"parentProduct.categories\"\n            :label=\"$tc('sw-product.categoryForm.labelCategory')\"\n        >\n            <template #content=\"{ currentValue, isInherited }\">\n                <sw-category-tree-field\n                    :key=\"isInherited\"\n                    class=\"sw-product-detail__select-category\"\n                    :categories-collection=\"currentValue ? currentValue : []\"\n                    :disabled=\"isInherited || !allowEdit\"\n                    :placeholder=\"$tc('sw-product.categoryForm.placeholderCategory')\"\n                />\n            </template>\n        </sw-inherit-wrapper>\n    </sw-container>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_category_form_tags_field %}\n    <sw-inherit-wrapper\n        v-if=\"showModeSetting\"\n        v-model:value=\"product.tags\"\n        class=\"sw-product-category-form__tag-field-wrapper\"\n        :inherited-value=\"parentProduct.tags\"\n        :has-parent=\"!!parentProduct.id\"\n        is-association\n        :help-text=\"$tc('sw-product.categoryForm.helpTextTags')\"\n        :label=\"$tc('global.sw-tag-field.title')\"\n    >\n\n        <template #content=\"{ currentValue, isInherited, updateCurrentValue }\">\n            <sw-entity-tag-select\n                v-if=\"!loading.product && !loading.parentProduct\"\n                :key=\"isInherited\"\n                class=\"sw-product-category-form__tag-field\"\n                :disabled=\"isInherited || !allowEdit\"\n                :placeholder=\"$tc('sw-product.categoryForm.placeholderTags')\"\n                :error=\"productTagsError\"\n                :entity-collection=\"currentValue ? currentValue : {}\"\n                @update:entity-collection=\"updateCurrentValue\"\n            />\n        </template>\n    </sw-inherit-wrapper>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_category_form_search_keyword_field %}\n    <sw-inherit-wrapper\n        v-if=\"showModeSetting\"\n        v-model:value=\"product.customSearchKeywords\"\n        :help-text=\"$tc('sw-product.categoryForm.helpTextSearchKeyword')\"\n        :inherited-value=\"parentProduct.customSearchKeywords\"\n        :has-parent=\"!!parentProduct.id\"\n        :label=\"$tc('sw-product.categoryForm.labelSearchKeyword')\"\n    >\n        <template #content=\"{ currentValue, isInherited, updateCurrentValue }\">\n            <sw-multi-tag-select\n                class=\"sw-product-category-form__search-keyword-field\"\n                :value=\"currentValue ? currentValue : []\"\n                :placeholder=\"$tc('sw-product.categoryForm.placeholderSearchKeywords')\"\n                @update:value=\"updateCurrentValue\"\n            >\n                <template #message-add-data>\n                    <span>{{ $tc('sw-product.categoryForm.textAddSearchKeyword') }}</span>\n                </template>\n                <template #message-enter-valid-data>\n                    <span>{{ $tc('sw-product.categoryForm.textEnterValidSearchKeyword') }}</span>\n                </template>\n            </sw-multi-tag-select>\n        </template>\n    </sw-inherit-wrapper>\n    {% endblock %}\n</div>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport template from './sw-product-category-form.html.twig';\nimport './sw-product-category-form.scss';\n\nconst { Context, Mixin } = Cicada;\nconst { EntityCollection, Criteria } = Cicada.Data;\nconst { mapPropertyErrors, mapState, mapGetters } = Cicada.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'systemConfigApiService',\n        'feature',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        allowEdit: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            displayVisibilityDetail: false,\n            multiSelectVisible: true,\n            salesChannel: null,\n            defaultVisibility: 30,\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'product',\n            'parentProduct',\n            'localMode',\n            'loading',\n        ]),\n\n        ...mapGetters('swProductDetail', [\n            'isChild',\n            'showModeSetting',\n        ]),\n\n        ...mapPropertyErrors('product', [\n            'tags',\n            'active',\n        ]),\n\n        hasSelectedVisibilities() {\n            if (this.product && this.product.visibilities) {\n                return this.product.visibilities.length > 0;\n            }\n            return false;\n        },\n\n        productVisibilityRepository() {\n            return this.repositoryFactory.create(this.product.visibilities.entity);\n        },\n\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.salesChannel = new EntityCollection(\n                '/sales-channel',\n                'sales_channel',\n                Cicada.Context.api,\n                new Criteria(1, 25),\n            );\n        },\n\n        displayAdvancedVisibility() {\n            this.displayVisibilityDetail = true;\n        },\n\n        closeAdvancedVisibility() {\n            this.displayVisibilityDetail = false;\n        },\n\n        visibilitiesRemoveInheritanceFunction(newValue) {\n            newValue.forEach(({ productVersionId, salesChannelId, salesChannel, visibility }) => {\n                const visibilities = this.productVisibilityRepository.create(Context.api);\n\n                Object.assign(visibilities, {\n                    productId: this.product.id,\n                    productVersionId,\n                    salesChannelId,\n                    salesChannel,\n                    visibility,\n                });\n\n                this.product.visibilities.push(visibilities);\n            });\n\n            this.$refs.productVisibilitiesInheritance.forceInheritanceRemove = true;\n\n            return this.product.visibilities;\n        },\n    },\n};\n"],"names":["template","Context","Mixin","EntityCollection","Criteria","mapPropertyErrors","mapState","mapGetters","index","newValue","productVersionId","salesChannelId","salesChannel","visibility","visibilities"],"mappings":"AAAA,MAAeA,EAAA,m5LCOT,CAAE,QAAAC,EAAS,MAAAC,CAAO,EAAG,OACrB,CAAE,iBAAAC,EAAkB,SAAAC,GAAa,OAAO,KACxC,CAAE,kBAAAC,EAAmB,SAAAC,EAAU,WAAAC,CAAU,EAAK,OAAO,UAAU,qBAGtDC,EAAA,CACX,SAAAR,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,yBACA,SACH,EAED,OAAQ,CACJE,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,UAAW,CACP,KAAM,QACN,SAAU,GAEV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,wBAAyB,GACzB,mBAAoB,GACpB,aAAc,KACd,kBAAmB,EAC/B,CACK,EAED,SAAU,CACN,GAAGI,EAAS,kBAAmB,CAC3B,UACA,gBACA,YACA,SACZ,CAAS,EAED,GAAGC,EAAW,kBAAmB,CAC7B,UACA,iBACZ,CAAS,EAED,GAAGF,EAAkB,UAAW,CAC5B,OACA,QACZ,CAAS,EAED,yBAA0B,CACtB,OAAI,KAAK,SAAW,KAAK,QAAQ,aACtB,KAAK,QAAQ,aAAa,OAAS,EAEvC,EACV,EAED,6BAA8B,CAC1B,OAAO,KAAK,kBAAkB,OAAO,KAAK,QAAQ,aAAa,MAAM,CACxE,EAED,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,eAAe,CACvD,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,aAAe,IAAIF,EACpB,iBACA,gBACA,OAAO,QAAQ,IACf,IAAIC,EAAS,EAAG,EAAE,CAClC,CACS,EAED,2BAA4B,CACxB,KAAK,wBAA0B,EAClC,EAED,yBAA0B,CACtB,KAAK,wBAA0B,EAClC,EAED,sCAAsCK,EAAU,CAC5C,OAAAA,EAAS,QAAQ,CAAC,CAAE,iBAAAC,EAAkB,eAAAC,EAAgB,aAAAC,EAAc,WAAAC,KAAiB,CACjF,MAAMC,EAAe,KAAK,4BAA4B,OAAOb,EAAQ,GAAG,EAExE,OAAO,OAAOa,EAAc,CACxB,UAAW,KAAK,QAAQ,GACxB,iBAAAJ,EACA,eAAAC,EACA,aAAAC,EACA,WAAAC,CACpB,CAAiB,EAED,KAAK,QAAQ,aAAa,KAAKC,CAAY,CAC3D,CAAa,EAED,KAAK,MAAM,+BAA+B,uBAAyB,GAE5D,KAAK,QAAQ,YACvB,CACJ,CACL"}
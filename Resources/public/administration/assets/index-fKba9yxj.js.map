{"version":3,"file":"index-fKba9yxj.js","sources":["../../../app/administration/src/module/sw-cms/elements/product-box/config/sw-cms-el-config-product-box.html.twig","../../../app/administration/src/module/sw-cms/elements/product-box/config/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_element_product_box_config %}\n<div class=\"sw-cms-el-config-product-box\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_product_box_config_product_select %}\n    <sw-entity-single-select\n        ref=\"cmsProductSelection\"\n        v-model:value=\"element.config.product.value\"\n        :label=\"$tc('sw-cms.elements.productBox.config.label.selection')\"\n        :placeholder=\"$tc('sw-cms.elements.productBox.config.placeholder.selection')\"\n        entity=\"product\"\n        :criteria=\"productCriteria\"\n        :context=\"productSelectContext\"\n        show-clearable-button\n        @update:value=\"onProductChange\"\n    >\n        <template #selection-label-property=\"{ item }\">\n            <sw-product-variant-info\n                :variations=\"item.variation\"\n            >\n                {{ item.translated.name || item.name }}\n            </sw-product-variant-info>\n        </template>\n        <template #result-item=\"{ item, index }\">\n            <slot\n                name=\"result-item\"\n                v-bind=\"{ item, index }\"\n            >\n                <sw-select-result\n                    v-bind=\"{ item, index }\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_entity_single_select_base_results_list_result_label %}\n                    <span class=\"sw-select-result__result-item-text\">\n                        <sw-product-variant-info :variations=\"item.variation\">\n                            {{ item.translated.name || item.name }}\n                        </sw-product-variant-info>\n                    </span>\n                    {% endblock %}\n                </sw-select-result>\n            </slot>\n        </template>\n    </sw-entity-single-select>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_product_box_config_layout_select %}\n    <sw-select-field\n        v-model:value=\"element.config.boxLayout.value\"\n        :label=\"$tc('sw-cms.elements.productBox.config.label.layoutType')\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_product_box_config_layout_select_options %}\n        <option value=\"standard\">\n            {{ $tc('sw-cms.elements.productBox.config.label.layoutTypeStandard') }}\n        </option>\n        <option value=\"image\">\n            {{ $tc('sw-cms.elements.productBox.config.label.layoutTypeImage') }}\n        </option>\n        <option value=\"minimal\">\n            {{ $tc('sw-cms.elements.productBox.config.label.layoutTypeMinimal') }}\n        </option>\n        {% endblock %}\n    </sw-select-field>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_product_box_config_displaymode_select %}\n    <sw-select-field\n        v-model:value=\"element.config.displayMode.value\"\n        :label=\"$tc('sw-cms.elements.general.config.label.displayMode')\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_product_box_config_displaymode_select_options %}\n        <option value=\"standard\">\n            {{ $tc('sw-cms.elements.general.config.label.displayModeStandard') }}\n        </option>\n        <option value=\"cover\">\n            {{ $tc('sw-cms.elements.general.config.label.displayModeCover') }}\n        </option>\n        <option value=\"contain\">\n            {{ $tc('sw-cms.elements.general.config.label.displayModeContain') }}\n        </option>\n        {% endblock %}\n    </sw-select-field>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_product_box_config_settings_vertical_align %}\n    <sw-select-field\n        v-model:value=\"element.config.verticalAlign.value\"\n        :label=\"$tc('sw-cms.elements.general.config.label.verticalAlign')\"\n        :placeholder=\"$tc('sw-cms.elements.general.config.label.verticalAlign')\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_product_box_config_settings_vertical_align_options %}\n        <option value=\"flex-start\">\n            {{ $tc('sw-cms.elements.general.config.label.verticalAlignTop') }}\n        </option>\n        <option value=\"center\">\n            {{ $tc('sw-cms.elements.general.config.label.verticalAlignCenter') }}\n        </option>\n        <option value=\"flex-end\">\n            {{ $tc('sw-cms.elements.general.config.label.verticalAlignBottom') }}\n        </option>\n        {% endblock %}\n    </sw-select-field>\n    {% endblock %}\n</div>\n{% endblock %}\n","import Criteria from 'src/core/data/criteria.data';\nimport template from './sw-cms-el-config-product-box.html.twig';\nimport './sw-cms-el-config-product-box.scss';\n\nconst { Mixin } = Cicada;\n\n/**\n * @private\n * @package discovery\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    emits: ['element-update'],\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    computed: {\n        productRepository() {\n            return this.repositoryFactory.create('product');\n        },\n\n        productSelectContext() {\n            const context = { ...Cicada.Context.api };\n            context.inheritance = true;\n\n            return context;\n        },\n\n        productCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('options.group');\n\n            return criteria;\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('product-box');\n        },\n\n        onProductChange(productId) {\n            if (!productId) {\n                this.element.config.product.value = null;\n                if (this.isCompatEnabled('INSTANCE_SET')) {\n                    this.$set(this.element.data, 'productId', null);\n                    this.$set(this.element.data, 'product', null);\n                } else {\n                    this.element.data.productId = null;\n                    this.element.data.product = null;\n                }\n            } else {\n                const criteria = new Criteria(1, 25);\n                criteria.addAssociation('cover');\n                criteria.addAssociation('options.group');\n\n                this.productRepository.get(productId, this.productSelectContext, criteria).then((product) => {\n                    this.element.config.product.value = productId;\n\n                    if (this.isCompatEnabled('INSTANCE_SET')) {\n                        this.$set(this.element.data, 'productId', productId);\n                        this.$set(this.element.data, 'product', product);\n                    } else {\n                        this.element.data.productId = productId;\n                        this.element.data.product = product;\n                    }\n                });\n            }\n\n            this.$emit('element-update', this.element);\n        },\n    },\n};\n"],"names":["template","Mixin","index","context","criteria","Criteria","productId","product"],"mappings":"+EAAA,MAAeA,EAAA,unGCIT,CAAE,MAAAC,CAAO,EAAG,OAMHC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,gBAAgB,EAExB,OAAQ,CACJC,EAAM,UAAU,aAAa,CAChC,EAED,SAAU,CACN,mBAAoB,CAChB,OAAO,KAAK,kBAAkB,OAAO,SAAS,CACjD,EAED,sBAAuB,CACnB,MAAME,EAAU,CAAE,GAAG,OAAO,QAAQ,GAAG,EACvC,OAAAA,EAAQ,YAAc,GAEfA,CACV,EAED,iBAAkB,CACd,MAAMC,EAAW,IAAIC,EAAS,EAAG,EAAE,EACnC,OAAAD,EAAS,eAAe,eAAe,EAEhCA,CACV,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAkB,aAAa,CACvC,EAED,gBAAgBE,EAAW,CACvB,GAAI,CAACA,EACD,KAAK,QAAQ,OAAO,QAAQ,MAAQ,KAChC,KAAK,gBAAgB,cAAc,GACnC,KAAK,KAAK,KAAK,QAAQ,KAAM,YAAa,IAAI,EAC9C,KAAK,KAAK,KAAK,QAAQ,KAAM,UAAW,IAAI,IAE5C,KAAK,QAAQ,KAAK,UAAY,KAC9B,KAAK,QAAQ,KAAK,QAAU,UAE7B,CACH,MAAMF,EAAW,IAAIC,EAAS,EAAG,EAAE,EACnCD,EAAS,eAAe,OAAO,EAC/BA,EAAS,eAAe,eAAe,EAEvC,KAAK,kBAAkB,IAAIE,EAAW,KAAK,qBAAsBF,CAAQ,EAAE,KAAMG,GAAY,CACzF,KAAK,QAAQ,OAAO,QAAQ,MAAQD,EAEhC,KAAK,gBAAgB,cAAc,GACnC,KAAK,KAAK,KAAK,QAAQ,KAAM,YAAaA,CAAS,EACnD,KAAK,KAAK,KAAK,QAAQ,KAAM,UAAWC,CAAO,IAE/C,KAAK,QAAQ,KAAK,UAAYD,EAC9B,KAAK,QAAQ,KAAK,QAAUC,EAEpD,CAAiB,CACJ,CAED,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,CACJ,CACL"}
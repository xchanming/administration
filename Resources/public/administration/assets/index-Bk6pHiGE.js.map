{"version":3,"file":"index-Bk6pHiGE.js","sources":["../../../app/administration/src/module/sw-sales-channel/component/sw-sales-channel-defaults-select/sw-sales-channel-defaults-select.html.twig","../../../app/administration/src/module/sw-sales-channel/component/sw-sales-channel-defaults-select/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_sales_channel_defaults_select %}\n<sw-container\n    class=\"sw-sales-channel-defaults-select\"\n    gap=\"0px 30px\"\n    columns=\"1fr 200px\"\n>\n    <template v-if=\"salesChannel\">\n        <sw-entity-multi-select\n            :label-property=\"labelProperty\"\n            :disabled=\"disabled\"\n            :class=\"multiSelectClass\"\n            :label=\"propertyLabel\"\n            :help-text=\"helpText\"\n            :entity-collection=\"propertyCollection\"\n            :criteria=\"criteria\"\n            @update:entity-collection=\"updateCollection\"\n        >\n            <template\n                v-if=\"shouldShowActiveState\"\n                #result-label-preview=\"{ item }\"\n            >\n                <sw-icon\n                    class=\"sw-sales-channel-defaults-select__active-icon\"\n                    size=\"6\"\n                    :color=\"getActiveIconColor(item)\"\n                    name=\"solid-circle\"\n                />\n            </template>\n        </sw-entity-multi-select>\n\n        <sw-entity-single-select\n            :label-property=\"labelProperty\"\n            :disabled=\"disabled\"\n            :class=\"singleSelectClass\"\n            :label=\"defaultPropertyLabel\"\n            :help-text=\"helpText\"\n            required\n            show-clearable-button\n            :entity=\"propertyEntityName\"\n            :value=\"defaultId\"\n            :error=\"defaultsValueError\"\n            :criteria=\"criteria\"\n            :selection-disabling-method=\"isDisabledItem\"\n            :disabled-selection-tooltip=\"{ message: disabledTooltipMessage }\"\n            @update:value=\"updateDefault\"\n        />\n    </template>\n</sw-container>\n{% endblock %}\n","/**\n * @package discovery\n */\n\nimport './sw-sales-channel-defaults-select.scss';\nimport template from './sw-sales-channel-defaults-select.html.twig';\n\nconst { Mixin } = Cicada;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['feature'],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        salesChannel: {\n            type: Object,\n            required: false,\n            default: null,\n        },\n\n        propertyName: {\n            type: String,\n            required: true,\n        },\n\n        propertyLabel: {\n            type: String,\n            required: true,\n        },\n\n        defaultPropertyName: {\n            type: String,\n            required: true,\n        },\n\n        defaultPropertyLabel: {\n            type: String,\n            required: true,\n        },\n\n        propertyNameInDomain: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        helpText: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        criteria: {\n            type: Object,\n            required: false,\n            default: undefined,\n        },\n\n        disabledTooltipMessage: {\n            type: String,\n            required: false,\n            default: '',\n        },\n\n        shouldShowActiveState: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    computed: {\n        propertyCollection: {\n            get() {\n                if (!this.salesChannel) {\n                    return [];\n                }\n\n                return this.salesChannel[this.propertyName];\n            },\n            set(newCollection) {\n                if (!this.salesChannel) {\n                    return;\n                }\n                this.salesChannel[this.propertyName] = newCollection;\n            },\n        },\n\n        defaultId: {\n            get() {\n                if (!this.salesChannel) {\n                    return null;\n                }\n\n                return this.salesChannel[this.defaultPropertyName];\n            },\n            set(newDefaultId) {\n                if (this.salesChannel) {\n                    this.salesChannel[this.defaultPropertyName] = newDefaultId;\n                }\n            },\n        },\n\n        propertyEntityName() {\n            return this.propertyCollection ? this.propertyCollection.entity : null;\n        },\n\n        propertyNameKebabCase() {\n            return Cicada.Utils.string.kebabCase(this.propertyName);\n        },\n\n        multiSelectClass() {\n            return `sw-sales-channel-detail__select-${this.propertyNameKebabCase}`;\n        },\n\n        singleSelectClass() {\n            return `sw-sales-channel-detail__assign-${this.propertyNameKebabCase}`;\n        },\n\n        defaultsValueError() {\n            return Cicada.State.getters['error/getApiError'](this.salesChannel, this.defaultPropertyName);\n        },\n\n        labelProperty() {\n            if (this.propertyEntityName === 'payment_method') {\n                return 'distinguishableName';\n            }\n\n            return 'name';\n        },\n    },\n\n    methods: {\n        updateCollection(collection) {\n            if (collection.length > this.propertyCollection.length) {\n                this.addItem(collection);\n                return;\n            }\n            this.removeItem(collection);\n        },\n\n        getNotInCollection(collectionWith, collectionWithout) {\n            const additionalElement = collectionWith.find((searched) => {\n                return !collectionWithout.some((included) => {\n                    return included.id === searched.id;\n                });\n            });\n\n            return additionalElement || null;\n        },\n\n        addItem(collection) {\n            const added = this.getNotInCollection(collection, this.propertyCollection);\n            this.propertyCollection = collection;\n\n            if (this.propertyCollection.length === 1) {\n                this.defaultId = added.id;\n            }\n        },\n\n        removeItem(collection) {\n            const removed = this.getNotInCollection(this.propertyCollection, collection);\n            if (removed === null) {\n                return;\n            }\n\n            if (this.propertyNameInDomain) {\n                const domain = this.getDomainUsingValue(removed);\n                if (domain !== null) {\n                    this.createNotificationError({\n                        message: this.$tc('sw-sales-channel.sw-sales-channel-defaults-select.messageError', 0, {\n                            url: domain.url,\n                        }),\n                    });\n                    return;\n                }\n            }\n\n            this.propertyCollection = collection;\n            if (this.defaultId === removed.id) {\n                this.defaultId = null;\n            }\n        },\n\n        getDomainUsingValue(item) {\n            return (\n                this.salesChannel.domains.find((domain) => {\n                    return domain[this.propertyNameInDomain] === item.id;\n                }) || null\n            );\n        },\n\n        updateDefault(defaultId, defaultEntity) {\n            this.defaultId = defaultId;\n\n            if (!!defaultId && !this.propertyCollection.has(defaultId)) {\n                this.propertyCollection.add(defaultEntity);\n            }\n        },\n\n        isDisabledItem(item) {\n            return item.active === false;\n        },\n\n        getActiveIconColor(item) {\n            return this.isDisabledItem(item) ? '#d1d9e0' : '#37d046';\n        },\n    },\n};\n"],"names":["template","Mixin","index","newCollection","newDefaultId","collection","collectionWith","collectionWithout","searched","included","added","removed","domain","item","defaultId","defaultEntity"],"mappings":"AAAA,MAAeA,EAAA,mnCCOT,CAAE,MAAAC,CAAO,EAAG,OAGHC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,SAAS,EAElB,OAAQ,CACJC,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,aAAc,CACV,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EAED,aAAc,CACV,KAAM,OACN,SAAU,EACb,EAED,cAAe,CACX,KAAM,OACN,SAAU,EACb,EAED,oBAAqB,CACjB,KAAM,OACN,SAAU,EACb,EAED,qBAAsB,CAClB,KAAM,OACN,SAAU,EACb,EAED,qBAAsB,CAClB,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EAED,SAAU,CACN,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EAED,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EAED,SAAU,CACN,KAAM,OACN,SAAU,GACV,QAAS,MACZ,EAED,uBAAwB,CACpB,KAAM,OACN,SAAU,GACV,QAAS,EACZ,EAED,sBAAuB,CACnB,KAAM,QACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,SAAU,CACN,mBAAoB,CAChB,KAAM,CACF,OAAK,KAAK,aAIH,KAAK,aAAa,KAAK,YAAY,EAH/B,EAId,EACD,IAAIE,EAAe,CACV,KAAK,eAGV,KAAK,aAAa,KAAK,YAAY,EAAIA,EAC1C,CACJ,EAED,UAAW,CACP,KAAM,CACF,OAAK,KAAK,aAIH,KAAK,aAAa,KAAK,mBAAmB,EAHtC,IAId,EACD,IAAIC,EAAc,CACV,KAAK,eACL,KAAK,aAAa,KAAK,mBAAmB,EAAIA,EAErD,CACJ,EAED,oBAAqB,CACjB,OAAO,KAAK,mBAAqB,KAAK,mBAAmB,OAAS,IACrE,EAED,uBAAwB,CACpB,OAAO,OAAO,MAAM,OAAO,UAAU,KAAK,YAAY,CACzD,EAED,kBAAmB,CACf,MAAO,mCAAmC,KAAK,qBAAqB,EACvE,EAED,mBAAoB,CAChB,MAAO,mCAAmC,KAAK,qBAAqB,EACvE,EAED,oBAAqB,CACjB,OAAO,OAAO,MAAM,QAAQ,mBAAmB,EAAE,KAAK,aAAc,KAAK,mBAAmB,CAC/F,EAED,eAAgB,CACZ,OAAI,KAAK,qBAAuB,iBACrB,sBAGJ,MACV,CACJ,EAED,QAAS,CACL,iBAAiBC,EAAY,CACzB,GAAIA,EAAW,OAAS,KAAK,mBAAmB,OAAQ,CACpD,KAAK,QAAQA,CAAU,EACvB,MACH,CACD,KAAK,WAAWA,CAAU,CAC7B,EAED,mBAAmBC,EAAgBC,EAAmB,CAOlD,OAN0BD,EAAe,KAAME,GACpC,CAACD,EAAkB,KAAME,GACrBA,EAAS,KAAOD,EAAS,EACnC,CACJ,GAE2B,IAC/B,EAED,QAAQH,EAAY,CAChB,MAAMK,EAAQ,KAAK,mBAAmBL,EAAY,KAAK,kBAAkB,EACzE,KAAK,mBAAqBA,EAEtB,KAAK,mBAAmB,SAAW,IACnC,KAAK,UAAYK,EAAM,GAE9B,EAED,WAAWL,EAAY,CACnB,MAAMM,EAAU,KAAK,mBAAmB,KAAK,mBAAoBN,CAAU,EAC3E,GAAIM,IAAY,KAIhB,IAAI,KAAK,qBAAsB,CAC3B,MAAMC,EAAS,KAAK,oBAAoBD,CAAO,EAC/C,GAAIC,IAAW,KAAM,CACjB,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,iEAAkE,EAAG,CACnF,IAAKA,EAAO,GACxC,CAAyB,CACzB,CAAqB,EACD,MACH,CACJ,CAED,KAAK,mBAAqBP,EACtB,KAAK,YAAcM,EAAQ,KAC3B,KAAK,UAAY,MAExB,EAED,oBAAoBE,EAAM,CACtB,OACI,KAAK,aAAa,QAAQ,KAAMD,GACrBA,EAAO,KAAK,oBAAoB,IAAMC,EAAK,EACrD,GAAK,IAEb,EAED,cAAcC,EAAWC,EAAe,CACpC,KAAK,UAAYD,EAEXA,GAAa,CAAC,KAAK,mBAAmB,IAAIA,CAAS,GACrD,KAAK,mBAAmB,IAAIC,CAAa,CAEhD,EAED,eAAeF,EAAM,CACjB,OAAOA,EAAK,SAAW,EAC1B,EAED,mBAAmBA,EAAM,CACrB,OAAO,KAAK,eAAeA,CAAI,EAAI,UAAY,SAClD,CACJ,CACL"}
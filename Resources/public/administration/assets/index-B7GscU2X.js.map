{"version":3,"file":"index-B7GscU2X.js","sources":["../../../app/administration/src/app/component/form/select/entity/advanced-selection-entities/sw-advanced-selection-product/sw-advanced-selection-product.html.twig","../../../app/administration/src/app/component/form/select/entity/advanced-selection-entities/sw-advanced-selection-product/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_advanced_selection_product %}\n{# TODO - NEXT-20791 : remove store-key property. Filters should not be stored somewhere #}\n<sw-entity-advanced-selection-modal\n    entity-name=\"product\"\n    :entity-display-text=\"$tc('global.sw-entity-advanced-selection-modal.entity.product')\"\n    store-key=\"advancedSelection.product\"\n    :entity-context=\"productContext\"\n    :entity-columns=\"productColumns\"\n    :entity-filters=\"productFilters\"\n    :entity-associations=\"productAssociations\"\n    empty-image-path=\"/administration/static/img/empty-states/products-empty-state.svg\"\n    v-bind=\"$attrs\"\n    @selection-submit=\"$emit('selection-submit', $event)\"\n    @modal-close=\"$emit('modal-close', $event)\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_name_preview %}\n    <template #preview-name=\"{ item }\">\n        <sw-media-preview-v2 :source=\"item.cover ? item.cover.media : null\" />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_name %}\n    <template #column-name=\"{ item }\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_advanced_selection_product_list_grid_columns_name_content %}\n        <sw-product-variant-info\n            :variations=\"item.variation\"\n        >\n            <span>\n                {{ item.translated.name || item.name }}\n            </span>\n        </sw-product-variant-info>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_active %}\n    <template #column-active=\"{ item }\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_advanced_selection_product_list_grid_columns_active_content %}\n        <sw-icon\n            v-if=\"item.active\"\n            name=\"regular-checkmark-xs\"\n            small\n            class=\"is--active\"\n        />\n        <sw-icon\n            v-else\n            name=\"regular-times-s\"\n            small\n            class=\"is--inactive\"\n        />\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_price %}\n    <template\n        v-for=\"currency in currencies\"\n        #[`column-price-${currency.isoCode}`]=\"{ item }\"\n    >\n        {{ currencyFilter(getCurrencyPriceByCurrencyId(currency.id, item.price).gross, currency.isoCode) }}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_stock %}\n    <template #column-stock=\"{ item, compact }\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_advanced_selection_product_list_grid_columns_stock_content %}\n        {{ item.stock }}\n        <sw-color-badge :variant=\"stockColorVariantFilter(item.stock)\" />\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_release_date %}\n    <template #column-releaseDate=\"{ item }\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_advanced_selection_product_list_grid_columns_release_date_content %}\n        <template v-if=\"item.releaseDate\">\n            {{ dateFilter(item.releaseDate) }}\n        </template>\n        <template v-else>\n            -\n        </template>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_visibilities %}\n    <template #column-visibilities=\"{ item }\">\n        <span class=\"sw-data-grid__cell-value\">\n            <template v-if=\"item.visibilities.length > 0\">\n                <sw-label\n                    v-for=\"visibility in item.visibilities\"\n                    :key=\"visibility.id\"\n                    size=\"medium\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_advanced_selection_product_list_grid_columns_visibilities_content %}\n                    {{ visibility.salesChannel.translated.name || visibility.salesChannel.name }}\n                    {% endblock %}\n                </sw-label>\n            </template>\n            <template v-else>\n                -\n            </template>\n        </span>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_categories %}\n    <template #column-categories=\"{ item }\">\n        <span class=\"sw-data-grid__cell-value\">\n            <template v-if=\"item.categories.length > 0\">\n                <sw-label\n                    v-for=\"category in item.categories\"\n                    :key=\"category.id\"\n                    v-tooltip=\"{\n                        message: getCategoryBreadcrumb(category),\n                        width: 300\n                    }\"\n                    size=\"medium\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_advanced_selection_product_list_grid_columns_categories_content %}\n                    {{ category.translated.name || category.name }}\n                    {% endblock %}\n                </sw-label>\n            </template>\n            <template v-else>\n                -\n            </template>\n        </span>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_advanced_selection_product_list_grid_columns_tags %}\n    <template #column-tags=\"{ item }\">\n        <span class=\"sw-data-grid__cell-value\">\n            <template v-if=\"item.tags.length > 0\">\n                <sw-label\n                    v-for=\"tag in item.tags\"\n                    :key=\"tag.id\"\n                    size=\"medium\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_advanced_selection_product_list_grid_columns_tags_content %}\n                    {{ tag.name }}\n                    {% endblock %}\n                </sw-label>\n            </template>\n            <template v-else>\n                -\n            </template>\n        </span>\n    </template>\n    {% endblock %}\n</sw-entity-advanced-selection-modal>\n{% endblock %}\n","import template from './sw-advanced-selection-product.html.twig';\n\nconst { Component } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n/**\n * @private\n * @description Configures the advanced selection in entity selects.\n * Should only be used as a parameter `advanced-selection-component=\"sw-advanced-selection-product\"`\n * to `sw-entity-...-select` components.\n * @status prototype\n */\nComponent.register('sw-advanced-selection-product', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n    ],\n\n    emits: [\n        'selection-submit',\n        'modal-close',\n    ],\n\n    data() {\n        return {\n            currencies: [],\n        };\n    },\n\n    computed: {\n        currencyRepository() {\n            return this.repositoryFactory.create('currency');\n        },\n\n        productContext() {\n            return { ...Cicada.Context.api, inheritance: true };\n        },\n\n        currenciesColumns() {\n            return [...this.currencies]\n                .sort((a, b) => {\n                    return b.isSystemDefault ? 1 : -1;\n                })\n                .map((item) => {\n                    return {\n                        property: `price-${item.isoCode}`,\n                        dataIndex: `price.${item.id}`,\n                        label: `${item.name}`,\n                        routerLink: 'sw.product.detail',\n                        allowResize: true,\n                        currencyId: item.id,\n                        visible: item.isSystemDefault,\n                        align: 'right',\n                        useCustomSort: true,\n                    };\n                });\n        },\n\n        productColumns() {\n            return [\n                {\n                    property: 'name',\n                    label: this.$tc('sw-product.list.columnName'),\n                    routerLink: 'sw.product.detail',\n                    inlineEdit: 'string',\n                    allowResize: true,\n                    primary: true,\n                },\n                {\n                    property: 'productNumber',\n                    naturalSorting: true,\n                    label: this.$tc('sw-product.list.columnProductNumber'),\n                    align: 'right',\n                    allowResize: true,\n                },\n                {\n                    property: 'manufacturer.name',\n                    label: this.$tc('sw-product.list.columnManufacturer'),\n                    allowResize: true,\n                },\n                {\n                    property: 'active',\n                    label: this.$tc('sw-product.list.columnActive'),\n                    inlineEdit: 'boolean',\n                    allowResize: true,\n                    align: 'center',\n                },\n                ...this.currenciesColumns,\n                {\n                    property: 'stock',\n                    label: this.$tc('sw-product.list.columnInStock'),\n                    inlineEdit: 'number',\n                    allowResize: true,\n                    align: 'right',\n                },\n                {\n                    property: 'availableStock',\n                    label: this.$tc('sw-product.list.columnAvailableStock'),\n                    allowResize: true,\n                    align: 'right',\n                },\n                {\n                    property: 'releaseDate',\n                    label: this.$tc('sw-product.list.columnReleaseDate'),\n                    allowResize: true,\n                },\n                {\n                    property: 'visibilities',\n                    dataIndex: 'visibilities.salesChannel',\n                    label: this.$tc('sw-product.list.columnVisibilities'),\n                    allowResize: true,\n                    sortable: false,\n                    visible: false,\n                },\n                {\n                    property: 'categories',\n                    label: this.$tc('sw-product.list.columnCategories'),\n                    allowResize: true,\n                    sortable: false,\n                    visible: false,\n                },\n                {\n                    property: 'tags',\n                    label: this.$tc('sw-product.list.columnTags'),\n                    allowResize: true,\n                    sortable: false,\n                    visible: false,\n                },\n            ];\n        },\n\n        productFilters() {\n            return {\n                'active-filter': {\n                    property: 'active',\n                    label: this.$tc('sw-product.filters.activeFilter.label'),\n                    placeholder: this.$tc('sw-product.filters.activeFilter.placeholder'),\n                },\n                'stock-filter': {\n                    property: 'stock',\n                    label: this.$tc('sw-product.filters.stockFilter.label'),\n                    numberType: 'int',\n                    step: 1,\n                    min: 0,\n                    fromPlaceholder: this.$tc('sw-product.filters.fromPlaceholder'),\n                    toPlaceholder: this.$tc('sw-product.filters.toPlaceholder'),\n                },\n                'product-without-images-filter': {\n                    property: 'media',\n                    label: this.$tc('sw-product.filters.imagesFilter.label'),\n                    placeholder: this.$tc('sw-product.filters.imagesFilter.placeholder'),\n                    optionHasCriteria: this.$tc('sw-product.filters.imagesFilter.textHasCriteria'),\n                    optionNoCriteria: this.$tc('sw-product.filters.imagesFilter.textNoCriteria'),\n                },\n                'manufacturer-filter': {\n                    property: 'manufacturer',\n                    label: this.$tc('sw-product.filters.manufacturerFilter.label'),\n                    placeholder: this.$tc('sw-product.filters.manufacturerFilter.placeholder'),\n                },\n                'visibilities-filter': {\n                    property: 'visibilities.salesChannel',\n                    label: this.$tc('sw-product.filters.salesChannelsFilter.label'),\n                    placeholder: this.$tc('sw-product.filters.salesChannelsFilter.placeholder'),\n                },\n                'categories-filter': {\n                    property: 'categories',\n                    label: this.$tc('sw-product.filters.categoriesFilter.label'),\n                    placeholder: this.$tc('sw-product.filters.categoriesFilter.placeholder'),\n                    displayPath: true,\n                },\n                'sales-filter': {\n                    property: 'sales',\n                    label: this.$tc('sw-product.filters.salesFilter.label'),\n                    digits: 20,\n                    min: 0,\n                    fromPlaceholder: this.$tc('sw-product.filters.fromPlaceholder'),\n                    toPlaceholder: this.$tc('sw-product.filters.toPlaceholder'),\n                },\n                'price-filter': {\n                    property: 'price',\n                    label: this.$tc('sw-product.filters.priceFilter.label'),\n                    digits: 20,\n                    min: 0,\n                    fromPlaceholder: this.$tc('sw-product.filters.fromPlaceholder'),\n                    toPlaceholder: this.$tc('sw-product.filters.toPlaceholder'),\n                },\n                'tags-filter': {\n                    property: 'tags',\n                    label: this.$tc('sw-product.filters.tagsFilter.label'),\n                    placeholder: this.$tc('sw-product.filters.tagsFilter.placeholder'),\n                },\n                'release-date-filter': {\n                    property: 'releaseDate',\n                    label: this.$tc('sw-product.filters.releaseDateFilter.label'),\n                    dateType: 'datetime-local',\n                    fromFieldLabel: null,\n                    toFieldLabel: null,\n                    showTimeframe: true,\n                },\n            };\n        },\n\n        productAssociations() {\n            return [\n                'cover',\n                'media',\n                'manufacturer',\n                'options.group',\n                'visibilities.salesChannel',\n                'categories',\n                'tags',\n            ];\n        },\n\n        currencyFilter() {\n            return Cicada.Filter.getByName('currency');\n        },\n\n        dateFilter() {\n            return Cicada.Filter.getByName('date');\n        },\n\n        stockColorVariantFilter() {\n            return Cicada.Filter.getByName('stockColorVariant');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.currencyRepository.search(new Criteria(1, 500)).then((currencies) => {\n                this.currencies = currencies;\n            });\n        },\n\n        productHasVariants(productEntity) {\n            const childCount = productEntity.childCount;\n\n            return childCount !== null && childCount > 0;\n        },\n\n        getCurrencyPriceByCurrencyId(currencyId, prices) {\n            const priceForProduct = prices.find((price) => price.currencyId === currencyId);\n\n            if (priceForProduct) {\n                return priceForProduct;\n            }\n\n            return {\n                currencyId: null,\n                gross: null,\n                linked: true,\n                net: null,\n            };\n        },\n\n        getCategoryBreadcrumb(item) {\n            if (item.breadcrumb) {\n                return item.breadcrumb.join(' / ');\n            }\n            return item.translated.name || item.name;\n        },\n    },\n});\n"],"names":["template","Component","Criteria","a","b","item","currencies","productEntity","childCount","currencyId","prices","priceForProduct","price"],"mappings":"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"}
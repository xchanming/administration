{"version":3,"file":"index-9rdgPuRd.js","sources":["../../../app/administration/src/module/sw-category/component/sw-category-link-settings/sw-category-link-settings.html.twig","../../../app/administration/src/module/sw-category/component/sw-category-link-settings/index.js"],"sourcesContent":["{%  block sw_category_link_settings %}\n<sw-card\n    class=\"sw-category-link-settings\"\n    position-identifier=\"sw-category-link-settings\"\n    :title=\"$tc('sw-category.base.link.title')\"\n    :is-loading=\"isLoading\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_link_type_select_main %}\n    <sw-single-select\n        v-model:value=\"mainType\"\n        class=\"sw-category-link-settings__type\"\n        :disabled=\"!acl.can('category.editor') || undefined\"\n        :label=\"$tc('sw-category.base.link.mainTypeLabel')\"\n        :placeholder=\"$tc('sw-category.base.link.mainTypePlaceholder')\"\n        :options=\"linkTypeValues\"\n        show-clearable-button\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_link_type_select_entity %}\n    <sw-single-select\n        v-if=\"isInternal\"\n        v-model:value=\"category.linkType\"\n        class=\"sw-category-link-settings__entity\"\n        :disabled=\"!acl.can('category.editor') || undefined\"\n        :label=\"$tc('sw-category.base.link.internalTypeLabel')\"\n        :placeholder=\"$tc('sw-category.base.link.internalTypePlaceholder')\"\n        :options=\"entityValues\"\n        show-clearable-button\n        @update:value=\"changeEntity\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_link_type_select_entity_category %}\n    <template v-if=\"category.linkType === 'category'\">\n        <sw-category-tree-field\n            :categories-collection=\"categoriesCollection\"\n            :placeholder=\"categoryLinkPlaceholder\"\n            :category-criteria=\"categoryCriteria\"\n            :single-select=\"true\"\n            :label=\"$tc('global.entities.category')\"\n            class=\"sw-category-link-settings__selection-category\"\n            @selection-add=\"onSelectionAdd\"\n            @selection-remove=\"onSelectionRemove\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_link_type_select_entity_product %}\n    <sw-entity-single-select\n        v-if=\"category.linkType === 'product'\"\n        v-model:value=\"category.internalLink\"\n        class=\"sw-category-link-settings__selection-product\"\n        :disabled=\"!acl.can('category.editor') || undefined\"\n        :label=\"$tc('global.entities.product')\"\n        :placeholder=\"$tc('sw-category.base.link.productPlaceholder')\"\n        :criteria=\"productCriteria\"\n        :display-variants=\"true\"\n        entity=\"product\"\n        show-clearable-button\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_link_type_select_entity_landing_page %}\n    <sw-entity-single-select\n        v-if=\"category.linkType === 'landing_page'\"\n        v-model:value=\"category.internalLink\"\n        class=\"sw-category-link-settings__selection-landing-page\"\n        :disabled=\"!acl.can('category.editor') || undefined\"\n        :label=\"$tc('global.entities.landing_page')\"\n        :placeholder=\"$tc('sw-category.base.link.landingPagePlaceholder')\"\n        entity=\"landing_page\"\n        show-clearable-button\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_link_field %}\n    <sw-text-field\n        v-if=\"isExternal\"\n        v-model:value=\"category.externalLink\"\n        class=\"sw-category-link-settings__external-link\"\n        :disabled=\"!acl.can('category.editor') || undefined\"\n        :label=\"$tc('sw-category.base.link.linkLabel')\"\n        :placeholder=\"$tc('sw-category.base.link.linkLabel')\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_link_new_tab %}\n    <sw-switch-field\n        v-model:value=\"category.linkNewTab\"\n        class=\"sw-category-link-settings__link-new-tab\"\n        :disabled=\"!acl.can('category.editor') || undefined\"\n        :label=\"$tc('sw-category.base.link.linkNewTabLabel')\"\n    />\n    {% endblock %}\n</sw-card>\n{%  endblock %}\n","import template from './sw-category-link-settings.html.twig';\nimport './sw-category-link-settings.scss';\n\nconst { Criteria } = Cicada.Data;\n\n/**\n * @package discovery\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'acl',\n        'repositoryFactory',\n    ],\n\n    props: {\n        category: {\n            type: Object,\n            required: true,\n        },\n\n        isLoading: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            categoriesCollection: [],\n        };\n    },\n\n    computed: {\n        linkTypeValues() {\n            return [\n                {\n                    value: 'external',\n                    label: this.$tc('sw-category.base.link.type.external'),\n                },\n                {\n                    value: 'internal',\n                    label: this.$tc('sw-category.base.link.type.internal'),\n                },\n            ];\n        },\n\n        entityValues() {\n            return [\n                {\n                    value: 'category',\n                    label: this.$tc('global.entities.category'),\n                },\n                {\n                    value: 'product',\n                    label: this.$tc('global.entities.product'),\n                },\n                {\n                    value: 'landing_page',\n                    label: this.$tc('global.entities.landing_page'),\n                },\n            ];\n        },\n\n        mainType: {\n            get() {\n                if (this.isExternal || !this.category.linkType) {\n                    return this.category.linkType;\n                }\n\n                return 'internal';\n            },\n\n            set(value) {\n                if (value === 'external') {\n                    this.category.internalLink = null;\n                } else {\n                    this.category.externalLink = null;\n                }\n\n                this.category.linkType = value;\n            },\n        },\n\n        isExternal() {\n            return this.category.linkType === 'external';\n        },\n\n        isInternal() {\n            return !!this.category.linkType && this.category.linkType !== 'external';\n        },\n\n        productCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('options.group');\n\n            return criteria;\n        },\n\n        categoryCriteria() {\n            const criteria = new Criteria(1, null);\n            criteria.addFilter(Criteria.equals('type', 'page'));\n\n            return criteria;\n        },\n\n        internalLinkCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addFilter(Criteria.equals('id', this.category.internalLink));\n\n            return criteria;\n        },\n\n        categoryRepository() {\n            return this.repositoryFactory.create('category');\n        },\n\n        categoryLinkPlaceholder() {\n            return this.category.internalLink ? '' : this.$tc('sw-category.base.link.categoryPlaceholder');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            if (!this.category.linkType && this.category.externalLink) {\n                this.category.linkType = 'external';\n            }\n\n            this.createCategoryCollection();\n        },\n\n        changeEntity() {\n            if (!this.category.linkType) {\n                this.category.linkType = 'internal';\n            }\n\n            this.category.internalLink = null;\n        },\n\n        createCategoryCollection() {\n            this.categoryRepository.search(this.internalLinkCriteria, Cicada.Context.api).then((result) => {\n                this.categoriesCollection = result;\n            });\n        },\n\n        onSelectionAdd(item) {\n            this.category.internalLink = item.id;\n        },\n\n        onSelectionRemove() {\n            this.category.internalLink = null;\n        },\n    },\n};\n"],"names":["template","Criteria","index","value","criteria","result","item"],"mappings":"AAAA,MAAeA,EAAA,u/FCGT,CAAE,SAAAC,CAAQ,EAAK,OAAO,KAMbC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,MACA,mBACH,EAED,MAAO,CACH,SAAU,CACN,KAAM,OACN,SAAU,EACb,EAED,UAAW,CACP,KAAM,QACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,qBAAsB,CAAE,CACpC,CACK,EAED,SAAU,CACN,gBAAiB,CACb,MAAO,CACH,CACI,MAAO,WACP,MAAO,KAAK,IAAI,qCAAqC,CACxD,EACD,CACI,MAAO,WACP,MAAO,KAAK,IAAI,qCAAqC,CACxD,CACjB,CACS,EAED,cAAe,CACX,MAAO,CACH,CACI,MAAO,WACP,MAAO,KAAK,IAAI,0BAA0B,CAC7C,EACD,CACI,MAAO,UACP,MAAO,KAAK,IAAI,yBAAyB,CAC5C,EACD,CACI,MAAO,eACP,MAAO,KAAK,IAAI,8BAA8B,CACjD,CACjB,CACS,EAED,SAAU,CACN,KAAM,CACF,OAAI,KAAK,YAAc,CAAC,KAAK,SAAS,SAC3B,KAAK,SAAS,SAGlB,UACV,EAED,IAAIG,EAAO,CACHA,IAAU,WACV,KAAK,SAAS,aAAe,KAE7B,KAAK,SAAS,aAAe,KAGjC,KAAK,SAAS,SAAWA,CAC5B,CACJ,EAED,YAAa,CACT,OAAO,KAAK,SAAS,WAAa,UACrC,EAED,YAAa,CACT,MAAO,CAAC,CAAC,KAAK,SAAS,UAAY,KAAK,SAAS,WAAa,UACjE,EAED,iBAAkB,CACd,MAAMC,EAAW,IAAIH,EAAS,EAAG,EAAE,EACnC,OAAAG,EAAS,eAAe,eAAe,EAEhCA,CACV,EAED,kBAAmB,CACf,MAAMA,EAAW,IAAIH,EAAS,EAAG,IAAI,EACrC,OAAAG,EAAS,UAAUH,EAAS,OAAO,OAAQ,MAAM,CAAC,EAE3CG,CACV,EAED,sBAAuB,CACnB,MAAMA,EAAW,IAAIH,EAAS,EAAG,EAAE,EACnC,OAAAG,EAAS,UAAUH,EAAS,OAAO,KAAM,KAAK,SAAS,YAAY,CAAC,EAE7DG,CACV,EAED,oBAAqB,CACjB,OAAO,KAAK,kBAAkB,OAAO,UAAU,CAClD,EAED,yBAA0B,CACtB,OAAO,KAAK,SAAS,aAAe,GAAK,KAAK,IAAI,2CAA2C,CAChG,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACX,CAAC,KAAK,SAAS,UAAY,KAAK,SAAS,eACzC,KAAK,SAAS,SAAW,YAG7B,KAAK,yBAAwB,CAChC,EAED,cAAe,CACN,KAAK,SAAS,WACf,KAAK,SAAS,SAAW,YAG7B,KAAK,SAAS,aAAe,IAChC,EAED,0BAA2B,CACvB,KAAK,mBAAmB,OAAO,KAAK,qBAAsB,OAAO,QAAQ,GAAG,EAAE,KAAMC,GAAW,CAC3F,KAAK,qBAAuBA,CAC5C,CAAa,CACJ,EAED,eAAeC,EAAM,CACjB,KAAK,SAAS,aAAeA,EAAK,EACrC,EAED,mBAAoB,CAChB,KAAK,SAAS,aAAe,IAChC,CACJ,CACL"}
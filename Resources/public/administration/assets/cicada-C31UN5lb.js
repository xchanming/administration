const __vite__fileDeps=["assets/app-action-button.service-BLXLw2jT.js","assets/api.service-C76VAMec.js","assets/channel-oRk5-XZJ.js","assets/administration-DCOj2uiN.js","assets/administration-DZ0QGn6e.css","assets/InvalidActionButtonParameterError-KvFlsqmj.js","assets/app-cms-blocks.service-MiduAbws.js","assets/app-modules.service-BfMVGVO8.js","assets/app-url-change.service-gKWuaV9Q.js","assets/business-events.api.service-uygsYkiF.js","assets/calculate-price.api.service-CPZHAVi8.js","assets/cart-store-api.api.service-DCSdzXw5.js","assets/util.service-B7bLiCAI.js","assets/_baseUniq-S2dU3oH3.js","assets/_baseIteratee-CqDR5IDS.js","assets/camelCase-D7-BemT7.js","assets/string.utils-CcfYXjow.js","assets/order.types-BvKP5qzO.js","assets/checkout-store.api.service-D38Z6F-s.js","assets/config.api.service-CZSeAG4T.js","assets/custom-snippet.api.service-D1jN-Ubp.js","assets/customer-group-registration.api.service-BjX8k516.js","assets/customer-validation.api.service-CcWgT5iB.js","assets/excludedSearchTerm.api.service-puUvEywP.js","assets/extension-sdk.service-DpgaJHWm.js","assets/flow-actions.api.service-Cd7nRYYb.js","assets/known-ips.api.service-F7nD6Ujs.js","assets/mail.api.service-9WImriEW.js","assets/media-folder.api.service-D858-HOT.js","assets/media.api.service-DHTxmam0.js","assets/message-queue.api.service-DZBPOEb4.js","assets/notifications.service-Bj00wK2R.js","assets/order-state-machine.api.service-dQjdVWlG.js","assets/order.api.service-3oaDfYXO.js","assets/product-export.api.service-6FcxDKH0.js","assets/product-stream-preview.service-DWWRDyVR.js","assets/promotion-sync.api.service-DxrmSkJ6.js","assets/sync.api.service-CuyZdWXU.js","assets/rule-conditions-config.api.service-CCJnpuaY.js","assets/sales-channel.api.service-CA0v60cB.js","assets/scheduled-task.api.service-CteU5dPf.js","assets/search.api.service-CmZ5eYfJ.js","assets/CicadaError-DH1TZadN.js","assets/sanitizer.helper-9fM03JVT.js","assets/promotion.helper-n_Vux_0s.js","assets/seo-url-template.api.service-C6fUCCdP.js","assets/seo-url.api.service-D2s2qyOh.js","assets/snippet.api.service-Corzn4AO.js","assets/state-machine.api.service-Dd09sah3.js","assets/store-context.api.service-CLfP-5y8.js","assets/store.api.service-eE-nf-nn.js","assets/system-config.api.service-BT84NePU.js","assets/error-resolver.system-config.data-DNJRTokv.js","assets/tag.api.service-DryG_1c7.js","assets/user-activity.service-pYHoIXDT.js","assets/user-config.api.service-D_AH8pKA.js","assets/user-input-sanitize.service-CBHkWRab.js","assets/user-recovery.api.service-DDnWy6mz.js","assets/user-validation.api.service-BTNB7DcG.js","assets/user.api.service-BPHUbDVZ.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var rr=n=>{throw TypeError(n)};var ei=(n,e,r)=>e.has(n)||rr("Cannot "+r);var ft=(n,e,r)=>(ei(n,e,"read from private field"),r?r.call(n):e.get(n)),nr=(n,e,r)=>e.has(n)?rr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r);import{w as De,o as ti,u as Bt,t as ri}from"./util.service-B7bLiCAI.js";import{h as V,t as Le,m as ni,g as ii,c as si,a as Lr,b as wr,E as Te,d as oi,e as ge,C as ke,f as ai,i as ci,j as Mr,k as ui,p as li,s as pi,l as fi,M as Ut,n as hi,o as Ve,q as di,F as Fr,S as yi}from"./channel-oRk5-XZJ.js";import{d as mi,r as be,_ as F,a as kr,b as vi,w as $r,t as gi,g as bi,i as ht,c as dt,e as xi,f as Ei,V as _i}from"./administration-DCOj2uiN.js";import{C as Ai}from"./CicadaError-DH1TZadN.js";import{A as Si}from"./api.service-C76VAMec.js";import{S as Pi}from"./sanitizer.helper-9fM03JVT.js";import{D as Ri,a as Ci,P as Oi}from"./promotion.helper-n_Vux_0s.js";import{L as Ii}from"./order.types-BvKP5qzO.js";var te,ne=".",Br="function",Ur="string",Vr="__global__",Vt="Provider",Di=0,zt=Array.prototype.slice,ji=function(e,r){var c=e[r];if(c===void 0&&te.config.strict)throw new Error("Bottle was unable to resolve a service.  `"+r+"` is undefined.");return c},et=function(e){var r;return this.nested[e]||(r=te.pop(),this.nested[e]=r,this.factory(e,function(){return r.container})),this.nested[e]},zr=function(e){return e.split(ne).reduce(ji,this)},Ni=function(e,r,c,a){var i={configurable:!0,enumerable:!0};return e.length?i.get=function(){var l=0,s=function(o){if(o)throw o;e[l]&&e[l++](c,s)};return s(),c}:(i.value=c,i.writable=!0),Object.defineProperty(a,r,i),a[r]},Li=function(e,r){var c,a;return typeof e===Br&&(r=e,e=Vr),c=e.split(ne),a=c.shift(),c.length?et.call(this,a).middleware(c.join(ne),r):(this.middlewares[a]||(this.middlewares[a]=[]),this.middlewares[a].push(r)),this},wi=function(e,r){return r(e)},ir=function(e,r){return(e[r]||[]).concat(e.__global__||[])},Mi=function(e,r){var c,a,i,f,l;return this.id,i=this.container,f=this.decorators,l=this.middlewares,c=e+Vt,a=Object.create(null),a[c]={configurable:!0,enumerable:!0,get:function(){var h=new r;return delete i[c],i[c]=h,h}},a[e]={configurable:!0,enumerable:!0,get:function(){var h=i[c],o;return h&&(o=ir(f,e).reduce(wi,h.$get(i)),delete i[c],delete i[e]),o===void 0?o:Ni(ir(l,e),e,o,i)}},Object.defineProperties(i,a),this},Hr=function(e,r){var c,a;return c=e.split(ne),this.providerMap[e]&&c.length===1&&!this.container[e+Vt]?console.error(e+" provider already instantiated."):(this.originalProviders[e]=r,this.providerMap[e]=!0,a=c.shift(),c.length?(et.call(this,a).provider(c.join(ne),r),this):Mi.call(this,a,r))},Ht=function(e,r){return Hr.call(this,e,function(){this.$get=r})},Wr=function(e,r,c){var a=arguments.length>3?zt.call(arguments,3):[],i=this;return Ht.call(this,e,function(){var l=r,s=a.map(zr,i.container);return c?new(r.bind.apply(r,[null].concat(s))):l.apply(null,s)})},Fi=function(e,r){return Wr.apply(this,[e,r,!0].concat(zt.call(arguments,2)))},ki=function(e,r){return Wr.apply(this,[e,r,!1].concat(zt.call(arguments,2)))},qr=function(e,r){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:r,writable:!0})},Gr=function(e,r){var c=e[r];return c||(c={},qr.call(e,r,c)),c},$i=function(e,r){var c;return c=e.split(ne),e=c.pop(),qr.call(c.reduce(Gr,this.container),e,r),this},Bi=function(e,r){Object.defineProperty(this,e,{configurable:!1,enumerable:!0,value:r,writable:!1})},Ui=function(e,r){var c=e.split(ne);return e=c.pop(),Bi.call(c.reduce(Gr,this.container),e,r),this},Yr=function(e,r){var c,a;return typeof e===Br&&(r=e,e=Vr),c=e.split(ne),a=c.shift(),c.length?et.call(this,a).decorator(c.join(ne),r):(this.decorators[a]||(this.decorators[a]=[]),this.decorators[a].push(r)),this},Vi=function(e){return this.deferred.push(e),this},zi=function(e){return(e||[]).map(zr,this.container)},Hi=function(e,r){return Ht.call(this,e,function(a){return{instance:r.bind(r,a)}})},Wi=function(e){return!/^\$(?:decorator|register|list)$|Provider$/.test(e)},Wt=function(e){return Object.keys(e||this.container||{}).filter(Wi)},Je={},qi=function(e){var r;return typeof e===Ur?(r=Je[e],r||(Je[e]=r=new te,r.constant("BOTTLE_NAME",e)),r):new te},Gi=function(e){typeof e===Ur?delete Je[e]:Je={}},Jr=function(e){var r=e.$value===void 0?e:e.$value;return this[e.$type||"service"].apply(this,[e.$name,r].concat(e.$inject||[]))},sr=function(e){delete this.providerMap[e],delete this.container[e],delete this.container[e+Vt]},Yi=function(e){var r=this.originalProviders,c=Array.isArray(e);Object.keys(this.originalProviders).forEach(function(i){if(!(c&&e.indexOf(i)===-1)){var f=i.split(ne);f.length>1&&f.forEach(sr,et.call(this,f[0])),sr.call(this,i),this.provider(i,r[i])}},this)},Ji=function(e){return this.deferred.forEach(function(c){c(e)}),this};te=function n(e){if(!(this instanceof n))return n.pop(e);this.id=Di++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],this.container={$decorator:Yr.bind(this),$register:Jr.bind(this),$list:Wt.bind(this)}};te.prototype={constant:Ui,decorator:Yr,defer:Vi,digest:zi,factory:Ht,instanceFactory:Hi,list:Wt,middleware:Li,provider:Hr,resetProviders:Yi,register:Jr,resolve:Ji,service:Fi,serviceFactory:ki,value:$i};te.pop=qi;te.clear=Gi;te.list=Wt;te.config={strict:!1};const Kr=te;class tt{constructor(){this._stack=[]}get stack(){return this._stack}use(e){if(typeof e!="function")throw new Error("Middleware must be a function.");return this._stack.push(e),this}go(...e){this.stack.forEach(r=>r(()=>{},...e))}}const Oe={getModuleRoutes:Qi,registerModule:Xi,getModuleRegistry:Ki,getModuleByEntityName:Ti,getModuleSnippets:es,getModuleByKey:ns},re=new Map,Xr=new tt;function Ki(){return re.forEach((n,e)=>{var r;V(n.manifest,"flag")&&!Cicada.Feature.isActive(((r=n==null?void 0:n.manifest)==null?void 0:r.flag)??"")&&re.delete(e)}),re}function Xi(n,e){const r=e.type||"plugin";let c=new Map;if(!n)return!1;if(re.has(n))return De("ModuleFactory",`A module with the identifier "${n}" is registered already. Abort registration.`,re.get(n)),!1;const a=n.split("-");if(a.length<2||(V(e,"display")||(e.display=!0),!e.display)||!V(e,"routes")&&!e.routeMiddleware)return!1;if(V(e,"routes")&&Object.keys(e.routes).forEach(f=>{let l=e.routes[f];const s=e.routePrefixName?e.routePrefixName:a.join(".");l.name=`${s}.${f}`;const h=e.routePrefixPath?e.routePrefixPath:a.join("/");if(l.coreRoute||(l.path=`/${h}/${l.path}`),l.type=r,l=Zi(l,n,e),!l)return;const o=l.children??{};if(V(l,"children")&&Object.keys(o).length&&(l=Qr(l),c=Zr(l,c)),l.alias&&typeof l.alias=="string"&&l.alias.length>0&&!l.coreRoute){const y=e.routePrefixPath?e.routePrefixPath:a.join("/");l.alias=`/${y}/${l.alias}`}l.isChildren=!1,l.routeKey=f,c.set(l.name??"",l)}),e.routeMiddleware&&Le.isFunction(e.routeMiddleware))Xr.use(e.routeMiddleware);else if(c.size===0)return De("ModuleFactory",`The module "${n}" was not registered cause it hasn't a valid route definition`,"Abort registration.",e.routes),!1;const i={routes:c,manifest:e,type:r};if(V(e,"navigation")&&e.navigation){if(!Le.isArray(e.navigation))return De("ModuleFactory","The route definition has to be an array.",e.navigation),!1;e.navigation=e.navigation.filter(f=>(f.moduleType=e.type,e.type==="plugin"&&!f.parent||!f.id&&!f.path&&!f.parent&&!f.link||!f.label||!f.label.length?!1:(e.type==="plugin"&&(f.position?f.position+=1e3:f.position=1e3),!0))),i.navigation=e.navigation}return V(e,"settingsItem")&&e.settingsItem&&ts(n,e),V(e,"extensionEntryRoute")&&e.extensionEntryRoute&&rs(e.extensionEntryRoute),re.set(n,i),i}function Zr(n,e){return Object.values(n.children??{}).map(r=>(V(r,"children")&&Object.keys(r.children??{}).length&&(e=Zr(r,e)),e.set(r.name??"",r),r)),e}function Qr(n){const e=n.children;return e&&(n.children=Object.entries(e).map(([r,c])=>(c.path&&c.path.length===0?c.path="":c.path=`${n.path}/${c.path}`,c.name=`${n.name??""}.${r}`,c.isChildren=!0,V(c,"children")&&Object.keys(c.children??{}).length&&(c=Qr(c)),c))),n}function Zi(n,e,r){V(r,"flag")&&(n.flag=r.flag),n.component&&(n.components={default:n.component},delete n.component);const c={},a=n.components??{};return Object.entries(a).forEach(([i,f])=>{f&&(c[i]=f)}),n.components=c,n}function Qi(){const n=[];return re.forEach(e=>{e.routes.forEach(r=>{V(r,"flag")&&!Cicada.Feature.isActive(r.flag??"")||r.isChildren||(Xr.go(r),n.push(r))})}),n}function Ti(n){return Array.from(re.values()).find(e=>n===e.manifest.entity)}function es(){return Array.from(re.values()).reduce((n,e)=>{const r=e.manifest;if(!V(r,"snippets"))return n;const c=Object.keys(r.snippets??{});return c.length&&c.forEach(a=>{if(V(n,a)||(n[a]={}),r.snippets){const i=r.snippets[a];n[a]=ni(n[a],i)}}),n},{})}function ts(n,e){V(e,"flag")&&!Cicada.Feature.isActive(e.flag??"")||e.settingsItem&&(Array.isArray(e.settingsItem)||(e.settingsItem=[e.settingsItem]),e.settingsItem.forEach(r=>{r.group&&r.to&&(r.icon||r.iconComponent)&&((!V(r,"id")||!r.id)&&(r.id=n),(!V(r,"name")||!r.name)&&(r.name=e.name),(!V(r,"label")||!r.label)&&(r.label=e.title),Cicada.State.commit("settingsItems/addItem",r))}))}function rs(n){n.extensionName!=="string"&&n.route!=="string"&&Cicada.State.commit("extensionEntryRoutes/addItem",n)}function ns(n,e){return Array.from(re.values()).find(r=>e===r.manifest[n])}var Tr={exports:{}};const is={},ss=Object.freeze(Object.defineProperty({__proto__:null,default:is},Symbol.toStringTag,{value:"Module"})),or=ii(ss);(function(n,e){(function(c,a){n.exports=a()})(si,function(){return function(r){var c={};function a(i){if(c[i])return c[i].exports;var f=c[i]={i,l:!1,exports:{}};return r[i].call(f.exports,f,f.exports,a),f.l=!0,f.exports}return a.m=r,a.c=c,a.d=function(i,f,l){a.o(i,f)||Object.defineProperty(i,f,{enumerable:!0,get:l})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,f){if(f&1&&(i=a(i)),f&8||f&4&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),f&2&&typeof i!="string")for(var s in i)a.d(l,s,(function(h){return i[h]}).bind(null,s));return l},a.n=function(i){var f=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(f,"a",f),f},a.o=function(i,f){return Object.prototype.hasOwnProperty.call(i,f)},a.p="",a(a.s=7)}([function(r,c){function a(i){return i&&i.__esModule?i:{default:i}}r.exports=a},function(r,c){function a(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r.exports=a=function(l){return typeof l}:r.exports=a=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},a(i)}r.exports=a},function(r,c){function a(i,f,l){return f in i?Object.defineProperty(i,f,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[f]=l,i}r.exports=a},function(r,c){function a(i,f){(f==null||f>i.length)&&(f=i.length);for(var l=0,s=new Array(f);l<f;l++)s[l]=i[l];return s}r.exports=a},function(r,c,a){r.exports=function(){var f=/%%|%(?:(\d+)\$)?((?:[-+#0 ]|'[\s\S])*)(\d+)?(?:\.(\d*))?([\s\S])/g,l=arguments,s=0,h=l[s++],o=function(m,v,g,b){g||(g=" ");var E=m.length>=v?"":new Array(1+v-m.length>>>0).join(g);return b?m+E:E+m},y=function(m,v,g,b,E){var x=b-m.length;return x>0&&(!g&&E==="0"?m=[m.slice(0,v.length),o("",x,"0",!0),m.slice(v.length)].join(""):m=o(m,b,E,g)),m},t=function(m,v,g,b,E,x){var A=m>>>0;return m=o(A.toString(v),E||0,"0",!1),y(m,"",g,b,x)},p=function(m,v,g,b,E){return b!=null&&(m=m.slice(0,b)),y(m,"",v,g,E)},u=function(m,v,g,b,E,x){var A,_,R,D,O;if(m==="%%")return"%";var L=" ",w=!1,$="",B,U;for(B=0,U=g.length;B<U;B++)switch(g.charAt(B)){case" ":case"0":L=g.charAt(B);break;case"+":$="+";break;case"-":w=!0;break;case"'":B+1<U&&(L=g.charAt(B+1),B++);break}if(b?b=+b:b=0,!isFinite(b))throw new Error("Width must be finite");if(E?E=+E:E=x==="d"?0:"fFeE".indexOf(x)>-1?6:void 0,v&&+v==0)throw new Error("Argument number must be greater than zero");if(v&&+v>=l.length)throw new Error("Too few arguments");switch(O=v?l[+v]:l[s++],x){case"%":return"%";case"s":return p(O+"",w,b,E,L);case"c":return p(String.fromCharCode(+O),w,b,E,L);case"b":return t(O,2,w,b,E,L);case"o":return t(O,8,w,b,E,L);case"x":return t(O,16,w,b,E,L);case"X":return t(O,16,w,b,E,L).toUpperCase();case"u":return t(O,10,w,b,E,L);case"i":case"d":return A=+O||0,A=Math.round(A-A%1),_=A<0?"-":$,O=_+o(String(Math.abs(A)),E,"0",!1),w&&L==="0"&&(L=" "),y(O,_,w,b,L);case"e":case"E":case"f":case"F":case"g":case"G":return A=+O,_=A<0?"-":$,R=["toExponential","toFixed","toPrecision"]["efg".indexOf(x.toLowerCase())],D=["toString","toUpperCase"]["eEfFgG".indexOf(x)%2],O=_+Math.abs(A)[R](E),y(O,_,w,b,L)[D]();default:return""}};try{return h.replace(f,u)}catch{return!1}}},function(r,c,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};r.exports=function(l){var s=typeof l>"u"?"undefined":i(l);switch(s){case"number":return isNaN(l)||!isFinite(l)?0:l<0?Math.ceil(l):Math.floor(l);case"string":return parseInt(l,10)||0;case"boolean":default:return+!!l}}},function(r,c){r.exports=or},function(r,c,a){/**
 * Twig.js
 *
 * @copyright 2011-2020 John Roepke and the Twig.js Contributors
 * @license   Available under the BSD 2-Clause License
 * @link      https://github.com/twigjs/twig.js
 */r.exports=a(8)()},function(r,c,a){r.exports=function i(){var f={VERSION:"1.14.0"};return a(9)(f),a(10)(f),a(11)(f),a(18)(f),a(19)(f),a(20)(f),a(31)(f),a(32)(f),a(34)(f),a(35)(f),a(36)(f),a(37)(f),a(38)(f),a(39)(f),a(40)(f),f.exports.factory=i,f.exports}},function(r,c,a){var i=a(0),f=i(a(2));function l(h,o){var y=Object.keys(h);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(h);o&&(t=t.filter(function(p){return Object.getOwnPropertyDescriptor(h,p).enumerable})),y.push.apply(y,t)}return y}function s(h){for(var o=1;o<arguments.length;o++){var y=arguments[o]!=null?arguments[o]:{};o%2?l(Object(y),!0).forEach(function(t){(0,f.default)(h,t,y[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(y)):l(Object(y)).forEach(function(t){Object.defineProperty(h,t,Object.getOwnPropertyDescriptor(y,t))})}return h}r.exports=function(h){h.trace=!1,h.debug=!1,h.cache=!0,h.noop=function(){},h.merge=function(t,p,u){return Object.keys(p).forEach(function(d){u&&!(d in t)||(t[d]=p[d])}),t},h.Error=function(t,p){this.message=t,this.name="TwigException",this.type="TwigException",this.file=p},h.Error.prototype.toString=function(){var t=this.name+": "+this.message;return t},h.log={trace:function(){if(h.trace&&console){for(var p=arguments.length,u=new Array(p),d=0;d<p;d++)u[d]=arguments[d];console.log(Array.prototype.slice.call(u))}},debug:function(){if(h.debug&&console){for(var p=arguments.length,u=new Array(p),d=0;d<p;d++)u[d]=arguments[d];console.log(Array.prototype.slice.call(u))}}},typeof console>"u"?h.log.error=function(){}:typeof console.error<"u"?h.log.error=function(){var t;(t=console).error.apply(t,arguments)}:typeof console.log<"u"&&(h.log.error=function(){var t;(t=console).log.apply(t,arguments)}),h.token={},h.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",outputWhitespacePre:"output_whitespace_pre",outputWhitespacePost:"output_whitespace_post",outputWhitespaceBoth:"output_whitespace_both",logicWhitespacePre:"logic_whitespace_pre",logicWhitespacePost:"logic_whitespace_post",logicWhitespaceBoth:"logic_whitespace_both"},h.token.definitions=[{type:h.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:h.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:h.token.type.outputWhitespacePre,open:"{{-",close:"}}"},{type:h.token.type.outputWhitespacePost,open:"{{",close:"-}}"},{type:h.token.type.outputWhitespaceBoth,open:"{{-",close:"-}}"},{type:h.token.type.logicWhitespacePre,open:"{%-",close:"%}"},{type:h.token.type.logicWhitespacePost,open:"{%",close:"-%}"},{type:h.token.type.logicWhitespaceBoth,open:"{%-",close:"-%}"},{type:h.token.type.output,open:"{{",close:"}}"},{type:h.token.type.logic,open:"{%",close:"%}"},{type:h.token.type.comment,open:"{#",close:"#}"}],h.token.strings=['"',"'"],h.token.findStart=function(t){var p={position:null,def:null},u=null,d=h.token.definitions.length,m,v,g,b;for(m=0;m<d;m++)v=h.token.definitions[m],g=t.indexOf(v.open),b=t.indexOf(v.close),h.log.trace("Twig.token.findStart: ","Searching for ",v.open," found at ",g),!(g>=0&&v.open.length!==v.close.length&&b<0)&&(g>=0&&(p.position===null||g<p.position)?(p.position=g,p.def=v,u=b):g>=0&&p.position!==null&&g===p.position&&(v.open.length>p.def.open.length?(p.position=g,p.def=v,u=b):v.open.length===p.def.open.length&&(v.close.length>p.def.close.length,b>=0&&b<u&&(p.position=g,p.def=v,u=b))));return p},h.token.findEnd=function(t,p,u){for(var d=null,m=!1,v=0,g=null,b=null,E=null,x=null,A=null,_=null,R,D;!m;){if(g=null,b=null,E=t.indexOf(p.close,v),E>=0)d=E,m=!0;else throw new h.Error("Unable to find closing bracket '"+p.close+"' opened near template position "+u);if(p.type===h.token.type.comment||p.type===h.token.type.raw)break;for(D=h.token.strings.length,R=0;R<D;R+=1)A=t.indexOf(h.token.strings[R],v),A>0&&A<E&&(g===null||A<g)&&(g=A,b=h.token.strings[R]);if(g!==null)for(x=g+1,d=null,m=!1;;){if(_=t.indexOf(b,x),_<0)throw h.Error("Unclosed string in template");if(t.slice(_-1,_)==="\\")x=_+1;else{v=_+1;break}}}return d},h.tokenize=function(t){for(var p=[],u=0,d=null,m=null;t.length>0;)if(d=h.token.findStart(t),h.log.trace("Twig.tokenize: ","Found token: ",d),d.position===null)p.push({type:h.token.type.raw,value:t}),t="";else{if(d.position>0&&p.push({type:h.token.type.raw,value:t.slice(0,Math.max(0,d.position))}),t=t.slice(d.position+d.def.open.length),u+=d.position+d.def.open.length,m=h.token.findEnd(t,d.def,u),h.log.trace("Twig.tokenize: ","Token ends at ",m),p.push({type:d.def.type,value:t.slice(0,Math.max(0,m)).trim()}),t.slice(m+d.def.close.length,m+d.def.close.length+1)===`
`)switch(d.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":m+=1;break}t=t.slice(m+d.def.close.length),u+=m+d.def.close.length}return p},h.compile=function(t){var p=this;try{for(var u=[],d=[],m=[],v=null,g=null,b=null,E=null,x=null,A=null,_=null,R=null,D=null,O=null,L=null,w=null,$=function(Q){h.expression.compile.call(p,Q),d.length>0?m.push(Q):u.push(Q)},B=function(Q){if(g=h.logic.compile.call(p,Q),O=g.type,L=h.logic.handler[O].open,w=h.logic.handler[O].next,h.log.trace("Twig.compile: ","Compiled logic token to ",g," next is: ",w," open is : ",L),L!==void 0&&!L){if(E=d.pop(),_=h.logic.handler[E.type],!_.next.includes(O))throw new Error(O+" not expected after a "+E.type);E.output=E.output||[],E.output=E.output.concat(m),m=[],D={type:h.token.type.logic,token:E},d.length>0?m.push(D):u.push(D)}w!==void 0&&w.length>0?(h.log.trace("Twig.compile: ","Pushing ",g," to logic stack."),d.length>0&&(E=d.pop(),E.output=E.output||[],E.output=E.output.concat(m),d.push(E),m=[]),d.push(g)):L!==void 0&&L&&(D={type:h.token.type.logic,token:g},d.length>0?m.push(D):u.push(D))};t.length>0;){switch(v=t.shift(),x=u[u.length-1],A=m[m.length-1],R=t[0],h.log.trace("Compiling token ",v),v.type){case h.token.type.raw:d.length>0?m.push(v):u.push(v);break;case h.token.type.logic:B.call(p,v);break;case h.token.type.comment:break;case h.token.type.output:$.call(p,v);break;case h.token.type.logicWhitespacePre:case h.token.type.logicWhitespacePost:case h.token.type.logicWhitespaceBoth:case h.token.type.outputWhitespacePre:case h.token.type.outputWhitespacePost:case h.token.type.outputWhitespaceBoth:switch(v.type!==h.token.type.outputWhitespacePost&&v.type!==h.token.type.logicWhitespacePost&&(x&&x.type===h.token.type.raw&&(u.pop(),x.value=x.value.trimEnd(),u.push(x)),A&&A.type===h.token.type.raw&&(m.pop(),A.value=A.value.trimEnd(),m.push(A))),v.type){case h.token.type.outputWhitespacePre:case h.token.type.outputWhitespacePost:case h.token.type.outputWhitespaceBoth:$.call(p,v);break;case h.token.type.logicWhitespacePre:case h.token.type.logicWhitespacePost:case h.token.type.logicWhitespaceBoth:B.call(p,v);break;default:break}v.type!==h.token.type.outputWhitespacePre&&v.type!==h.token.type.logicWhitespacePre&&R&&R.type===h.token.type.raw&&(t.shift(),R.value=R.value.trimStart(),t.unshift(R));break;default:break}h.log.trace("Twig.compile: "," Output: ",u," Logic Stack: ",d," Pending Output: ",m)}if(d.length>0)throw b=d.pop(),new Error("Unable to find an end tag for "+b.type+", expecting one of "+b.next);return u}catch(U){if(p.options.rethrow)throw U.type==="TwigException"&&!U.file&&(U.file=p.id),U;h.log.error("Error compiling twig template "+p.id+": "),U.stack?h.log.error(U.stack):h.log.error(U.toString())}};function o(t,p){if(t.template.options.rethrow)throw typeof p=="string"&&(p=new h.Error(p)),p.type==="TwigException"&&!p.file&&(p.file=t.template.id),p;if(h.log.error("Error parsing twig template "+t.template.id+": "),p.stack?h.log.error(p.stack):h.log.error(p.toString()),h.debug)return p.toString()}h.prepare=function(t){h.log.debug("Twig.prepare: ","Tokenizing ",t);var p=h.tokenize.call(this,t);h.log.debug("Twig.prepare: ","Compiling ",p);var u=h.compile.call(this,p);return h.log.debug("Twig.prepare: ","Compiled ",u),u},h.output=function(t){var p=this.options.autoescape;if(!p)return t.join("");var u=typeof p=="string"?p:"html",d=t.map(function(v){return v&&v.twigMarkup!==!0&&v.twigMarkup!==u&&!(u==="html"&&v.twigMarkup==="html_attr")&&(v=h.filters.escape(v,[u])),v});if(d.length===0)return"";var m=d.join("");return m.length===0?"":new h.Markup(m,!0)},h.Templates={loaders:{},parsers:{},registry:{}},h.validateId=function(t){if(t==="prototype")throw new h.Error(t+" is not a valid twig identifier");if(h.cache&&Object.hasOwnProperty.call(h.Templates.registry,t))throw new h.Error("There is already a template with the ID "+t);return!0},h.Templates.registerLoader=function(t,p,u){if(typeof p!="function")throw new h.Error("Unable to add loader for "+t+": Invalid function reference given.");u&&(p=p.bind(u)),this.loaders[t]=p},h.Templates.unRegisterLoader=function(t){this.isRegisteredLoader(t)&&delete this.loaders[t]},h.Templates.isRegisteredLoader=function(t){return Object.hasOwnProperty.call(this.loaders,t)},h.Templates.registerParser=function(t,p,u){if(typeof p!="function")throw new h.Error("Unable to add parser for "+t+": Invalid function regerence given.");u&&(p=p.bind(u)),this.parsers[t]=p},h.Templates.unRegisterParser=function(t){this.isRegisteredParser(t)&&delete this.parsers[t]},h.Templates.isRegisteredParser=function(t){return Object.hasOwnProperty.call(this.parsers,t)},h.Templates.save=function(t){if(t.id===void 0)throw new h.Error("Unable to save template with no id");h.Templates.registry[t.id]=t},h.Templates.load=function(t){return Object.hasOwnProperty.call(h.Templates.registry,t)?h.Templates.registry[t]:null},h.Templates.loadRemote=function(t,p,u,d){var m=typeof p.id>"u"?t:p.id,v=h.Templates.registry[m];if(h.cache&&typeof v<"u")return typeof u=="function"&&u(v),v;p.parser=p.parser||"twig",p.id=m,typeof p.async>"u"&&(p.async=!0);var g=this.loaders[p.method]||this.loaders.fs;return g.call(this,t,p,u,d)};function y(t,p){var u=Object.prototype.toString.call(p).slice(8,-1);return p!=null&&u===t}return h.Block=function(t,p){this.template=t,this.token=p},h.Block.prototype.render=function(t,p){var u=t.template,d;return t.template=this.template,this.token.expression?d=h.expression.parseAsync.call(t,this.token.output,p):d=t.parseAsync(this.token.output,p),d.then(function(m){return h.expression.parseAsync.call(t,{type:h.expression.type.string,value:m},p)}).then(function(m){return t.template=u,m})},h.ParseState=function(t,p){this.renderedBlocks={},this.overrideBlocks=p===void 0?{}:p,this.context={},this.macros={},this.nestingStack=[],this.template=t},h.ParseState.prototype.getBlock=function(t,p){var u;return p!==!0&&(u=this.overrideBlocks[t]),u===void 0&&(u=this.template.getBlock(t,p)),u===void 0&&this.template.parentTemplate!==null&&(u=this.template.parentTemplate.getBlock(t)),u},h.ParseState.prototype.getBlocks=function(t){var p={};return t!==!1&&this.template.parentTemplate!==null&&this.template.parentTemplate!==this.template&&(p=this.template.parentTemplate.getBlocks()),p=s(s(s({},p),this.template.getBlocks()),this.overrideBlocks),p},h.ParseState.prototype.getNestingStackToken=function(t){var p;return this.nestingStack.forEach(function(u){p===void 0&&u.type===t&&(p=u)}),p},h.ParseState.prototype.parse=function(t,p,u){var d=this,m=[],v=null,g=!0,b=null,E=!0;p&&(d.context=p);function x(_){m.push(_)}function A(_){typeof _.chain<"u"&&(E=_.chain),typeof _.context<"u"&&(d.context=_.context),typeof _.output<"u"&&m.push(_.output)}if(b=h.async.forEach(t,function(_){switch(h.log.debug("Twig.ParseState.parse: ","Parsing token: ",_),_.type){case h.token.type.raw:m.push(h.filters.raw(_.value));break;case h.token.type.logic:return h.logic.parseAsync.call(d,_.token,d.context,E).then(A);case h.token.type.comment:break;case h.token.type.outputWhitespacePre:case h.token.type.outputWhitespacePost:case h.token.type.outputWhitespaceBoth:case h.token.type.output:return h.log.debug("Twig.ParseState.parse: ","Output token: ",_.stack),h.expression.parseAsync.call(d,_.stack,d.context).then(x)}}).then(function(){return m=h.output.call(d.template,m),g=!1,m}).catch(function(_){u&&o(d,_),v=_}),u)return b;if(v!==null)return o(d,v);if(g)throw new h.Error("You are using Twig.js in sync mode in combination with async extensions.");return m},h.Template=function(t){var p=t.data,u=t.id,d=t.base,m=t.path,v=t.url,g=t.name,b=t.method,E=t.options;this.base=d,this.blocks={defined:{},imported:{}},this.id=u,this.method=b,this.name=g,this.options=E,this.parentTemplate=null,this.path=m,this.url=v,y("String",p)?this.tokens=h.prepare.call(this,p):this.tokens=p,u!==void 0&&h.Templates.save(this)},h.Template.prototype.getBlock=function(t,p){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d;return p!==!0&&(d=this.blocks.defined[t]),u&&d===void 0&&(d=this.blocks.imported[t]),d===void 0&&this.parentTemplate!==null&&(d=this.parentTemplate.getBlock(t,p,u=!1)),d},h.Template.prototype.getBlocks=function(){var t={};return t=s(s(s({},t),this.blocks.imported),this.blocks.defined),t},h.Template.prototype.render=function(t,p,u){var d=this;return p=p||{},h.async.potentiallyAsync(d,u,function(){var m=new h.ParseState(d,p.blocks);return m.parseAsync(d.tokens,t).then(function(v){var g,b;return d.parentTemplate!==null?(d.options.allowInlineIncludes&&(g=h.Templates.load(d.parentTemplate),g&&(g.options=d.options)),g||(b=h.path.parsePath(d,d.parentTemplate),g=h.Templates.loadRemote(b,{method:d.getLoaderMethod(),base:d.base,async:!1,id:b,options:d.options})),d.parentTemplate=g,d.parentTemplate.renderAsync(m.context,{blocks:m.getBlocks(!1),isInclude:!0})):p.isInclude===!0?v:v.valueOf()})})},h.Template.prototype.importFile=function(t){var p=null,u;if(!this.url&&this.options.allowInlineIncludes){if(t=this.path?h.path.parsePath(this,t):t,u=h.Templates.load(t),!u&&(u=h.Templates.loadRemote(p,{id:t,method:this.getLoaderMethod(),async:!1,path:t,options:this.options}),!u))throw new h.Error("Unable to find the template "+t);return u.options=this.options,u}return p=h.path.parsePath(this,t),u=h.Templates.loadRemote(p,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:p}),u},h.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},h.Template.prototype.compile=function(t){return h.compiler.compile(this,t)},h.Markup=function(t,p){if(typeof t!="string")return t;var u=new String(t);return u.twigMarkup=typeof p>"u"?!0:p,u},h}},function(r,c,a){r.exports=function(i){return i.compiler={module:{}},i.compiler.compile=function(f,l){var s=JSON.stringify(f.tokens),h=f.id,o=null;if(l.module){if(i.compiler.module[l.module]===void 0)throw new i.Error("Unable to find module type "+l.module);o=i.compiler.module[l.module](h,s,l.twig)}else o=i.compiler.wrap(h,s);return o},i.compiler.module={amd:function(l,s,h){return'define(["'+h+`"], function (Twig) {
	var twig, templates;
twig = Twig.twig;
templates = `+i.compiler.wrap(l,s)+`
	return templates;
});`},node:function(l,s){return`var twig = require("twig").twig;
exports.template = `+i.compiler.wrap(l,s)},cjs2:function(l,s,h){return'module.declare([{ twig: "'+h+`" }], function (require, exports, module) {
	var twig = require("twig").twig;
	exports.template = `+i.compiler.wrap(l,s)+`
});`}},i.compiler.wrap=function(f,l){return'twig({id:"'+f.replace('"','\\"')+'", data:'+l+`, precompiled: true});
`},i}},function(r,c,a){var i=a(0),f=i(a(1)),l=i(a(12));r.exports=function(s){function h(o,y,t){return y?s.expression.parseAsync.call(o,y,t):s.Promise.resolve(!1)}for(s.expression={},a(17)(s),s.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context","and","b-and","or","b-or","b-xor","in","not in","if","matches","starts","ends","with"],s.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",slice:"Twig.expression.type.slice",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},subexpression:{start:"Twig.expression.type.subexpression.start",end:"Twig.expression.type.subexpression.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},s.expression.set={operations:[s.expression.type.filter,s.expression.type.operator.unary,s.expression.type.operator.binary,s.expression.type.array.end,s.expression.type.object.end,s.expression.type.parameter.end,s.expression.type.subexpression.end,s.expression.type.comma,s.expression.type.test],expressions:[s.expression.type._function,s.expression.type.bool,s.expression.type.string,s.expression.type.variable,s.expression.type.number,s.expression.type._null,s.expression.type.context,s.expression.type.parameter.start,s.expression.type.array.start,s.expression.type.object.start,s.expression.type.subexpression.start,s.expression.type.operator.unary]},s.expression.set.operationsExtended=s.expression.set.operations.concat([s.expression.type.key.period,s.expression.type.key.brackets,s.expression.type.slice]),s.expression.fn={compile:{push:function(y,t,p){p.push(y)},pushBoth:function(y,t,p){p.push(y),t.push(y)}},parse:{push:function(y,t){t.push(y)},pushValue:function(y,t){t.push(y.value)}}},s.expression.definitions=[{type:s.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_]\w*(\s?as)?)/,next:s.expression.set.operations.concat([s.expression.type.parameter.start]),compile:function(y,t,p){y.filter=y.match[2],y.modifier=y.match[1],delete y.match,delete y.value,p.push(y)},parse:function(y,t,p){var u=t.pop(),d=this;return h(d,y.params,p).then(function(m){var v=s.test(y.filter,u,m);y.modifier==="not"?t.push(!v):t.push(v)})}},{type:s.expression.type.comma,regex:/^,/,next:s.expression.set.expressions.concat([s.expression.type.array.end,s.expression.type.object.end]),compile:function(y,t,p){var u=t.length-1,d;for(delete y.match,delete y.value;u>=0;u--){if(d=t.pop(),d.type===s.expression.type.object.start||d.type===s.expression.type.parameter.start||d.type===s.expression.type.array.start){t.push(d);break}p.push(d)}p.push(y)}},{type:s.expression.type.number,regex:/^-?\d+(\.\d+)?/,next:s.expression.set.operations,compile:function(y,t,p){y.value=Number(y.value),p.push(y)},parse:s.expression.fn.parse.pushValue},{type:s.expression.type.operator.binary,regex:/(^\?\?|^\?:|^(b-and)|^(b-or)|^(b-xor)|^[+\-~%?]|^[:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[(|\s+]|^(or)[(|\s+]|^(in)[(|\s+]|^(not in)[(|\s+]|^(matches)|^(starts with)|^(ends with)|^\.\.)/,next:s.expression.set.expressions,transform:function(y,t){switch(y[0]){case"and(":case"or(":case"in(":case"not in(":return t[t.length-1].value=y[2],y[0];default:return""}},compile:function(y,t,p){delete y.match,y.value=y.value.trim();var u=y.value,d=s.expression.operator.lookup(u,y);for(s.log.trace("Twig.expression.compile: ","Operator: ",d," from ",u);t.length>0&&(t[t.length-1].type===s.expression.type.operator.unary||t[t.length-1].type===s.expression.type.operator.binary)&&(d.associativity===s.expression.operator.leftToRight&&d.precidence>=t[t.length-1].precidence||d.associativity===s.expression.operator.rightToLeft&&d.precidence>t[t.length-1].precidence);){var m=t.pop();p.push(m)}if(u===":"){if(!(t[t.length-1]&&t[t.length-1].value==="?")){var v=p.pop();if(v.type===s.expression.type.string||v.type===s.expression.type.variable)y.key=v.value;else if(v.type===s.expression.type.number)y.key=v.value.toString();else if(v.expression&&(v.type===s.expression.type.parameter.end||v.type===s.expression.type.subexpression.end))y.params=v.params;else throw new s.Error("Unexpected value before ':' of "+v.type+" = "+v.value);p.push(y)}}else t.push(d)},parse:function(y,t,p){var u=this;if(y.key)t.push(y);else{if(y.params)return s.expression.parseAsync.call(u,y.params,p).then(function(d){y.key=d,t.push(y),p.loop||delete y.params});s.expression.operator.parse(y.value,t)}}},{type:s.expression.type.operator.unary,regex:/(^not\s+)/,next:s.expression.set.expressions,compile:function(y,t,p){delete y.match,y.value=y.value.trim();var u=y.value,d=s.expression.operator.lookup(u,y);for(s.log.trace("Twig.expression.compile: ","Operator: ",d," from ",u);t.length>0&&(t[t.length-1].type===s.expression.type.operator.unary||t[t.length-1].type===s.expression.type.operator.binary)&&(d.associativity===s.expression.operator.leftToRight&&d.precidence>=t[t.length-1].precidence||d.associativity===s.expression.operator.rightToLeft&&d.precidence>t[t.length-1].precidence);){var m=t.pop();p.push(m)}t.push(d)},parse:function(y,t){s.expression.operator.parse(y.value,t)}},{type:s.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:s.expression.set.operationsExtended,compile:function(y,t,p){var u=y.value;delete y.match,u.slice(0,1)==='"'?u=u.replace('\\"','"'):u=u.replace("\\'","'"),y.value=u.slice(1,-1).replace(/\\n/g,`
`).replace(/\\r/g,"\r"),s.log.trace("Twig.expression.compile: ","String value: ",y.value),p.push(y)},parse:s.expression.fn.parse.pushValue},{type:s.expression.type.subexpression.start,regex:/^\(/,next:s.expression.set.expressions.concat([s.expression.type.subexpression.end]),compile:function(y,t,p){y.value="(",p.push(y),t.push(y)},parse:s.expression.fn.parse.push},{type:s.expression.type.subexpression.end,regex:/^\)/,next:s.expression.set.operationsExtended,validate:function(y,t){for(var p=t.length-1,u=!1,d=!1,m=0;!u&&p>=0;){var v=t[p];u=v.type===s.expression.type.subexpression.start,u&&d&&(d=!1,u=!1),v.type===s.expression.type.parameter.start?m++:v.type===s.expression.type.parameter.end?m--:v.type===s.expression.type.subexpression.end&&(d=!0),p--}return u&&m===0},compile:function(y,t,p){var u,d=y;for(u=t.pop();t.length>0&&u.type!==s.expression.type.subexpression.start;)p.push(u),u=t.pop();for(var m=[];y.type!==s.expression.type.subexpression.start;)m.unshift(y),y=p.pop();m.unshift(y),u=t[t.length-1],u===void 0||u.type!==s.expression.type._function&&u.type!==s.expression.type.filter&&u.type!==s.expression.type.test&&u.type!==s.expression.type.key.brackets?(d.expression=!0,m.pop(),m.shift(),d.params=m,p.push(d)):(d.expression=!1,u.params=m)},parse:function(y,t,p){var u=this;if(y.expression)return s.expression.parseAsync.call(u,y.params,p).then(function(d){t.push(d)});throw new s.Error("Unexpected subexpression end when token is not marked as an expression")}},{type:s.expression.type.parameter.start,regex:/^\(/,next:s.expression.set.expressions.concat([s.expression.type.parameter.end]),validate:function(y,t){var p=t[t.length-1];return p&&!s.expression.reservedWords.includes(p.value.trim())},compile:s.expression.fn.compile.pushBoth,parse:s.expression.fn.parse.push},{type:s.expression.type.parameter.end,regex:/^\)/,next:s.expression.set.operationsExtended,compile:function(y,t,p){var u,d=y;for(u=t.pop();t.length>0&&u.type!==s.expression.type.parameter.start;)p.push(u),u=t.pop();for(var m=[];y.type!==s.expression.type.parameter.start;)m.unshift(y),y=p.pop();m.unshift(y),y=p[p.length-1],y===void 0||y.type!==s.expression.type._function&&y.type!==s.expression.type.filter&&y.type!==s.expression.type.test&&y.type!==s.expression.type.key.brackets?(d.expression=!0,m.pop(),m.shift(),d.params=m,p.push(d)):(d.expression=!1,y.params=m)},parse:function(y,t,p){var u=[],d=!1,m=null,v=this;if(y.expression)return s.expression.parseAsync.call(v,y.params,p).then(function(g){t.push(g)});for(;t.length>0;){if(m=t.pop(),m&&m.type&&m.type===s.expression.type.parameter.start){d=!0;break}u.unshift(m)}if(!d)throw new s.Error("Expected end of parameter set.");t.push(u)}},{type:s.expression.type.slice,regex:/^\[(\d*:\d*)\]/,next:s.expression.set.operationsExtended,compile:function(y,t,p){var u=y.match[1].split(":"),d=u[0]?parseInt(u[0],10):void 0,m=u[1]?parseInt(u[1],10):void 0;y.value="slice",y.params=[d,m],m||(y.params=[d]),p.push(y)},parse:function(y,t){var p=t.pop(),u=y.params,d=this;t.push(s.filter.call(d,y.value,p,u))}},{type:s.expression.type.array.start,regex:/^\[/,next:s.expression.set.expressions.concat([s.expression.type.array.end]),compile:s.expression.fn.compile.pushBoth,parse:s.expression.fn.parse.push},{type:s.expression.type.array.end,regex:/^\]/,next:s.expression.set.operationsExtended,compile:function(y,t,p){for(var u=t.length-1,d;u>=0&&(d=t.pop(),d.type!==s.expression.type.array.start);u--)p.push(d);p.push(y)},parse:function(y,t){for(var p=[],u=!1,d=null;t.length>0;){if(d=t.pop(),d&&d.type&&d.type===s.expression.type.array.start){u=!0;break}p.unshift(d)}if(!u)throw new s.Error("Expected end of array.");t.push(p)}},{type:s.expression.type.object.start,regex:/^\{/,next:s.expression.set.expressions.concat([s.expression.type.object.end]),compile:s.expression.fn.compile.pushBoth,parse:s.expression.fn.parse.push},{type:s.expression.type.object.end,regex:/^\}/,next:s.expression.set.operationsExtended,compile:function(y,t,p){for(var u=t.length-1,d;u>=0&&(d=t.pop(),!(d&&d.type===s.expression.type.object.start));u--)p.push(d);p.push(y)},parse:function(y,t){for(var p={},u=!1,d=null,m=!1,v=null;t.length>0;){if(d=t.pop(),d&&d.type&&d.type===s.expression.type.object.start){u=!0;break}if(d&&d.type&&(d.type===s.expression.type.operator.binary||d.type===s.expression.type.operator.unary)&&d.key){if(!m)throw new s.Error("Missing value for key '"+d.key+"' in object definition.");p[d.key]=v,p._keys===void 0&&(p._keys=[]),p._keys.unshift(d.key),v=null,m=!1}else m=!0,v=d}if(!u)throw new s.Error("Unexpected end of object.");t.push(p)}},{type:s.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_-]*)/,next:s.expression.set.operationsExtended.concat([s.expression.type.parameter.start]),compile:function(y,t,p){y.value=y.match[1],p.push(y)},parse:function(y,t,p){var u=t.pop(),d=this;return h(d,y.params,p).then(function(m){return s.filter.call(d,y.value,u,m)}).then(function(m){t.push(m)})}},{type:s.expression.type._function,regex:/^([a-zA-Z_]\w*)\s*\(/,next:s.expression.type.parameter.start,validate:function(y){return y[1]&&!s.expression.reservedWords.includes(y[1])},transform:function(){return"("},compile:function(y,t,p){var u=y.match[1];y.fn=u,delete y.match,delete y.value,p.push(y)},parse:function(y,t,p){var u=this,d=y.fn,m;return h(u,y.params,p).then(function(v){if(s.functions[d])m=s.functions[d].apply(u,v);else if(typeof p[d]=="function")m=p[d].apply(p,(0,l.default)(v));else throw new s.Error(d+" function does not exist and is not defined in the context");return m}).then(function(v){t.push(v)})}},{type:s.expression.type.variable,regex:/^[a-zA-Z_]\w*/,next:s.expression.set.operationsExtended.concat([s.expression.type.parameter.start]),compile:s.expression.fn.compile.push,validate:function(y){return!s.expression.reservedWords.includes(y[0])},parse:function(y,t,p){var u=this;return s.expression.resolveAsync.call(u,p[y.value],p).then(function(d){if(u.template.options.strictVariables&&d===void 0)throw new s.Error('Variable "'+y.value+'" does not exist.');t.push(d)})}},{type:s.expression.type.key.period,regex:/^\.(\w+)/,next:s.expression.set.operationsExtended.concat([s.expression.type.parameter.start]),compile:function(y,t,p){y.key=y.match[1],delete y.match,delete y.value,p.push(y)},parse:function(y,t,p,u){var d=this,m=y.key,v=t.pop(),g;if(v&&!Object.prototype.hasOwnProperty.call(v,m)&&d.template.options.strictVariables){var b=Object.keys(v);throw b.length>0?new s.Error('Key "'+m+'" for object with keys "'+Object.keys(v).join(", ")+'" does not exist.'):new s.Error('Key "'+m+'" does not exist as the object is empty.')}return h(d,y.params,p).then(function(E){if(v==null)g=void 0;else{var x=function(_){return _.slice(0,1).toUpperCase()+_.slice(1)};(0,f.default)(v)==="object"&&m in v?g=v[m]:v["get"+x(m)]?g=v["get"+x(m)]:v["is"+x(m)]?g=v["is"+x(m)]:g=void 0}return s.expression.resolveAsync.call(d,g,p,E,u,v)}).then(function(E){t.push(E)})}},{type:s.expression.type.key.brackets,regex:/^\[([^\]:]*)\]/,next:s.expression.set.operationsExtended.concat([s.expression.type.parameter.start]),compile:function(y,t,p){var u=y.match[1];delete y.value,delete y.match,y.stack=s.expression.compile({value:u}).stack,p.push(y)},parse:function(y,t,p,u){var d=this,m=null,v,g;return h(d,y.params,p).then(function(b){return m=b,s.expression.parseAsync.call(d,y.stack,p)}).then(function(b){if(v=t.pop(),v&&!Object.prototype.hasOwnProperty.call(v,b)&&d.template.options.strictVariables){var E=Object.keys(v);throw E.length>0?new s.Error('Key "'+b+'" for array with keys "'+E.join(", ")+'" does not exist.'):new s.Error('Key "'+b+'" does not exist as the array is empty.')}else if(v==null)return null;return(0,f.default)(v)==="object"&&b in v?g=v[b]:g=null,s.expression.resolveAsync.call(d,g,v,m,u)}).then(function(b){t.push(b)})}},{type:s.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:s.expression.set.operations,compile:function(y,t,p){delete y.match,y.value=null,p.push(y)},parse:s.expression.fn.parse.pushValue},{type:s.expression.type.context,regex:/^_context/,next:s.expression.set.operationsExtended.concat([s.expression.type.parameter.start]),compile:s.expression.fn.compile.push,parse:function(y,t,p){t.push(p)}},{type:s.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:s.expression.set.operations,compile:function(y,t,p){y.value=y.match[0].toLowerCase()==="true",delete y.match,p.push(y)},parse:s.expression.fn.parse.pushValue}],s.expression.resolveAsync=function(o,y,t,p,u){var d=this;if(typeof o!="function")return s.Promise.resolve(o);var m=s.Promise.resolve(t);if(p&&p.type===s.expression.type.parameter.end){var v=!0;m=m.then(function(){return p.params&&s.expression.parseAsync.call(d,p.params,y,v)}).then(function(g){return p.cleanup=!0,g})}return m.then(function(g){return o.apply(u||y,g||[])})},s.expression.resolve=function(o,y,t,p,u){return s.async.potentiallyAsync(this,!1,function(){return s.expression.resolveAsync.call(this,o,y,t,p,u)})},s.expression.handler={},s.expression.extendType=function(o){s.expression.type[o]="Twig.expression.type."+o},s.expression.extend=function(o){if(!o.type)throw new s.Error("Unable to extend logic definition. No type provided for "+o);s.expression.handler[o.type]=o};s.expression.definitions.length>0;)s.expression.extend(s.expression.definitions.shift());return s.expression.tokenize=function(o){var y=[],t=0,p=null,u,d,m,v,g,b=[],E=function(){for(var A=arguments.length,_=new Array(A),R=0;R<A;R++)_[R]=arguments[R];for(var D=arguments.length-2,O=new Array(D);D-- >0;)O[D]=_[D];if(s.log.trace("Twig.expression.tokenize","Matched a ",u," regular expression of ",O),p&&!p.includes(u))return b.push(u+" cannot follow a "+y[y.length-1].type+" at template:"+t+" near '"+O[0].slice(0,20)+"...'"),O[0];var L=s.expression.handler[u];return L.validate&&!L.validate(O,y)?O[0]:(b=[],y.push({type:u,value:O[0],match:O}),g=!0,p=v,t+=O[0].length,L.transform?L.transform(O,y):"")};for(s.log.debug("Twig.expression.tokenize","Tokenizing expression ",o);o.length>0;){o=o.trim();for(u in s.expression.handler)if(Object.hasOwnProperty.call(s.expression.handler,u)){if(v=s.expression.handler[u].next,d=s.expression.handler[u].regex,s.log.trace("Checking type ",u," on ",o),g=!1,Array.isArray(d))for(m=d.length;m-- >0;)o=o.replace(d[m],E);else o=o.replace(d,E);if(g)break}if(!g)throw b.length>0?new s.Error(b.join(" OR ")):new s.Error("Unable to parse '"+o+"' at template position"+t)}return s.log.trace("Twig.expression.tokenize","Tokenized to ",y),y},s.expression.compile=function(o){var y=o.value,t=s.expression.tokenize(y),p=null,u=[],d=[],m=null;for(s.log.trace("Twig.expression.compile: ","Compiling ",y);t.length>0;)p=t.shift(),m=s.expression.handler[p.type],s.log.trace("Twig.expression.compile: ","Compiling ",p),m.compile(p,d,u),s.log.trace("Twig.expression.compile: ","Stack is",d),s.log.trace("Twig.expression.compile: ","Output is",u);for(;d.length>0;)u.push(d.pop());return s.log.trace("Twig.expression.compile: ","Final output is",u),o.stack=u,delete o.value,o},s.expression.parse=function(o,y,t,p){var u=this;Array.isArray(o)||(o=[o]);var d=[],m=[],v=s.expression.type.operator.binary;return s.async.potentiallyAsync(u,p,function(){return s.async.forEach(o,function(g,b){var E=null,x=null,A;if(!g.cleanup)return o.length>b+1&&(x=o[b+1]),E=s.expression.handler[g.type],E.parse&&(A=E.parse.call(u,g,d,y,x)),g.type===v&&y.loop&&m.push(g),A}).then(function(){for(var g=m.length,b=null;g-- >0;)b=m[g],b.params&&b.key&&delete b.key;if(t){var E=d.splice(0);d.push(E)}return d.pop()})})},s}},function(r,c,a){var i=a(13),f=a(14),l=a(15),s=a(16);function h(o){return i(o)||f(o)||l(o)||s()}r.exports=h},function(r,c,a){var i=a(3);function f(l){if(Array.isArray(l))return i(l)}r.exports=f},function(r,c){function a(i){if(typeof Symbol<"u"&&Symbol.iterator in Object(i))return Array.from(i)}r.exports=a},function(r,c,a){var i=a(3);function f(l,s){if(l){if(typeof l=="string")return i(l,s);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return i(l,s)}}r.exports=f},function(r,c){function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r.exports=a},function(r,c,a){r.exports=function(i){i.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var f=function(s,h){if(h==null)return null;if(h.indexOf!==void 0)return(s===h||s!=="")&&h.includes(s);var o;for(o in h)if(Object.hasOwnProperty.call(h,o)&&h[o]===s)return!0;return!1};return i.expression.operator.lookup=function(l,s){switch(l){case"..":s.precidence=20,s.associativity=i.expression.operator.leftToRight;break;case",":s.precidence=18,s.associativity=i.expression.operator.leftToRight;break;case"?:":case"?":case":":s.precidence=16,s.associativity=i.expression.operator.rightToLeft;break;case"??":s.precidence=15,s.associativity=i.expression.operator.rightToLeft;break;case"or":s.precidence=14,s.associativity=i.expression.operator.leftToRight;break;case"and":s.precidence=13,s.associativity=i.expression.operator.leftToRight;break;case"b-or":s.precidence=12,s.associativity=i.expression.operator.leftToRight;break;case"b-xor":s.precidence=11,s.associativity=i.expression.operator.leftToRight;break;case"b-and":s.precidence=10,s.associativity=i.expression.operator.leftToRight;break;case"==":case"!=":s.precidence=9,s.associativity=i.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":case"not in":case"in":s.precidence=8,s.associativity=i.expression.operator.leftToRight;break;case"~":case"+":case"-":s.precidence=6,s.associativity=i.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":s.precidence=5,s.associativity=i.expression.operator.leftToRight;break;case"not":s.precidence=3,s.associativity=i.expression.operator.rightToLeft;break;case"matches":s.precidence=8,s.associativity=i.expression.operator.leftToRight;break;case"starts with":s.precidence=8,s.associativity=i.expression.operator.leftToRight;break;case"ends with":s.precidence=8,s.associativity=i.expression.operator.leftToRight;break;default:throw new i.Error("Failed to lookup operator: "+l+" is an unknown operator.")}return s.operator=l,s},i.expression.operator.parse=function(l,s){i.log.trace("Twig.expression.operator.parse: ","Handling ",l);var h,o,y;if(l==="?"&&(y=s.pop()),o=s.pop(),l!=="not"&&(h=s.pop()),l!=="in"&&l!=="not in"&&l!=="??"&&(h&&Array.isArray(h)&&(h=h.length),l!=="?"&&o&&Array.isArray(o)&&(o=o.length)),l==="matches"&&o&&typeof o=="string"){var t=o.match(/^\/(.*)\/([gims]?)$/),p=t[1],u=t[2];o=new RegExp(p,u)}switch(l){case":":break;case"??":h===void 0&&(h=o,o=y,y=void 0),h!=null?s.push(h):s.push(o);break;case"?:":i.lib.boolval(h)?s.push(h):s.push(o);break;case"?":h===void 0&&(h=o,o=y,y=void 0),i.lib.boolval(h)?s.push(o):s.push(y);break;case"+":o=parseFloat(o),h=parseFloat(h),s.push(h+o);break;case"-":o=parseFloat(o),h=parseFloat(h),s.push(h-o);break;case"*":o=parseFloat(o),h=parseFloat(h),s.push(h*o);break;case"/":o=parseFloat(o),h=parseFloat(h),s.push(h/o);break;case"//":o=parseFloat(o),h=parseFloat(h),s.push(Math.floor(h/o));break;case"%":o=parseFloat(o),h=parseFloat(h),s.push(h%o);break;case"~":s.push((typeof h<"u"&&h!==null?h.toString():"")+(typeof o<"u"&&o!==null?o.toString():""));break;case"not":case"!":s.push(!i.lib.boolval(o));break;case"<":s.push(h<o);break;case"<=":s.push(h<=o);break;case">":s.push(h>o);break;case">=":s.push(h>=o);break;case"===":s.push(h===o);break;case"==":s.push(h==o);break;case"!==":s.push(h!==o);break;case"!=":s.push(h!=o);break;case"or":s.push(i.lib.boolval(h)||i.lib.boolval(o));break;case"b-or":s.push(h|o);break;case"b-xor":s.push(h^o);break;case"and":s.push(i.lib.boolval(h)&&i.lib.boolval(o));break;case"b-and":s.push(h&o);break;case"**":s.push(Math.pow(h,o));break;case"not in":s.push(!f(h,o));break;case"in":s.push(f(h,o));break;case"matches":s.push(o.test(h));break;case"starts with":s.push(typeof h=="string"&&h.indexOf(o)===0);break;case"ends with":s.push(typeof h=="string"&&h.includes(o,h.length-o.length));break;case"..":s.push(i.functions.range(h,o));break;default:throw new i.Error("Failed to parse operator: "+l+" is an unknown operator.")}},i}},function(r,c,a){var i=a(0),f=i(a(1));r.exports=function(l){function s(h,o){var y=Object.prototype.toString.call(o).slice(8,-1);return o!=null&&y===h}return l.filters={upper:function(o){return typeof o!="string"?o:o.toUpperCase()},lower:function(o){return typeof o!="string"?o:o.toLowerCase()},capitalize:function(o){return typeof o!="string"?o:o.slice(0,1).toUpperCase()+o.toLowerCase().slice(1)},title:function(o){return typeof o!="string"?o:o.toLowerCase().replace(/(^|\s)([a-z])/g,function(y,t,p){return t+p.toUpperCase()})},length:function(o){return l.lib.is("Array",o)||typeof o=="string"?o.length:l.lib.is("Object",o)?o._keys===void 0?Object.keys(o).length:o._keys.length:0},reverse:function(o){if(s("Array",o))return o.reverse();if(s("String",o))return o.split("").reverse().join("");if(s("Object",o)){var y=o._keys||Object.keys(o).reverse();return o._keys=y,o}},sort:function(o){if(s("Array",o))return o.sort();if(s("Object",o)){delete o._keys;var y=Object.keys(o),t=y.sort(function(p,u){var d,m;return o[p]>o[u]==!(o[p]<=o[u])?o[p]>o[u]?1:o[p]<o[u]?-1:0:!isNaN(d=parseFloat(o[p]))&&!isNaN(m=parseFloat(o[u]))?d>m?1:d<m?-1:0:typeof o[p]=="string"?o[p]>o[u].toString()?1:o[p]<o[u].toString()?-1:0:typeof o[u]=="string"?o[p].toString()>o[u]?1:o[p].toString()<o[u]?-1:0:null});return o._keys=t,o}},keys:function(o){if(o!=null){var y=o._keys||Object.keys(o),t=[];return y.forEach(function(p){p!=="_keys"&&Object.hasOwnProperty.call(o,p)&&t.push(p)}),t}},url_encode:function(o){if(o!=null){if(l.lib.is("Object",o)){var y=function p(u,d){var m=[],v=u._keys||Object.keys(u);return v.forEach(function(g){if(Object.prototype.hasOwnProperty.call(u,g)){var b=d?d+"["+g+"]":g,E=u[g];m.push(l.lib.is("Object",E)||Array.isArray(E)?p(E,b):encodeURIComponent(b)+"="+encodeURIComponent(E))}}),m.join("&amp;")};return y(o)}var t=encodeURIComponent(o);return t=t.replace("'","%27"),t}},join:function(o,y){if(o!=null){var t="",p=[],u=null;return y&&y[0]&&(t=y[0]),s("Array",o)?p=o:(u=o._keys||Object.keys(o),u.forEach(function(d){d!=="_keys"&&Object.hasOwnProperty.call(o,d)&&p.push(o[d])})),p.join(t)}},default:function(o,y){if(y!==void 0&&y.length>1)throw new l.Error("default filter expects one argument");return o==null||o===""?y===void 0?"":y[0]:o},json_encode:function(o){if(o==null)return"null";if((0,f.default)(o)==="object"&&s("Array",o)){var y=[];return o.forEach(function(u){y.push(l.filters.json_encode(u))}),"["+y.join(",")+"]"}if((0,f.default)(o)==="object"&&s("Date",o))return'"'+o.toISOString()+'"';if((0,f.default)(o)==="object"){var t=o._keys||Object.keys(o),p=[];return t.forEach(function(u){p.push(JSON.stringify(u)+":"+l.filters.json_encode(o[u]))}),"{"+p.join(",")+"}"}return JSON.stringify(o)},merge:function(o,y){var t=[],p=0,u=[];if(s("Array",o)?y.forEach(function(d){s("Array",d)||(t={})}):t={},s("Array",t)||(t._keys=[]),s("Array",o)?o.forEach(function(d){t._keys&&t._keys.push(p),t[p]=d,p++}):(u=o._keys||Object.keys(o),u.forEach(function(d){t[d]=o[d],t._keys.push(d);var m=parseInt(d,10);!isNaN(m)&&m>=p&&(p=m+1)})),y.forEach(function(d){s("Array",d)?d.forEach(function(m){t._keys&&t._keys.push(p),t[p]=m,p++}):(u=d._keys||Object.keys(d),u.forEach(function(m){t[m]||t._keys.push(m),t[m]=d[m];var v=parseInt(m,10);!isNaN(v)&&v>=p&&(p=v+1)}))}),y.length===0)throw new l.Error("Filter merge expects at least one parameter");return t},date:function(o,y){var t=l.functions.date(o),p=y&&y.length?y[0]:"F j, Y H:i";return l.lib.date(p.replace(/\\\\/g,"\\"),t)},date_modify:function(o,y){if(o!=null){if(y===void 0||y.length!==1)throw new l.Error("date_modify filter expects 1 argument");var t=y[0],p;return l.lib.is("Date",o)&&(p=l.lib.strtotime(t,o.getTime()/1e3)),l.lib.is("String",o)&&(p=l.lib.strtotime(t,l.lib.strtotime(o))),l.lib.is("Number",o)&&(p=l.lib.strtotime(t,o)),new Date(p*1e3)}},replace:function(o,y){if(o!=null){var t=y[0],p;for(p in t)Object.hasOwnProperty.call(t,p)&&p!=="_keys"&&(o=l.lib.replaceAll(o,p,t[p]));return o}},format:function(o,y){if(o!=null)return l.lib.vsprintf(o,y)},striptags:function(o,y){if(o!=null)return l.lib.stripTags(o,y)},escape:function(o,y){if(!(o==null||o==="")){var t="html";if(y&&y.length&&y[0]!==!0&&(t=y[0]),t==="html"){var p=o.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return new l.Markup(p,"html")}if(t==="js"){for(var u=o.toString(),d="",m=0;m<u.length;m++)if(u[m].match(/^[a-zA-Z0-9,._]$/))d+=u[m];else{var v=u.charAt(m),g=u.charCodeAt(m),b={"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};b[v]?d+=b[v]:d+=l.lib.sprintf("\\u%04s",g.toString(16).toUpperCase())}return new l.Markup(d,"js")}if(t==="css"){for(var E=o.toString(),x="",A=0;A<E.length;A++)if(E[A].match(/^[a-zA-Z0-9]$/))x+=E[A];else{var _=E.charCodeAt(A);x+="\\"+_.toString(16).toUpperCase()+" "}return new l.Markup(x,"css")}if(t==="url"){var R=l.filters.url_encode(o);return new l.Markup(R,"url")}if(t==="html_attr"){for(var D=o.toString(),O="",L=0;L<D.length;L++)if(D[L].match(/^[a-zA-Z0-9,.\-_]$/))O+=D[L];else if(D[L].match(/^[&<>"]$/))O+=D[L].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var w=D.charCodeAt(L);w<=31&&w!==9&&w!==10&&w!==13?O+="&#xFFFD;":w<128?O+=l.lib.sprintf("&#x%02s;",w.toString(16).toUpperCase()):O+=l.lib.sprintf("&#x%04s;",w.toString(16).toUpperCase())}return new l.Markup(O,"html_attr")}throw new l.Error("escape strategy unsupported")}},e:function(o,y){return l.filters.escape(o,y)},nl2br:function(o){if(!(o==null||o==="")){var y="BACKSLASH_n_replace",t="<br />"+y;return o=l.filters.escape(o).replace(/\r\n/g,t).replace(/\r/g,t).replace(/\n/g,t),o=l.lib.replaceAll(o,y,`
`),new l.Markup(o)}},number_format:function(o,y){var t=o,p=y&&y[0]?y[0]:void 0,u=y&&y[1]!==void 0?y[1]:".",d=y&&y[2]!==void 0?y[2]:",";t=String(t).replace(/[^0-9+\-Ee.]/g,"");var m=isFinite(Number(t))?Number(t):0,v=isFinite(Number(p))?Math.abs(p):0,g="",b=function(x,A){var _=Math.pow(10,A);return String(Math.round(x*_)/_)};return g=(v?b(m,v):String(Math.round(m))).split("."),g[0].length>3&&(g[0]=g[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d)),(g[1]||"").length<v&&(g[1]=g[1]||"",g[1]+=new Array(v-g[1].length+1).join("0")),g.join(u)},trim:function(o,y){if(o!=null){var t=String(o),p;y&&y[0]?p=String(y[0]):p=` 
\r	\f\v            ​\u2028\u2029　`;for(var u=0;u<t.length;u++)if(!p.includes(t.charAt(u))){t=t.slice(Math.max(0,u));break}for(var d=t.length-1;d>=0;d--)if(!p.includes(t.charAt(d))){t=t.slice(0,Math.max(0,d+1));break}return p.includes(t.charAt(0))?"":t}},truncate:function(o,y){var t=30,p=!1,u="...";if(o=String(o),y&&(y[0]&&(t=y[0]),y[1]&&(p=y[1]),y[2]&&(u=y[2])),o.length>t){if(p&&(t=o.indexOf(" ",t),t===-1))return o;o=o.slice(0,t)+u}return o},slice:function(o,y){if(o!=null){if(y===void 0||y.length===0)throw new l.Error("slice filter expects at least 1 argument");var t=y[0]||0,p=y.length>1?y[1]:o.length,u=t>=0?t:Math.max(o.length+t,0);if(l.lib.is("Array",o)){for(var d=[],m=u;m<u+p&&m<o.length;m++)d.push(o[m]);return d}if(l.lib.is("String",o))return o.slice(u,u+p);throw new l.Error("slice filter expects value to be an array or string")}},abs:function(o){if(o!=null)return Math.abs(o)},first:function(o){if(s("Array",o))return o[0];if(s("Object",o)){if("_keys"in o)return o[o._keys[0]]}else if(typeof o=="string")return o.slice(0,1)},split:function(o,y){if(o!=null){if(y===void 0||y.length===0||y.length>2)throw new l.Error("split filter expects 1 or 2 argument");if(l.lib.is("String",o)){var t=y[0],p=y[1],u=o.split(t);if(p===void 0)return u;if(p<0)return o.split(t,u.length+p);var d=[];if(t==="")for(;u.length>0;){for(var m="",v=0;v<p&&u.length>0;v++)m+=u.shift();d.push(m)}else{for(var g=0;g<p-1&&u.length>0;g++)d.push(u.shift());u.length>0&&d.push(u.join(t))}return d}throw new l.Error("split filter expects value to be a string")}},last:function(o){if(l.lib.is("Object",o)){var y;return o._keys===void 0?y=Object.keys(o):y=o._keys,o[y[y.length-1]]}return l.lib.is("Number",o)?o.toString().slice(-1):o[o.length-1]},raw:function(o){return new l.Markup(o||"")},batch:function(o,y){var t=y.shift(),p=y.shift(),u,d;if(!l.lib.is("Array",o))throw new l.Error("batch filter expects items to be an array");if(!l.lib.is("Number",t))throw new l.Error("batch filter expects size to be a number");t=Math.ceil(t);var m=l.lib.chunkArray(o,t);if(p&&o.length%t!==0){for(u=m.pop(),d=t-u.length;d--;)u.push(p);m.push(u)}return m},round:function(o,y){y=y||[];var t=y.length>0?y[0]:0,p=y.length>1?y[1]:"common";if(o=parseFloat(o),t&&!l.lib.is("Number",t))throw new l.Error("round filter expects precision to be a number");if(p==="common")return l.lib.round(o,t);if(!l.lib.is("Function",Math[p]))throw new l.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[p](o*Math.pow(10,t))/Math.pow(10,t)},spaceless:function(o){return o.replace(/>\s+</g,"><").trim()}},l.filter=function(h,o,y){var t=this;if(!l.filters[h])throw new l.Error("Unable to find filter "+h);return l.filters[h].call(t,o,y)},l.filter.extend=function(h,o){l.filters[h]=o},l}},function(r,c,a){var i=a(0),f=i(a(1));r.exports=function(l){var s='Template "{name}" is not defined.';return l.functions={range:function(o,y,t){var p=[],u,d,m=t||1,v=!1;!isNaN(o)&&!isNaN(y)?(u=parseInt(o,10),d=parseInt(y,10)):isNaN(o)&&isNaN(y)?(v=!0,u=o.charCodeAt(0),d=y.charCodeAt(0)):(u=isNaN(o)?0:o,d=isNaN(y)?0:y);var g=!(u>d);if(g)for(;u<=d;)p.push(v?String.fromCharCode(u):u),u+=m;else for(;u>=d;)p.push(v?String.fromCharCode(u):u),u-=m;return p},cycle:function(o,y){var t=y%o.length;return o[t]},dump:function(){for(var o=arguments.length,y=new Array(o),t=0;t<o;t++)y[t]=arguments[t];var p=[].concat(y),u=this,d=`
`,m="  ",v=0,g="",b=function(_){for(var R="";_>0;)_--,R+=m;return R},E=function(_){g+=b(v),(0,f.default)(_)==="object"?x(_):typeof _=="function"?g+="function()"+d:typeof _=="string"?g+="string("+_.length+') "'+_+'"'+d:typeof _=="number"?g+="number("+_+")"+d:typeof _=="boolean"&&(g+="bool("+_+")"+d)},x=function(_){var R;if(_===null)g+="NULL"+d;else if(_===void 0)g+="undefined"+d;else if((0,f.default)(_)==="object"){g+=b(v)+(0,f.default)(_),v++,g+="("+function(D){var O=0,L;for(L in D)Object.hasOwnProperty.call(D,L)&&O++;return O}(_)+") {"+d;for(R in _)Object.hasOwnProperty.call(_,R)&&(g+=b(v)+"["+R+"]=> "+d,E(_[R]));v--,g+=b(v)+"}"+d}else E(_)};return p.length===0&&p.push(u.context),p.forEach(function(A){x(A)}),g},date:function(o){var y;if(o==null||o==="")y=new Date;else if(l.lib.is("Date",o))y=o;else if(l.lib.is("String",o))o.match(/^\d+$/)?y=new Date(o*1e3):y=new Date(l.lib.strtotime(o)*1e3);else if(l.lib.is("Number",o))y=new Date(o*1e3);else throw new l.Error("Unable to parse date "+o);return y},block:function(o){var y=this,t=y.getBlock(o);if(t!==void 0)return t.render(y,y.context)},parent:function(){var o=this;return o.getBlock(o.getNestingStackToken(l.logic.type.block).blockName,!0).render(o,o.context)},attribute:function(o,y,t){return l.lib.is("Object",o)&&Object.hasOwnProperty.call(o,y)?typeof o[y]=="function"?o[y].apply(void 0,t):o[y]:o&&o[y]||void 0},max:function(o){if(l.lib.is("Object",o))return delete o._keys,l.lib.max(o);for(var y=arguments.length,t=new Array(y>1?y-1:0),p=1;p<y;p++)t[p-1]=arguments[p];return Reflect.apply(l.lib.max,null,[o].concat(t))},min:function(o){if(l.lib.is("Object",o))return delete o._keys,l.lib.min(o);for(var y=arguments.length,t=new Array(y>1?y-1:0),p=1;p<y;p++)t[p-1]=arguments[p];return Reflect.apply(l.lib.min,null,[o].concat(t))},template_from_string:function(o){var y=this;return o===void 0&&(o=""),l.Templates.parsers.twig({options:y.template.options,data:o})},random:function(o){var y=2147483648;function t(u){var d=Math.floor(Math.random()*y),m=Math.min.call(null,0,u),v=Math.max.call(null,0,u);return m+Math.floor((v-m+1)*d/y)}if(l.lib.is("Number",o))return t(o);if(l.lib.is("String",o))return o.charAt(t(o.length-1));if(l.lib.is("Array",o))return o[t(o.length-1)];if(l.lib.is("Object",o)){var p=Object.keys(o);return o[p[t(p.length-1)]]}return t(y-1)},source:function(o,y){var t,p=!1,u=typeof r.exports<"u"&&typeof window>"u",d,m=o;u?d="fs":d="ajax";var v={id:o,path:m,method:d,parser:"source",async:!1,fetchTemplateSource:!0};typeof y>"u"&&(y=!1);try{t=l.Templates.loadRemote(o,v),typeof t>"u"||t===null?t="":p=!0}catch(g){l.log.debug("Twig.functions.source: ","Problem loading template  ",g)}return!p&&!y?s.replace("{name}",o):t}},l._function=function(h,o,y){if(!l.functions[h])throw new l.Error("Unable to find function "+h);return l.functions[h](o,y)},l._function.extend=function(h,o){l.functions[h]=o},l}},function(r,c,a){r.exports=function(i){return i.lib={},i.lib.sprintf=a(4),i.lib.vsprintf=a(21),i.lib.round=a(22),i.lib.max=a(24),i.lib.min=a(25),i.lib.stripTags=a(26),i.lib.strtotime=a(28),i.lib.date=a(29),i.lib.boolval=a(30),i.lib.is=function(f,l){if(typeof l>"u"||l===null)return!1;switch(f){case"Array":return Array.isArray(l);case"Date":return l instanceof Date;case"String":return typeof l=="string"||l instanceof String;case"Number":return typeof l=="number"||l instanceof Number;case"Function":return typeof l=="function";case"Object":return l instanceof Object;default:return!1}},i.lib.replaceAll=function(f,l,s){var h=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return f.replace(new RegExp(h,"g"),s)},i.lib.chunkArray=function(f,l){var s=[],h=0,o=f.length;if(l<1||!Array.isArray(f))return[];for(;h<o;)s.push(f.slice(h,h+=l));return s},i}},function(r,c,a){r.exports=function(f,l){var s=a(4);return s.apply(this,[f].concat(l))}},function(r,c,a){function i(f,l){var s=Math.floor(Math.abs(f)+.5);return(l==="PHP_ROUND_HALF_DOWN"&&f===s-.5||l==="PHP_ROUND_HALF_EVEN"&&f===.5+2*Math.floor(s/2)||l==="PHP_ROUND_HALF_ODD"&&f===.5+2*Math.floor(s/2)-1)&&(s-=1),f<0?-s:s}r.exports=function(l){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"PHP_ROUND_HALF_UP",o=a(23),y=a(5),t;if(l=o(l),s=y(s),t=Math.pow(10,s),isNaN(l)||!isFinite(l)||Math.trunc(l)===l&&s>=0)return l;var p=14-Math.floor(Math.log10(Math.abs(l)));return p>s&&p-15<s?(l=i(l*Math.pow(10,p),h),l/=Math.pow(10,Math.abs(s-p))):l*=t,l=i(l,h),l/t}},function(r,c,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};r.exports=function(l){var s=typeof l>"u"?"undefined":i(l);switch(s){case"number":return l;case"string":return parseFloat(l)||0;case"boolean":default:return a(5)(l)}}},function(r,c,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};r.exports=function(){var l,s,h=0,o=0,y=arguments,t=y.length,p=function(m){if(Object.prototype.toString.call(m)==="[object Array]")return m;var v=[];for(var g in m)m.hasOwnProperty(g)&&v.push(m[g]);return v},u=function d(m,v){var g=0,b=0,E=0,x=0,A=0;if(m===v)return 0;if((typeof m>"u"?"undefined":i(m))==="object"){if((typeof v>"u"?"undefined":i(v))==="object"){if(m=p(m),v=p(v),A=m.length,x=v.length,x>A)return 1;if(x<A)return-1;for(g=0,b=A;g<b;++g){if(E=d(m[g],v[g]),E===1)return 1;if(E===-1)return-1}return 0}return-1}else{if((typeof v>"u"?"undefined":i(v))==="object")return 1;if(isNaN(v)&&!isNaN(m))return m===0?0:m<0?1:-1;if(isNaN(m)&&!isNaN(v))return v===0?0:v>0?1:-1}return v===m?0:v>m?1:-1};if(t===0)throw new Error("At least one value should be passed to max()");if(t===1){if(i(y[0])==="object")l=p(y[0]);else throw new Error("Wrong parameter count for max()");if(l.length===0)throw new Error("Array must contain at least one element for max()")}else l=y;for(s=l[0],h=1,o=l.length;h<o;++h)u(s,l[h])===1&&(s=l[h]);return s}},function(r,c,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};r.exports=function(){var l,s,h=0,o=0,y=arguments,t=y.length,p=function(m){if(Object.prototype.toString.call(m)==="[object Array]")return m;var v=[];for(var g in m)m.hasOwnProperty(g)&&v.push(m[g]);return v},u=function d(m,v){var g=0,b=0,E=0,x=0,A=0;if(m===v)return 0;if((typeof m>"u"?"undefined":i(m))==="object"){if((typeof v>"u"?"undefined":i(v))==="object"){if(m=p(m),v=p(v),A=m.length,x=v.length,x>A)return 1;if(x<A)return-1;for(g=0,b=A;g<b;++g){if(E=d(m[g],v[g]),E===1)return 1;if(E===-1)return-1}return 0}return-1}else{if((typeof v>"u"?"undefined":i(v))==="object")return 1;if(isNaN(v)&&!isNaN(m))return m===0?0:m<0?1:-1;if(isNaN(m)&&!isNaN(v))return v===0?0:v>0?1:-1}return v===m?0:v>m?1:-1};if(t===0)throw new Error("At least one value should be passed to min()");if(t===1){if(i(y[0])==="object")l=p(y[0]);else throw new Error("Wrong parameter count for min()");if(l.length===0)throw new Error("Array must contain at least one element for min()")}else l=y;for(s=l[0],h=1,o=l.length;h<o;++h)u(s,l[h])===-1&&(s=l[h]);return s}},function(r,c,a){r.exports=function(f,l){var s=a(27);l=(((l||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var h=/<\/?([a-z0-9]*)\b[^>]*>?/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,y=s(f);for(y=y.substring(y.length-1)==="<"?y.substring(0,y.length-1):y;;){var t=y;if(y=t.replace(o,"").replace(h,function(p,u){return l.indexOf("<"+u.toLowerCase()+">")>-1?p:""}),t===y)return y}}},function(r,c,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};r.exports=function(l){var s=typeof l>"u"?"undefined":i(l);switch(s){case"boolean":return l?"1":"";case"string":return l;case"number":return isNaN(l)?"NAN":isFinite(l)?l+"":(l<0?"-":"")+"INF";case"undefined":return"";case"object":return Array.isArray(l)?"Array":l!==null?"Object":"";case"function":default:throw new Error("Unsupported value type")}}},function(r,c,a){var i="[ \\t]+",f="[ \\t]*",l="(?:([ap])\\.?m\\.?([\\t ]|$))",s="(2[0-4]|[01]?[0-9])",h="([01][0-9]|2[0-4])",o="(0?[1-9]|1[0-2])",y="([0-5]?[0-9])",t="([0-5][0-9])",p="(60|[0-5]?[0-9])",u="(60|[0-5][0-9])",d="(?:\\.([0-9]+))",m="sunday|monday|tuesday|wednesday|thursday|friday|saturday",v="sun|mon|tue|wed|thu|fri|sat",g=m+"|"+v+"|weekdays?",b="first|second|third|fourth|fifth|sixth|seventh|eighth?|ninth|tenth|eleventh|twelfth",E="next|last|previous|this",x="(?:second|sec|minute|min|hour|day|fortnight|forthnight|month|year)s?|weeks|"+g,A="([0-9]{1,4})",_="([0-9]{2})",R="([0-9]{4})",D="([+-]?[0-9]{4})",O="(1[0-2]|0?[0-9])",L="(0[0-9]|1[0-2])",w="(?:(3[01]|[0-2]?[0-9])(?:st|nd|rd|th)?)",$="(0[0-9]|[1-2][0-9]|3[01])",B="january|february|march|april|may|june|july|august|september|october|november|december",U="jan|feb|mar|apr|may|jun|jul|aug|sept?|oct|nov|dec",Q="i[vx]|vi{0,3}|xi{0,2}|i{1,3}",he="("+B+"|"+U+"|"+Q+")",ct="((?:GMT)?([+-])"+s+":?"+y+"?)",Xn="(00[1-9]|0[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6])",Zn="(0[1-9]|[1-4][0-9]|5[0-3])",Re=he+"[ .\\t-]*"+w+"[,.stndrh\\t ]*";function ue(I,C){switch(C=C&&C.toLowerCase(),C){case"a":I+=I===12?-12:0;break;case"p":I+=I!==12?12:0;break}return I}function le(I){var C=+I;return I.length<4&&C<100&&(C+=C<70?2e3:1900),C}function q(I){return{jan:0,january:0,i:0,feb:1,february:1,ii:1,mar:2,march:2,iii:2,apr:3,april:3,iv:3,may:4,v:4,jun:5,june:5,vi:5,jul:6,july:6,vii:6,aug:7,august:7,viii:7,sep:8,sept:8,september:8,ix:8,oct:9,october:9,x:9,nov:10,november:10,xi:10,dec:11,december:11,xii:11}[I.toLowerCase()]}function ut(I){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S={mon:1,monday:1,tue:2,tuesday:2,wed:3,wednesday:3,thu:4,thursday:4,fri:5,friday:5,sat:6,saturday:6,sun:0,sunday:0};return S[I.toLowerCase()]||C}function Qn(I){var C={last:-1,previous:-1,this:0,first:1,next:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eight:8,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12},S={this:1},P=I.toLowerCase();return{amount:C[P],behavior:S[P]||0}}function lt(I,C){var S=/(?:GMT)?([+-])(\d+)(:?)(\d{0,2})/i;if(I=I&&I.match(S),!I)return C;var P=I[1]==="-"?1:-1,j=+I[2],N=+I[4];return!I[4]&&!I[3]&&(N=Math.floor(j%100),j=Math.floor(j/100)),P*(j*60+N)}var M={yesterday:{regex:/^yesterday/i,name:"yesterday",callback:function(){return this.rd-=1,this.resetTime()}},now:{regex:/^now/i,name:"now"},noon:{regex:/^noon/i,name:"noon",callback:function(){return this.resetTime()&&this.time(12,0,0,0)}},midnightOrToday:{regex:/^(midnight|today)/i,name:"midnight | today",callback:function(){return this.resetTime()}},tomorrow:{regex:/^tomorrow/i,name:"tomorrow",callback:function(){return this.rd+=1,this.resetTime()}},timestamp:{regex:/^@(-?\d+)/i,name:"timestamp",callback:function(C,S){return this.rs+=+S,this.y=1970,this.m=0,this.d=1,this.dates=0,this.resetTime()&&this.zone(0)}},firstOrLastDay:{regex:/^(first|last) day of/i,name:"firstdayof | lastdayof",callback:function(C,S){S.toLowerCase()==="first"?this.firstOrLastDayOfMonth=1:this.firstOrLastDayOfMonth=-1}},backOrFrontOf:{regex:RegExp("^(back|front) of "+s+f+l+"?","i"),name:"backof | frontof",callback:function(C,S,P,j){var N=S.toLowerCase()==="back",k=+P,z=15;return N||(k-=1,z=45),k=ue(k,j),this.resetTime()&&this.time(k,z,0,0)}},weekdayOf:{regex:RegExp("^("+b+"|"+E+")"+i+"("+m+"|"+v+")"+i+"of","i"),name:"weekdayof"},mssqltime:{regex:RegExp("^"+o+":"+t+":"+u+"[:.]([0-9]+)"+l,"i"),name:"mssqltime",callback:function(C,S,P,j,N,k){return this.time(ue(+S,k),+P,+j,+N.substr(0,3))}},timeLong12:{regex:RegExp("^"+o+"[:.]"+y+"[:.]"+u+f+l,"i"),name:"timelong12",callback:function(C,S,P,j,N){return this.time(ue(+S,N),+P,+j,0)}},timeShort12:{regex:RegExp("^"+o+"[:.]"+t+f+l,"i"),name:"timeshort12",callback:function(C,S,P,j){return this.time(ue(+S,j),+P,0,0)}},timeTiny12:{regex:RegExp("^"+o+f+l,"i"),name:"timetiny12",callback:function(C,S,P){return this.time(ue(+S,P),0,0,0)}},soap:{regex:RegExp("^"+R+"-"+L+"-"+$+"T"+h+":"+t+":"+u+d+ct+"?","i"),name:"soap",callback:function(C,S,P,j,N,k,z,Ce,Ue){return this.ymd(+S,P-1,+j)&&this.time(+N,+k,+z,+Ce.substr(0,3))&&this.zone(lt(Ue))}},wddx:{regex:RegExp("^"+R+"-"+O+"-"+w+"T"+s+":"+y+":"+p),name:"wddx",callback:function(C,S,P,j,N,k,z){return this.ymd(+S,P-1,+j)&&this.time(+N,+k,+z,0)}},exif:{regex:RegExp("^"+R+":"+L+":"+$+" "+h+":"+t+":"+u,"i"),name:"exif",callback:function(C,S,P,j,N,k,z){return this.ymd(+S,P-1,+j)&&this.time(+N,+k,+z,0)}},xmlRpc:{regex:RegExp("^"+R+L+$+"T"+s+":"+t+":"+u),name:"xmlrpc",callback:function(C,S,P,j,N,k,z){return this.ymd(+S,P-1,+j)&&this.time(+N,+k,+z,0)}},xmlRpcNoColon:{regex:RegExp("^"+R+L+$+"[Tt]"+s+t+u),name:"xmlrpcnocolon",callback:function(C,S,P,j,N,k,z){return this.ymd(+S,P-1,+j)&&this.time(+N,+k,+z,0)}},clf:{regex:RegExp("^"+w+"/("+U+")/"+R+":"+h+":"+t+":"+u+i+ct,"i"),name:"clf",callback:function(C,S,P,j,N,k,z,Ce){return this.ymd(+j,q(P),+S)&&this.time(+N,+k,+z,0)&&this.zone(lt(Ce))}},iso8601long:{regex:RegExp("^t?"+s+"[:.]"+y+"[:.]"+p+d,"i"),name:"iso8601long",callback:function(C,S,P,j,N){return this.time(+S,+P,+j,+N.substr(0,3))}},dateTextual:{regex:RegExp("^"+he+"[ .\\t-]*"+w+"[,.stndrh\\t ]+"+A,"i"),name:"datetextual",callback:function(C,S,P,j){return this.ymd(le(j),q(S),+P)}},pointedDate4:{regex:RegExp("^"+w+"[.\\t-]"+O+"[.-]"+R),name:"pointeddate4",callback:function(C,S,P,j){return this.ymd(+j,P-1,+S)}},pointedDate2:{regex:RegExp("^"+w+"[.\\t]"+O+"\\."+_),name:"pointeddate2",callback:function(C,S,P,j){return this.ymd(le(j),P-1,+S)}},timeLong24:{regex:RegExp("^t?"+s+"[:.]"+y+"[:.]"+p),name:"timelong24",callback:function(C,S,P,j){return this.time(+S,+P,+j,0)}},dateNoColon:{regex:RegExp("^"+R+L+$),name:"datenocolon",callback:function(C,S,P,j){return this.ymd(+S,P-1,+j)}},pgydotd:{regex:RegExp("^"+R+"\\.?"+Xn),name:"pgydotd",callback:function(C,S,P){return this.ymd(+S,0,+P)}},timeShort24:{regex:RegExp("^t?"+s+"[:.]"+y,"i"),name:"timeshort24",callback:function(C,S,P){return this.time(+S,+P,0,0)}},iso8601noColon:{regex:RegExp("^t?"+h+t+u,"i"),name:"iso8601nocolon",callback:function(C,S,P,j){return this.time(+S,+P,+j,0)}},iso8601dateSlash:{regex:RegExp("^"+R+"/"+L+"/"+$+"/"),name:"iso8601dateslash",callback:function(C,S,P,j){return this.ymd(+S,P-1,+j)}},dateSlash:{regex:RegExp("^"+R+"/"+O+"/"+w),name:"dateslash",callback:function(C,S,P,j){return this.ymd(+S,P-1,+j)}},american:{regex:RegExp("^"+O+"/"+w+"/"+A),name:"american",callback:function(C,S,P,j){return this.ymd(le(j),S-1,+P)}},americanShort:{regex:RegExp("^"+O+"/"+w),name:"americanshort",callback:function(C,S,P){return this.ymd(this.y,S-1,+P)}},gnuDateShortOrIso8601date2:{regex:RegExp("^"+A+"-"+O+"-"+w),name:"gnudateshort | iso8601date2",callback:function(C,S,P,j){return this.ymd(le(S),P-1,+j)}},iso8601date4:{regex:RegExp("^"+D+"-"+L+"-"+$),name:"iso8601date4",callback:function(C,S,P,j){return this.ymd(+S,P-1,+j)}},gnuNoColon:{regex:RegExp("^t?"+h+t,"i"),name:"gnunocolon",callback:function(C,S,P){switch(this.times){case 0:return this.time(+S,+P,0,this.f);case 1:return this.y=S*100+ +P,this.times++,!0;default:return!1}}},gnuDateShorter:{regex:RegExp("^"+R+"-"+O),name:"gnudateshorter",callback:function(C,S,P){return this.ymd(+S,P-1,1)}},pgTextReverse:{regex:RegExp("^(\\d{3,4}|[4-9]\\d|3[2-9])-("+U+")-"+$,"i"),name:"pgtextreverse",callback:function(C,S,P,j){return this.ymd(le(S),q(P),+j)}},dateFull:{regex:RegExp("^"+w+"[ \\t.-]*"+he+"[ \\t.-]*"+A,"i"),name:"datefull",callback:function(C,S,P,j){return this.ymd(le(j),q(P),+S)}},dateNoDay:{regex:RegExp("^"+he+"[ .\\t-]*"+R,"i"),name:"datenoday",callback:function(C,S,P){return this.ymd(+P,q(S),1)}},dateNoDayRev:{regex:RegExp("^"+R+"[ .\\t-]*"+he,"i"),name:"datenodayrev",callback:function(C,S,P){return this.ymd(+S,q(P),1)}},pgTextShort:{regex:RegExp("^("+U+")-"+$+"-"+A,"i"),name:"pgtextshort",callback:function(C,S,P,j){return this.ymd(le(j),q(S),+P)}},dateNoYear:{regex:RegExp("^"+Re,"i"),name:"datenoyear",callback:function(C,S,P){return this.ymd(this.y,q(S),+P)}},dateNoYearRev:{regex:RegExp("^"+w+"[ .\\t-]*"+he,"i"),name:"datenoyearrev",callback:function(C,S,P){return this.ymd(this.y,q(P),+S)}},isoWeekDay:{regex:RegExp("^"+R+"-?W"+Zn+"(?:-?([0-7]))?"),name:"isoweekday | isoweek",callback:function(C,S,P,j){if(j=j?+j:1,!this.ymd(+S,0,1))return!1;var N=new Date(this.y,this.m,this.d).getDay();N=0-(N>4?N-7:N),this.rd+=N+(P-1)*7+j}},relativeText:{regex:RegExp("^("+b+"|"+E+")"+i+"("+x+")","i"),name:"relativetext",callback:function(C,S,P){var j=Qn(S),N=j.amount;switch(P.toLowerCase()){case"sec":case"secs":case"second":case"seconds":this.rs+=N;break;case"min":case"mins":case"minute":case"minutes":this.ri+=N;break;case"hour":case"hours":this.rh+=N;break;case"day":case"days":this.rd+=N;break;case"fortnight":case"fortnights":case"forthnight":case"forthnights":this.rd+=N*14;break;case"week":case"weeks":this.rd+=N*7;break;case"month":case"months":this.rm+=N;break;case"year":case"years":this.ry+=N;break;case"mon":case"monday":case"tue":case"tuesday":case"wed":case"wednesday":case"thu":case"thursday":case"fri":case"friday":case"sat":case"saturday":case"sun":case"sunday":this.resetTime(),this.weekday=ut(P,7),this.weekdayBehavior=1,this.rd+=(N>0?N-1:N)*7;break}}},relative:{regex:RegExp("^([+-]*)[ \\t]*(\\d+)"+f+"("+x+"|week)","i"),name:"relative",callback:function(C,S,P,j){var N=S.replace(/[^-]/g,"").length,k=+P*Math.pow(-1,N);switch(j.toLowerCase()){case"sec":case"secs":case"second":case"seconds":this.rs+=k;break;case"min":case"mins":case"minute":case"minutes":this.ri+=k;break;case"hour":case"hours":this.rh+=k;break;case"day":case"days":this.rd+=k;break;case"fortnight":case"fortnights":case"forthnight":case"forthnights":this.rd+=k*14;break;case"week":case"weeks":this.rd+=k*7;break;case"month":case"months":this.rm+=k;break;case"year":case"years":this.ry+=k;break;case"mon":case"monday":case"tue":case"tuesday":case"wed":case"wednesday":case"thu":case"thursday":case"fri":case"friday":case"sat":case"saturday":case"sun":case"sunday":this.resetTime(),this.weekday=ut(j,7),this.weekdayBehavior=1,this.rd+=(k>0?k-1:k)*7;break}}},dayText:{regex:RegExp("^("+g+")","i"),name:"daytext",callback:function(C,S){this.resetTime(),this.weekday=ut(S,0),this.weekdayBehavior!==2&&(this.weekdayBehavior=1)}},relativeTextWeek:{regex:RegExp("^("+E+")"+i+"week","i"),name:"relativetextweek",callback:function(C,S){switch(this.weekdayBehavior=2,S.toLowerCase()){case"this":this.rd+=0;break;case"next":this.rd+=7;break;case"last":case"previous":this.rd-=7;break}isNaN(this.weekday)&&(this.weekday=1)}},monthFullOrMonthAbbr:{regex:RegExp("^("+B+"|"+U+")","i"),name:"monthfull | monthabbr",callback:function(C,S){return this.ymd(this.y,q(S),this.d)}},tzCorrection:{regex:RegExp("^"+ct,"i"),name:"tzcorrection",callback:function(C){return this.zone(lt(C))}},ago:{regex:/^ago/i,name:"ago",callback:function(){this.ry=-this.ry,this.rm=-this.rm,this.rd=-this.rd,this.rh=-this.rh,this.ri=-this.ri,this.rs=-this.rs,this.rf=-this.rf}},year4:{regex:RegExp("^"+R),name:"year4",callback:function(C,S){return this.y=+S,!0}},whitespace:{regex:/^[ .,\t]+/,name:"whitespace"},dateShortWithTimeLong:{regex:RegExp("^"+Re+"t?"+s+"[:.]"+y+"[:.]"+p,"i"),name:"dateshortwithtimelong",callback:function(C,S,P,j,N,k){return this.ymd(this.y,q(S),+P)&&this.time(+j,+N,+k,0)}},dateShortWithTimeLong12:{regex:RegExp("^"+Re+o+"[:.]"+y+"[:.]"+u+f+l,"i"),name:"dateshortwithtimelong12",callback:function(C,S,P,j,N,k,z){return this.ymd(this.y,q(S),+P)&&this.time(ue(+j,z),+N,+k,0)}},dateShortWithTimeShort:{regex:RegExp("^"+Re+"t?"+s+"[:.]"+y,"i"),name:"dateshortwithtimeshort",callback:function(C,S,P,j,N){return this.ymd(this.y,q(S),+P)&&this.time(+j,+N,0,0)}},dateShortWithTimeShort12:{regex:RegExp("^"+Re+o+"[:.]"+t+f+l,"i"),name:"dateshortwithtimeshort12",callback:function(C,S,P,j,N,k){return this.ymd(this.y,q(S),+P)&&this.time(ue(+j,k),+N,0,0)}}},Tn={y:NaN,m:NaN,d:NaN,h:NaN,i:NaN,s:NaN,f:NaN,ry:0,rm:0,rd:0,rh:0,ri:0,rs:0,rf:0,weekday:NaN,weekdayBehavior:0,firstOrLastDayOfMonth:0,z:NaN,dates:0,times:0,zones:0,ymd:function(C,S,P){return this.dates>0?!1:(this.dates++,this.y=C,this.m=S,this.d=P,!0)},time:function(C,S,P,j){return this.times>0?!1:(this.times++,this.h=C,this.i=S,this.s=P,this.f=j,!0)},resetTime:function(){return this.h=0,this.i=0,this.s=0,this.f=0,this.times=0,!0},zone:function(C){return this.zones<=1?(this.zones++,this.z=C,!0):!1},toDate:function(C){switch(this.dates&&!this.times&&(this.h=this.i=this.s=this.f=0),isNaN(this.y)&&(this.y=C.getFullYear()),isNaN(this.m)&&(this.m=C.getMonth()),isNaN(this.d)&&(this.d=C.getDate()),isNaN(this.h)&&(this.h=C.getHours()),isNaN(this.i)&&(this.i=C.getMinutes()),isNaN(this.s)&&(this.s=C.getSeconds()),isNaN(this.f)&&(this.f=C.getMilliseconds()),this.firstOrLastDayOfMonth){case 1:this.d=1;break;case-1:this.d=0,this.m+=1;break}if(!isNaN(this.weekday)){var S=new Date(C.getTime());S.setFullYear(this.y,this.m,this.d),S.setHours(this.h,this.i,this.s,this.f);var P=S.getDay();if(this.weekdayBehavior===2)P===0&&this.weekday!==0&&(this.weekday=-6),this.weekday===0&&P!==0&&(this.weekday=7),this.d-=P,this.d+=this.weekday;else{var j=this.weekday-P;(this.rd<0&&j<0||this.rd>=0&&j<=-this.weekdayBehavior)&&(j+=7),this.weekday>=0?this.d+=j:this.d-=7-(Math.abs(this.weekday)-P),this.weekday=NaN}}this.y+=this.ry,this.m+=this.rm,this.d+=this.rd,this.h+=this.rh,this.i+=this.ri,this.s+=this.rs,this.f+=this.rf,this.ry=this.rm=this.rd=0,this.rh=this.ri=this.rs=this.rf=0;var N=new Date(C.getTime());switch(N.setFullYear(this.y,this.m,this.d),N.setHours(this.h,this.i,this.s,this.f),this.firstOrLastDayOfMonth){case 1:N.setDate(1);break;case-1:N.setMonth(N.getMonth()+1,0);break}return!isNaN(this.z)&&N.getTimezoneOffset()!==this.z&&(N.setUTCFullYear(N.getFullYear(),N.getMonth(),N.getDate()),N.setUTCHours(N.getHours(),N.getMinutes()+this.z,N.getSeconds(),N.getMilliseconds())),N}};r.exports=function(C,S){S==null&&(S=Math.floor(Date.now()/1e3));for(var P=[M.yesterday,M.now,M.noon,M.midnightOrToday,M.tomorrow,M.timestamp,M.firstOrLastDay,M.backOrFrontOf,M.timeTiny12,M.timeShort12,M.timeLong12,M.mssqltime,M.timeShort24,M.timeLong24,M.iso8601long,M.gnuNoColon,M.iso8601noColon,M.americanShort,M.american,M.iso8601date4,M.iso8601dateSlash,M.dateSlash,M.gnuDateShortOrIso8601date2,M.gnuDateShorter,M.dateFull,M.pointedDate4,M.pointedDate2,M.dateNoDay,M.dateNoDayRev,M.dateTextual,M.dateNoYear,M.dateNoYearRev,M.dateNoColon,M.xmlRpc,M.xmlRpcNoColon,M.soap,M.wddx,M.exif,M.pgydotd,M.isoWeekDay,M.pgTextShort,M.pgTextReverse,M.clf,M.year4,M.ago,M.dayText,M.relativeTextWeek,M.relativeText,M.monthFullOrMonthAbbr,M.tzCorrection,M.dateShortWithTimeShort12,M.dateShortWithTimeLong12,M.dateShortWithTimeShort,M.dateShortWithTimeLong,M.relative,M.whitespace],j=Object.create(Tn);C.length;){for(var N=null,k=null,z=0,Ce=P.length;z<Ce;z++){var Ue=P[z],pt=C.match(Ue.regex);pt&&(!N||pt[0].length>N[0].length)&&(N=pt,k=Ue)}if(!k||k.callback&&k.callback.apply(j,N)===!1)return!1;C=C.substr(N[0].length),k=null,N=null}return Math.floor(j.toDate(new Date(S*1e3))/1e3)}},function(r,c,a){r.exports=function(f,l){var s,h,o=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],y=/\\?(.?)/gi,t=function(m,v){return h[m]?h[m]():v},p=function(m,v){for(m=String(m);m.length<v;)m="0"+m;return m};h={d:function(){return p(h.j(),2)},D:function(){return h.l().slice(0,3)},j:function(){return s.getDate()},l:function(){return o[h.w()]+"day"},N:function(){return h.w()||7},S:function(){var m=h.j(),v=m%10;return v<=3&&parseInt(m%100/10,10)===1&&(v=0),["st","nd","rd"][v-1]||"th"},w:function(){return s.getDay()},z:function(){var m=new Date(h.Y(),h.n()-1,h.j()),v=new Date(h.Y(),0,1);return Math.round((m-v)/864e5)},W:function(){var m=new Date(h.Y(),h.n()-1,h.j()-h.N()+3),v=new Date(m.getFullYear(),0,4);return p(1+Math.round((m-v)/864e5/7),2)},F:function(){return o[6+h.n()]},m:function(){return p(h.n(),2)},M:function(){return h.F().slice(0,3)},n:function(){return s.getMonth()+1},t:function(){return new Date(h.Y(),h.n(),0).getDate()},L:function(){var m=h.Y();return m%4===0&m%100!==0|m%400===0},o:function(){var m=h.n(),v=h.W(),g=h.Y();return g+(m===12&&v<9?1:m===1&&v>9?-1:0)},Y:function(){return s.getFullYear()},y:function(){return h.Y().toString().slice(-2)},a:function(){return s.getHours()>11?"pm":"am"},A:function(){return h.a().toUpperCase()},B:function(){var m=s.getUTCHours()*3600,v=s.getUTCMinutes()*60,g=s.getUTCSeconds();return p(Math.floor((m+v+g+3600)/86.4)%1e3,3)},g:function(){return h.G()%12||12},G:function(){return s.getHours()},h:function(){return p(h.g(),2)},H:function(){return p(h.G(),2)},i:function(){return p(s.getMinutes(),2)},s:function(){return p(s.getSeconds(),2)},u:function(){return p(s.getMilliseconds()*1e3,6)},e:function(){var m="Not supported (see source code of date() for timezone on how to add support)";throw new Error(m)},I:function(){var m=new Date(h.Y(),0),v=Date.UTC(h.Y(),0),g=new Date(h.Y(),6),b=Date.UTC(h.Y(),6);return m-v!==g-b?1:0},O:function(){var m=s.getTimezoneOffset(),v=Math.abs(m);return(m>0?"-":"+")+p(Math.floor(v/60)*100+v%60,4)},P:function(){var m=h.O();return m.substr(0,3)+":"+m.substr(3,2)},T:function(){return"UTC"},Z:function(){return-s.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(y,t)},r:function(){return"D, d M Y H:i:s O".replace(y,t)},U:function(){return s/1e3|0}};var u=function(m,v){return s=v===void 0?new Date:v instanceof Date?new Date(v):new Date(v*1e3),m.replace(y,t)};return u(f,l)}},function(r,c,a){r.exports=function(f){return!(f===!1||f===0||f===0||f===""||f==="0"||Array.isArray(f)&&f.length===0||f==null)}},function(r,c,a){r.exports=function(i){i.Templates.registerLoader("ajax",function(f,l,s,h){var o,y=l.precompiled,t=this.parsers[l.parser]||this.parser.twig;if(typeof XMLHttpRequest>"u")throw new i.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');var p=new XMLHttpRequest;return p.onreadystatechange=function(){var u=null;p.readyState===4&&(p.status===200||window.cordova&&p.status===0?(i.log.debug("Got template ",p.responseText),y===!0?u=JSON.parse(p.responseText):u=p.responseText,l.url=f,l.data=u,o=t.call(this,l),typeof s=="function"&&s(o)):typeof h=="function"&&h(p))},p.open("GET",f,!!l.async),p.overrideMimeType("text/plain"),p.send(),l.async?!0:o})}},function(r,c,a){r.exports=function(i){var f,l;try{f=a(33),l=a(6)}catch(s){console.warn("Missing fs and path modules. "+s)}i.Templates.registerLoader("fs",function(s,h,o,y){var t,p=null,u=h.precompiled,d=this.parsers[h.parser]||this.parser.twig;if(!f||!l)throw new i.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var m=function(g,b){if(g){typeof y=="function"&&y(g);return}u===!0&&(b=JSON.parse(b)),h.data=b,h.path=h.path||s,t=d.call(this,h),typeof o=="function"&&o(t)};if(h.path=h.path||s,h.async)return f.stat(h.path,function(v,g){if(v||!g.isFile()){typeof y=="function"&&y(new i.Error("Unable to find template file "+h.path));return}f.readFile(h.path,"utf8",m)}),!0;try{if(!f.statSync(h.path).isFile())throw new i.Error("Unable to find template file "+h.path)}catch(v){throw new i.Error("Unable to find template file "+h.path+". "+v)}return p=f.readFileSync(h.path,"utf8"),m(void 0,p),t})}},function(r,c){r.exports=or},function(r,c,a){var i=a(0),f=i(a(2));function l(t,p){var u;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(u=s(t))||p){u&&(t=u);var d=0,m=function(){};return{s:m,n:function(){return d>=t.length?{done:!0}:{done:!1,value:t[d++]}},e:function(x){throw x},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,g=!1,b;return{s:function(){u=t[Symbol.iterator]()},n:function(){var x=u.next();return v=x.done,x},e:function(x){g=!0,b=x},f:function(){try{!v&&u.return!=null&&u.return()}finally{if(g)throw b}}}}function s(t,p){if(t){if(typeof t=="string")return h(t,p);var u=Object.prototype.toString.call(t).slice(8,-1);if(u==="Object"&&t.constructor&&(u=t.constructor.name),u==="Map"||u==="Set")return Array.from(t);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return h(t,p)}}function h(t,p){(p==null||p>t.length)&&(p=t.length);for(var u=0,d=new Array(p);u<p;u++)d[u]=t[u];return d}function o(t,p){var u=Object.keys(t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);p&&(d=d.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),u.push.apply(u,d)}return u}function y(t){for(var p=1;p<arguments.length;p++){var u=arguments[p]!=null?arguments[p]:{};p%2?o(Object(u),!0).forEach(function(d){(0,f.default)(t,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(u)):o(Object(u)).forEach(function(d){Object.defineProperty(t,d,Object.getOwnPropertyDescriptor(u,d))})}return t}r.exports=function(t){for(t.logic={},t.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",apply:"Twig.logic.type.apply",endapply:"Twig.logic.type.endapply",do:"Twig.logic.type.do",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed",with:"Twig.logic.type.with",endwith:"Twig.logic.type.endwith",deprecated:"Twig.logic.type.deprecated"},t.logic.definitions=[{type:t.logic.type.if_,regex:/^if\s?([\s\S]+)$/,next:[t.logic.type.else_,t.logic.type.elseif,t.logic.type.endif],open:!0,compile:function(u){var d=u.match[1];return u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack,delete u.match,u},parse:function(u,d,m){var v=this;return t.expression.parseAsync.call(v,u.stack,d).then(function(g){return m=!0,t.lib.boolval(g)?(m=!1,v.parseAsync(u.output,d)):""}).then(function(g){return{chain:m,output:g}})}},{type:t.logic.type.elseif,regex:/^elseif\s?([^\s].*)$/,next:[t.logic.type.else_,t.logic.type.elseif,t.logic.type.endif],open:!1,compile:function(u){var d=u.match[1];return u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack,delete u.match,u},parse:function(u,d,m){var v=this;return t.expression.parseAsync.call(v,u.stack,d).then(function(g){return m&&t.lib.boolval(g)?(m=!1,v.parseAsync(u.output,d)):""}).then(function(g){return{chain:m,output:g}})}},{type:t.logic.type.else_,regex:/^else$/,next:[t.logic.type.endif,t.logic.type.endfor],open:!1,parse:function(u,d,m){var v=t.Promise.resolve(""),g=this;return m&&(v=g.parseAsync(u.output,d)),v.then(function(b){return{chain:m,output:b}})}},{type:t.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:t.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([\S\s]+?)(?:\s+if\s+([^\s].*))?$/,next:[t.logic.type.else_,t.logic.type.endfor],open:!0,compile:function(u){var d=u.match[1],m=u.match[2],v=u.match[3],g=null;if(u.keyVar=null,u.valueVar=null,d.includes(","))if(g=d.split(","),g.length===2)u.keyVar=g[0].trim(),u.valueVar=g[1].trim();else throw new t.Error("Invalid expression in for loop: "+d);else u.valueVar=d.trim();return u.expression=t.expression.compile.call(this,{type:t.expression.type.expression,value:m}).stack,v&&(u.conditional=t.expression.compile.call(this,{type:t.expression.type.expression,value:v}).stack),delete u.match,u},parse:function(u,d,m){var v=[],g,b=0,E,x=this,A=u.conditional,_=function(O,L){var w=A!==void 0;return{index:O+1,index0:O,revindex:w?void 0:L-O,revindex0:w?void 0:L-O-1,first:O===0,last:w?void 0:O===L-1,length:w?void 0:L,parent:d}},R=function(O,L){var w=y({},d);w[u.valueVar]=L,u.keyVar&&(w[u.keyVar]=O),w.loop=_(b,g);var $=A===void 0?t.Promise.resolve(!0):t.expression.parseAsync.call(x,A,w);return $.then(function(B){if(B)return x.parseAsync(u.output,w).then(function(U){v.push(U),b+=1})}).then(function(){delete w.loop,delete w[u.valueVar],delete w[u.keyVar],t.merge(d,w,!0)})};return t.expression.parseAsync.call(x,u.expression,d).then(function(D){if(Array.isArray(D))return g=D.length,t.async.forEach(D,function(O){var L=b;return R(L,O)});if(t.lib.is("Object",D))return D._keys===void 0?E=Object.keys(D):E=D._keys,g=E.length,t.async.forEach(E,function(O){if(O!=="_keys")return R(O,D[O])})}).then(function(){return m=v.length===0,{chain:m,context:d,output:t.output.call(x.template,v)}})}},{type:t.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:t.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(u){var d=u.match[1].trim(),m=u.match[2],v=t.expression.compile.call(this,{type:t.expression.type.expression,value:m}).stack;return u.key=d,u.expression=v,delete u.match,u},parse:function(u,d,m){var v=u.key,g=this;return t.expression.parseAsync.call(g,u.expression,d).then(function(b){return b===d&&(b=y({},b)),d[v]=b,{chain:m,context:d}})}},{type:t.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[t.logic.type.endset],open:!0,compile:function(u){var d=u.match[1].trim();return u.key=d,delete u.match,u},parse:function(u,d,m){var v=this,g=u.key;return v.parseAsync(u.output,d).then(function(b){return v.context[g]=b,d[g]=b,{chain:m,context:d}})}},{type:t.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:t.logic.type.filter,regex:/^filter\s+(.+)$/,next:[t.logic.type.endfilter],open:!0,compile:function(u){var d="|"+u.match[1].trim();return u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack,delete u.match,u},parse:function(u,d,m){var v=this;return v.parseAsync(u.output,d).then(function(g){var b=[{type:t.expression.type.string,value:g}].concat(u.stack);return t.expression.parseAsync.call(v,b,d)}).then(function(g){return{chain:m,output:g}})}},{type:t.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:t.logic.type.apply,regex:/^apply\s+(.+)$/,next:[t.logic.type.endapply],open:!0,compile:function(u){var d="|"+u.match[1].trim();return u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack,delete u.match,u},parse:function(u,d,m){var v=this;return v.parseAsync(u.output,d).then(function(g){var b=[{type:t.expression.type.string,value:g}].concat(u.stack);return t.expression.parseAsync.call(v,b,d)}).then(function(g){return{chain:m,output:g}})}},{type:t.logic.type.endapply,regex:/^endapply$/,next:[],open:!1},{type:t.logic.type.do,regex:/^do\s+([\S\s]+)$/,next:[],open:!0,compile:function(u){var d=u.match[1],m=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack;return u.expression=m,delete u.match,u},parse:function(u,d,m){var v=this;return t.expression.parseAsync.call(v,u.expression,d).then(function(){return{chain:m,context:d}})}},{type:t.logic.type.block,regex:/^block\s+(\w+)$/,next:[t.logic.type.endblock],open:!0,compile:function(u){return u.blockName=u.match[1].trim(),delete u.match,u},parse:function(u,d,m){var v=this,g=t.Promise.resolve();return v.template.blocks.defined[u.blockName]=new t.Block(v.template,u),(v.template.parentTemplate===null||v.template.parentTemplate instanceof t.Template)&&(g=v.getBlock(u.blockName).render(v,d)),g.then(function(b){return{chain:m,output:b}})}},{type:t.logic.type.shortblock,regex:/^block\s+(\w+)\s+(.+)$/,next:[],open:!0,compile:function(u){var d=this;return u.expression=u.match[2].trim(),u.output=t.expression.compile({type:t.expression.type.expression,value:u.expression}).stack,t.logic.handler[t.logic.type.block].compile.apply(d,[u])},parse:function(){for(var u=this,d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return t.logic.handler[t.logic.type.block].parse.apply(u,m)}},{type:t.logic.type.endblock,regex:/^endblock(?:\s+(\w+))?$/,next:[],open:!1},{type:t.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(u){var d=u.match[1].trim();return delete u.match,u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack,u},parse:function(u,d,m){var v=this;return t.expression.parseAsync.call(v,u.stack,d).then(function(g){if(Array.isArray(g)){var b=g.reverse().reduce(function(E,x){try{return{render:v.template.importFile(x),fileName:x}}catch{return E}},{render:null,fileName:null});b.fileName!==null&&(v.template.parentTemplate=b.fileName)}else v.template.parentTemplate=g;return{chain:m,output:""}})}},{type:t.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(u){var d=u.match[1].trim();return delete u.match,u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack,u},parse:function(u,d,m){var v=this;return t.expression.parseAsync.call(v,u.stack,d).then(function(g){var b=v.template.importFile(g),E=new t.ParseState(b);return E.parseAsync(b.tokens).then(function(){v.template.blocks.imported=y(y({},v.template.blocks.imported),E.getBlocks())})}).then(function(){return{chain:m,output:""}})}},{type:t.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile:function(u){var d=u.match,m=d[1].trim(),v=d[2]!==void 0,g=d[3],b=d[4]!==void 0&&d[4].length;return delete u.match,u.only=b,u.ignoreMissing=v,u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:m}).stack,g!==void 0&&(u.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:g.trim()}).stack),u},parse:function(u,d,m){var v=u.only?{}:y({},d),g=u.ignoreMissing,b=this,E=null,x={chain:m,output:""};return typeof u.withStack>"u"?E=t.Promise.resolve():E=t.expression.parseAsync.call(b,u.withStack,d).then(function(A){v=y(y({},v),A)}),E.then(function(){return t.expression.parseAsync.call(b,u.stack,d)}).then(function(A){var _;Array.isArray(A)?_=A:_=[A];var R=_.reduce(function(D,O){if(D.render===null){if(O instanceof t.Template)return{render:O.renderAsync(v,{isInclude:!0}),lastError:null};try{return{render:b.template.importFile(O).renderAsync(v,{isInclude:!0}),lastError:null}}catch(L){return{render:null,lastError:L}}}return D},{render:null,lastError:null});if(R.render!==null)return R.render;if(R.render===null&&g)return"";throw R.lastError}).then(function(A){return A!==""&&(x.output=A),x})}},{type:t.logic.type.spaceless,regex:/^spaceless$/,next:[t.logic.type.endspaceless],open:!0,parse:function(u,d,m){var v=this;return v.parseAsync(u.output,d).then(function(g){var b=/>\s+</g,E=g.replace(b,"><").trim();return E=new t.Markup(E),{chain:m,output:E}})}},{type:t.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:t.logic.type.macro,regex:/^macro\s+(\w+)\s*\(\s*((?:\w+(?:\s*=\s*([\s\S]+))?(?:,\s*)?)*)\s*\)$/,next:[t.logic.type.endmacro],open:!0,compile:function(u){var d=u.match[1],m=u.match[2].split(/\s*,\s*/),v=m.map(function(A){return A.split(/\s*=\s*/)[0]}),g=v.length;if(g>1)for(var b={},E=0;E<g;E++){var x=v[E];if(b[x])throw new t.Error("Duplicate arguments for parameter: "+x);b[x]=1}return u.macroName=d,u.parameters=v,u.defaults=m.reduce(function(A,_){var R=_.split(/\s*=\s*/),D=R[0],O=R[1];return O?A[D]=t.expression.compile.call(this,{type:t.expression.type.expression,value:O}).stack:A[D]=void 0,A},{}),delete u.match,u},parse:function(u,d,m){var v=this;return v.macros[u.macroName]=function(){for(var g=arguments.length,b=new Array(g),E=0;E<g;E++)b[E]=arguments[E];var x=y(y({},d),{},{_self:v.macros});return t.async.forEach(u.parameters,function(A,_){return typeof b[_]<"u"?(x[A]=b[_],!0):typeof u.defaults[A]<"u"?t.expression.parseAsync.call(this,u.defaults[A],d).then(function(R){return x[A]=R,t.Promise.resolve()}):(x[A]=void 0,!0)}).then(function(){return v.parseAsync(u.output,x)})},{chain:m,output:""}}},{type:t.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:t.logic.type.import_,regex:/^import\s+(.+)\s+as\s+(\w+)$/,next:[],open:!0,compile:function(u){var d=u.match[1].trim(),m=u.match[2].trim();return delete u.match,u.expression=d,u.contextName=m,u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack,u},parse:function(u,d,m){var v=this,g={chain:m,output:""};return u.expression==="_self"?(d[u.contextName]=v.macros,g):t.expression.parseAsync.call(v,u.stack,d).then(function(b){return v.template.importFile(b||u.expression)}).then(function(b){var E=new t.ParseState(b);return E.parseAsync(b.tokens).then(function(){return d[u.contextName]=E.macros,g})})}},{type:t.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(u){var d=u.match[1].trim(),m=u.match[2].trim().split(/\s*,\s*/),v={},g=l(m),b;try{for(g.s();!(b=g.n()).done;){var E=b.value,x=E.match(/^(\w+)\s+as\s+(\w+)$/);x?v[x[1].trim()]=x[2].trim():E.match(/^(\w+)$/)&&(v[E]=E)}}catch(A){g.e(A)}finally{g.f()}return delete u.match,u.expression=d,u.macroNames=v,u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:d}).stack,u},parse:function(u,d,m){var v=this,g;return u.expression==="_self"?g=t.Promise.resolve(v.macros):g=t.expression.parseAsync.call(v,u.stack,d).then(function(b){return v.template.importFile(b||u.expression)}).then(function(b){var E=new t.ParseState(b);return E.parseAsync(b.tokens).then(function(){return E.macros})}),g.then(function(b){for(var E in u.macroNames)b[E]!==void 0&&(d[u.macroNames[E]]=b[E]);return{chain:m,output:""}})}},{type:t.logic.type.embed,regex:/^embed\s+(.+?)(?:\s+(ignore missing))?(?:\s+with\s+([\S\s]+?))?(?:\s+(only))?$/,next:[t.logic.type.endembed],open:!0,compile:function(u){var d=u.match,m=d[1].trim(),v=d[2]!==void 0,g=d[3],b=d[4]!==void 0&&d[4].length;return delete u.match,u.only=b,u.ignoreMissing=v,u.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:m}).stack,g!==void 0&&(u.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:g.trim()}).stack),u},parse:function(u,d,m){var v={},g=t.Promise.resolve(),b=this;return u.only||(v=y({},d)),u.withStack!==void 0&&(g=t.expression.parseAsync.call(b,u.withStack,d).then(function(E){v=y(y({},v),E)})),g.then(function(){return t.expression.parseAsync.call(b,u.stack,v)}).then(function(E){var x=new t.Template({data:u.output,id:b.template.id,base:b.template.base,path:b.template.path,url:b.template.url,name:b.template.name,method:b.template.method,options:b.template.options});try{x.importFile(E)}catch(A){if(u.ignoreMissing)return"";throw b=null,A}return x.parentTemplate=E,x.renderAsync(v,{isInclude:!0})}).then(function(E){return{chain:m,output:E}})}},{type:t.logic.type.endembed,regex:/^endembed$/,next:[],open:!1},{type:t.logic.type.with,regex:/^(?:with\s+([\S\s]+?))(?:\s|$)(only)?$/,next:[t.logic.type.endwith],open:!0,compile:function(u){var d=u.match,m=d[1],v=d[2]!==void 0&&d[2].length;return delete u.match,u.only=v,m!==void 0&&(u.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:m.trim()}).stack),u},parse:function(u,d,m){var v={},g,b=this,E=t.Promise.resolve();return u.only||(v=y({},d)),u.withStack!==void 0&&(E=t.expression.parseAsync.call(b,u.withStack,d).then(function(x){for(g in x)Object.hasOwnProperty.call(x,g)&&(v[g]=x[g])})),E.then(function(){return b.parseAsync(u.output,v)}).then(function(x){return{chain:m,output:x}})}},{type:t.logic.type.endwith,regex:/^endwith$/,next:[],open:!1},{type:t.logic.type.deprecated,regex:/^deprecated\s+(.+)$/,next:[],open:!0,compile:function(u){return console.warn("Deprecation notice: "+u.match[1]),u},parse:function(){return{}}}],t.logic.handler={},t.logic.extendType=function(p,u){u=u||"Twig.logic.type"+p,t.logic.type[p]=u},t.logic.extend=function(p){if(p.type)t.logic.extendType(p.type);else throw new t.Error("Unable to extend logic definition. No type provided for "+p);t.logic.handler[p.type]=p};t.logic.definitions.length>0;)t.logic.extend(t.logic.definitions.shift());return t.logic.compile=function(p){var u=p.value.trim(),d=t.logic.tokenize.call(this,u),m=t.logic.handler[d.type];return m.compile&&(d=m.compile.call(this,d),t.log.trace("Twig.logic.compile: ","Compiled logic token to ",d)),d},t.logic.tokenize=function(p){var u=null,d=null,m=null,v=null,g=null,b=null,E=null;p=p.trim();for(u in t.logic.handler)if(Object.hasOwnProperty.call(t.logic.handler,u)){for(d=t.logic.handler[u].type,m=t.logic.handler[u].regex,v=m,Array.isArray(m)||(v=[m]),g=v.length,b=0;b<g;b++)if(E=v[b].exec(p),E!==null)return t.log.trace("Twig.logic.tokenize: ","Matched a ",d," regular expression of ",E),{type:d,match:E}}throw new t.Error("Unable to parse '"+p.trim()+"'")},t.logic.parse=function(p,u,d,m){return t.async.potentiallyAsync(this,m,function(){t.log.debug("Twig.logic.parse: ","Parsing logic token ",p);var v=t.logic.handler[p.type],g,b=this;return v.parse?(b.nestingStack.unshift(p),g=v.parse.call(b,p,u||{},d),t.isPromise(g)?g=g.then(function(E){return b.nestingStack.shift(),E}):b.nestingStack.shift(),g):""})},t}},function(r,c,a){r.exports=function(i){i.Templates.registerParser("source",function(f){return f.data||""})}},function(r,c,a){r.exports=function(i){i.Templates.registerParser("twig",function(f){return new i.Template(f)})}},function(r,c,a){var i=a(0),f=i(a(1));r.exports=function(l){return l.path={},l.path.parsePath=function(s,h){var o=null,y=s.options.namespaces,t=h||"",p=y&&(0,f.default)(y)==="object";if(p){for(o in y)if(t.includes(o)){var u=new RegExp("^"+o+"::"),d=new RegExp("^@"+o+"/"),m=y[o].replace(/([^/])$/,"$1/");if(u.test(t))return t=t.replace(u,m),t;if(d.test(t))return t=t.replace(d,m),t}}return l.path.relativePath(s,t)},l.path.relativePath=function(s,h){var o,y,t="/",p=[],u=h||"",d;if(s.url)typeof s.base>"u"?o=s.url:o=s.base.replace(/([^/])$/,"$1/");else if(s.path){var m=a(6),v=m.sep||t,g=new RegExp("^\\.{1,2}"+v.replace("\\","\\\\"));u=u.replace(/\//g,v),s.base!==void 0&&u.match(g)===null?(u=u.replace(s.base,""),o=s.base+v):o=m.normalize(s.path),o=o.replace(v+v,v),t=v}else if((s.name||s.id)&&s.method&&s.method!=="fs"&&s.method!=="ajax")o=s.base||s.name||s.id;else throw new l.Error("Cannot extend an inline template.");for(y=o.split(t),y.pop(),y=y.concat(u.split(t));y.length>0;)d=y.shift(),d==="."||(d===".."&&p.length>0&&p[p.length-1]!==".."?p.pop():p.push(d));return p.join(t)},l}},function(r,c,a){r.exports=function(i){return i.tests={empty:function(l){if(l==null)return!0;if(typeof l=="number"||l.length>0)return!1;for(var s in l)if(Object.hasOwnProperty.call(l,s))return!1;return!0},odd:function(l){return l%2===1},even:function(l){return l%2===0},divisibleby:function(l,s){return l%s[0]===0},defined:function(l){return l!==void 0},none:function(l){return l===null},null:function(l){return this.none(l)},"same as":function(l,s){return l===s[0]},sameas:function(l,s){return console.warn("`sameas` is deprecated use `same as`"),i.tests["same as"](l,s)},iterable:function(l){return l&&(i.lib.is("Array",l)||i.lib.is("Object",l))}},i.test=function(f,l,s){if(!i.tests[f])throw i.Error("Test "+f+" is not defined.");return i.tests[f](l,s)},i.test.extend=function(f,l){i.tests[f]=l},i}},function(r,c,a){r.exports=function(i){var f=0,l=1,s=2;i.ParseState.prototype.parseAsync=function(t,p){return this.parse(t,p,!0)},i.expression.parseAsync=function(t,p,u){var d=this;return i.expression.parse.call(d,t,p,u,!0)},i.logic.parseAsync=function(t,p,u){var d=this;return i.logic.parse.call(d,t,p,u,!0)},i.Template.prototype.renderAsync=function(t,p){return this.render(t,p,!0)},i.async={},i.isPromise=function(t){return t&&t.then&&typeof t.then=="function"};function h(t,p,u){var d=u.call(t),m=null,v=!0;if(!i.isPromise(d))return d;if(d.then(function(g){d=g,v=!1}).catch(function(g){m=g}),m!==null)throw m;if(v)throw new i.Error("You are using Twig.js in sync mode in combination with async extensions.");return d}i.async.potentiallyAsync=function(t,p,u){return p?i.Promise.resolve(u.call(t)):h(t,p,u)};function o(t,p,u){try{t(p,u)}catch(d){u(d)}}function y(t,p,u){var d=[p,u,-2];return t?t[2]===-2?t=[t,d]:t.push(d):t=d,t}return i.Thenable=function(t,p,u){this.then=t,this._value=u?p:null,this._state=u||f},i.Thenable.prototype.catch=function(t){return this._state===l?this:this.then(null,t)},i.Thenable.resolvedThen=function(t){try{return i.Promise.resolve(t(this._value))}catch(p){return i.Promise.reject(p)}},i.Thenable.rejectedThen=function(t,p){if(!p||typeof p!="function")return this;var u=this._value,d;try{d=p(u)}catch(m){d=i.Promise.reject(m)}return i.Promise.resolve(d)},i.Promise=function(t){var p=f,u=null,d=function(b,E){p=b,u=E};function m(g){d(l,g)}function v(g){d(s,g)}return o(t,m,v),p===l?i.Promise.resolve(u):p===s?i.Promise.reject(u):(d=new i.FullPromise,d.promise)},i.FullPromise=function(){var t=null;function p(g){g(v._value)}function u(g,b){b(v._value)}var d=function(b,E){t=y(t,b,E)};function m(g,b){if(!v._state&&(v._value=b,v._state=g,d=g===l?p:u,!!t)){if(t[2]===-2){d(t[0],t[1]),t=null;return}t.forEach(function(E){d(E[0],E[1])}),t=null}}var v=new i.Thenable(function(g,b){var E=typeof g=="function";if(v._state===l&&!E)return i.Promise.resolve(v._value);if(v._state===l)try{return i.Promise.resolve(g(v._value))}catch(A){return i.Promise.reject(A)}var x=typeof b=="function";return new i.Promise(function(A,_){d(E?function(R){try{A(g(R))}catch(D){_(D)}}:A,x?function(R){try{A(b(R))}catch(D){_(D)}}:_)})});return m.promise=v,m},i.Promise.defaultResolved=new i.Thenable(i.Thenable.resolvedThen,void 0,l),i.Promise.emptyStringResolved=new i.Thenable(i.Thenable.resolvedThen,"",l),i.Promise.resolve=function(t){return arguments.length===0||typeof t>"u"?i.Promise.defaultResolved:i.isPromise(t)?t:t===""?i.Promise.emptyStringResolved:new i.Thenable(i.Thenable.resolvedThen,t,l)},i.Promise.reject=function(t){return new i.Thenable(i.Thenable.rejectedThen,t,s)},i.Promise.all=function(t){var p=new Array(t.length);return i.async.forEach(t,function(u,d){if(!i.isPromise(u)){p[d]=u;return}if(u._state===l){p[d]=u._value;return}return u.then(function(m){p[d]=m})}).then(function(){return p})},i.async.forEach=function(t,p){var u=t?t.length:0,d=0;function m(){var v=null;do{if(d===u)return i.Promise.resolve();v=p(t[d],d),d++}while(!v||!i.isPromise(v)||v._state===l);return v.then(m)}return m()},i}},function(r,c,a){r.exports=function(i){return i.exports={VERSION:i.VERSION},i.exports.twig=function(f){var l=f.id,s={strictVariables:f.strict_variables||!1,autoescape:f.autoescape!==null&&f.autoescape||!1,allowInlineIncludes:f.allowInlineIncludes||!1,rethrow:f.rethrow||!1,namespaces:f.namespaces};if(i.cache&&l&&i.validateId(l),f.debug!==void 0&&(i.debug=f.debug),f.trace!==void 0&&(i.trace=f.trace),f.data!==void 0)return i.Templates.parsers.twig({data:f.data,path:Object.hasOwnProperty.call(f,"path")?f.path:void 0,module:f.module,id:l,options:s});if(f.ref!==void 0){if(f.id!==void 0)throw new i.Error("Both ref and id cannot be set on a twig.js template.");return i.Templates.load(f.ref)}if(f.method!==void 0){if(!i.Templates.isRegisteredLoader(f.method))throw new i.Error('Loader for "'+f.method+'" is not defined.');return i.Templates.loadRemote(f.name||f.href||f.path||l||void 0,{id:l,method:f.method,parser:f.parser||"twig",base:f.base,module:f.module,precompiled:f.precompiled,async:f.async,options:s},f.load,f.error)}if(f.href!==void 0)return i.Templates.loadRemote(f.href,{id:l,method:"ajax",parser:f.parser||"twig",base:f.base,module:f.module,precompiled:f.precompiled,async:f.async,options:s},f.load,f.error);if(f.path!==void 0)return i.Templates.loadRemote(f.path,{id:l,method:"fs",parser:f.parser||"twig",base:f.base,module:f.module,precompiled:f.precompiled,async:f.async,options:s},f.load,f.error)},i.exports.extendFilter=function(f,l){i.filter.extend(f,l)},i.exports.extendFunction=function(f,l){i._function.extend(f,l)},i.exports.extendTest=function(f,l){i.test.extend(f,l)},i.exports.extendTag=function(f){i.logic.extend(f)},i.exports.extend=function(f){f(i)},i.exports.compile=function(f,l){var s=l.filename,h=l.filename,o=new i.Template({data:f,path:h,id:s,options:l.settings["twig options"]});return function(y){return o.render(y)}},i.exports.renderFile=function(f,l,s){typeof l=="function"&&(s=l,l={}),l=l||{};var h=l.settings||{},o=h["twig options"],y={path:f,base:h.views,load:function(u){if(!o||!o.allowAsync){s(null,String(u.render(l)));return}u.renderAsync(l).then(function(d){return s(null,d)},s)},error:function(u){s(u)}};if(o)for(var t in o)Object.hasOwnProperty.call(o,t)&&(y[t]=o[t]);i.exports.twig(y)},i.exports.__express=i.exports.renderFile,i.exports.cache=function(f){i.cache=f},i.exports.path=i.path,i.exports.filters=i.filters,i.exports.tests=i.tests,i.exports.functions=i.functions,i.exports.Promise=i.Promise,i}}])})})(Tr);var os=Tr.exports;const rt=Lr(os),Z={registerComponentTemplate:us,extendComponentTemplate:ls,registerTemplateOverride:ps,getRenderedTemplate:_s,resolveTemplates:fs,clearTwigCache:ms,getTwigCache:vs,disableTwigCache:gs,getTemplateRegistry:bs,getNormalizedTemplateRegistry:xs,getTemplateOverrides:Es};let en=null;rt.extend(n=>{n.token.definitions=n.token.definitions.filter(e=>e.type!==n.token.type.output_whitespace_pre&&e.type!==n.token.type.output_whitespace_post&&e.type!==n.token.type.output_whitespace_both&&e.type!==n.token.type.output),n.exports.extendTag({type:"parent",regex:/^parent/,next:[],open:!0,parse(e,r,c){return{chain:c,output:"{{|PARENT|}}"}}}),n.exports.getRegistry=function(){return n.Templates.registry},n.exports.clearRegistry=function(){n.Templates.registry={}},en=n.Templates,n.cache=!1});const as="{{\\|PARENT\\|}}",cs=new RegExp(as,"gm"),K=new Map,G=new Map;function us(n,e=null){const r=K.get(n)||{},c=r.overrides?r.overrides:[];return K.set(n,{name:n,raw:e,extend:null,overrides:c}),!0}function ls(n,e,r=null){const c=K.get(n)||{},a=c.overrides?c.overrides:[];return r||(r=""),K.set(n,{name:n,raw:r,extend:e,overrides:a}),!0}function ps(n,e=null,r=0){const c=K.get(n)||{name:n,raw:null,extend:null,overrides:[]};return c.overrides.push({index:r,raw:e}),c.overrides.sort((a,i)=>a.index-i.index),K.set(n,c),!0}function qt(n){let e=cn(n);if(!e){G.delete(n.name);return}e={...e,html:""};const r=a=>a.extend?a.extend.overrides.length>0||r(a.extend):!1;r(e)&&qt(K.get(e.extend.name));const c=nn(e.template.tokens,e);e.template.tokens=c,G.set(e.name,e),e=hs(e.name),e.html=e.html.replace(cs,""),G.set(e.name,e)}function fs(){return Array.from(K.values()).forEach(qt),G}function hs(n){const e=G.get(n),r={};if(!e.overrides.length){const f=e.template.render(r),l={...e,html:f};return G.set(l.name,l),l}const c=G.get(e.name);e.overrides.forEach((f,l)=>{jt(`${c.name}-${l}`,f.raw).tokens.forEach(h=>{h.type==="logic"&&(c.template.tokens=tn(c.template.tokens,[h]))})}),G.set(c.name,c);let a=G.get(e.name);const i=a.template.render(r);return a={...a,html:i},G.set(a.name,a),a}function tn(n,e){return n?n.reduce((r,c)=>{if(c.type!=="logic"||!c.token||!c.token.blockName)return[...r,c];const a=c.token.blockName,i=on(a,e);if(i)return i.type==="logic"&&(i.token.output=rn(c,i.token.output)),[...r,i];const f=tn(c.token.output,e);return c.token.output=f,[...r,c]},[]):[]}function rn(n,e){return e.reduce((r,c)=>{var a;return c.type==="logic"&&c.token.type==="parent"?[...r,...n.token.output]:((a=c.token)!=null&&a.output&&(c.token.output=ds(c.token.output,n.token.output)),[...r,c])},[])}function ds(n,e){return n.reduce((r,c)=>c.type==="logic"&&c.token.type==="parent"?[...r,...e]:[...r,c],[])}function nn(n,e){if(!e.extend)return n;let r;G.has(e.extend.name)?r=wr(G.get(e.extend.name).template.tokens):r=e.extend.template.tokens;const c=Array.from(nn(r,e.extend)),a=ys(Array.from(n),c);return n=c.map(i=>an(i,a,e.name)),n}function ys(n,e){return n.reduce((c,a)=>a.token&&!sn(a.token.blockName,e)?[...c,...a.token.output]:[...c,a],[])}function sn(n,e){return e.find(c=>c.token&&c.token.blockName===n||c.token&&sn(n,c.token.output))}function on(n,e){return e.find(c=>c.token&&c.token.blockName===n)}function an(n,e,r){if(n.type!=="logic")return n;const c=["Twig.logic.type.if","Twig.logic.type.else","Twig.logic.type.endif"];if(n.type==="logic"&&c.includes(n.token.type))return n;const a=n.token.blockName,i=on(a,e);return i?(i.type!=="logic"||(i.token.output=rn(n,i.token.output)),i):(n.token.output=n.token.output.map(f=>an(f,e)),n)}function cn(n){if(!n)return null;if(n.extend){const e=cn(K.get(n.extend));return e?{...n,template:jt(n.name,n.raw),extend:e}:null}return{...n,template:jt(n.name,n.raw)}}function jt(n,e){return en.parsers.twig({id:`${n}-baseTemplate`,data:e,path:!1,options:{}})}function ms(){rt.clearRegistry()}function vs(){return rt.getRegistry()}function gs(){rt.cache(!1)}function bs(){return K}function xs(){return G}function Es(n){return K.has(n)?K.get(n).overrides||[]:[]}function _s(n){const e=K.get(n);if(!e)return null;qt(e);const r=G.get(n);return r?r.html:null}const As=mi,X={register:js,extend:Ns,override:Ls,build:pn,wrapComponentConfig:As,getComponentTemplate:ln,getComponentRegistry:Rs,getOverrideRegistry:Cs,getComponentHelper:Os,_clearComponentHelper:Is,registerComponentHelper:Ds,resolveComponentTemplates:Bs,markComponentTemplatesAsNotResolved:Us,isSyncComponent:Ss,markComponentAsSync:Ps},Ee=new Map,_e=new Map,we={},un=new Set;function Ss(n){return un.has(n)}function Ps(n){un.add(n)}function Rs(){return Ee}function Cs(){return _e}function Os(){return we}function Is(){Object.keys(we).forEach(n=>{delete we[n]})}function Ds(n,e){return!n||!n.length||we.hasOwnProperty(n)?!1:(we[n]=e,!0)}function js(n,e){if(!n||!n.length||Ee.has(n))return!1;const r=async()=>{let a=await(typeof e=="function"?e:()=>Promise.resolve(e))();a!=null&&a.default&&(a=a.default);const i={...a};if(i.name=n,i.template)Z.registerComponentTemplate(n,i.template),delete i.template;else if(!i.functional&&typeof i.render!="function")return De("ComponentFactory",`The component "${i.name}" needs a template to be functional.`,'Please add a "template" property to your component definition',i),!1;return i};return Ee.set(n,r),r}function Ns(n,e,r={name:""}){let c;const a=async()=>{if(c)return c;let f=await(typeof r=="function"?r:()=>Promise.resolve(r))();return f!=null&&f.default&&(f=f.default),c={...f},c.template?(Z.extendComponentTemplate(n,e,c.template),delete c.template):Z.extendComponentTemplate(n,e),c.name=n,c.extends=e,c};return Ee.set(n,a),a}function Ls(n,e,r=null){let c;const a=async()=>c||(c=await(typeof e=="function"?e:()=>Promise.resolve(e))(),c!=null&&c.default&&(c=c.default),c.name=n,c.template&&(Z.registerTemplateOverride(n,c.template,r),delete c.template),c),i=_e.get(n)||[];return i.push({index:r!==null?r:0,config:a}),i.sort((f,l)=>f.index-l.index),_e.set(n,i),a}async function ln(n){return await ws(n),Z.getRenderedTemplate(n)}async function ws(n){const e=Ee.get(n),r=_e.get(n);e&&await e(),r&&await Promise.all(r.map(c=>c.config()))}async function pn(n,e=!1){var l;const r=Ee.get(n);if(!r)throw new Error(`The component registry has not found a component with the name "${n}".`);const c=await r();if(typeof c=="boolean")throw new Error(`The component registry could not build the component with the name "${n}".`);let a={...c};if(!a)throw new Error(`The config of the component "${n}" is invalid.`);if(a.extends){let s;if(typeof a.extends=="string"){const h=await pn(a.extends,!0);typeof h!="boolean"&&(s=h)}s?(dn(s,a),a.extends=s):delete a.extends}if(_e.has(n)){const s=wr(_e.get(n));(await Ms(s.map(o=>o.config),a)).forEach(o=>{o.extends=a,o._isOverride=!0,a={...o}})}const i=fn(a);if($s(i)&&a){const s=yn(a)?`#${n}`:typeof a.extends!="string"&&((l=a==null?void 0:a.extends)==null?void 0:l.name);a.methods={...a.methods,...Fs(s,i)}}if(typeof(a==null?void 0:a.render)=="function"||e&&a)return delete a.template,a;const f=await ln(n);return a&&typeof f=="string"&&(a.template=f),typeof(a==null?void 0:a.template)!="string"?!1:a}async function Ms(n,e){if(!n)return[];const c=(await Promise.all(n.map(a=>a()))).reduceRight((a,i)=>{if(a.length===0)return[i];const f=a.shift();return Object.entries(i).forEach(([l,s])=>{if(f&&f.hasOwnProperty(l)){if(Array.isArray(s))return;typeof s=="object"&&Object.entries(s).forEach(([h,o])=>{f[l].hasOwnProperty(h)||(f[l][h]=o,delete i[l][h])})}else f[l]=s,delete i[l]}),[i,f,...a]},[]);return c.forEach(a=>{dn(e,a)}),c}function fn(n){let e={};return n._isOverride&&n.extends&&typeof n.extends!="string"&&(e=fn(n.extends)),["computed","methods"].forEach(r=>{const c=n[r];if(!c)return;Object.entries(c).forEach(([i,f])=>{r==="computed"&&typeof f=="object"?Object.entries(f).forEach(([l,s])=>{const h=`${String(i)}.${String(l)}`;e=ar(e,h,s,r,n)}):e=ar(e,i,f,r,n)})}),e}function ar(n,e,r,c,a){const i=/\.\$super/g,f=typeof r=="function"&&r.toString();if(!(f&&i.test(f)))return n;n.hasOwnProperty(e)||(n[e]={});const s=yn(a)?"#":"";return n[e]=hn(a,e,c,s),n}function Fs(n,e){return{$super(r,...c){var f,l;if(r==="$super")throw new Error(`Don't call "$super" manually! This is not supported!`);this._initVirtualCallStack(r);const i=this._findInSuperRegister(r)[this._virtualCallStack[r]];if(!i)throw new Error(`There was an error resolving the "$super" chain for method "${r}".`);return(l=(f=i==null?void 0:i.func)==null?void 0:f.toString())!=null&&l.includes("$super")?(this._virtualCallStack[r]=i.parent,i.func.bind(this)(...c)):(this._virtualCallStack[r]=void 0,i.func.bind(this)(...c))},_initVirtualCallStack(r){this._virtualCallStack[r]||(this._virtualCallStack[r]=this._inheritedFrom())},_findInSuperRegister(r){return this._superRegistry()[r]},_superRegistry(){return e},_inheritedFrom(){return n}}}function hn(n,e,r="methods",c=""){const a=n.extends;if(!a||typeof a=="string")return{};const i=`${c}${a.name??""}`;let f=typeof a.extends=="object"&&a.extends?`${c}${a.extends.name??""}`:null;if(i===f){(c.length>0||a._isOverride)&&(c=`#${c}`);const y=a&&a.extends&&typeof a.extends!="string"&&a.extends.name;f=`${c}${typeof y=="string"?y:""}`}const l=Nt(a,e,r),s={};return s[i]={parent:f,func:l},typeof l=="function"&&!/\.\$super/g.test(l.toString())?(s[i].parent=null,s):{...hn(a,e,r,c),...s}}function dn(n,e){["computed","methods"].forEach(r=>{if(!n.hasOwnProperty(r))return;const c=n[r];c&&(e.hasOwnProperty(r)||(e[r]={}),Object.entries(c).forEach(([a,i])=>{e[r].hasOwnProperty(a)||(r==="computed"&&typeof i=="object"?(e[r][a]={},Object.entries(i).forEach(([f])=>{e[r][a][f]=function(...l){return this.$super(`${a}.${f}`,...l)}})):e[r][a]=function(...f){return this.$super(a,...f)})}))})}function Nt(n,e,r){var a;const c=e.split(".");return c.length>1?ks(n,c,r):(a=n[r])!=null&&a[e]?n[r][e]:null}function ks(n,e,r){const[c,a]=e;return!n[r]||!n[r][c]?Nt(n.extends,c,r):n[r][c][a]}function yn(n){return!n.extends||typeof n.extends=="string"?!1:n.extends.name===n.name}function $s(n){return Object.keys(n).length!==0&&n.constructor===Object}function Bs(){return Z.resolveTemplates(),!0}function Us(){return Z.getNormalizedTemplateRegistry().clear(),!0}class Vs{_registerProperty(e,r){return Object.defineProperty(this,e,{value:r,writable:!1,enumerable:!0,configurable:!0}),this}_registerPrivateProperty(e,r){return Object.defineProperty(this,e,{value:r,writable:!1,enumerable:!0,configurable:!0}),this}_registerGetterMethod(e,r,c){return Object.defineProperty(this,e,{get:r,set:c,enumerable:!0,configurable:!0}),this}}function mn(){return new Vs}function vn(n){return n?Cicada.Application.getContainer("service")[n]:{get:r=>Cicada.Application.getContainer("service")[r],list:()=>Cicada.Application.getContainer("service").$list(),register:(r,c)=>Cicada.Application.addServiceProvider(r,c),registerMiddleware:(...r)=>Cicada.Application.addServiceProviderMiddleware(...r),registerDecorator:(...r)=>Cicada.Application.addServiceProviderDecorator(...r)}}const zs=(n,e)=>function(){const c=function(){Object.entries(n).forEach(([i,f])=>{Object.defineProperty(this,i,{value:f,configurable:!0,enumerable:!0,writable:!0})})};return c.prototype=e,new c}(),Lt={register:qs,getByName:Gs,getMixinRegistry:Ws},ce=new Map;function Hs(n,e){ce.set(n,e)}function Ws(){return ce}function qs(n,e){return ce.has(n)||Hs(n,e),ce.get(n)}function Gs(n){if(!ce.has(n)||ce.get(n)===void 0)throw new Error(`The mixin "${n}" is not registered.`);return ce.get(n)}const ze={getRegistry:Ys,register:Js,getByName:Ks},Ke=new Map;function Ys(){return Ke}function Js(n,e){return!n||!n.length||Ke.has(n)?!1:(Ke.set(n,e),!0)}function Ks(n){return Ke.get(n)}const He={registerDirective:Xs,getDirectiveByName:Zs,getDirectiveRegistry:Qs},Xe=new Map;function Xs(n,e={}){return!n||!n.length||Xe.has(n)?!1:(Xe.set(n,e),!0)}function Zs(n){return Xe.get(n)}function Qs(){return Xe}const Ie={getLocaleByName:no,getLocaleRegistry:eo,register:to,extend:ro,getBrowserLanguage:gn,getBrowserLanguages:bn,getLastKnownLocale:io,storeCurrentLocale:so},se=new Map,Ts="en-GB",wt="sw-admin-locale";function eo(){return se}function to(n,e={}){return!n||!n.length||n.split("-").length<2||se.has(n)?!1:(se.set(n,e),n)}function ro(n,e={}){if(n.split("-").length<2||!se.has(n))return!1;const r=se.get(n);return se.set(n,ti.merge(r,e)),n}function no(n){return se.get(n)||!1}function io(){let n=gn();return window.localStorage.getItem(wt)!==null&&(n=window.localStorage.getItem(wt)),n}function gn(){const n=new Map;se.forEach((r,c)=>{const a=c.split("-")[0];n.set(a.toLowerCase(),c)});let e=null;return bn().forEach(r=>{!e&&se.has(r)&&(e=r),!e&&n.has(r)&&(e=n.get(r)||null)}),e||Ts}function bn(){var e;const n=[];return navigator.language&&n.push(navigator.language),(e=navigator.languages)!=null&&e.length&&navigator.languages.forEach(r=>{n.push(r)}),navigator.userLanguage&&n.push(navigator.userLanguage),navigator.systemLanguage&&n.push(navigator.systemLanguage),n}function so(n){var e;if(typeof document=="object"){const r=n.split("-")[0];(e=document.querySelector("html"))==null||e.setAttribute("lang",r)}return window.localStorage.setItem(wt,n),n}const We={getPathByCombination:oo,getShortcutRegistry:ao,register:co},Me=new Map;function oo(n){return Me.has(n)?Me.get(n):!1}function ao(){return Me}function co(n,e=""){return!n||!n.length||Me.has(n)?!1:(Me.set(n,e),n)}const Mt={addBootPromise:uo,getBootPromises:lo},xn=[];function uo(){let n;return xn.push(new Promise(e=>{n=e})),n}function lo(){return xn}const me={getRegistry:po,register:fo,getByName:ho,getServices:yo,has:En},$e=new Map;function po(){return $e}function fo(n,e=null){return!n||!n.length||En(n)?!1:($e.set(n,e),!0)}function En(n){return $e.has(n)}function ho(n){return $e.get(n)}function yo(){return Array.from($e).reduce((n,[e,r])=>(n[e]=r,n),{})}const _n=["uuid","int","text","password","float","string","blob","boolean","date"],An=["json_list","json_object"];function mo(){return _n}function vo(){return An}class Sn{constructor({entity:e,properties:r}){this.entity=e,this.properties=r}getEntity(){return this.entity}getPrimaryKeyFields(){return this.filterProperties(e=>{var r;return((r=e.flags)==null?void 0:r.primary_key)===!0})}getAssociationFields(){return this.filterProperties(e=>e.type==="association")}getToManyAssociations(){return this.filterProperties(e=>e.type!=="association"?!1:["one_to_many","many_to_many"].includes(e.relation??""))}getToOneAssociations(){return this.filterProperties(e=>e.type!=="association"?!1:["one_to_one","many_to_one"].includes(e.relation??""))}getTranslatableFields(){return this.filterProperties(e=>this.isTranslatableField(e))}getRequiredFields(){return this.filterProperties(e=>{var r;return((r=e.flags)==null?void 0:r.required)===!0})}filterProperties(e){if(typeof e!="function")return{};const r={};return Object.keys(this.properties).forEach(c=>{e(this.properties[c])&&(r[c]=this.properties[c])}),r}getField(e){return this.properties[e]}forEachField(e){typeof e=="function"&&Object.keys(this.properties).forEach(r=>{e(this.properties[r],r,this.properties)})}isScalarField(e){return _n.includes(e.type??"")}isJsonField(e){return An.includes(e.type??"")}isJsonObjectField(e){return e.type==="json_object"}isJsonListField(e){return e.type==="json_list"}isToManyAssociation(e){return e.type==="association"&&["one_to_many","many_to_many"].includes(e.relation??"")}isToOneAssociation(e){return e.type==="association"&&["many_to_one","one_to_one"].includes(e.relation??"")}isOneToOneAssociation(e){return e.type==="association"&&e.relation==="one_to_one"}isTranslatableField(e){var r;return(e.type==="string"||e.type==="text")&&((r=e.flags)==null?void 0:r.translatable)===!0}}const ee={getScalarTypes:mo,getJsonTypes:vo,getDefinitionRegistry:go,has:bo,get:nt,add:xo,remove:Eo,getTranslatedFields:_o,getAssociationFields:Ao,getRequiredFields:So},Be=new Map;function go(){return Be}function bo(n){return Be.has(n)}function nt(n){const e=Be.get(n);if(typeof e>"u")throw new Error(`[EntityDefinitionRegistry] No definition found for entity type ${n}`);return e}function xo(n,e){Be.set(n,new Sn(e))}function Eo(n){return Be.delete(n)}function _o(n){return nt(n).getTranslatableFields()}function Ao(n){return nt(n).getAssociationFields()}function So(n){return nt(n).getRequiredFields()}const ve={getRegistry:Pn,register:Po,remove:Ro,override:Co,initialize:Oo,resetHelper:Do},pe=new Map;let qe=new tt,Ft=!1;function Pn(){return pe}function Po(n,e){return!n||!n.length||pe.has(n)||!Rn(e)?!1:(pe.set(n,e),!0)}function Ro(n){return!n||!n.length||!pe.has(n)?!1:(pe.delete(n),!0)}function Co(n,e){return!pe.has(n)||!Rn(e)?!1:(pe.set(n,e),!0)}function Oo(){return Ft||(Ft=!0,Pn().forEach(({fn:n,name:e})=>{qe.use(Io(e,n))})),qe}function Io(n,e){return(r,c)=>{const a=c.queue.find(f=>f.name===n)||null,i={...c,entry:a,name:n};a===null?r():e.call(null,r,i)}}function Rn(n){return V(n,"name")&&n.name.length>0&&V(n,"fn")&&Le.isFunction(n.fn)}function Do(){return qe=new tt,Ft=!1,!0}class jo{constructor(e=()=>0,r=1){this._registeredNodes=new Map,this._defaultPosition=r,this._sorting=e}convertToTree(){return this._tree(this._registeredNodes)}_tree(e,r=1,c=void 0){const a=[];return e.forEach(i=>{if(i.parent!==c)return;i.level=r;const f=i.id||i.path;i.children=this._tree(e,r+1,f),a.push(i)}),a.sort(this._sorting)}add(e){const r=e.id||e.path;return r?(V(e,"link")&&!V(e,"target")&&(e.target="_self"),e.position||(e.position=this._defaultPosition),this._registeredNodes.has(r)?(De("FlatTree",`Tree contains node with unique identifier ${r} already.`,"Please remove it first before adding a new one.",this._registeredNodes.get(r)),this):(this._registeredNodes.set(r,e),this)):this}remove(e){return this._registeredNodes.delete(e),this}}function kt(){this.listeners=[],window.addEventListener("resize",this.resize.bind(this))}kt.prototype=Object.assign(kt.prototype,{resize:Bt.debounce(function(e){this.listeners.forEach(r=>{r.listener.call(r.scope,e)})},100),onResize({listener:n,scope:e,component:r}){return e||(e=window),this.listeners.push({listener:n,scope:e,component:r}),this.listeners.length-1},removeResizeListener(n){return this.listeners=this.listeners.filter(e=>n!==e.component),!0},getUserAgent(){return window.navigator.userAgent},getViewportWidth(){return window.innerWidth},getViewportHeight(){return window.innerHeight},getDevicePixelRatio(){return window.devicePixelRatio},getScreenWidth(){return window.screen.width},getScreenHeight(){return window.screen.height},getScreenOrientation(){return window.screen.orientation},getBrowserLanguage(){return window.navigator.language},getPlatform(){return window.navigator.platform},getSystemKey(){return this.getPlatform().indexOf("Mac")>-1?"CTRL":"ALT"}});oi((n,e,r)=>{Cicada.Application.view.setReactive(n,e,r)});class No{create(e,r,c){r=r||Bt.createId();const a=Cicada.EntityDefinition.get(e);if(!a)return null;const i={extensions:{}},f=a.getToManyAssociations();Object.keys(f).forEach(s=>{const h=f[s].entity;f[s].flags.extension?i.extensions[s]=this.createCollection(e,`${r}/extensions`,s,h,c):i[s]=this.createCollection(e,r,s,h,c)});const l=new Te(r,e,i);return l.markAsNew(),l}createCollection(e,r,c,a,i){const f=c.replace(/_/g,"-"),s=`/${e.replace(/_/g,"-")}/${r}/${f}`;return new ge(s,a,i,new ke(1,10))}}class Lo{constructor(){this.cache={}}hydrateSearchResult(e,r,c,a,i){var l;this.cache={};const f=[];return c.data.data.forEach(s=>{const h=this.hydrateEntity(r,s,c.data,a,i);h!==null&&f.push(h)}),new ge(e,r,a,i,f,(l=c.data.meta)==null?void 0:l.total,c.data.aggregations)}hydrate(e,r,c,a,i){this.cache={};const f=new ge(e,r,a,i);return c.data.forEach(l=>{const s=this.hydrateEntity(r,l,c,a,i);s!==null&&f.add(s)}),f}hydrateEntity(e,r,c,a,i){if(!r)return null;const f=r.id,l=`${e}-${f}`;if(this.cache[l])return this.cache[l];const s=Cicada.EntityDefinition.get(e);if(!s)return null;const h=r.attributes;h.id=f,Object.entries(h).forEach(([y,t])=>{const p=s.getField(y);if(!p||!s.isJsonField(p))return;if(Array.isArray(t)&&t.length<=0&&s.isJsonObjectField(p)){h[y]={};return}const u=!Array.isArray(t)&&typeof t=="object"&&t!==null&&Object.keys(t).length<=0;s.isJsonListField(p)&&(u||t===null)&&(h[y]=[])}),Object.keys(r.relationships).forEach(y=>{const t=r.relationships[y];y==="extensions"&&(h[y]=this.hydrateExtensions(f,t,s,c,a,i));const p=s.properties[y];if(!p)return!0;if(s.isToManyAssociation(p))return h[y]=this.hydrateToMany(i,y,t,p.entity,a,c),!0;if(s.isToOneAssociation(p)&&Le.isObject(t.data)){const u=this.hydrateToOne(i,y,t,c,a);u&&(h[y]=u)}return!0});const o=new Te(f,e,h);return this.cache[l]=o,o}hydrateToOne(e,r,c,a,i){const f=this.getAssociationCriteria(e,r),l=this.getIncluded(c.data.type,c.data.id,a);return this.hydrateEntity(c.data.type,l,a,i,f)}getAssociationCriteria(e,r){return e.hasAssociation(r)?e.getAssociation(r):new ke(1,25)}hydrateToMany(e,r,c,a,i,f){const l=this.getAssociationCriteria(e,r),s=(i==null?void 0:i.apiResourcePath)??"",h=c.links.related.substr(c.links.related.indexOf(s)+s.length),o=new ge(h,a,i,l);return c.data===null||c.data.forEach(y=>{const t=this.getIncluded(y.type,y.id,f),p=this.hydrateEntity(y.type,t,f,i,l);p&&o.add(p)}),o}getIncluded(e,r,c){return c.included.find(a=>a.id===r&&a.type===e)}hydrateExtensions(e,r,c,a,i,f){const l=this.getIncluded("extension",e,a),s={...l.attributes};return Object.keys(l.relationships).forEach(h=>{const o=l.relationships[h],y=c.properties[h];if(!y)return!0;if(c.isToManyAssociation(y))return s[h]=this.hydrateToMany(f,h,o,y.entity,i,a),!0;if(c.isToOneAssociation(y)&&Le.isObject(o.data)){const t=this.hydrateToOne(f,h,o,a,i);t&&(s[h]=t)}return!0}),s}}class Cn{constructor(e,r,c,a,i,f,l,s){this.route=e,this.entityName=r,this.httpClient=c,this.hydrator=a,this.changesetGenerator=i,this.entityFactory=f,this.errorResolver=l,this.options=s}get schema(){return Cicada.EntityDefinition.get(this.entityName)}searchIds(e,r=Cicada.Context.api){const c=this.buildHeaders(r);let a=`/search-ids${this.route}`;return e.getTitle()!==null&&(a+=`?title=${e.getTitle()}`),this.httpClient.post(a,e.parse(),{headers:c}).then(i=>i.data)}search(e,r=Cicada.Context.api){const c=this.buildHeaders(r);let a=`/search${this.route}`;return e.getTitle()!==null&&(a+=`?title=${e.getTitle()}`),this.httpClient.post(a,e.parse(),{headers:c}).then(i=>this.hydrator.hydrateSearchResult(this.route,this.entityName,i,r,e))}get(e,r=Cicada.Context.api,c=null){return c=c||new ke(1,1),c.setIds([e]),this.search(c,r).then(a=>a.get(e))}save(e,r=Cicada.Context.api){return this.options.useSync===!0?this.saveWithSync(e,r):this.saveWithRest(e,r)}async saveWithRest(e,r){const{changes:c,deletionQueue:a}=this.changesetGenerator.generate(e);return this.options.keepApiErrors||await this.errorResolver.resetApiErrors(),await this.sendDeletions(a,r),this.sendChanges(e,c,r)}async saveWithSync(e,r){const{changes:c,deletionQueue:a}=this.changesetGenerator.generate(e);e.isNew()&&Object.assign(c||{},{id:e.id});const i=[];a.length>0&&i.push(...this.buildDeleteOperations(a)),c!==null&&i.push({key:"write",action:"upsert",entity:e.getEntityName(),payload:[c]});const f=this.buildHeaders(r);return f["single-operation"]=!0,i.length<=0?Promise.resolve():(this.options.keepApiErrors||await this.errorResolver.resetApiErrors(),this.httpClient.post("_action/sync",i,{headers:f}).catch(l=>{var o,y;const s=[];throw(((y=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:y.errors)??[]).forEach(t=>{var p,u;(u=(p=t==null?void 0:t.source)==null?void 0:p.pointer)!=null&&u.startsWith("/write/")&&(t.source.pointer=t.source.pointer.substring(6),s.push(t))}),this.errorResolver.handleWriteErrors([{entity:e,changes:c}],{errors:s}),l}))}clone(e,r,c=Cicada.Context.api){return e?this.httpClient.post(`/_action/clone${this.route}/${e}`,r,{headers:this.buildHeaders(c)}).then(a=>a.data):Promise.reject(new Error("Missing required argument: id"))}hasChanges(e){const{changes:r,deletionQueue:c}=this.changesetGenerator.generate(e);return r!==null||c.length>0}saveAll(e,r=Cicada.Context.api){const c=[];return e.forEach(a=>{c.push(this.save(a,r))}),Promise.all(c)}async sync(e,r=Cicada.Context.api,c=!0){const{changeset:a,deletions:i}=this.getSyncChangeset(e);return this.options.keepApiErrors||await this.errorResolver.resetApiErrors(),await this.sendDeletions(i,r),this.sendUpserts(a,c,r)}discard(e){if(!e)return;const{changes:r}=this.changesetGenerator.generate(e);if(!r)return;const c=e.getOrigin();Object.keys(r).forEach(a=>{e[a]=c[a]})}sendUpserts(e,r,c=Cicada.Context.api){if(e.length<=0)return Promise.resolve();const a=e.map(({changes:f})=>f),i=this.buildHeaders(c);return i["fail-on-error"]=r,this.httpClient.post("_action/sync",{[this.entityName]:{entity:this.entityName,action:"upsert",payload:a}},{headers:i}).then(({data:f})=>{if(f.success===!1)throw f;return Promise.resolve()}).catch(f=>{const l=this.getSyncErrors(f);throw this.errorResolver.handleWriteErrors(e,{errors:l}),f})}getSyncErrors(e){var c,a;const r=((a=(c=e==null?void 0:e.response)==null?void 0:c.data)==null?void 0:a.errors)??[];return r.forEach(i=>{if(!i.source||!i.source.pointer)return;const f=i.source.pointer.split("/");f[0]===""&&f.shift(),f.shift(),i.source.pointer=f.join("/")}),r}getSyncChangeset(e){return e.reduce((r,c)=>{const{changes:a,deletionQueue:i}=this.changesetGenerator.generate(c);if(r.deletions.push(...i),a===null)return r;const f=this.changesetGenerator.getPrimaryKeyData(c);return Object.assign(a,f),r.changeset.push({entity:c,changes:a}),r},{changeset:[],deletions:[]})}assign(e,r=Cicada.Context.api){const c=this.buildHeaders(r);return this.httpClient.post(`${this.route}`,{id:e},{headers:c})}delete(e,r=Cicada.Context.api){const c=this.buildHeaders(r),a=`${this.route}/${e}`;return this.httpClient.delete(a,{headers:c}).catch(i=>{var l,s,h;const f=(h=(s=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:s.errors)==null?void 0:h.map(o=>({error:o,id:e,entityName:this.entityName}));throw this.errorResolver.handleDeleteError(f),i})}iterateIds(e,r,c=Cicada.Context.api){return e.getLimit()===null&&e.setLimit(50),e.setTotalCountMode(1),this.searchIds(e,c).then(a=>{const i=a.data;return i.length<=0?Promise.resolve():r(i).then(()=>i.length<e.getLimit()?Promise.resolve():(e.setPage(e.getPage()+1),this.iterateIds(e,r)))})}syncDeleted(e,r=Cicada.Context.api){const c=this.buildHeaders(r);c["fail-on-error"]=!0;const a=e.map(i=>({id:i}));return this.httpClient.post("_action/sync",{[this.entityName]:{entity:this.entityName,action:"delete",payload:a}},{headers:c}).then(({data:i})=>{if(i.success===!1)throw i;return Promise.resolve()}).catch(i=>{var s,h;const f=(h=(s=i==null?void 0:i.response)==null?void 0:s.data)==null?void 0:h.data[this.entityName].result;if(!f)return;const l=f.reduce((o,y,t)=>(y.errors&&y.errors.forEach(p=>{o.push({error:p,entityName:this.entityName,id:e[t]})}),o),[]);throw this.errorResolver.handleDeleteError(l),i})}create(e=Cicada.Context.api,r=null){return this.entityFactory.create(this.entityName,r,e)}createVersion(e,r=Cicada.Context.api,c=null,a=null){const i=this.buildHeaders(r),f={};c&&(f.versionId=c),a&&(f.versionName=a);const l=`_action/version/${this.entityName.replace(/_/g,"-")}/${e}`;return this.httpClient.post(l,f,{headers:i}).then(s=>({...r,versionId:s.data.versionId}))}mergeVersion(e,r=Cicada.Context.api){const c=this.buildHeaders(r),a=`_action/version/merge/${this.entityName.replace(/_/g,"-")}/${e}`;return this.httpClient.post(a,{},{headers:c})}deleteVersion(e,r,c=Cicada.Context.api){const a=this.buildHeaders(c),i=`/_action/version/${r}/${this.entityName.replace(/_/g,"-")}/${e}`;return this.httpClient.post(i,{},{headers:a})}sendChanges(e,r,c=Cicada.Context.api){const a=this.buildHeaders(c);return e.isNew()?(r=r||{},Object.assign(r,{id:e.id}),this.httpClient.post(`${this.route}`,r,{headers:a}).catch(i=>{var l,s;const f=(s=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:s.errors;if(f)throw this.errorResolver.handleWriteErrors([{entity:e,changes:r}],{errors:f}),i})):typeof r>"u"||r===null?Promise.resolve():this.httpClient.patch(`${this.route}/${e.id}`,r,{headers:a}).catch(i=>{var l,s;const f=(s=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:s.errors;if(f)throw this.errorResolver.handleWriteErrors([{entity:e,changes:r}],{errors:f}),i})}sendDeletions(e,r=Cicada.Context.api){const c=this.buildHeaders(r),a=e.map(i=>this.httpClient.delete(`${i.route}/${i.key}`,{headers:c}).catch(f=>{throw this.errorResolver.handleDeleteError(f),f}));return Promise.all(a)}buildHeaders(e=Cicada.Context.api){const{hasOwnProperty:r}=Cicada.Utils.object,c=r(this.options,"compatibility")?this.options.compatibility:!0,a=r(this.options,"sw-app-integration-id")?this.options["sw-app-integration-id"]:!1;let i={Accept:"application/vnd.api+json",Authorization:`Bearer ${e.authToken.access}`,"Content-Type":"application/json","sw-api-compatibility":c};return e.languageId&&(i={"sw-language-id":e.languageId,...i}),e.currencyId&&(i={"sw-currency-id":e.currencyId,...i}),e.versionId&&(i={"sw-version-id":e.versionId,...i}),e.inheritance&&(i={"sw-inheritance":e.inheritance,...i}),a&&(i={"sw-app-integration-id":a,...i}),i}buildDeleteOperations(e){const r={};e.forEach(a=>{const i=a.entity;i&&(r.hasOwnProperty(i)||(r[i]=[]),r[i].push(a.primary))});const c=[];return Object.keys(r).forEach(a=>{const i=r[a];c.push({action:"delete",payload:i,entity:a})}),c}}function wo(n,e,r,c=Object.defineProperty){if(typeof c!="function")throw new Error("[ErrorStore] createApiError: setReactive is not a function");const{store:a,field:i}=Mo(n,r.api,c);c(a,i,e)}function Mo(n,e,r){const c=n.split("."),a=c.pop();return{store:c.reduce((f,l)=>(f.hasOwnProperty(l)||r(f,l,{}),f[l]),e),field:a}}function On(n,e,r=null){const c=n.split("."),a=c.pop(),i=c.reduce((f,l)=>f!=null&&f[l]?f[l]:null,e.api);i!==null&&(typeof r=="function"?r(i,a):delete i.field,!(c.length<=0)&&ri.isEmpty(i)&&On(c.join("."),e,r))}function Fo(n){n.api={}}function ko(n,e,r,c=Object.defineProperty){if(typeof c!="function")throw new Error("[ErrorStore] createApiError: setReactive is not a function");c(r.system,e,n)}function $o(n,e,r=null){typeof r=="function"?r(e.system,n):delete e.system[n]}const Bo={addApiError:wo,removeApiError:On,resetApiErrors:Fo,addSystemError:ko,removeSystemError:$o};class In{constructor(){this.STRING_FILTER_INPUT="string-filter",this.NUMBER_FILTER_INPUT="number-filter",this.DATE_FILTER_INPUT="date-filter",this.ASSOCIATION_FILTER_INPUT="multi-select-filter",this.BOOLEAN_FILTER_INPUT="boolean-filter",this.PRICE_FILTER_INPUT="price-filter",this.EXISTENCE_FILTER_INPUT="existence-filter"}create(e,r){return Object.entries(r).map(([c,a])=>{a.name=c;const i=this.getFilterProperties(e,a.property);if(a.type||!i)return a;switch(a.schema=i,i.type){case"string":a.type=this.STRING_FILTER_INPUT;break;case"int":a.type=this.NUMBER_FILTER_INPUT;break;case"date":a.type=this.DATE_FILTER_INPUT;break;case"association":a.type=i.relation==="many_to_many"||i.relation==="many_to_one"?this.ASSOCIATION_FILTER_INPUT:this.EXISTENCE_FILTER_INPUT;break;case"boolean":a.type=this.BOOLEAN_FILTER_INPUT;break;default:a.type=this.STRING_FILTER_INPUT}return a.property==="price"&&(a.type=this.NUMBER_FILTER_INPUT),a})}getFilterProperties(e,r){const{properties:c}=Cicada.EntityDefinition.get(e),a=r.split("."),i=a.shift(),f=c[i];if(!f)throw new Error(`No definition found for property ${i}`);if(a.length>0&&f.entity)return this.getFilterProperties(f.entity,a.join("."));let l={...f};return f.type==="uuid"&&Object.keys(c).forEach(s=>{c[s].type==="association"&&c[s].localField===i&&(l=c[s])}),l}}const Uo={ChangesetGenerator:ai,Criteria:ke,Entity:Te,EntityCollection:ge,EntityDefinition:Sn,EntityFactory:No,EntityHydrator:Lo,Repository:Cn,ErrorResolver:ci,ErrorStore:Bo,FilterFactory:In};class Vo{constructor(e){this.viewInitialized=new Promise(c=>{this._resolveViewInitialized=c});const r=()=>{};this.$container=e,this.view=null,this.$container.service("service",r),this.$container.service("init",r),this.$container.service("factory",r),window._features_.ADMIN_VITE&&(this.$container.service("init-post",r),this.$container.service("init-pre",r))}getContainer(e){return typeof e=="string"&&this.$container.container[e]?this.$container.container[e]:this.$container.container}addFactory(e,r){return this.$container.factory(`factory.${e}`,r.bind(this)),this}addFactoryMiddleware(e,r){return this._addMiddleware("factory",e,r)}addFactoryDecorator(e,r){return this._addDecorator("factory",e,r)}addInitializer(e,r){return this.$container.factory(`init.${e}`,r.bind(this)),this}addInitializerVite(e,r,c=""){return this.$container.factory(`init${c}.${e}`,r.bind(this)),this}addServiceProvider(e,r){return this.$container.factory(`service.${e}`,r.bind(this)),this}registerConfig(e){return e.apiContext&&this.registerApiContext(e.apiContext),e.appContext&&this.registerAppContext(e.appContext),this}registerApiContext(e){return Cicada.Context.api=Cicada.Classes._private.ApiContextFactory(e),this}registerAppContext(e){return Cicada.Context.app=Cicada.Classes._private.AppContextFactory(e),this}addServiceProviderMiddleware(e,r){return this._addMiddleware("service",e,r)}_addMiddleware(e,r,c){return typeof r=="string"&&c&&this.$container.middleware(`${e}.${r}`,c),typeof r=="function"&&r&&this.$container.middleware(e,r),this}initializeFeatureFlags(){const e=Cicada.Context.app.features;if(!e)throw new Error(`
                Feature initialization does not work
                because the context does not contain any features.
            `);return Cicada.Feature.init(e),this}addServiceProviderDecorator(e,r){return this._addDecorator("service",e,r)}_addDecorator(e,r,c){return typeof r=="string"&&c&&this.$container.decorator(`${e}.${r}`,c),typeof r=="function"&&r&&this.$container.decorator(e,r),this}start(e={}){return this.initState().registerConfig(e).initializeFeatureFlags().startBootProcess()}initState(){let e;if(window._features_.ADMIN_VITE?e=this.getContainer("init-pre").state:e=this.getContainer("init").state,e)return this;throw new Error("State could not be initialized")}getApplicationRoot(){var e;return(e=this.view)!=null&&e.root?this.view.root:!1}setViewAdapter(e){this.view=e}async startBootProcess(){const e=this.getContainer("service").loginService;if(!e.isLoggedIn())return e.logout(!1,!1),this.bootLogin();const r=e.getBearerAuthentication("expiry");if(r<Date.now()+5e3)try{await e.refreshToken()}catch(c){return console.warn("Error while refreshing token",c),e.logout(!1,!1),this.bootLogin()}else e.restartAutoTokenRefresh(r);return window._features_.ADMIN_VITE?this.bootFullApplicationVite():this.bootFullApplication()}bootLogin(){return sessionStorage.setItem("sw-login-should-reload","true"),this.initializeLoginInitializer().then(()=>this.view?this.view.initDependencies():Promise.reject()).then(()=>this.createApplicationRoot()).catch(e=>this.createApplicationRootError(e))}bootFullApplication(){const e=this.getContainer("init");return this.initializeInitializers(e).then(()=>this.loadPlugins()).then(()=>Promise.all(Cicada.Plugin.getBootPromises())).then(()=>this.view?this.view.initDependencies():Promise.reject()).then(()=>this.createApplicationRoot()).catch(r=>this.createApplicationRootError(r))}bootFullApplicationVite(){const e=this.getContainer("init-pre"),r=this.getContainer("init"),c=this.getContainer("init-post");return this.initializeInitializersVite(e,"-pre").then(()=>this.initializeInitializersVite(r)).then(()=>this.initializeInitializersVite(c,"-post")).then(()=>this.loadPlugins()).then(()=>Promise.all(Cicada.Plugin.getBootPromises())).then(()=>this.view?this.view.initDependencies():Promise.reject()).then(()=>this.createApplicationRoot())}createApplicationRoot(){var i,f,l;const r=this.getContainer("init").router.getRouterInstance();if(Cicada.Context.app.environment==="testing")return Promise.resolve(this);if(!this.view)return Promise.reject(new Error("The ViewAdapter was not defined in the application."));this.view.init("#app",r,this.getContainer("service"));const c=Cicada.Context.app.firstRunWizard,a=this.getContainer("service").loginService;return c&&a.isLoggedIn()&&!((l=(f=(i=r==null?void 0:r.currentRoute)==null?void 0:i.value)==null?void 0:f.name)!=null&&l.startsWith("sw.first.run.wizard"))&&r.push({name:"sw.first.run.wizard.index"}),typeof this._resolveViewInitialized=="function"&&this._resolveViewInitialized(),Promise.resolve(this)}createApplicationRootError(e){var a,i,f;console.error(e);const c=this.getContainer("init").router.getRouterInstance();(a=this.view)==null||a.init("#app",c,this.getContainer("service")),(f=(i=this.view)==null?void 0:i.root)!=null&&f.initError&&(this.view.root.initError=e),c.push({name:"error"})}initializeInitializers(e,r="init"){const c=e.$list().map(i=>`${r}.${i}`);this.$container.digest(c);const a=this.getAsyncInitializers(e);return Promise.all(a)}initializeInitializersVite(e,r=""){const c=e.$list().map(i=>`init${r}.${i}`);this.$container.digest(c);const a=this.getAsyncInitializersVite(e,r);return Promise.all(a)}initializeLoginInitializer(){const e=["login","baseComponents","locale","apiServices","coreDirectives"],r=this.getContainer("init");e.forEach(a=>{r.hasOwnProperty(a)||console.error(`The initializer "${a}" does not exists`)}),this.$container.digest(e.map(a=>`init.${a}`));let c=[];return window._features_.ADMIN_VITE?c=this.getAsyncInitializersVite(e):c=this.getAsyncInitializers(e),Promise.all(c)}getAsyncInitializers(e){const r=this.getContainer("init"),c=[];return Object.keys(e).forEach(a=>{var f;const i=r[a];((f=i==null?void 0:i.constructor)==null?void 0:f.name)==="Promise"&&c.push(i)}),c}getAsyncInitializersVite(e,r=""){const c=this.getContainer(`init${r}`),a=[];let i=e;return e instanceof Array||(i=Object.keys(e)),i.forEach(f=>{var s;const l=c[f];((s=l==null?void 0:l.constructor)==null?void 0:s.name)==="Promise"&&a.push(l)}),a}async loadPlugins(){let e;e=Cicada.Context.app.config.bundles,e["swag-commercial"]&&await this.injectPlugin(e["swag-commercial"]),e.SwagCommercial&&await this.injectPlugin(e.SwagCommercial);const r=Object.entries(e).filter(([a])=>window._features_.ADMIN_VITE?!["swag-commercial","SwagCommercial","Administration"].includes(a):!["swag-commercial","SwagCommercial"].includes(a)).map(([,a])=>this.injectPlugin(a)),c=Cicada.Context.app.config.bundles;return Object.entries(c).forEach(([a,i])=>{i.baseUrl&&this.injectIframe({active:i.active,integrationId:i.integrationId,bundleName:a,bundleVersion:i.version,iframeSrc:i.baseUrl,bundleType:i.type})}),Promise.all(r)}async injectPlugin(e){let r=[],c=[];if(window._features_.ADMIN_VITE&&!1)try{}catch(a){}e.js&&Array.isArray(e.js)?r=e.js.map(a=>this.injectJs(a)):e.js&&r.push(this.injectJs(e.js)),e.css&&Array.isArray(e.css)?c=e.css.map(a=>this.injectCss(a)):e.css&&c.push(this.injectCss(e.css));try{return await Promise.all([...r,...c])}catch{return console.warn("Error while loading plugin",e),null}}injectJs(e){return new Promise((r,c)=>{const a=document.createElement("script");a.src=e,a.async=!0,window._features_.ADMIN_VITE&&(a.type="module"),a.onload=()=>{r()},a.onerror=()=>{c()},document.body.appendChild(a)})}injectCss(e){return new Promise((r,c)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,a.onload=()=>{r()},a.onerror=()=>{c()},document.head.appendChild(a)})}injectIframe({active:e,integrationId:r,bundleName:c,iframeSrc:a,bundleVersion:i,bundleType:f}){const l=Cicada.Context.app.config.bundles;let s=null;l&&l.hasOwnProperty(c)&&(s=l[c].permissions);const h={active:e,integrationId:r,name:c,baseUrl:a,version:i,type:f,permissions:void 0};h.permissions=s??be({}),Cicada.State.commit("extensions/addExtension",h)}}var Gt={exports:{}},Dn=function(e,r){return function(){for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];return e.apply(r,a)}},zo=Dn,Yt=Object.prototype.toString,Jt=function(n){return function(e){var r=Yt.call(e);return n[r]||(n[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function fe(n){return n=n.toLowerCase(),function(r){return Jt(r)===n}}function Kt(n){return Array.isArray(n)}function Ze(n){return typeof n>"u"}function Ho(n){return n!==null&&!Ze(n)&&n.constructor!==null&&!Ze(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}var jn=fe("ArrayBuffer");function Wo(n){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&jn(n.buffer),e}function qo(n){return typeof n=="string"}function Go(n){return typeof n=="number"}function Nn(n){return n!==null&&typeof n=="object"}function Ge(n){if(Jt(n)!=="object")return!1;var e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}var Yo=fe("Date"),Jo=fe("File"),Ko=fe("Blob"),Xo=fe("FileList");function Xt(n){return Yt.call(n)==="[object Function]"}function Zo(n){return Nn(n)&&Xt(n.pipe)}function Qo(n){var e="[object FormData]";return n&&(typeof FormData=="function"&&n instanceof FormData||Yt.call(n)===e||Xt(n.toString)&&n.toString()===e)}var To=fe("URLSearchParams");function ea(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function ta(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Zt(n,e){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),Kt(n))for(var r=0,c=n.length;r<c;r++)e.call(null,n[r],r,n);else for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.call(null,n[a],a,n)}function $t(){var n={};function e(a,i){Ge(n[i])&&Ge(a)?n[i]=$t(n[i],a):Ge(a)?n[i]=$t({},a):Kt(a)?n[i]=a.slice():n[i]=a}for(var r=0,c=arguments.length;r<c;r++)Zt(arguments[r],e);return n}function ra(n,e,r){return Zt(e,function(a,i){r&&typeof a=="function"?n[i]=zo(a,r):n[i]=a}),n}function na(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}function ia(n,e,r,c){n.prototype=Object.create(e.prototype,c),n.prototype.constructor=n,r&&Object.assign(n.prototype,r)}function sa(n,e,r){var c,a,i,f={};e=e||{};do{for(c=Object.getOwnPropertyNames(n),a=c.length;a-- >0;)i=c[a],f[i]||(e[i]=n[i],f[i]=!0);n=Object.getPrototypeOf(n)}while(n&&(!r||r(n,e))&&n!==Object.prototype);return e}function oa(n,e,r){n=String(n),(r===void 0||r>n.length)&&(r=n.length),r-=e.length;var c=n.indexOf(e,r);return c!==-1&&c===r}function aa(n){if(!n)return null;var e=n.length;if(Ze(e))return null;for(var r=new Array(e);e-- >0;)r[e]=n[e];return r}var ca=function(n){return function(e){return n&&e instanceof n}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),W={isArray:Kt,isArrayBuffer:jn,isBuffer:Ho,isFormData:Qo,isArrayBufferView:Wo,isString:qo,isNumber:Go,isObject:Nn,isPlainObject:Ge,isUndefined:Ze,isDate:Yo,isFile:Jo,isBlob:Ko,isFunction:Xt,isStream:Zo,isURLSearchParams:To,isStandardBrowserEnv:ta,forEach:Zt,merge:$t,extend:ra,trim:ea,stripBOM:na,inherits:ia,toFlatObject:sa,kindOf:Jt,kindOfTest:fe,endsWith:oa,toArray:aa,isTypedArray:ca,isFileList:Xo},de=W;function cr(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ln=function(e,r,c){if(!r)return e;var a;if(c)a=c(r);else if(de.isURLSearchParams(r))a=r.toString();else{var i=[];de.forEach(r,function(s,h){s===null||typeof s>"u"||(de.isArray(s)?h=h+"[]":s=[s],de.forEach(s,function(y){de.isDate(y)?y=y.toISOString():de.isObject(y)&&(y=JSON.stringify(y)),i.push(cr(h)+"="+cr(y))}))}),a=i.join("&")}if(a){var f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e},ua=W;function it(){this.handlers=[]}it.prototype.use=function(e,r,c){return this.handlers.push({fulfilled:e,rejected:r,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1};it.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};it.prototype.forEach=function(e){ua.forEach(this.handlers,function(c){c!==null&&e(c)})};var la=it,pa=W,fa=function(e,r){pa.forEach(e,function(a,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=a,delete e[i])})},wn=W;function Ae(n,e,r,c,a){Error.call(this),this.message=n,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),c&&(this.request=c),a&&(this.response=a)}wn.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Mn=Ae.prototype,Fn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(n){Fn[n]={value:n}});Object.defineProperties(Ae,Fn);Object.defineProperty(Mn,"isAxiosError",{value:!0});Ae.from=function(n,e,r,c,a,i){var f=Object.create(Mn);return wn.toFlatObject(n,f,function(s){return s!==Error.prototype}),Ae.call(f,n.message,e,r,c,a),f.name=n.name,i&&Object.assign(f,i),f};var Pe=Ae,kn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},T=W;function ha(n,e){e=e||new FormData;var r=[];function c(i){return i===null?"":T.isDate(i)?i.toISOString():T.isArrayBuffer(i)||T.isTypedArray(i)?typeof Blob=="function"?new Blob([i]):Buffer.from(i):i}function a(i,f){if(T.isPlainObject(i)||T.isArray(i)){if(r.indexOf(i)!==-1)throw Error("Circular reference detected in "+f);r.push(i),T.forEach(i,function(s,h){if(!T.isUndefined(s)){var o=f?f+"."+h:h,y;if(s&&!f&&typeof s=="object"){if(T.endsWith(h,"{}"))s=JSON.stringify(s);else if(T.endsWith(h,"[]")&&(y=T.toArray(s))){y.forEach(function(t){!T.isUndefined(t)&&e.append(o,c(t))});return}}a(s,o)}}),r.pop()}else e.append(f,c(i))}return a(n),e}var $n=ha,yt,ur;function da(){if(ur)return yt;ur=1;var n=Pe;return yt=function(r,c,a){var i=a.config.validateStatus;!a.status||!i||i(a.status)?r(a):c(new n("Request failed with status code "+a.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))},yt}var mt,lr;function ya(){if(lr)return mt;lr=1;var n=W;return mt=n.isStandardBrowserEnv()?function(){return{write:function(c,a,i,f,l,s){var h=[];h.push(c+"="+encodeURIComponent(a)),n.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),n.isString(f)&&h.push("path="+f),n.isString(l)&&h.push("domain="+l),s===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(c){var a=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(c){this.write(c,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),mt}var ma=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},va=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},ga=ma,ba=va,Bn=function(e,r){return e&&!ga(r)?ba(e,r):r},vt,pr;function xa(){if(pr)return vt;pr=1;var n=W,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return vt=function(c){var a={},i,f,l;return c&&n.forEach(c.split(`
`),function(h){if(l=h.indexOf(":"),i=n.trim(h.substr(0,l)).toLowerCase(),f=n.trim(h.substr(l+1)),i){if(a[i]&&e.indexOf(i)>=0)return;i==="set-cookie"?a[i]=(a[i]?a[i]:[]).concat([f]):a[i]=a[i]?a[i]+", "+f:f}}),a},vt}var gt,fr;function Ea(){if(fr)return gt;fr=1;var n=W;return gt=n.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a"),a;function i(f){var l=f;return r&&(c.setAttribute("href",l),l=c.href),c.setAttribute("href",l),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:c.pathname.charAt(0)==="/"?c.pathname:"/"+c.pathname}}return a=i(window.location.href),function(l){var s=n.isString(l)?i(l):l;return s.protocol===a.protocol&&s.host===a.host}}():function(){return function(){return!0}}(),gt}var bt,hr;function st(){if(hr)return bt;hr=1;var n=Pe,e=W;function r(c){n.call(this,c??"canceled",n.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,n,{__CANCEL__:!0}),bt=r,bt}var xt,dr;function _a(){return dr||(dr=1,xt=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),xt}var Et,yr;function mr(){if(yr)return Et;yr=1;var n=W,e=da(),r=ya(),c=Ln,a=Bn,i=xa(),f=Ea(),l=kn,s=Pe,h=st(),o=_a();return Et=function(t){return new Promise(function(u,d){var m=t.data,v=t.headers,g=t.responseType,b;function E(){t.cancelToken&&t.cancelToken.unsubscribe(b),t.signal&&t.signal.removeEventListener("abort",b)}n.isFormData(m)&&n.isStandardBrowserEnv()&&delete v["Content-Type"];var x=new XMLHttpRequest;if(t.auth){var A=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";v.Authorization="Basic "+btoa(A+":"+_)}var R=a(t.baseURL,t.url);x.open(t.method.toUpperCase(),c(R,t.params,t.paramsSerializer),!0),x.timeout=t.timeout;function D(){if(x){var w="getAllResponseHeaders"in x?i(x.getAllResponseHeaders()):null,$=!g||g==="text"||g==="json"?x.responseText:x.response,B={data:$,status:x.status,statusText:x.statusText,headers:w,config:t,request:x};e(function(Q){u(Q),E()},function(Q){d(Q),E()},B),x=null}}if("onloadend"in x?x.onloadend=D:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(D)},x.onabort=function(){x&&(d(new s("Request aborted",s.ECONNABORTED,t,x)),x=null)},x.onerror=function(){d(new s("Network Error",s.ERR_NETWORK,t,x,x)),x=null},x.ontimeout=function(){var $=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",B=t.transitional||l;t.timeoutErrorMessage&&($=t.timeoutErrorMessage),d(new s($,B.clarifyTimeoutError?s.ETIMEDOUT:s.ECONNABORTED,t,x)),x=null},n.isStandardBrowserEnv()){var O=(t.withCredentials||f(R))&&t.xsrfCookieName?r.read(t.xsrfCookieName):void 0;O&&(v[t.xsrfHeaderName]=O)}"setRequestHeader"in x&&n.forEach(v,function($,B){typeof m>"u"&&B.toLowerCase()==="content-type"?delete v[B]:x.setRequestHeader(B,$)}),n.isUndefined(t.withCredentials)||(x.withCredentials=!!t.withCredentials),g&&g!=="json"&&(x.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&x.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(b=function(w){x&&(d(!w||w&&w.type?new h:w),x.abort(),x=null)},t.cancelToken&&t.cancelToken.subscribe(b),t.signal&&(t.signal.aborted?b():t.signal.addEventListener("abort",b))),m||(m=null);var L=o(R);if(L&&["http","https","file"].indexOf(L)===-1){d(new s("Unsupported protocol "+L+":",s.ERR_BAD_REQUEST,t));return}x.send(m)})},Et}var _t,vr;function Aa(){return vr||(vr=1,_t=null),_t}var H=W,gr=fa,br=Pe,Sa=kn,Pa=$n,Ra={"Content-Type":"application/x-www-form-urlencoded"};function xr(n,e){!H.isUndefined(n)&&H.isUndefined(n["Content-Type"])&&(n["Content-Type"]=e)}function Ca(){var n;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(n=mr()),n}function Oa(n,e,r){if(H.isString(n))try{return(e||JSON.parse)(n),H.trim(n)}catch(c){if(c.name!=="SyntaxError")throw c}return(0,JSON.stringify)(n)}var ot={transitional:Sa,adapter:Ca(),transformRequest:[function(e,r){if(gr(r,"Accept"),gr(r,"Content-Type"),H.isFormData(e)||H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return xr(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var c=H.isObject(e),a=r&&r["Content-Type"],i;if((i=H.isFileList(e))||c&&a==="multipart/form-data"){var f=this.env&&this.env.FormData;return Pa(i?{"files[]":e}:e,f&&new f)}else if(c||a==="application/json")return xr(r,"application/json"),Oa(e);return e}],transformResponse:[function(e){var r=this.transitional||ot.transitional,c=r&&r.silentJSONParsing,a=r&&r.forcedJSONParsing,i=!c&&this.responseType==="json";if(i||a&&H.isString(e)&&e.length)try{return JSON.parse(e)}catch(f){if(i)throw f.name==="SyntaxError"?br.from(f,br.ERR_BAD_RESPONSE,this,null,this.response):f}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Aa()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};H.forEach(["delete","get","head"],function(e){ot.headers[e]={}});H.forEach(["post","put","patch"],function(e){ot.headers[e]=H.merge(Ra)});var Qt=ot,Ia=W,Da=Qt,ja=function(e,r,c){var a=this||Da;return Ia.forEach(c,function(f){e=f.call(a,e,r)}),e},At,Er;function Un(){return Er||(Er=1,At=function(e){return!!(e&&e.__CANCEL__)}),At}var _r=W,St=ja,Na=Un(),La=Qt,wa=st();function Pt(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new wa}var Ma=function(e){Pt(e),e.headers=e.headers||{},e.data=St.call(e,e.data,e.headers,e.transformRequest),e.headers=_r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),_r.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]});var r=e.adapter||La.adapter;return r(e).then(function(a){return Pt(e),a.data=St.call(e,a.data,a.headers,e.transformResponse),a},function(a){return Na(a)||(Pt(e),a&&a.response&&(a.response.data=St.call(e,a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})},J=W,Vn=function(e,r){r=r||{};var c={};function a(o,y){return J.isPlainObject(o)&&J.isPlainObject(y)?J.merge(o,y):J.isPlainObject(y)?J.merge({},y):J.isArray(y)?y.slice():y}function i(o){if(J.isUndefined(r[o])){if(!J.isUndefined(e[o]))return a(void 0,e[o])}else return a(e[o],r[o])}function f(o){if(!J.isUndefined(r[o]))return a(void 0,r[o])}function l(o){if(J.isUndefined(r[o])){if(!J.isUndefined(e[o]))return a(void 0,e[o])}else return a(void 0,r[o])}function s(o){if(o in r)return a(e[o],r[o]);if(o in e)return a(void 0,e[o])}var h={url:f,method:f,data:f,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:s};return J.forEach(Object.keys(e).concat(Object.keys(r)),function(y){var t=h[y]||i,p=t(y);J.isUndefined(p)&&t!==s||(c[y]=p)}),c},Rt,Ar;function zn(){return Ar||(Ar=1,Rt={version:"0.27.2"}),Rt}var Fa=zn().version,ae=Pe,Tt={};["object","boolean","number","function","string","symbol"].forEach(function(n,e){Tt[n]=function(c){return typeof c===n||"a"+(e<1?"n ":" ")+n}});var Sr={};Tt.transitional=function(e,r,c){function a(i,f){return"[Axios v"+Fa+"] Transitional option '"+i+"'"+f+(c?". "+c:"")}return function(i,f,l){if(e===!1)throw new ae(a(f," has been removed"+(r?" in "+r:"")),ae.ERR_DEPRECATED);return r&&!Sr[f]&&(Sr[f]=!0,console.warn(a(f," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,f,l):!0}};function ka(n,e,r){if(typeof n!="object")throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);for(var c=Object.keys(n),a=c.length;a-- >0;){var i=c[a],f=e[i];if(f){var l=n[i],s=l===void 0||f(l,i,n);if(s!==!0)throw new ae("option "+i+" must be "+s,ae.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ae("Unknown option "+i,ae.ERR_BAD_OPTION)}}var $a={assertOptions:ka,validators:Tt},Hn=W,Ba=Ln,Pr=la,Rr=Ma,at=Vn,Ua=Bn,Wn=$a,ye=Wn.validators;function Se(n){this.defaults=n,this.interceptors={request:new Pr,response:new Pr}}Se.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=at(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var c=r.transitional;c!==void 0&&Wn.assertOptions(c,{silentJSONParsing:ye.transitional(ye.boolean),forcedJSONParsing:ye.transitional(ye.boolean),clarifyTimeoutError:ye.transitional(ye.boolean)},!1);var a=[],i=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(i=i&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});var f=[];this.interceptors.response.forEach(function(p){f.push(p.fulfilled,p.rejected)});var l;if(!i){var s=[Rr,void 0];for(Array.prototype.unshift.apply(s,a),s=s.concat(f),l=Promise.resolve(r);s.length;)l=l.then(s.shift(),s.shift());return l}for(var h=r;a.length;){var o=a.shift(),y=a.shift();try{h=o(h)}catch(t){y(t);break}}try{l=Rr(h)}catch(t){return Promise.reject(t)}for(;f.length;)l=l.then(f.shift(),f.shift());return l};Se.prototype.getUri=function(e){e=at(this.defaults,e);var r=Ua(e.baseURL,e.url);return Ba(r,e.params,e.paramsSerializer)};Hn.forEach(["delete","get","head","options"],function(e){Se.prototype[e]=function(r,c){return this.request(at(c||{},{method:e,url:r,data:(c||{}).data}))}});Hn.forEach(["post","put","patch"],function(e){function r(c){return function(i,f,l){return this.request(at(l||{},{method:e,headers:c?{"Content-Type":"multipart/form-data"}:{},url:i,data:f}))}}Se.prototype[e]=r(),Se.prototype[e+"Form"]=r(!0)});var Va=Se,Ct,Cr;function za(){if(Cr)return Ct;Cr=1;var n=st();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var c;this.promise=new Promise(function(f){c=f});var a=this;this.promise.then(function(i){if(a._listeners){var f,l=a._listeners.length;for(f=0;f<l;f++)a._listeners[f](i);a._listeners=null}}),this.promise.then=function(i){var f,l=new Promise(function(s){a.subscribe(s),f=s}).then(i);return l.cancel=function(){a.unsubscribe(f)},l},r(function(f){a.reason||(a.reason=new n(f),c(a.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(c){if(this.reason){c(this.reason);return}this._listeners?this._listeners.push(c):this._listeners=[c]},e.prototype.unsubscribe=function(c){if(this._listeners){var a=this._listeners.indexOf(c);a!==-1&&this._listeners.splice(a,1)}},e.source=function(){var c,a=new e(function(f){c=f});return{token:a,cancel:c}},Ct=e,Ct}var Ot,Or;function Ha(){return Or||(Or=1,Ot=function(e){return function(c){return e.apply(null,c)}}),Ot}var It,Ir;function Wa(){if(Ir)return It;Ir=1;var n=W;return It=function(r){return n.isObject(r)&&r.isAxiosError===!0},It}var Dr=W,qa=Dn,Ye=Va,Ga=Vn,Ya=Qt;function qn(n){var e=new Ye(n),r=qa(Ye.prototype.request,e);return Dr.extend(r,Ye.prototype,e),Dr.extend(r,e),r.create=function(a){return qn(Ga(n,a))},r}var Y=qn(Ya);Y.Axios=Ye;Y.CanceledError=st();Y.CancelToken=za();Y.isCancel=Un();Y.VERSION=zn().version;Y.toFormData=$n;Y.AxiosError=Pe;Y.Cancel=Y.CanceledError;Y.all=function(e){return Promise.all(e)};Y.spread=Ha();Y.isAxiosError=Wa();Gt.exports=Y;Gt.exports.default=Y;var Ja=Gt.exports,Ka=Ja;const er=Lr(Ka),Xa=["/search/user-config","/search/product","/search/product-review","/search/property-group","/search/newsletter-recipient","/search/salutation","/search/product-search-config","/search/product-search-config-field","/app-system/action-button/product/list","_action/system-config","/_action/system-config","app-system/action-button/product/list","/search/currency","/search/order","/search/customer","/_info/me"],Za=["/user-config","user-config","_action/system-config/batch","/_action/system-config/batch","/_action/sync","_action/sync","/product-visibility","product-visibility"],Qa=1500;function Ta(n,e={}){return r=>{const c=["delete","patch"].includes(r==null?void 0:r.method),a=Za.includes(r==null?void 0:r.url);if(c||a)return Object.keys(e).forEach(s=>{delete e[s]}),n(r);if(!Xa.includes(r==null?void 0:r.url))return n(r);const f=JSON.stringify(r),l=e[f];return l?(Cicada.Utils.debug.warn("http.factory","Duplicated requests happening in short amount of time: ",r,"This duplicated request should be fixed."),jr(l)):(e[f]=n(r),setTimeout(()=>{e[f]&&delete e[f]},Qa),jr(e[f]))}}function jr(n){return n.then(e=>JSON.parse(JSON.stringify(e)))}function ec(n){return rc()}const{CancelToken:tc,isCancel:Hc,Cancel:Wc}=er;function rc(){const n=er.create({baseURL:Cicada.Context.api.apiPath});return sc(n),ic(n),oc(n),n.CancelToken=tc,ac(n),nc(n),n}function nc(n){const e={};n.interceptors.request.use(r=>{const c=r.adapter;return r.adapter=Ta(c,e),r})}function ic(n){return n.interceptors.response.use(e=>e,e=>{var f,l;const{hasOwnProperty:r}=Cicada.Utils.object;if(r(((f=e==null?void 0:e.config)==null?void 0:f.headers)??{},"sw-app-integration-id")||!e)return Promise.reject(e);const{status:c}=e.response??{status:void 0},{errors:a,data:i}=((l=e.response)==null?void 0:l.data)??{errors:void 0,data:void 0};try{Gn({status:c,errors:a,error:e,data:i})}catch(s){Cicada.Utils.debug.error(s),a&&a.forEach(h=>{Cicada.State.dispatch("notification/createNotification",{variant:"error",title:h.title,message:h.detail})})}return Promise.reject(e)}),n}function Gn({status:n,errors:e,error:r=null,data:c}){var i,f,l;const a=Cicada.Application.view.root;if(n===400&&(((f=(i=r==null?void 0:r.response)==null?void 0:i.config)==null?void 0:f.url)??"").includes("_action/sync")){if(!c)return;Object.values(c).forEach(s=>{s.result.forEach(h=>{if(!h.errors.length)return;const o=parseInt(h.errors[0].status,10);Gn({status:o,errors:h.errors,data:c})})})}if(n===403&&e.filter(h=>h.code==="FRAMEWORK__MISSING_PRIVILEGE_ERROR").forEach(h=>{let y=JSON.parse(h.detail).missingPrivileges;!Array.isArray(y)&&typeof y=="object"&&(y=Object.values(y));const t=y.reduce((p,u)=>`${p}<br>"${u}"`,"");Cicada.State.dispatch("notification/createNotification",{variant:"error",system:!0,autoClose:!1,growl:!0,title:Cicada.Snippet.tc("global.error-codes.FRAMEWORK__MISSING_PRIVILEGE_ERROR"),message:`${Cicada.Snippet.tc("sw-privileges.error.description")} <br> ${t}`})}),n===403&&["FRAMEWORK__STORE_SESSION_EXPIRED","FRAMEWORK__STORE_SHOP_SECRET_INVALID"].includes((l=e[0])==null?void 0:l.code)&&Cicada.State.dispatch("notification/createNotification",{variant:"warning",system:!0,autoClose:!1,growl:!0,title:Cicada.Snippet.tc("sw-extension.errors.storeSessionExpired.title"),message:Cicada.Snippet.tc("sw-extension.errors.storeSessionExpired.message"),actions:[{label:Cicada.Snippet.tc("sw-extension.errors.storeSessionExpired.actionLabel"),method:()=>{a.$router.push({name:"sw.extension.my-extensions.account"})}}]}),n===409&&e[0].code==="FRAMEWORK__DELETE_RESTRICTED"){const s=e[0].meta.parameters,h=s.entity;let o="";o=s.usages.reduce((y,t)=>{const p=t.count,u=Cicada.Snippet.tc("global.default.xTimesIn",p),d=Cicada.Snippet.tc(`global.entities.${t.entityName}`,p[1]);return`${y}<br>${u} <b>${d}</b>`},""),Cicada.State.dispatch("notification/createNotification",{variant:"error",title:Cicada.Snippet.tc("global.default.error"),message:`${Cicada.Snippet.tc("global.notification.messageDeleteFailed",3,{entityName:Cicada.Snippet.tc(`global.entities.${h}`)})}${o}`})}if(n===412){const s=e.find(h=>h.code==="FRAMEWORK__LANGUAGE_NOT_FOUND");s&&(localStorage.removeItem("sw-admin-current-language"),Cicada.State.dispatch("notification/createNotification",{variant:"error",system:!0,autoClose:!1,growl:!0,title:s.title,message:`${s.detail} Please reload the administration.`,actions:[{label:"Reload administration",method:()=>window.location.reload()}]}))}}function sc(n){const e=Mr();return n.interceptors.response.use(r=>r,r=>{var l,s;const c=r.config||{},a=(l=r.response)==null?void 0:l.status,i=c,f=(s=i.url)==null?void 0:s.replace(i.baseURL,"");return e.whitelist.includes(f)?Promise.reject(r):a===401?(e.isRefreshing||e.fireRefreshTokenRequest().catch(()=>Promise.reject(r)),new Promise((h,o)=>{e.subscribe(y=>{i.headers.Authorization=`Bearer ${y}`,i.url=i.url.replace(i.baseURL,""),h(er(i))},y=>{if(!Cicada.Application.getApplicationRoot()){o(y),window.location.reload();return}o(y)})})):Promise.reject(r)}),n}function oc(n){return n.interceptors.response.use(r=>r,r=>{var l,s,h;const{config:c,response:a}=r,i=(h=(s=(l=a==null?void 0:a.data)==null?void 0:l.errors)==null?void 0:s[0])==null?void 0:h.code;if((c==null?void 0:c.storeSessionRequestRetries)>=1)return Promise.reject(r);const f=["FRAMEWORK__STORE_SESSION_EXPIRED","FRAMEWORK__STORE_SHOP_SECRET_INVALID"];return(a==null?void 0:a.status)===403&&f.includes(i)?(typeof c.storeSessionRequestRetries=="number"?c.storeSessionRequestRetries+=1:c.storeSessionRequestRetries=1,n.request(c)):Promise.reject(r)}),n}function ac(n){return n.interceptors.request.use(e=>{var c,a,i,f,l;const r=(l=(f=(i=(a=(c=Cicada==null?void 0:Cicada.Application)==null?void 0:c.view)==null?void 0:a.router)==null?void 0:i.history)==null?void 0:f.current)==null?void 0:l.name;return r&&(e.headers["cicada-admin-active-route"]=r),e}),n}class cc{constructor(e,r,c,a,i){this.hydrator=e,this.changesetGenerator=r,this.entityFactory=c,this.httpClient=a,this.errorResolver=i}create(e,r="",c={}){r||(r=`/${e.replace(/_/g,"-")}`);const a=Cicada.EntityDefinition.get(e);return new Cn(r,a.entity,this.httpClient,this.hydrator,this.changesetGenerator,this.entityFactory,this.errorResolver,c)}}function uc(n={}){const e=Cicada.Defaults,r=lc(n),c=`${r}/api`,a=localStorage.getItem("sw-admin-current-language")||e.systemLanguageId;return Cicada.State.commit("context/setApiInstallationPath",r),Cicada.State.commit("context/setApiApiPath",c),Cicada.State.commit("context/setApiApiResourcePath",`${c}`),Cicada.State.commit("context/setApiAssetsPath",pc(n.assetPath)),Cicada.State.commit("context/setApiLanguageId",a),Cicada.State.commit("context/setApiInheritance",!1),Object.entries(n).forEach(([i,f])=>{Cicada.State.commit("context/addApiValue",{key:i,value:f})}),Cicada.Context.api}function lc(n,e){var c;let r="";return(c=n.schemeAndHttpHost)!=null&&c.length&&(r=`${n.schemeAndHttpHost}${n.basePath}`),r}function pc(n,e){return`${n}/bundles/`}function fc(n={}){return Cicada.State.commit("context/setAppEnvironment","production"),Cicada.State.commit("context/setAppFallbackLocale","en-GB"),Object.entries(n).forEach(([e,r])=>{Cicada.State.commit("context/addAppValue",{key:e,value:r})}),Cicada.Context.app}function hc(n,e,r,c){const a=[],i=[];let f=null;return{addRoutes:d,addModuleRoutes:u,createRouterInstance:l,getViewComponent:g,getRouterInstance:s,_setModuleFavicon:E,getModuleInfo:y};function l(x={}){const A=i.map(L=>m(L)),_=a.map(L=>m(L)),R=p(_,A),D={...x,routes:R};D.history=n.createWebHashHistory();const O=n.createRouter(D);return h(O),f=O,O}function s(){return f}function h(x){const A=b();return x.beforeEach(_=>{Cicada.Service("userActivityService").updateLastUserActivity(),E(_,A);const R=c.isLoggedIn(),D=new Cicada.Helper.RefreshTokenHelper,O=["/login/","/login","/login/info","/login/recovery"];return _.meta&&_.meta.forceRoute===!0||!R&&(_.name==="login"||O.includes(_.path)||_.path.startsWith("/login/user-recovery/")||_.path.match(/\/inactivity\/login\/[a-z0-9]{32}/))?!0:R&&(_.name==="login"||O.includes(_.path)||_.path.startsWith("/login/user-recovery/"))?{name:"core"}:!R&&(sessionStorage.setItem("sw-admin-previous-route",JSON.stringify({fullPath:_.fullPath,name:_.name})),!D.isRefreshing)?D.fireRefreshTokenRequest().then(()=>o(_)).catch(()=>({name:"sw.login.index"})):_.meta.privilege&&!Cicada.Service("acl").can(_.meta.privilege)?{name:"sw.privilege.error.index"}:_.name&&_.name.includes("sw.extension.store")&&_.matched.length<=0?{name:"sw.extension.store.landing-page"}:o(_)}),x}function o(x){const A=y(x);A!==null&&(x.meta.$module=A.manifest);const _=t(x,A);return _!==null&&(x.meta.$current=_),!0}function y(x){const A=r.getModuleRegistry();let _=null,R=null;return A.forEach(D=>{var L;if(_)return;if(D.routes.has(x.name)){_=D;return}((L=x.meta)!=null&&L.parentPath?x.meta.parentPath:void 0)&&D.routes.has(x.meta.parentPath)&&(R=D)}),_||R}function t(x,A){if(!A||!A.navigation)return null;const _=A.navigation;let R=null;return _.forEach(D=>{D.path===x.name&&(R=D)}),R}function p(x,A){const _=[],R=[];return A.forEach(D=>{if(D.coreRoute===!0){_.push(D);return}R.push(D)}),x.map(D=>(D.root===!0&&(D.children=R),D)),x=[...x,..._],x}function u(x){return i.push(...x),i}function d(x){return a.push(...x),a}function m(x){const A=Cicada.Utils.object.hasOwnProperty;if(A(x,"components")&&Object.keys(x.components).length){const _={};Object.keys(x.components).forEach(R=>{let D=x.components[R];typeof D=="string"&&(D=g(D)),_[R]=D}),x=v(x),x.components=_}return typeof x.component=="string"&&(x.component=g(x.component)),x}function v(x){var A;return(A=x.children)!=null&&A.length&&(x.children=x.children.map(_=>{let R=_.component;return typeof R=="string"&&(R=g(R)),_.component=R,_.children&&(_=v(_)),_})),x}function g(x){return Cicada.Application.view.getComponentForRoute(x)}function b(){return Cicada.Context.api.assetsPath}function E(x,A){const _=y(x);if(!_)return!1;const R=_.manifest.favicon||null,D=document.getElementById("dynamic-favicon");D.rel="shortcut icon";const O=_.manifest.faviconSrc||"administration";return A.length!==0&&(A=`${A}${O}/`),D.href=R?`${A}static/img/favicon/modules/${R}`:`${A}static/img/favicon/favicon-32x32.png`,!0}}const dc=()=>{if(window._features_.ADMIN_VITE)return Object.values(Object.assign({"./acl.api.service.js":()=>F(()=>import("./acl.api.service-RehCidTl.js"),[]),"./app-action-button.service.js":()=>F(()=>import("./app-action-button.service-BLXLw2jT.js"),__vite__mapDeps([0,1,2,3,4,5])),"./app-cms-blocks.service.js":()=>F(()=>import("./app-cms-blocks.service-MiduAbws.js"),__vite__mapDeps([6,1,2,3,4])),"./app-modules.service.ts":()=>F(()=>import("./app-modules.service-BfMVGVO8.js"),__vite__mapDeps([7,1,2,3,4])),"./app-url-change.service.js":()=>F(()=>import("./app-url-change.service-gKWuaV9Q.js"),__vite__mapDeps([8,1,2,3,4])),"./business-events.api.service.js":()=>F(()=>import("./business-events.api.service-uygsYkiF.js"),__vite__mapDeps([9,1,2,3,4])),"./cache.api.service.js":()=>F(()=>import("./cache.api.service-DTRN96Zk.js"),[]),"./calculate-price.api.service.js":()=>F(()=>import("./calculate-price.api.service-CPZHAVi8.js"),__vite__mapDeps([10,1,2,3,4])),"./cart-store-api.api.service.ts":()=>F(()=>import("./cart-store-api.api.service-DCSdzXw5.js"),__vite__mapDeps([11,2,3,4,12,13,14,15,16,1,17])),"./checkout-store.api.service.ts":()=>F(()=>import("./checkout-store.api.service-D38Z6F-s.js"),__vite__mapDeps([18,1,2,3,4])),"./config.api.service.ts":()=>F(()=>import("./config.api.service-CZSeAG4T.js"),__vite__mapDeps([19,1,2,3,4])),"./custom-snippet.api.service.ts":()=>F(()=>import("./custom-snippet.api.service-D1jN-Ubp.js"),__vite__mapDeps([20,1,2,3,4])),"./customer-group-registration.api.service.js":()=>F(()=>import("./customer-group-registration.api.service-BjX8k516.js"),__vite__mapDeps([21,1,2,3,4])),"./customer-validation.api.service.js":()=>F(()=>import("./customer-validation.api.service-CcWgT5iB.js"),__vite__mapDeps([22,1,2,3,4])),"./errors/InvalidActionButtonParameterError.ts":()=>F(()=>import("./InvalidActionButtonParameterError-KvFlsqmj.js"),[]),"./excludedSearchTerm.api.service.js":()=>F(()=>import("./excludedSearchTerm.api.service-puUvEywP.js"),__vite__mapDeps([23,1,2,3,4])),"./extension-sdk.service.ts":()=>F(()=>import("./extension-sdk.service-DpgaJHWm.js"),__vite__mapDeps([24,1,2,3,4])),"./first-run-wizard.api.service.js":()=>F(()=>import("./first-run-wizard.api.service-Cj3VCCSf.js"),[]),"./flow-actions.api.service.js":()=>F(()=>import("./flow-actions.api.service-Cd7nRYYb.js"),__vite__mapDeps([25,1,2,3,4])),"./import-export.api.service.js":()=>F(()=>import("./import-export.api.service-DNsL3MDr.js"),[]),"./integration.api.service.js":()=>F(()=>import("./integration.api.service-DqvoQp0q.js"),[]),"./known-ips.api.service.js":()=>F(()=>import("./known-ips.api.service-F7nD6Ujs.js"),__vite__mapDeps([26,1,2,3,4])),"./language-plugin.api.service.js":()=>F(()=>import("./language-plugin.api.service-DN_zsfpj.js"),[]),"./mail.api.service.js":()=>F(()=>import("./mail.api.service-9WImriEW.js"),__vite__mapDeps([27,1,2,3,4])),"./media-folder.api.service.js":()=>F(()=>import("./media-folder.api.service-D858-HOT.js"),__vite__mapDeps([28,1,2,3,4])),"./media.api.service.js":()=>F(()=>import("./media.api.service-DHTxmam0.js"),__vite__mapDeps([29,12,2,3,4,13,14,15,16,1])),"./message-queue.api.service.ts":()=>F(()=>import("./message-queue.api.service-DZBPOEb4.js"),__vite__mapDeps([30,1,2,3,4])),"./notifications.service.js":()=>F(()=>import("./notifications.service-Bj00wK2R.js"),__vite__mapDeps([31,1,2,3,4])),"./number-range.api.service.js":()=>F(()=>import("./number-range.api.service-DVMWbjgF.js"),[]),"./order-state-machine.api.service.ts":()=>F(()=>import("./order-state-machine.api.service-dQjdVWlG.js"),__vite__mapDeps([32,1,2,3,4])),"./order.api.service.js":()=>F(()=>import("./order.api.service-3oaDfYXO.js"),__vite__mapDeps([33,2,3,4,12,13,14,15,16,1])),"./product-export.api.service.js":()=>F(()=>import("./product-export.api.service-6FcxDKH0.js"),__vite__mapDeps([34,1,2,3,4])),"./product-stream-preview.service.js":()=>F(()=>import("./product-stream-preview.service-DWWRDyVR.js"),__vite__mapDeps([35,2,3,4,1])),"./promotion-sync.api.service.js":()=>F(()=>import("./promotion-sync.api.service-DxrmSkJ6.js"),__vite__mapDeps([36,37,1,2,3,4])),"./recommendations.api.service.js":()=>F(()=>import("./recommendations.api.service-CL4LEX4d.js"),[]),"./rule-conditions-config.api.service.js":()=>F(()=>import("./rule-conditions-config.api.service-CCJnpuaY.js"),__vite__mapDeps([38,1,2,3,4])),"./sales-channel.api.service.js":()=>F(()=>import("./sales-channel.api.service-CA0v60cB.js"),__vite__mapDeps([39,1,2,3,4])),"./scheduled-task.api.service.ts":()=>F(()=>import("./scheduled-task.api.service-CteU5dPf.js"),__vite__mapDeps([40,1,2,3,4])),"./search.api.service.js":()=>F(()=>import("./search.api.service-CmZ5eYfJ.js"),__vite__mapDeps([41,1,2,3,4,12,13,14,15,16,42,43,44,17])),"./seo-url-template.api.service.js":()=>F(()=>import("./seo-url-template.api.service-C6fUCCdP.js"),__vite__mapDeps([45,1,2,3,4])),"./seo-url.api.service.js":()=>F(()=>import("./seo-url.api.service-D2s2qyOh.js"),__vite__mapDeps([46,1,2,3,4])),"./snippet-set.api.service.js":()=>F(()=>import("./snippet-set.api.service-DG2xUDqG.js"),[]),"./snippet.api.service.js":()=>F(()=>import("./snippet.api.service-Corzn4AO.js"),__vite__mapDeps([47,1,2,3,4])),"./state-machine.api.service.js":()=>F(()=>import("./state-machine.api.service-Dd09sah3.js"),__vite__mapDeps([48,1,2,3,4])),"./store-context.api.service.ts":()=>F(()=>import("./store-context.api.service-CLfP-5y8.js"),__vite__mapDeps([49,1,2,3,4])),"./store.api.service.ts":()=>F(()=>import("./store.api.service-eE-nf-nn.js"),__vite__mapDeps([50,1,2,3,4])),"./sync.api.service.js":()=>F(()=>import("./sync.api.service-CuyZdWXU.js"),__vite__mapDeps([37,1,2,3,4])),"./system-config.api.service.js":()=>F(()=>import("./system-config.api.service-BT84NePU.js"),__vite__mapDeps([51,52,42,12,2,3,4,13,14,15,16,1])),"./tag.api.service.js":()=>F(()=>import("./tag.api.service-DryG_1c7.js"),__vite__mapDeps([53,1,2,3,4])),"./update.api.service.js":()=>F(()=>import("./update.api.service-CJ077t7i.js"),[]),"./user-activity.service.js":()=>F(()=>import("./user-activity.service-pYHoIXDT.js"),__vite__mapDeps([54,1,2,3,4])),"./user-config.api.service.js":()=>F(()=>import("./user-config.api.service-D_AH8pKA.js"),__vite__mapDeps([55,1,2,3,4])),"./user-input-sanitize.service.js":()=>F(()=>import("./user-input-sanitize.service-CBHkWRab.js"),__vite__mapDeps([56,1,2,3,4])),"./user-recovery.api.service.js":()=>F(()=>import("./user-recovery.api.service-DDnWy6mz.js"),__vite__mapDeps([57,1,2,3,4])),"./user-validation.api.service.js":()=>F(()=>import("./user-validation.api.service-BTNB7DcG.js"),__vite__mapDeps([58,1,2,3,4])),"./user.api.service.js":()=>F(()=>import("./user.api.service-BPHUbDVZ.js"),__vite__mapDeps([59,1,2,3,4]))}));const n=require.context("./",!1,new RegExp("(?<!index)(?<!\\.spec)(?<!spec\\.vue2\\.)(\\.js|\\.ts)$"));return n.keys().reduce((e,r)=>{const c=n(r).default;return e.push(c),e},[])};typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function yc(n,e){function r(...c){return new Promise((a,i)=>{Promise.resolve(n(()=>e.apply(this,c),{fn:e,thisArg:this,args:c})).then(a).catch(i)})}return r}const Yn=n=>n();function mc(n=Yn){const e=kr(!0);function r(){e.value=!1}function c(){e.value=!0}const a=(...i)=>{e.value&&n(...i)};return{isActive:vi(e),pause:r,resume:c,eventFilter:a}}function vc(n,e,r={}){const{eventFilter:c=Yn,...a}=r;return $r(n,yc(c,e),a)}function Nr(n,e,r={}){const{eventFilter:c,...a}=r,{eventFilter:i,pause:f,resume:l,isActive:s}=mc(c);return{stop:vc(n,e,{...a,eventFilter:i}),pause:f,resume:l,isActive:s}}function gc(n,e,...[r]){const{flush:c="sync",deep:a=!1,immediate:i=!0,direction:f="both",transform:l={}}=r||{},s=[],h="ltr"in l&&l.ltr||(t=>t),o="rtl"in l&&l.rtl||(t=>t);return(f==="both"||f==="ltr")&&s.push(Nr(n,t=>{s.forEach(p=>p.pause()),e.value=h(t),s.forEach(p=>p.resume())},{flush:c,deep:a,immediate:i})),(f==="both"||f==="rtl")&&s.push(Nr(e,t=>{s.forEach(p=>p.pause()),n.value=o(t),s.forEach(p=>p.resume())},{flush:c,deep:a,immediate:i})),()=>{s.forEach(t=>t.stop())}}const xe=be({}),Jn=({oldObj:n,newObj:e,path:r="",componentName:c})=>{let a={isValid:!0,error:null};for(const i of Object.keys(n)){const f=r?`${r}.${i}`:i;if(!Object.prototype.hasOwnProperty.call(e,i)){a={isValid:!1,error:`[${c}] Override value not working. New structure does not contain key: ${f}`};break}if(typeof n[i]=="object"&&n[i]!==null&&typeof e[i]=="object"&&e[i]!==null){const l=Jn({oldObj:n[i],newObj:e[i],path:f,componentName:c});if(!l.isValid){a=l;break}}}return a},bc=()=>{const n=bi();return(n==null?void 0:n.setupContext)??{attrs:n==null?void 0:n.attrs,slots:n==null?void 0:n.slots,emit:n==null?void 0:n.emit,expose:()=>{console.error("expose is not available in the current context")}}};function xc(n,e){const r=n.context?n.context:bc(),c=e(n.props,r);if(!c.public&&!c.private)return console.error(`[${n.name}] The original setup function for the originalComponent component must return at least one public or private property.`),{};Object.keys(c).forEach(t=>{t!=="public"&&t!=="private"&&console.error(`[${n.name}] The original setup function for the originalComponent component returned an unexpected value. Only public and private properties at first level are allowed.`)});const a=c.public??{},i=c.private??{},f={...a,...i};Object.keys(n.props).forEach(t=>{Object.keys(f).includes(t)&&(console.error(`[${n.name}] The original setup function for the originalComponent component returned a prop. This is not allowed. Props are only available for overrides with the second argument.`),delete f[t])}),xe[n.name]||(xe[n.name]=be([]));const l=xe[n.name],s=f,h=be(s),o=be([]);return $r(l,()=>{l.forEach(t=>{if(o.includes(t))return;const p=Object.keys(s).reduce((d,m)=>(Object.keys(a).includes(m)&&(d[m]=s[m]),d),{_private:{}});p._private=Object.keys(s).reduce((d,m)=>(Object.keys(a).includes(m)||(d[m]=s[m]),d),{});const u=t({...p},n.props,r);Object.keys(u).forEach(d=>{if(Object.keys(n.props).includes(d)){console.error(`[${n.name}] Override result value not working. Cannot override props. Following prop should be changed: "${d}"`);return}const m=u[d];if(!ht(m)&&dt(m)&&!(m!=null&&m.effect))gc(m,s[d]);else if(ht(m)&&dt(m))h[d]=m;else if(!ht(m)&&dt(m)&&(m!=null&&m.effect))h[d]=xi({get:()=>m.value,set:v=>{m.value=v}});else if(Ei(m)){const v=Jn({oldObj:h[d],newObj:m,componentName:n.name,path:d});if(!v.isValid){console.error(v.error);return}Object.assign(h[d],m)}else typeof m=="function"?h[d]=m:console.error(`[${n.name}] Override value not working. No handling declared for:`,d,m)}),o.push(t)})},{deep:!0,immediate:!0}),gi(h)}function Ec(){return function(n,e){xe[n]||(xe[n]=be([])),xe[n].push(e)}}class _c{flattened(){return Object.entries(this.all()).flatMap(([e,r])=>r.map(c=>`${e}-${c}`))}all(){return Cicada.State.get("context").app.config.inAppPurchases}getByExtension(e){return this.all()[e]||[]}isActive(e,r){var a;return((a=this.all()[e])==null?void 0:a.includes(r))||!1}}const Ac=Object.freeze(new _c);function Sc(n){return(e,r,c)=>(n==="datasetSubscribe"&&pi("datasetSubscribeRegistration",{id:e,selectors:c==null?void 0:c.selectors}),fi(n,i=>{var f;if((i==null?void 0:i.id)!==e||i.selectors&&i.selectors.length>0&&((f=c==null?void 0:c.selectors)===null||f===void 0?void 0:f.sort().join(","))!==i.selectors.sort().join(","))return;(i==null?void 0:i.data)instanceof Ut&&console.error(i.data);const l=r(i);l&&l.catch(()=>{})}))}const Dt=li,Pc=Sc("datasetUpdate"),Rc=ui("datasetGet");var Cc={};let ie=[],oe=[];function je(n){return Ve.cloneDeepWith(n,e=>{if(e!=null&&e.__identifier__&&typeof e.__identifier__=="function"&&e.__identifier__()==="EntityCollection")return new ge(e.source,e.entity,{},e.criteria===null?e.criteria:ke.fromCriteria(e.criteria),je(Array.from(e)),e.total,e.aggregations);if(e!=null&&e.__identifier__&&typeof e.__identifier__=="function"&&e.__identifier__()==="Entity")return new Te(e.id,e._entityName,je(e._draft),{originData:je(e._origin),isDirty:e._isDirty,isNew:e._isNew})})}Rc((n,e)=>{var l;const r=(l=e==null?void 0:e._event_)==null?void 0:l.origin,c=ie.find(s=>s.id===n.id);if(!c)return null;if(c.deprecated){const s=Object.values(Cicada.State.get("extensions")).find(o=>o.baseUrl.startsWith(e._event_.origin));if(!s)throw new Error(`Extension with the origin "${e._event_.origin}" not found.`);const h=["CORE",`The extension "${s.name}" uses a deprecated data set "${n.id}". ${c.deprecationMessage}`];Cc!=="prod"?Cicada.Utils.debug.error(...h):Cicada.Utils.debug.warn(...h)}const a=n.selectors;if(!a)return c.data;const i=je(c.data),f=hi(i,a,"datasetGet",r);return f instanceof Ut&&console.error(f),f});function Oc(n){if(!n.includes("."))return null;const e=n.split("."),r=e.pop(),c=e.join(".");return r&&r.length&&c&&c.length?{pathToLastSegment:c,lastSegment:r}:null}function Ic({id:n,path:e,scope:r,deprecated:c,deprecationMessage:a}){oe.includes(n)&&(oe=oe.filter(l=>l!==n));const i=ie.find(l=>l.id===n);if(i&&i.scope!==r._uid)return console.error(`The dataset id "${n}" you tried to publish is already registered.`),()=>{};if(i&&i.scope===r._uid)return Dt({id:n,data:Ve.get(r,e)}).catch(()=>{}),()=>{};Pc(n,l=>{var h;if(!l)return;function s(o,y=null){typeof(o==null?void 0:o.getIsDirty)=="function"&&!o.getIsDirty()||Object.keys(o).forEach(t=>{let p;y?p=`${y}.${t}`:p=`${e}.${t}`;const u=Oc(p);if(u!==null){if(Cicada.Utils.hasOwnProperty(o[t],"getDraft",this)&&typeof o[t].getDraft=="function"){s({[t]:Cicada.Utils.object.cloneDeep(o[t])},p);return}if(Array.isArray(o[t])){o[t].forEach((d,m)=>{s({[m]:d},p)});return}r.isCompatEnabled("INSTANCE_SET")?r.$set(Cicada.Utils.object.get(r,u.pathToLastSegment),u.lastSegment,o[t]):Cicada.Utils.object.get(r,u.pathToLastSegment)[u.lastSegment]=o[t]}})}if(typeof((h=l.data)==null?void 0:h.getDraft)=="function"){s(l.data);return}if(Array.isArray(l.data))l.data.forEach((o,y)=>{o===null||typeof o!="object"||s({[y]:o})});else if(typeof l.data=="object"){s(l.data);return}if(e.includes(".")){const o=e.split("."),y=o.pop(),t=o.join(".");if(!y)return;r.isCompatEnabled("INSTANCE_SET")?r.$set(Cicada.Utils.object.get(r,t),y,l.data):Cicada.Utils.object.get(r,t)[y]=l.data;return}r.isCompatEnabled("INSTANCE_SET")?r.$set(r,e,l.data):r[e]=l.data});const f=r.$watch(e,Ve.debounce(l=>{if(oe.includes(n)){oe=oe.filter(o=>o!==n),f();return}const s=je(l);Dt({id:n,data:s}).catch(()=>{});const h=ie.find(o=>o.id===n);if(h){h.data=l;return}ie.push({id:n,data:s,scope:r._uid,deprecated:c,deprecationMessage:a})},750),{deep:!0,immediate:!0});return r.dataSetUnwatchers.push(()=>{ie=ie.filter(l=>l.id!==n),oe.push(n),f()}),Dt({id:n,data:Ve.get(r,e)}).catch(()=>{}),function(){ie=ie.filter(s=>s.id!==n),oe.push(n),f()}}function Dc(){return ie}function jc(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}const Nc={handle:(n,e)=>di(n,(c,a)=>!c.privileges||c.privileges.length===0?e(c,a):new Promise((i,f)=>{const l=c.privileges.filter(s=>!Cicada.Service("acl").can(s));if(l.length>0)f(new Ut(n,l));else{const s=e(c,a);jc(s)?s.then(h=>i(h)).catch(f):i(s)}})),publishData:Ic,getPublishedDataSets:Dc};window.hasOwnProperty("_features_")&&Fr.init(_features_);Kr.config={strict:!1};const Lc=new Kr,Kn=new Vo(Lc);Kn.addFactory("component",()=>X).addFactory("template",()=>Z).addFactory("module",()=>Oe).addFactory("state",()=>mn).addFactory("serviceFactory",()=>vn).addFactory("classesFactory",()=>zs).addFactory("mixin",()=>Lt).addFactory("filter",()=>ze).addFactory("directive",()=>He).addFactory("locale",()=>Ie).addFactory("shortcut",()=>We).addFactory("plugin",()=>Mt).addFactory("apiService",()=>me).addFactory("entityDefinition",()=>ee).addFactory("workerNotification",()=>ve);var Fe;const Ne=class Ne{constructor(){this.Module={register:Oe.registerModule,getModuleRegistry:Oe.getModuleRegistry,getModuleRoutes:Oe.getModuleRoutes,getModuleByEntityName:Oe.getModuleByEntityName},this.Component={register:X.register,extend:X.extend,override:X.override,build:X.build,wrapComponentConfig:X.wrapComponentConfig,getTemplate:X.getComponentTemplate,getComponentRegistry:X.getComponentRegistry,getComponentHelper:X.getComponentHelper,registerComponentHelper:X.registerComponentHelper,markComponentAsSync:X.markComponentAsSync,isSyncComponent:X.isSyncComponent,createExtendableSetup:xc,overrideComponentSetup:Ec,registerOverrideComponent:e=>{ft(Ne,Fe).value.push(e)},getOverrideComponents:()=>ft(Ne,Fe).value},this.Template={register:Z.registerComponentTemplate,extend:Z.extendComponentTemplate,override:Z.registerTemplateOverride,getRenderedTemplate:Z.getRenderedTemplate},this.State=mn(),this.Store=yi.instance,this.Mixin={register:Lt.register,getByName:Lt.getByName},this.Filter={register:ze.register,getByName:ze.getByName,getRegistry:ze.getRegistry},this.Directive={register:He.registerDirective,getByName:He.getDirectiveByName,getDirectiveRegistry:He.getDirectiveRegistry},this.Locale={register:Ie.register,extend:Ie.extend,getByName:Ie.getLocaleByName,getLocaleRegistry:Ie.getLocaleRegistry},this.Shortcut={getShortcutRegistry:We.getShortcutRegistry,getPathByCombination:We.getPathByCombination,register:We.register},this.Plugin={addBootPromise:Mt.addBootPromise,getBootPromises:Mt.getBootPromises},this.Service=vn,this.Utils=Bt,this.Application=Kn,this.Feature=Fr,this.InAppPurchase=Ac,this.Vue=_i,this.ApiService={register:me.register,getByName:me.getByName,getRegistry:me.getRegistry,getServices:me.getServices,has:me.has},this.EntityDefinition={getScalarTypes:ee.getScalarTypes,getJsonTypes:ee.getJsonTypes,getDefinitionRegistry:ee.getDefinitionRegistry,has:ee.has,get:ee.get,add:ee.add,remove:ee.remove,getTranslatedFields:ee.getTranslatedFields,getAssociationFields:ee.getAssociationFields,getRequiredFields:ee.getRequiredFields},this.ExtensionAPI=Nc,this.WorkerNotification={register:ve.register,getRegistry:ve.getRegistry,override:ve.override,remove:ve.remove,initialize:ve.initialize},this.Defaults={systemLanguageId:"2fbb5fe2e29a4d70aa5854ce7ce3e20b",defaultLanguageIds:["2fbb5fe2e29a4d70aa5854ce7ce3e20b"],versionId:"0fa91ce3e96a4bc2be4bd9ce752c3425",storefrontSalesChannelTypeId:"8a243080f92e4c719546314b577cf82b",productComparisonTypeId:"ed535e5722134ac1aa6524f73e26881b",apiSalesChannelTypeId:"f183ee5650cf4bdb8a774337575067a6",defaultSalutationId:"ed643807c9f84cc8b50132ea3ccb1c3b"},this.Data=Uo,this.Classes={CicadaError:Ai,ApiService:Si,_private:{HttpFactory:ec,RepositoryFactory:cc,ApiContextFactory:uc,AppContextFactory:fc,RouterFactory:hc,FilterFactory:In}},this.Helper={FlatTreeHelper:jo,MiddlewareHelper:tt,RefreshTokenHelper:Mr,SanitizerHelper:Pi,DeviceHelper:kt,PromotionHelper:{DiscountScopes:Ri,DiscountTypes:Ci,PromotionPermissions:Oi},OrderHelper:{LineItemType:Ii}},this.compatConfig={GLOBAL_MOUNT:!window._features_.DISABLE_VUE_COMPAT,GLOBAL_EXTEND:!window._features_.DISABLE_VUE_COMPAT,GLOBAL_PROTOTYPE:!window._features_.DISABLE_VUE_COMPAT,GLOBAL_SET:!window._features_.DISABLE_VUE_COMPAT,GLOBAL_DELETE:!window._features_.DISABLE_VUE_COMPAT,GLOBAL_OBSERVABLE:!window._features_.DISABLE_VUE_COMPAT,CONFIG_KEY_CODES:!window._features_.DISABLE_VUE_COMPAT,CONFIG_WHITESPACE:!window._features_.DISABLE_VUE_COMPAT,INSTANCE_SET:!window._features_.DISABLE_VUE_COMPAT,INSTANCE_ATTRS_CLASS_STYLE:!window._features_.DISABLE_VUE_COMPAT,INSTANCE_DELETE:!window._features_.DISABLE_VUE_COMPAT,INSTANCE_EVENT_EMITTER:!window._features_.DISABLE_VUE_COMPAT,INSTANCE_EVENT_HOOKS:!window._features_.DISABLE_VUE_COMPAT,INSTANCE_CHILDREN:!window._features_.DISABLE_VUE_COMPAT,INSTANCE_LISTENERS:!window._features_.DISABLE_VUE_COMPAT,INSTANCE_SCOPED_SLOTS:!window._features_.DISABLE_VUE_COMPAT,OPTIONS_DATA_FN:!window._features_.DISABLE_VUE_COMPAT,OPTIONS_DATA_MERGE:!window._features_.DISABLE_VUE_COMPAT,OPTIONS_BEFORE_DESTROY:!window._features_.DISABLE_VUE_COMPAT,OPTIONS_DESTROYED:!window._features_.DISABLE_VUE_COMPAT,WATCH_ARRAY:!window._features_.DISABLE_VUE_COMPAT,V_ON_KEYCODE_MODIFIER:!window._features_.DISABLE_VUE_COMPAT,CUSTOM_DIR:!window._features_.DISABLE_VUE_COMPAT,ATTR_FALSE_VALUE:!window._features_.DISABLE_VUE_COMPAT,ATTR_ENUMERATED_COERCION:!window._features_.DISABLE_VUE_COMPAT,TRANSITION_GROUP_ROOT:!window._features_.DISABLE_VUE_COMPAT,COMPONENT_ASYNC:!window._features_.DISABLE_VUE_COMPAT,COMPONENT_FUNCTIONAL:!window._features_.DISABLE_VUE_COMPAT,COMPONENT_V_MODEL:!window._features_.DISABLE_VUE_COMPAT,RENDER_FUNCTION:!window._features_.DISABLE_VUE_COMPAT,FILTERS:!window._features_.DISABLE_VUE_COMPAT,COMPILER_IS_ON_ELEMENT:!window._features_.DISABLE_VUE_COMPAT,COMPILER_V_BIND_SYNC:!window._features_.DISABLE_VUE_COMPAT,COMPILER_V_BIND_PROP:!window._features_.DISABLE_VUE_COMPAT,COMPILER_V_BIND_OBJECT_ORDER:!window._features_.DISABLE_VUE_COMPAT,COMPILER_V_ON_NATIVE:!window._features_.DISABLE_VUE_COMPAT,COMPILER_V_FOR_REF:!window._features_.DISABLE_VUE_COMPAT,COMPILER_NATIVE_TEMPLATE:!window._features_.DISABLE_VUE_COMPAT,COMPILER_FILTERS:!window._features_.DISABLE_VUE_COMPAT},this._private={ApiServices:dc}}get Snippet(){return Cicada.Application.view.i18n.global}get Context(){return this.State.get("context")}};Fe=new WeakMap,nr(Ne,Fe,kr([]));let Qe=Ne;const tr=new Qe;Object.defineProperty(tr,"InAppPurchase",{configurable:!1,writable:!1});window._features_.ADMIN_VITE||(window.Cicada=tr);const qc=Object.freeze(Object.defineProperty({__proto__:null,CicadaClass:Qe,CicadaInstance:tr},Symbol.toStringTag,{value:"Module"}));export{Ka as a,qc as c};
//# sourceMappingURL=cicada-C31UN5lb.js.map

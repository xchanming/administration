{"version":3,"file":"index-CGWpQpYm.js","sources":["../../../app/administration/src/module/sw-flow/component/sw-flow-sequence-condition/sw-flow-sequence-condition.html.twig","../../../app/administration/src/module/sw-flow/component/sw-flow-sequence-condition/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_flow_sequence_condition %}\n<div class=\"sw-flow-sequence-condition\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_flow_sequence_condition_true_arrow %}\n    <div\n        v-if=\"!showHelpElement\"\n        class=\"sw-flow-sequence-condition__true-arrow\"\n        :class=\"arrowClasses(true)\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_true_arrow_line %}\n        <div class=\"sw-flow-sequence-condition__true-line\"></div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_true_arrow_oval %}\n        <div class=\"sw-flow-sequence-condition__oval\"></div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_true_arrow_icon %}\n        <sw-icon\n            v-if=\"showArrowIcon(true)\"\n            name=\"regular-chevron-right-s\"\n            small\n        />\n\n        <sw-context-button\n            v-else\n            class=\"arrow-action sw-flow-sequence-condition__true-action\"\n            icon=\"regular-plus-xs\"\n            :disabled=\"disabledAddSequence(true) || undefined\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_condition_true_arrow_add_condition %}\n            <sw-context-menu-item\n                class=\"sw-flow-sequence-condition__add-true-condition\"\n                :disabled=\"disabled || undefined\"\n                @click=\"addIfCondition(true)\"\n            >\n                {{ $tc('sw-flow.detail.sequence.selectorIfCondition') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_condition_true_arrow_add_action %}\n            <sw-context-menu-item\n                class=\"sw-flow-sequence-condition__add-true-action\"\n                :disabled=\"disabled || undefined\"\n                @click=\"addThenAction(true)\"\n            >\n                {{ $tc('sw-flow.detail.sequence.selectorThenAction') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_condition_true_arrow_extension_options %}{% endblock %}\n        </sw-context-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_true_arrow_label %}\n        <sw-label\n            appearance=\"pill\"\n            size=\"medium\"\n            :caps=\"true\"\n            :dismissable=\"false\"\n            class=\"sw-flow-sequence-condition__true-label\"\n        >\n            {{ $tc('sw-flow.detail.sequence.labelTrue') }}\n        </sw-label>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_flow_sequence_condition_false_arrow %}\n    <div\n        v-if=\"!showHelpElement\"\n        class=\"sw-flow-sequence-condition__false-arrow\"\n        :class=\"arrowClasses(false)\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_false_arrow_line %}\n        <div class=\"sw-flow-sequence-condition__false-line\"></div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_false_arrow_oval %}\n        <div class=\"sw-flow-sequence-condition__oval\"></div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_false_arrow_label %}\n        <sw-label\n            appearance=\"pill\"\n            size=\"medium\"\n            :caps=\"true\"\n            :dismissable=\"false\"\n            class=\"sw-flow-sequence-condition__false-label\"\n        >\n            {{ $tc('sw-flow.detail.sequence.labelFalse') }}\n        </sw-label>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_false_arrow_icon %}\n        <sw-icon\n            v-if=\"showArrowIcon(false)\"\n            name=\"regular-chevron-down-s\"\n            small\n        />\n\n        <sw-context-button\n            v-else\n            class=\"arrow-action sw-flow-sequence-condition__false-action\"\n            icon=\"regular-plus-xs\"\n            :disabled=\"disabledAddSequence(false) || undefined\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_condition_false_arrow_add_condition %}\n            <sw-context-menu-item\n                class=\"sw-flow-sequence-condition__add-false-condition\"\n                :disabled=\"disabled || undefined\"\n                @click=\"addIfCondition(false)\"\n            >\n                {{ $tc('sw-flow.detail.sequence.selectorIfCondition') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_condition_false_arrow_add_action %}\n            <sw-context-menu-item\n                class=\"sw-flow-sequence-condition__add-false-action\"\n                :disabled=\"disabled || undefined\"\n                @click=\"addThenAction(false)\"\n            >\n                {{ $tc('sw-flow.detail.sequence.selectorThenAction') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_condition_false_arrow_extension_options %}{% endblock %}\n        </sw-context-button>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_flow_sequence_condition_container %}\n    <div class=\"sw-flow-sequence-condition__container\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_card %}\n        <div class=\"sw-flow-sequence-condition__card\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_condition_header %}\n            <div class=\"sw-flow-sequence-condition__header\">\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_flow_sequence_condition_title %}\n                <div class=\"sw-flow-sequence-condition__title-description\">\n                    <h3 class=\"sw-flow-sequence-condition__title\">\n                        {{ $tc('sw-flow.detail.sequence.conditionTitle') }}\n                    </h3>\n\n                    <p class=\"sw-flow-sequence-condition__description\">\n                        {{ $tc('sw-flow.detail.sequence.conditionDescription') }}\n                    </p>\n                </div>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_flow_sequence_condition_context_button %}\n                <sw-context-button\n                    class=\"sw-flow-sequence-condition__context-button\"\n                    :disabled=\"disabled || undefined\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_flow_sequence_condition_context_button_delete %}\n                    <sw-context-menu-item\n                        class=\"sw-flow-sequence-condition__delete-condition\"\n                        variant=\"danger\"\n                        @click=\"removeCondition\"\n                    >\n                        {{ $tc('sw-flow.detail.sequence.contextButton.deleteCondition') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n                </sw-context-button>\n                {% endblock %}\n            </div>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_condition_content %}\n            <div class=\"sw-flow-sequence-condition__content\">\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_flow_sequence_condition_rule %}\n                <div class=\"sw-flow-sequence-condition__rule\">\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_flow_sequence_condition_rule_empty %}\n                    <div\n                        v-if=\"!sequence.rule\"\n                        class=\"sw-flow-sequence-condition__rule-empty\"\n                    >\n                        <sw-icon\n                            size=\"12px\"\n                            name=\"regular-rule-s\"\n                        />\n                        <span class=\"sw-flow-sequence-condition__no-rule\">\n                            {{ $tc('sw-flow.detail.sequence.noRule') }}\n                        </span>\n                    </div>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_flow_sequence_condition_rule_info %}\n                    <div\n                        v-else\n                        class=\"sw-flow-sequence-condition__rule-info\"\n                    >\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_flow_sequence_condition_rule_header %}\n                        <div class=\"sw-flow-sequence-condition__rule-header\">\n                            <div class=\"sw-flow-sequence-condition__rule-icon\">\n                                <sw-icon\n                                    size=\"12px\"\n                                    name=\"regular-rule-s\"\n                                />\n                            </div>\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_flow_sequence_condition_rule_name %}\n                            <div class=\"sw-flow-sequence-condition__rule-name\">\n                                <h3>{{ sequence.rule.name }}</h3>\n                            </div>\n                            {% endblock %}\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_flow_sequence_condition_rule_context_button %}\n                            <sw-context-button\n                                class=\"sw-flow-sequence-condition__rule-context-button\"\n                                :disabled=\"disabled || undefined\"\n                            >\n\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_flow_sequence_condition_rule_context_button_edit %}\n                                <sw-context-menu-item\n                                    class=\"sw-flow-sequence-condition__rule-edit\"\n                                    @click=\"onEditRule\"\n                                >\n                                    {{ $tc('sw-flow.rule.contextButton.editRule') }}\n                                </sw-context-menu-item>\n                                {% endblock %}\n\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_flow_sequence_condition_rule_context_button_change %}\n                                <sw-context-menu-item\n                                    class=\"sw-flow-sequence-condition__rule-change\"\n                                    @click=\"showRuleSelection = true\"\n                                >\n                                    {{ $tc('sw-flow.rule.contextButton.changeRule') }}\n                                </sw-context-menu-item>\n                                {% endblock %}\n\n                                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                                {% block sw_flow_sequence_condition_rule_context_button_delete %}\n                                <sw-context-menu-item\n                                    class=\"sw-flow-sequence-condition__rule-delete\"\n                                    variant=\"danger\"\n                                    @click=\"deleteRule\"\n                                >\n                                    {{ $tc('sw-flow.rule.contextButton.deleteRule') }}\n                                </sw-context-menu-item>\n                                {% endblock %}\n                            </sw-context-button>\n                            {% endblock %}\n                        </div>\n\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_flow_sequence_condition_rule_description %}\n                        <div\n                            class=\"sw-flow-sequence-condition__rule-description\"\n                            v-html=\"ruleDescription\"\n                        >\n                        </div>\n                        {% endblock %}\n                    </div>\n                    {% endblock %}\n                </div>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_flow_sequence_condition_content_custom %}\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_flow_sequence_condition_rule_selection %}\n                <div\n                    v-if=\"showRuleSelection || !sequence.ruleId\"\n                    class=\"sw-flow-sequence-condition__select\"\n                >\n                    <sw-entity-single-select\n                        class=\"sw-flow-sequence-condition__selection-rule\"\n                        size=\"small\"\n                        value=\"\"\n                        entity=\"rule\"\n                        :criteria=\"ruleCriteria\"\n                        :placeholder=\"$tc('sw-flow.rule.placeholderSelectRule')\"\n                        :disabled=\"disabled || undefined\"\n                        :error=\"fieldError\"\n                        advanced-selection-component=\"sw-advanced-selection-rule\"\n                        :advanced-selection-parameters=\"advanceSelectionParameters\"\n                        :selection-disabling-method=\"isRuleDisabled\"\n                        :disabled-selection-tooltip=\"{\n                            message: $t('sw-restricted-rules.restrictedAssignment.general', {\n                                relation: $t('sw-restricted-rules.restrictedAssignment.flowSequences'),\n                            }), }\"\n                        @update:value=\"(id, rule) => onRuleChange(rule)\"\n                    >\n                        <template #before-item-list>\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_flow_sequence_condition_select_selection_before_list %}\n                            <ul class=\"sw-select-result__item-list\">\n                                <li\n                                    class=\"sw-select-result sw-select-result__create-new-rule\"\n                                    role=\"button\"\n                                    tabindex=\"0\"\n                                    @click=\"onCreateNewRule\"\n                                    @keydown.enter=\"onCreateNewRule\"\n                                >\n                                    {{ $tc('sw-flow.rule.createNewRule') }}\n                                </li>\n                            </ul>\n                            {% endblock %}\n                        </template>\n\n                        <template #result-label-property=\"{ item, labelProperty, getKey }\">\n                            {{ getKey(item, labelProperty) }}\n                        </template>\n                    </sw-entity-single-select>\n                </div>\n                {% endblock %}\n            </div>\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_sequence_condition_help_text %}\n        <div\n            v-if=\"showHelpElement\"\n            class=\"sw-flow-sequence-condition__explains\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_selector_title %}\n            <h4>{{ $tc('sw-flow.detail.sequence.conditionExplainsTitle') }}</h4>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_sequence_selector_help_text %}\n            <p v-html=\"$tc('sw-flow.detail.sequence.conditionExplainsDescription')\"></p>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_flow_sequence_condition_rule_modal %}\n    <sw-flow-rule-modal\n        v-if=\"showCreateRuleModal\"\n        :rule-id=\"selectedRuleId\"\n        @process-finish=\"onSaveRuleSuccess\"\n        @modal-close=\"onCloseModal\"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-flow-sequence-condition.html.twig';\nimport './sw-flow-sequence-condition.scss';\n\nconst { Component, State } = Cicada;\nconst { Criteria } = Cicada.Data;\nconst utils = Cicada.Utils;\nconst { CicadaError } = Cicada.Classes;\nconst { mapState, mapGetters } = Component.getComponentHelper();\n\n/**\n * @private\n * @package services-settings\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'flowBuilderService',\n        'feature',\n    ],\n\n    props: {\n        sequence: {\n            type: Object,\n            required: true,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            showCreateRuleModal: false,\n            showRuleSelection: false,\n            fieldError: null,\n            showAddButton: false,\n            selectedRuleId: null,\n        };\n    },\n\n    computed: {\n        ...mapState('swFlowState', [\n            'restrictedRules',\n            'flow',\n        ]),\n\n        sequenceRepository() {\n            return this.repositoryFactory.create('flow_sequence');\n        },\n\n        ruleRepository() {\n            return this.repositoryFactory.create('rule');\n        },\n\n        ruleCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addSorting(Criteria.sort('name', 'ASC'));\n\n            return criteria;\n        },\n\n        showHelpElement() {\n            const { parentId, ruleId, trueBlock, falseBlock } = this.sequence;\n            return !parentId && !ruleId && !(trueBlock || falseBlock);\n        },\n\n        modalName() {\n            return this.flowBuilderService.getActionModalName(this.actionModal);\n        },\n\n        ruleDescription() {\n            if (!this.sequence?.rule?.description) {\n                return null;\n            }\n\n            return this.sequence.rule.description.replace(/\\n/g, '<br>');\n        },\n\n        advanceSelectionParameters() {\n            return {\n                ruleAwareGroupKey: `flowTrigger.${this.flow.eventName}`,\n            };\n        },\n\n        ...mapState('swFlowState', [\n            'invalidSequences',\n            'flow',\n        ]),\n        ...mapGetters('swFlowState', ['sequences']),\n    },\n\n    watch: {\n        sequence: {\n            handler(value) {\n                const { ruleId, parentId, trueBlock, falseBlock } = value;\n\n                this.setFieldError();\n\n                // Re-add selector\n                if (parentId || !ruleId) {\n                    return;\n                }\n\n                if (!trueBlock) {\n                    this.createSequence({\n                        parentId: this.sequence.id,\n                        trueCase: true,\n                    });\n                }\n\n                if (!falseBlock) {\n                    this.createSequence({\n                        parentId: this.sequence.id,\n                        trueCase: false,\n                    });\n                }\n            },\n            immediate: true,\n        },\n    },\n\n    methods: {\n        onCreateNewRule() {\n            this.showCreateRuleModal = true;\n        },\n\n        onCloseModal() {\n            this.showCreateRuleModal = false;\n            this.selectedRuleId = null;\n        },\n\n        onSaveRuleSuccess(rule) {\n            this.onRuleChange(rule);\n        },\n\n        onRuleChange(rule) {\n            if (!rule) {\n                return;\n            }\n\n            State.commit('swFlowState/updateSequence', {\n                id: this.sequence.id,\n                rule,\n                ruleId: rule.id,\n            });\n\n            if (this.selectedRuleId) {\n                // Update other conditions which use the same rule\n                this.sequences.forEach((sequence) => {\n                    if (sequence.ruleId !== this.selectedRuleId || sequence.id === this.sequence.id) {\n                        return;\n                    }\n\n                    State.commit('swFlowState/updateSequence', {\n                        id: sequence.id,\n                        rule,\n                        ruleId: rule.id,\n                    });\n                });\n\n                this.selectedRuleId = null;\n            }\n\n            this.removeFieldError();\n            this.showRuleSelection = false;\n        },\n\n        deleteRule() {\n            State.commit('swFlowState/updateSequence', {\n                id: this.sequence.id,\n                rule: null,\n                ruleId: '',\n            });\n        },\n\n        addIfCondition(trueCase) {\n            this.createSequence({\n                trueCase,\n                ruleId: '',\n            });\n        },\n\n        addThenAction(trueCase) {\n            this.createSequence({\n                trueCase,\n                actionName: '',\n            });\n        },\n\n        showArrowIcon(trueCase) {\n            const { trueBlock, falseBlock } = this.sequence;\n\n            if (trueCase) {\n                if (!trueBlock) {\n                    return false;\n                }\n\n                const sequence = Object.values(trueBlock)[0];\n                return sequence.actionName !== null || sequence.ruleId !== null;\n            }\n\n            if (!falseBlock) {\n                return false;\n            }\n\n            const sequence = Object.values(falseBlock)[0];\n            return sequence.actionName !== null || sequence.ruleId !== null;\n        },\n\n        disabledAddSequence(trueCase) {\n            const { trueBlock, falseBlock, parentId } = this.sequence;\n\n            if (trueCase) {\n                if (!trueBlock) {\n                    return false;\n                }\n\n                return !parentId && !this.showArrowIcon(trueCase);\n            }\n\n            if (!falseBlock) {\n                return false;\n            }\n\n            return !parentId && !this.showArrowIcon(trueCase);\n        },\n\n        arrowClasses(trueCase) {\n            return {\n                'is--disabled': this.disabledAddSequence(trueCase),\n                'has--true-action': !this.sequence.trueBlock,\n                'has--false-action': !this.sequence.falseBlock,\n            };\n        },\n\n        removeCondition() {\n            const actionIds = [this.sequence.id];\n\n            const getRemoveIds = (sequence, sequenceIds = []) => {\n                if (sequence.trueBlock) {\n                    Object.values(sequence.trueBlock).forEach((trueSequence) => {\n                        if (trueSequence._isNew) {\n                            sequenceIds.push(trueSequence.id);\n                        }\n\n                        getRemoveIds(trueSequence, sequenceIds);\n                    });\n                }\n\n                if (sequence.falseBlock) {\n                    Object.values(sequence.falseBlock).forEach((falseSequence) => {\n                        if (falseSequence._isNew) {\n                            sequenceIds.push(falseSequence.id);\n                        }\n\n                        getRemoveIds(falseSequence, sequenceIds);\n                    });\n                }\n            };\n\n            getRemoveIds(this.sequence, actionIds);\n\n            State.commit('swFlowState/removeSequences', actionIds);\n        },\n\n        createSequence(params) {\n            let sequence = this.sequenceRepository.create();\n            const newSequence = {\n                ...sequence,\n                parentId: this.sequence.id,\n                displayGroup: this.sequence.displayGroup,\n                actionName: params.actionName !== undefined ? params.actionName : null,\n                ruleId: params.ruleId !== undefined ? params.ruleId : null,\n                config: {},\n                position: 1,\n                trueCase: params.trueCase,\n                id: utils.createId(),\n            };\n\n            sequence = Object.assign(sequence, newSequence);\n            State.commit('swFlowState/addSequence', sequence);\n        },\n\n        setFieldError() {\n            if (!this.invalidSequences?.includes(this.sequence.id)) {\n                this.fieldError = null;\n                return;\n            }\n\n            this.fieldError = new CicadaError({\n                code: 'c1051bb4-d103-4f74-8988-acbcafc7fdc3',\n            });\n        },\n\n        removeFieldError() {\n            if (!this.fieldError) {\n                return;\n            }\n\n            this.fieldError = null;\n            const invalidSequences = this.invalidSequences?.filter((id) => this.sequence.id !== id);\n            State.commit('swFlowState/setInvalidSequences', invalidSequences);\n        },\n\n        toggleAddButton() {\n            if (this.sequence.ruleId) {\n                this.showRuleSelection = false;\n                return;\n            }\n\n            this.showAddButton = !this.showAddButton;\n        },\n\n        onEditRule() {\n            this.selectedRuleId = this.sequence?.rule?.id;\n            this.showCreateRuleModal = true;\n        },\n\n        isRuleDisabled(rule) {\n            return this.restrictedRules.includes(rule.id);\n        },\n    },\n};\n"],"names":["template","Component","State","Criteria","utils","CicadaError","mapState","mapGetters","index","criteria","parentId","ruleId","trueBlock","falseBlock","_a","_b","value","rule","sequence","trueCase","actionIds","getRemoveIds","sequenceIds","trueSequence","falseSequence","params","newSequence","invalidSequences","id"],"mappings":"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"}
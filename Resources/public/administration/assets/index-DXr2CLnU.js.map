{"version":3,"file":"index-DXr2CLnU.js","sources":["../../../app/administration/src/app/component/context-menu/sw-context-button/sw-context-button.html.twig","../../../app/administration/src/app/component/context-menu/sw-context-button/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_context_button %}\n<button\n    ref=\"swContextButton\"\n    class=\"sw-context-button\"\n    :class=\"contextClass\"\n    :aria-label=\"ariaLabel && $tc(ariaLabel)\"\n    @click=\"onClickButton\"\n    @keydown.enter=\"onClickButton\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_context_button_button %}\n    <slot name=\"button\">\n        <div\n            class=\"sw-context-button__button\"\n            :class=\"contextButtonClass\"\n            tabindex=\"-1\"\n        >\n            <sw-icon\n                :name=\"icon\"\n                decorative\n            />\n        </div>\n    </slot>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_context_button_menu %}\n    <sw-popover\n        v-if=\"showMenu\"\n        class=\"sw-context-button__menu-position\"\n        popover-class=\"sw-context-button__menu-popover\"\n        :z-index=\"zIndex\"\n    >\n        <sw-context-menu\n            ref=\"swContextMenu\"\n            :class=\"contextMenuClass\"\n            :style=\"menuStyles\"\n        >\n            <slot>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_context_button_menu_slot_default %}{% endblock %}\n            </slot>\n        </sw-context-menu>\n    </sw-popover>\n    {% endblock %}\n</button>\n{% endblock %}\n","import template from './sw-context-button.html.twig';\nimport './sw-context-button.scss';\n\nconst { Component } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n * @status ready\n * @example-type dynamic\n * @component-example\n * <sw-context-button>\n *     <sw-context-menu-item>\n *         Example item\n *     </sw-context-menu-item>\n * </sw-context-button>\n */\nComponent.register('sw-context-button', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['feature'],\n\n    emits: ['on-open-change'],\n\n    props: {\n        showMenuOnStartup: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        menuWidth: {\n            type: Number,\n            required: false,\n            default: 220,\n        },\n\n        menuHorizontalAlign: {\n            type: String,\n            required: false,\n            default: 'right',\n            validator(value) {\n                if (!value.length) {\n                    return true;\n                }\n                return [\n                    'right',\n                    'left',\n                ].includes(value);\n            },\n        },\n\n        menuVerticalAlign: {\n            type: String,\n            required: false,\n            default: 'bottom',\n            validator(value) {\n                if (!value.length) {\n                    return true;\n                }\n                return [\n                    'bottom',\n                    'top',\n                ].includes(value);\n            },\n        },\n\n        icon: {\n            type: String,\n            required: false,\n            default: 'solid-ellipsis-h-s',\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        autoClose: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n\n        autoCloseOutsideClick: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        additionalContextMenuClasses: {\n            type: Object,\n            required: false,\n            default() {\n                return {};\n            },\n        },\n\n        zIndex: {\n            type: Number,\n            required: false,\n            default: 1100,\n        },\n\n        ariaLabel: {\n            type: String,\n            required: false,\n            default: 'sw-context-button.ariaLabel',\n        },\n    },\n\n    data() {\n        return {\n            showMenu: this.showMenuOnStartup,\n        };\n    },\n\n    computed: {\n        menuStyles() {\n            return {\n                width: `${this.menuWidth}px`,\n            };\n        },\n\n        contextClass() {\n            return {\n                'is--disabled': this.disabled,\n                'is--active': this.showMenu,\n            };\n        },\n\n        contextButtonClass() {\n            return {\n                'is--active': this.showMenu,\n            };\n        },\n\n        contextMenuClass() {\n            return {\n                'is--left-align': this.menuHorizontalAlign === 'left',\n                'is--top-align': this.menuVerticalAlign === 'top',\n                ...this.additionalContextMenuClasses,\n            };\n        },\n    },\n\n    methods: {\n        onClickButton() {\n            if (this.disabled) {\n                return;\n            }\n\n            if (this.showMenu) {\n                this.closeMenu();\n            } else {\n                this.openMenu();\n            }\n        },\n\n        openMenu() {\n            this.$emit('on-open-change', true);\n            this.showMenu = true;\n            document.addEventListener('click', this.handleClickEvent);\n        },\n\n        handleClickEvent(event) {\n            // when target is disabled dont close the context menu item\n            const isTargetDisabled = event && event.target.classList.contains('is--disabled');\n            if (isTargetDisabled) {\n                return false;\n            }\n\n            // close menu when no context button exists (when component gets destroyed)\n            const contextButton = this.$refs.swContextButton;\n            if (!contextButton) {\n                return this.closeMenu();\n            }\n\n            // check if the user clicked inside the context menu\n            const clickedInside = contextButton ? contextButton.contains(event.target) : false;\n            if (this.autoCloseOutsideClick && this.showMenu && !clickedInside) {\n                const contextMenu = this.$refs.swContextMenu.$el;\n                const clickedOutside = contextMenu?.contains(event.target) ?? false;\n\n                if (!event?.target || !clickedOutside) {\n                    return this.closeMenu();\n                }\n            }\n\n            // only close the menu on inside clicks if autoclose is active\n            const shouldCloseOnInsideClick = this.autoClose && !clickedInside;\n\n            // close menu when there is no native event (when vue event is triggered) or user clicked outside\n            if (!event || !event.target || shouldCloseOnInsideClick) {\n                return this.closeMenu();\n            }\n\n            return false;\n        },\n\n        closeMenu() {\n            this.$emit('on-open-change', false);\n            this.showMenu = false;\n            document.removeEventListener('click', this.handleClickEvent);\n        },\n    },\n});\n"],"names":["template","Component","value","event","contextButton","clickedInside","contextMenu","clickedOutside","shouldCloseOnInsideClick"],"mappings":"AAAA,MAAeA,EAAA,szBCGT,CAAE,UAAAC,CAAW,EAAG,OAetBA,EAAU,SAAS,oBAAqB,CACpC,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,SAAS,EAElB,MAAO,CAAC,gBAAgB,EAExB,MAAO,CACH,kBAAmB,CACf,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EAED,UAAW,CACP,KAAM,OACN,SAAU,GACV,QAAS,GACZ,EAED,oBAAqB,CACjB,KAAM,OACN,SAAU,GACV,QAAS,QACT,UAAUE,EAAO,CACb,OAAKA,EAAM,OAGJ,CACH,QACA,MACpB,EAAkB,SAASA,CAAK,EALL,EAMd,CACJ,EAED,kBAAmB,CACf,KAAM,OACN,SAAU,GACV,QAAS,SACT,UAAUA,EAAO,CACb,OAAKA,EAAM,OAGJ,CACH,SACA,KACpB,EAAkB,SAASA,CAAK,EALL,EAMd,CACJ,EAED,KAAM,CACF,KAAM,OACN,SAAU,GACV,QAAS,oBACZ,EAED,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EAED,UAAW,CACP,KAAM,QACN,SAAU,GAEV,QAAS,EACZ,EAED,sBAAuB,CACnB,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EAED,6BAA8B,CAC1B,KAAM,OACN,SAAU,GACV,SAAU,CACN,MAAO,EACV,CACJ,EAED,OAAQ,CACJ,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EAED,UAAW,CACP,KAAM,OACN,SAAU,GACV,QAAS,6BACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,SAAU,KAAK,iBAC3B,CACK,EAED,SAAU,CACN,YAAa,CACT,MAAO,CACH,MAAO,GAAG,KAAK,SAAS,IACxC,CACS,EAED,cAAe,CACX,MAAO,CACH,eAAgB,KAAK,SACrB,aAAc,KAAK,QACnC,CACS,EAED,oBAAqB,CACjB,MAAO,CACH,aAAc,KAAK,QACnC,CACS,EAED,kBAAmB,CACf,MAAO,CACH,iBAAkB,KAAK,sBAAwB,OAC/C,gBAAiB,KAAK,oBAAsB,MAC5C,GAAG,KAAK,4BACxB,CACS,CACJ,EAED,QAAS,CACL,eAAgB,CACR,KAAK,WAIL,KAAK,SACL,KAAK,UAAS,EAEd,KAAK,SAAQ,EAEpB,EAED,UAAW,CACP,KAAK,MAAM,iBAAkB,EAAI,EACjC,KAAK,SAAW,GAChB,SAAS,iBAAiB,QAAS,KAAK,gBAAgB,CAC3D,EAED,iBAAiBC,EAAO,CAGpB,GADyBA,GAASA,EAAM,OAAO,UAAU,SAAS,cAAc,EAE5E,MAAO,GAIX,MAAMC,EAAgB,KAAK,MAAM,gBACjC,GAAI,CAACA,EACD,OAAO,KAAK,YAIhB,MAAMC,EAAgBD,EAAgBA,EAAc,SAASD,EAAM,MAAM,EAAI,GAC7E,GAAI,KAAK,uBAAyB,KAAK,UAAY,CAACE,EAAe,CAC/D,MAAMC,EAAc,KAAK,MAAM,cAAc,IACvCC,GAAiBD,GAAA,YAAAA,EAAa,SAASH,EAAM,UAAW,GAE9D,GAAI,EAACA,GAAA,MAAAA,EAAO,SAAU,CAACI,EACnB,OAAO,KAAK,WAEnB,CAGD,MAAMC,EAA2B,KAAK,WAAa,CAACH,EAGpD,MAAI,CAACF,GAAS,CAACA,EAAM,QAAUK,EACpB,KAAK,YAGT,EACV,EAED,WAAY,CACR,KAAK,MAAM,iBAAkB,EAAK,EAClC,KAAK,SAAW,GAChB,SAAS,oBAAoB,QAAS,KAAK,gBAAgB,CAC9D,CACJ,CACL,CAAC"}
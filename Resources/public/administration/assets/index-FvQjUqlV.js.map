{"version":3,"file":"index-FvQjUqlV.js","sources":["../../../app/administration/src/module/sw-product/page/sw-product-detail/sw-product-detail.html.twig","../../../app/administration/src/module/sw-product/page/sw-product-detail/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_product_detail %}\n<sw-page class=\"sw-product-detail\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_header %}\n    <template #smart-bar-header>\n        <h2>\n            <sw-product-variant-info\n                :variations=\"product.variation\"\n                :title-term=\"productTitle\"\n            >\n                {{ productTitle }}\n            </sw-product-variant-info>\n        </h2>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_actions %}\n    <template #smart-bar-actions>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_actions_abort %}\n        <sw-button\n            v-tooltip.bottom=\"tooltipCancel\"\n            :disabled=\"isLoading\"\n            @click=\"onCancel\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <sw-button-group\n            v-tooltip.bottom=\"{\n                message: $tc('sw-privileges.tooltip.warning'),\n                disabled: acl.can('product.editor'),\n                showOnDisabledElements: true\n            }\"\n            class=\"sw-product-detail__save-button-group\"\n            :split-button=\"true\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_actions_save %}\n            <sw-button-process\n                v-tooltip.bottom=\"tooltipSave\"\n                class=\"sw-product-detail__save-action\"\n                :is-loading=\"isLoading\"\n                :process-success=\"isSaveSuccessful\"\n                variant=\"primary\"\n                :disabled=\"isLoading || !acl.can('product.editor')\"\n                @update:process-success=\"saveFinish\"\n                @click.prevent=\"onSave\"\n            >\n                {{ $tc('sw-product.detail.buttonSave') }}\n            </sw-button-process>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_actions_save_context_menu %}\n            <sw-context-button>\n                <template #button>\n                    <sw-button\n                        class=\"sw-product-detail__button-context-menu\"\n                        square\n                        variant=\"primary\"\n                        :disabled=\"isLoading || !acl.can('product.editor')\"\n                    >\n                        <sw-icon\n                            name=\"regular-chevron-down-xs\"\n                            size=\"16\"\n                        />\n                    </sw-button>\n                </template>\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_actions_save_context_menu_actions %}\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_actions_duplicate %}\n                <sw-context-menu-item\n                    class=\"sw-product-detail__save-duplicate-action\"\n                    :disabled=\"!acl.can('product.creator') || !acl.can('product.editor') || product.parentId != null\"\n                    @click=\"onDuplicate\"\n                >\n                    {{ $tc('sw-product.detail.buttonSaveDuplicate') }}\n                </sw-context-menu-item>\n                {% endblock %}\n                {% endblock %}\n            </sw-context-button>\n            {% endblock %}\n        </sw-button-group>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch\n            :save-changes-function=\"saveOnLanguageChange\"\n            :abort-change-function=\"abortOnLanguageChange\"\n            :disabled=\"!productId\"\n            @on-change=\"onChangeLanguage\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_content %}\n    <template #content>\n        <sw-card-view>\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_content_top %}\n            <template v-if=\"!isLoading && isChild\">\n                <router-link\n                    v-if=\"advanceModeEnabled\"\n                    class=\"sw-card__back-link\"\n                    :to=\"{ name: 'sw.product.detail.variants', params: { id: product.parentId } }\"\n                >\n                    <sw-icon\n                        name=\"regular-long-arrow-left\"\n                        small\n                    />\n                    {{ $tc('sw-product.general.backToParent') }}\n                </router-link>\n\n                <router-link\n                    v-else\n                    class=\"sw-card__back-link\"\n                    :to=\"{ name: 'sw.product.detail.base', params: { id: product.parentId } }\"\n                >\n                    <sw-icon\n                        name=\"regular-long-arrow-left\"\n                        small\n                    />\n                    {{ $tc('sw-product.general.backToGeneralOverview') }}\n                </router-link>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_content_language_info %}\n            <sw-language-info\n                :entity-description=\"placeholder(product, 'name', $tc('sw-product.detail.textHeadline'))\"\n                :is-new-entity=\"!productId\"\n            />\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_inheritance_warning %}\n            <sw-inheritance-warning\n                v-if=\"isChild\"\n                :name=\"$tc('sw-product.general.inheritanceModuleName')\"\n            />\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_content_tabs %}\n            <sw-tabs\n                v-if=\"productId\"\n                class=\"sw-product-detail-page__tabs\"\n                position-identifier=\"sw-product-detail\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_general %}\n                <sw-tabs-item\n                    class=\"sw-product-detail__tab-general\"\n                    :route=\"{ name: 'sw.product.detail.base', params: { id: $route.params.id } }\"\n                    :has-error=\"swProductDetailBaseError\"\n                    :title=\"$tc('sw-product.detail.tabGeneral')\"\n                >\n                    {{ $tc('sw-product.detail.tabGeneral') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_specifications %}\n                <sw-tabs-item\n                    class=\"sw-product-detail__tab-specifications\"\n                    :route=\"{ name: 'sw.product.detail.specifications', params: { id: $route.params.id } }\"\n                    :title=\"$tc('sw-product.detail.tabSpecifications')\"\n                >\n                    {{ $tc('sw-product.detail.tabSpecifications') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_advanced_prices %}\n                <sw-tabs-item\n                    v-show=\"showModeSetting\"\n                    class=\"sw-product-detail__tab-advanced-prices\"\n                    :route=\"{ name: 'sw.product.detail.prices', params: { id: $route.params.id } }\"\n                    :title=\"$tc('sw-product.detail.tabAdvancedPrices')\"\n                >\n                    {{ $tc('sw-product.detail.tabAdvancedPrices') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_advanced_variants %}\n                <sw-tabs-item\n                    v-show=\"!isChild && showModeSetting\"\n                    class=\"sw-product-detail__tab-variants\"\n                    :route=\"{ name: 'sw.product.detail.variants', params: { id: $route.params.id } }\"\n                    :title=\"$tc('sw-product.detail.tabVariation')\"\n                >\n                    {{ $tc('sw-product.detail.tabVariation') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_layout %}\n                <sw-tabs-item\n                    v-show=\"!isChild && showModeSetting\"\n                    class=\"sw-product-detail__tab-layout\"\n                    :route=\"{ name: 'sw.product.detail.layout', params: { id: $route.params.id } }\"\n                    :title=\"$tc('sw-product.detail.tabLayout')\"\n                >\n                    {{ $tc('sw-product.detail.tabLayout') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_seo %}\n                <sw-tabs-item\n                    v-show=\"showModeSetting\"\n                    class=\"sw-product-detail__tab-seo\"\n                    :route=\"{ name: 'sw.product.detail.seo', params: { id: $route.params.id } }\"\n                    :title=\"$tc('sw-product.detail.tabSeo')\"\n                >\n                    {{ $tc('sw-product.detail.tabSeo') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_cross_selling %}\n                <sw-tabs-item\n                    v-show=\"showModeSetting\"\n                    class=\"sw-product-detail__tab-cross-selling\"\n                    :route=\"{ name: 'sw.product.detail.crossSelling', params: { id: $route.params.id } }\"\n                    :has-error=\"swProductDetailCrossSellingError\"\n                    :title=\"$tc('sw-product.detail.tabCrossSelling')\"\n                >\n                    {{ $tc('sw-product.detail.tabCrossSelling') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_reviews %}\n                <sw-tabs-item\n                    v-show=\"showModeSetting\"\n                    class=\"sw-product-detail__tab-reviews\"\n                    :route=\"{ name: 'sw.product.detail.reviews', params: { id: $route.params.id } }\"\n                    :title=\"$tc('sw-product.detail.tabReviews')\"\n                >\n                    {{ $tc('sw-product.detail.tabReviews') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_content_tabs_additional %}\n                {% endblock %}\n\n            </sw-tabs>\n            {% endblock %}\n\n            <sw-extension-component-section\n                position-identifier=\"sw-product-detail__before-content\"\n            />\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_content_view %}\n            <router-view\n                v-slot=\"{ Component }\"\n            >\n                <component\n                    :is=\"Component\"\n                    @cover-change=\"onCoverChange\"\n                />\n            </router-view>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_content_clone_modal %}\n            <sw-product-clone-modal\n                v-if=\"cloning\"\n                :product=\"product\"\n                @clone-finish=\"onDuplicateFinish\"\n            />\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_settings_mode %}\n            <sw-product-settings-mode\n                v-if=\"showAdvanceModeSetting\"\n                :is-loading=\"isLoading\"\n                :mode-settings=\"advancedModeSetting\"\n                @settings-item-change=\"onChangeSettingItem\"\n                @settings-change=\"onChangeSetting\"\n            />\n            {% endblock %}\n        </sw-card-view>\n    </template>\n    {% endblock %}\n\n    <template #sidebar>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_sidebar %}\n        {% endblock %}\n    </template>\n</sw-page>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport EntityValidationService from 'src/app/service/entity-validation.service';\nimport template from './sw-product-detail.html.twig';\nimport swProductDetailState from './state';\nimport errorConfiguration from './error.cfg.json';\nimport './sw-product-detail.scss';\n\nconst { Context, Mixin } = Cicada;\nconst { Criteria, ChangesetGenerator } = Cicada.Data;\nconst { cloneDeep } = Cicada.Utils.object;\nconst { mapPageErrors, mapState, mapGetters } = Cicada.Component.getComponentHelper();\nconst type = Cicada.Utils.types;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'mediaService',\n        'repositoryFactory',\n        'numberRangeService',\n        'seoUrlService',\n        'acl',\n        'systemConfigApiService',\n        'entityValidationService',\n    ],\n\n    provide() {\n        return {\n            swProductDetailLoadAll: this.loadAll,\n        };\n    },\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('placeholder'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': {\n            active() {\n                return this.acl.can('product.editor');\n            },\n            method: 'onSave',\n        },\n        ESCAPE: 'onCancel',\n    },\n\n    props: {\n        productId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n        /* Product \"types\" provided by the split button for creating a new product through a router parameter */\n        creationStates: {\n            type: Array,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            productNumberPreview: '',\n            isSaveSuccessful: false,\n            cloning: false,\n            defaultSalesChannelVisibility: 30,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'product',\n            'parentProduct',\n            'localMode',\n            'advancedModeSetting',\n            'modeSettings',\n        ]),\n\n        ...mapGetters('swProductDetail', [\n            'productRepository',\n            'isLoading',\n            'isChild',\n            'defaultCurrency',\n            'defaultFeatureSet',\n            'showModeSetting',\n            'advanceModeEnabled',\n            'productStates',\n        ]),\n\n        ...mapPageErrors(errorConfiguration),\n\n        identifier() {\n            return this.productTitle;\n        },\n\n        productTitle() {\n            // when product is variant\n            if (this.isChild && this.product) {\n                return this.getInheritTitle();\n            }\n\n            if (!this.$i18n) {\n                return '';\n            }\n\n            // return name\n            return this.placeholder(this.product, 'name', this.$tc('sw-product.detail.textHeadline'));\n        },\n\n        productRepository() {\n            return this.repositoryFactory.create('product');\n        },\n\n        syncRepository() {\n            return this.repositoryFactory.create('product', null, {\n                useSync: true,\n            });\n        },\n\n        currencyRepository() {\n            return this.repositoryFactory.create('currency');\n        },\n\n        taxRepository() {\n            return this.repositoryFactory.create('tax');\n        },\n\n        customFieldSetRepository() {\n            return this.repositoryFactory.create('custom_field_set');\n        },\n\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n\n        productVisibilityRepository() {\n            return this.repositoryFactory.create('product_visibility');\n        },\n\n        mediaRepository() {\n            if (this.product && this.product.media) {\n                return this.repositoryFactory.create(this.product.media.entity, this.product.media.source);\n            }\n            return null;\n        },\n\n        featureSetRepository() {\n            return this.repositoryFactory.create('product_feature_set');\n        },\n\n        currentUser() {\n            return Cicada.State.get('session').currentUser;\n        },\n\n        userModeSettingsRepository() {\n            return this.repositoryFactory.create('user_config');\n        },\n\n        userModeSettingsCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addFilter(Criteria.equals('key', 'mode.setting.advancedModeSettings'));\n            criteria.addFilter(Criteria.equals('userId', this.currentUser && this.currentUser.id));\n\n            return criteria;\n        },\n\n        productCriteria() {\n            const criteria = new Criteria(1, 25);\n\n            criteria.getAssociation('media').addSorting(Criteria.sort('position', 'ASC'));\n            criteria.addAssociation('media.media');\n\n            criteria.getAssociation('properties').addSorting(Criteria.sort('name', 'ASC', true));\n\n            criteria.getAssociation('prices').addSorting(Criteria.sort('quantityStart', 'ASC', true));\n\n            criteria.getAssociation('tags').addSorting(Criteria.sort('name', 'ASC'));\n\n            criteria.getAssociation('seoUrls').addFilter(Criteria.equals('isCanonical', true));\n\n            criteria\n                .getAssociation('crossSellings')\n                .addSorting(Criteria.sort('position', 'ASC'))\n                .getAssociation('assignedProducts')\n                .addSorting(Criteria.sort('position', 'ASC'))\n                .addAssociation('product')\n                .getAssociation('product')\n                .addAssociation('options.group');\n\n            criteria\n                .addAssociation('cover.media')\n                .addAssociation('categories')\n                .addAssociation('visibilities.salesChannel')\n                .addAssociation('options')\n                .addAssociation('configuratorSettings.option')\n                .addAssociation('unit')\n                .addAssociation('productReviews')\n                .addAssociation('seoUrls')\n                .addAssociation('mainCategories')\n                .addAssociation('options.group')\n                .addAssociation('customFieldSets')\n                .addAssociation('featureSet')\n                .addAssociation('cmsPage')\n                .addAssociation('featureSet')\n                .addAssociation('downloads.media');\n\n            criteria.getAssociation('manufacturer').addAssociation('media');\n\n            return criteria;\n        },\n\n        customFieldSetCriteria() {\n            const criteria = new Criteria(1, null);\n\n            criteria.addFilter(Criteria.equals('relations.entityName', 'product'));\n            criteria.addSorting(Criteria.sort('config.customFieldPosition', 'ASC', true));\n\n            return criteria;\n        },\n\n        defaultFeatureSetCriteria() {\n            const criteria = new Criteria(1, 1);\n\n            criteria.addSorting(Criteria.sort('createdAt', 'ASC')).addFilter(\n                Criteria.equalsAny('name', [\n                    'Default',\n                    'Standard',\n                ]),\n            );\n\n            return criteria;\n        },\n\n        taxCriteria() {\n            const criteria = new Criteria(1, 500);\n            criteria.addSorting(Criteria.sort('position'));\n\n            return criteria;\n        },\n\n        tooltipSave() {\n            const systemKey = this.$device.getSystemKey();\n\n            return {\n                message: `${systemKey} + S`,\n                appearance: 'light',\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        getModeSettingGeneralTab() {\n            return [\n                {\n                    key: 'general_information',\n                    label: 'sw-product.detailBase.cardTitleProductInfo',\n                    enabled: true,\n                    name: 'general',\n                },\n                {\n                    key: 'prices',\n                    label: 'sw-product.detailBase.cardTitlePrices',\n                    enabled: true,\n                    name: 'general',\n                },\n                {\n                    key: 'deliverability',\n                    label: 'sw-product.detailBase.cardTitleDeliverabilityInfo',\n                    enabled: true,\n                    name: 'general',\n                },\n                {\n                    key: 'visibility_structure',\n                    label: 'sw-product.detailBase.cardTitleAssignment',\n                    enabled: true,\n                    name: 'general',\n                },\n                {\n                    key: 'media',\n                    label: 'sw-product.detailBase.cardTitleMedia',\n                    enabled: true,\n                    name: 'general',\n                },\n                {\n                    key: 'labelling',\n                    label: 'sw-product.detailBase.cardTitleSettings',\n                    enabled: true,\n                    name: 'general',\n                },\n            ];\n        },\n\n        getModeSettingSpecificationsTab() {\n            return [\n                {\n                    key: 'measures_packaging',\n                    label: 'sw-product.specifications.cardTitleMeasuresPackaging',\n                    enabled: true,\n                    name: 'specifications',\n                },\n                {\n                    key: 'properties',\n                    label: 'sw-product.specifications.cardTitleProperties',\n                    enabled: true,\n                    name: 'specifications',\n                },\n                {\n                    key: 'essential_characteristics',\n                    label: 'sw-product.specifications.cardTitleEssentialCharacteristics',\n                    enabled: true,\n                    name: 'specifications',\n                },\n                {\n                    key: 'custom_fields',\n                    label: 'sw-product.specifications.cardTitleCustomFields',\n                    enabled: true,\n                    name: 'specifications',\n                },\n            ];\n        },\n\n        showAdvanceModeSetting() {\n            if (this.isChild) {\n                return false;\n            }\n\n            const routes = [\n                'sw.product.detail.base',\n                'sw.product.detail.specifications',\n            ];\n\n            return routes.includes(this.$route.name);\n        },\n\n        cmsPageState() {\n            return Cicada.Store.get('cmsPage');\n        },\n\n        currentPage() {\n            return Cicada.Store.get('cmsPage').currentPage;\n        },\n    },\n\n    watch: {\n        productId() {\n            this.destroyedComponent();\n            this.createdComponent();\n        },\n    },\n\n    beforeCreate() {\n        Cicada.State.registerModule('swProductDetail', swProductDetailState);\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    beforeUnmount() {\n        Cicada.State.unregisterModule('swProductDetail');\n    },\n\n    unmounted() {\n        this.destroyedComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            Cicada.ExtensionAPI.publishData({\n                id: 'sw-product-detail__product',\n                path: 'product',\n                scope: this,\n            });\n\n            Cicada.ExtensionAPI.publishData({\n                id: 'sw-product-detail__cmsPage',\n                path: 'currentPage',\n                scope: this,\n            });\n\n            this.cmsPageState.resetCmsPageState();\n\n            // when create\n            if (!this.productId) {\n                // set language to system language\n                if (!Cicada.State.getters['context/isSystemDefaultLanguage']) {\n                    Cicada.State.commit('context/resetLanguageToDefault');\n                }\n            }\n\n            // initialize default state\n            this.initState();\n\n            if (this.isCompatEnabled('INSTANCE_EVENT_EMITTER')) {\n                /**\n                 * @deprecated tag:v6.7.0 - Unused event will be removed.\n                 */\n                this.$root.$on('media-remove', (mediaId) => {\n                    this.removeMediaItem(mediaId);\n                });\n            }\n\n            this.initAdvancedModeSettings();\n        },\n\n        destroyedComponent() {\n            if (this.isCompatEnabled('INSTANCE_EVENT_EMITTER')) {\n                /**\n                 * @deprecated tag:v6.7.0 - Unused event will be removed.\n                 */\n                this.$root.$off('media-remove');\n            }\n        },\n\n        initState() {\n            Cicada.State.commit('swProductDetail/setApiContext', Cicada.Context.api);\n\n            // when product exists\n            if (this.productId) {\n                return this.loadState();\n            }\n\n            // When no product id exists init state and new product with the repositoryFactory\n            return this.createState().then(() => {\n                // create new product number\n                this.numberRangeService.reserve('product', '', true).then((response) => {\n                    this.productNumberPreview = response.number;\n                    this.product.productNumber = response.number;\n                });\n            });\n        },\n\n        initAdvancedModeSettings() {\n            Cicada.State.commit('swProductDetail/setAdvancedModeSetting', this.getAdvancedModeDefaultSetting());\n\n            this.getAdvancedModeSetting();\n        },\n\n        createUserModeSetting() {\n            const newModeSettings = this.userModeSettingsRepository.create();\n            newModeSettings.key = 'mode.setting.advancedModeSettings';\n            newModeSettings.userId = this.currentUser && this.currentUser.id;\n            return newModeSettings;\n        },\n\n        getAdvancedModeDefaultSetting() {\n            const defaultSettings = this.createUserModeSetting();\n            defaultSettings.value = {\n                advancedMode: {\n                    label: 'sw-product.general.textAdvancedMode',\n                    enabled: true,\n                },\n                settings: [\n                    ...this.getModeSettingGeneralTab,\n                    ...this.getModeSettingSpecificationsTab,\n                ],\n            };\n            return defaultSettings;\n        },\n\n        getAdvancedModeSetting() {\n            return this.userModeSettingsRepository.search(this.userModeSettingsCriteria).then(async (items) => {\n                if (!items.total) {\n                    return;\n                }\n\n                const modeSettings = items.first();\n                const defaultSettings = this.getAdvancedModeDefaultSetting().value.settings;\n\n                modeSettings.value.settings = defaultSettings.reduce((accumulator, defaultEntry) => {\n                    const foundEntry = modeSettings.value.settings.find((dbEntry) => dbEntry.key === defaultEntry.key);\n                    accumulator.push(foundEntry || defaultEntry);\n\n                    return accumulator;\n                }, []);\n\n                Cicada.State.commit('swProductDetail/setAdvancedModeSetting', modeSettings);\n                Cicada.State.commit('swProductDetail/setModeSettings', this.changeModeSettings());\n\n                await this.$nextTick();\n            });\n        },\n\n        saveAdvancedMode() {\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'advancedMode',\n                true,\n            ]);\n            this.userModeSettingsRepository\n                .save(this.advancedModeSetting)\n                .then(() => {\n                    this.getAdvancedModeSetting().then(() => {\n                        Cicada.State.commit('swProductDetail/setLoading', [\n                            'advancedMode',\n                            false,\n                        ]);\n                    });\n                })\n                .catch(() => {\n                    this.createNotificationError({\n                        message: this.$tc('global.notification.unspecifiedSaveErrorMessage'),\n                    });\n                });\n        },\n\n        onChangeSetting() {\n            Cicada.State.commit('swProductDetail/setAdvancedModeSetting', this.advancedModeSetting);\n            this.saveAdvancedMode();\n        },\n\n        changeModeSettings() {\n            const enabledModeItems = this.advancedModeSetting.value.settings.filter((item) => item.enabled);\n            if (!enabledModeItems.length) {\n                return [];\n            }\n\n            return enabledModeItems.map((item) => item.key);\n        },\n\n        onChangeSettingItem() {\n            Cicada.State.commit('swProductDetail/setModeSettings', this.changeModeSettings());\n            this.saveAdvancedMode();\n        },\n\n        loadState() {\n            Cicada.State.commit('swProductDetail/setLocalMode', false);\n            Cicada.State.commit('swProductDetail/setProductId', this.productId);\n            Cicada.State.commit('cicadaApps/setSelectedIds', [\n                this.productId,\n            ]);\n\n            return this.loadAll();\n        },\n\n        loadAll() {\n            return Promise.all([\n                this.loadProduct(),\n                this.loadCurrencies(),\n                this.loadTaxes(),\n                this.loadAttributeSet(),\n            ]);\n        },\n\n        createState() {\n            // set local mode\n            Cicada.State.commit('swProductDetail/setLocalMode', true);\n            Cicada.State.commit('cicadaApps/setSelectedIds', []);\n\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'product',\n                true,\n            ]);\n\n            // set product \"type\"\n            Cicada.State.commit('swProductDetail/setCreationStates', this.creationStates);\n\n            // create empty product\n            Cicada.State.commit('swProductDetail/setProduct', this.productRepository.create());\n            Cicada.State.commit('swProductDetail/setProductId', this.product.id);\n\n            // fill empty data\n            this.product.active = true;\n            this.product.taxId = null;\n\n            this.product.metaTitle = '';\n            this.product.additionalText = '';\n            this.product.variantListingConfig = {};\n\n            if (this.creationStates) {\n                this.adjustProductAccordingToType();\n            }\n\n            return Promise.all([\n                this.loadCurrencies(),\n                this.loadTaxes(),\n                this.loadAttributeSet(),\n                this.loadDefaultFeatureSet(),\n            ]).then(() => {\n                // set default product price and empty purchase price\n                this.product.price = [\n                    {\n                        currencyId: this.defaultCurrency.id,\n                        net: null,\n                        linked: true,\n                        gross: null,\n                    },\n                ];\n\n                this.product.purchasePrices = this.getDefaultPurchasePrices();\n\n                // Set default tax rate / sales channels on creation\n                if (this.product.isNew) {\n                    this.getDefaultTaxRate().then((result) => {\n                        this.product.taxId = result;\n                    });\n\n                    this.getDefaultSalesChannels().then((result) => {\n                        if (type.isEmpty(result)) {\n                            return;\n                        }\n\n                        this.product.active = result.defaultActive;\n\n                        if (!result.defaultSalesChannelIds || result.defaultSalesChannelIds.length <= 0) {\n                            return;\n                        }\n\n                        this.fetchSalesChannelByIds(result.defaultSalesChannelIds).then((salesChannels) => {\n                            if (!salesChannels.length) {\n                                return;\n                            }\n\n                            salesChannels.forEach((salesChannel) => {\n                                const visibilities = this.createProductVisibilityEntity(\n                                    result.defaultVisibilities,\n                                    salesChannel,\n                                );\n                                this.product.visibilities.push(visibilities);\n                            });\n                        });\n                    });\n                }\n\n                if (this.defaultFeatureSet && this.defaultFeatureSet.length > 0) {\n                    this.product.featureSetId = this.defaultFeatureSet[0].id;\n                }\n\n                Cicada.State.commit('swProductDetail/setLoading', [\n                    'product',\n                    false,\n                ]);\n            });\n        },\n\n        adjustProductAccordingToType() {\n            if (this.creationStates.includes('is-download')) {\n                this.product.maxPurchase = 1;\n            }\n        },\n\n        loadProduct() {\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'product',\n                true,\n            ]);\n\n            return this.productRepository\n                .get(this.productId || this.product.id, Cicada.Context.api, this.productCriteria)\n                .then(async (product) => {\n                    if (!product.purchasePrices?.length > 0 && !product.parentId) {\n                        if (!this.defaultCurrency?.id) {\n                            await this.loadCurrencies();\n                        }\n\n                        product.purchasePrices = this.getDefaultPurchasePrices();\n                    }\n\n                    Cicada.State.commit('swProductDetail/setProduct', product);\n\n                    if (this.product.parentId) {\n                        this.loadParentProduct();\n                    } else {\n                        Cicada.State.commit('swProductDetail/setParentProduct', {});\n                    }\n\n                    Cicada.State.commit('swProductDetail/setLoading', [\n                        'product',\n                        false,\n                    ]);\n                });\n        },\n\n        getDefaultPurchasePrices() {\n            return [\n                {\n                    currencyId: this.defaultCurrency.id,\n                    net: 0,\n                    linked: true,\n                    gross: 0,\n                },\n            ];\n        },\n\n        loadParentProduct() {\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'parentProduct',\n                true,\n            ]);\n\n            return this.productRepository\n                .get(this.product.parentId, Cicada.Context.api, this.productCriteria)\n                .then((res) => {\n                    Cicada.State.commit('swProductDetail/setParentProduct', res);\n                })\n                .then(() => {\n                    Cicada.State.commit('swProductDetail/setLoading', [\n                        'parentProduct',\n                        false,\n                    ]);\n                });\n        },\n\n        loadCurrencies() {\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'currencies',\n                true,\n            ]);\n\n            return this.currencyRepository\n                .search(new Criteria(1, 500))\n                .then((res) => {\n                    Cicada.State.commit('swProductDetail/setCurrencies', res);\n                })\n                .then(() => {\n                    Cicada.State.commit('swProductDetail/setLoading', [\n                        'currencies',\n                        false,\n                    ]);\n                });\n        },\n\n        loadTaxes() {\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'taxes',\n                true,\n            ]);\n\n            return this.taxRepository\n                .search(this.taxCriteria)\n                .then((res) => {\n                    Cicada.State.commit('swProductDetail/setTaxes', res);\n                })\n                .then(() => {\n                    Cicada.State.commit('swProductDetail/setLoading', [\n                        'taxes',\n                        false,\n                    ]);\n                });\n        },\n\n        getDefaultTaxRate() {\n            return this.systemConfigApiService.getValues('core.tax').then((response) => {\n                return response['core.tax.defaultTaxRate'] ?? null;\n            });\n        },\n\n        loadAttributeSet() {\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'customFieldSets',\n                true,\n            ]);\n\n            return this.customFieldSetRepository\n                .search(this.customFieldSetCriteria)\n                .then((res) => {\n                    Cicada.State.commit('swProductDetail/setAttributeSet', res);\n                })\n                .finally(() => {\n                    Cicada.State.commit('swProductDetail/setLoading', [\n                        'customFieldSets',\n                        false,\n                    ]);\n                });\n        },\n\n        loadDefaultFeatureSet() {\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'defaultFeatureSet',\n                true,\n            ]);\n\n            return this.featureSetRepository\n                .search(this.defaultFeatureSetCriteria)\n                .then((res) => {\n                    Cicada.State.commit('swProductDetail/setDefaultFeatureSet', res);\n                })\n                .then(() => {\n                    Cicada.State.commit('swProductDetail/setLoading', [\n                        'defaultFeatureSet',\n                        false,\n                    ]);\n                });\n        },\n\n        getDefaultSalesChannels() {\n            return this.systemConfigApiService.getValues('core.defaultSalesChannel').then((response) => {\n                if (type.isEmpty(response)) {\n                    return {};\n                }\n\n                return {\n                    defaultSalesChannelIds: response?.['core.defaultSalesChannel.salesChannel'],\n                    defaultVisibilities: response?.['core.defaultSalesChannel.visibility'],\n                    defaultActive: !!response?.['core.defaultSalesChannel.active'],\n                };\n            });\n        },\n\n        fetchSalesChannelByIds(ids) {\n            const criteria = new Criteria(1, 25);\n\n            criteria.addFilter(Criteria.equalsAny('id', ids));\n\n            return this.salesChannelRepository.search(criteria);\n        },\n\n        createProductVisibilityEntity(visibility, salesChannel) {\n            const visibilities = this.productVisibilityRepository.create(Context.api);\n\n            Object.assign(visibilities, {\n                visibility: visibility[salesChannel.id] || this.defaultSalesChannelVisibility,\n                productId: this.product.id,\n                salesChannelId: salesChannel.id,\n                salesChannel: salesChannel,\n            });\n\n            return visibilities;\n        },\n\n        abortOnLanguageChange() {\n            return this.productRepository.hasChanges(this.product);\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        onChangeLanguage(languageId) {\n            Cicada.State.commit('context/setApiLanguageId', languageId);\n            this.initState();\n        },\n\n        saveFinish() {\n            this.isSaveSuccessful = false;\n\n            if (!this.productId) {\n                this.$router.push({\n                    name: 'sw.product.detail',\n                    params: { id: this.product.id },\n                });\n            }\n        },\n\n        onSave() {\n            if (!this.validateProductPurchase()) {\n                this.createNotificationError({\n                    message: this.$tc('sw-product.detail.errorMinMaxPurchase'),\n                });\n\n                return new Promise((resolve) => {\n                    resolve();\n                });\n            }\n\n            this.validateProductPrices();\n\n            if (!this.productId) {\n                if (this.productNumberPreview === this.product.productNumber) {\n                    this.numberRangeService.reserve('product').then((response) => {\n                        this.productNumberPreview = 'reserved';\n                        this.product.productNumber = response.number;\n                    });\n                }\n            }\n\n            this.isSaveSuccessful = false;\n\n            const pageOverrides = this.getCmsPageOverrides();\n\n            if (type.isPlainObject(pageOverrides)) {\n                this.product.slotConfig = cloneDeep(pageOverrides);\n            }\n\n            if (!this.entityValidationService.validate(this.product, this.customValidate)) {\n                const titleSaveError = this.$tc('global.default.error');\n                const messageSaveError = this.$tc('global.notification.notificationSaveErrorMessageRequiredFieldsInvalid');\n\n                this.createNotificationError({\n                    title: titleSaveError,\n                    message: messageSaveError,\n                });\n                return Promise.resolve();\n            }\n\n            return this.saveProduct().then(this.onSaveFinished);\n        },\n\n        customValidate(errors, product) {\n            if (this.productStates.includes('is-download')) {\n                // custom download product validation\n                if (product.downloads === undefined || product.downloads.length < 1) {\n                    errors.push(EntityValidationService.createRequiredError('/0/downloads'));\n                }\n            }\n\n            return errors;\n        },\n\n        validateProductPrices() {\n            this.product.prices.forEach((advancedPrice) => {\n                this.validatePrices('listPrice', advancedPrice.price);\n            });\n            this.validatePrices('listPrice', this.product.price);\n\n            this.product.prices.forEach((advancedPrice) => {\n                this.validatePrices('regulationPrice', advancedPrice.price);\n            });\n            this.validatePrices('regulationPrice', this.product.price);\n        },\n\n        validatePrices(priceLabel, prices) {\n            if (!prices) {\n                return;\n            }\n\n            prices.forEach((price) => {\n                if (!price[priceLabel]) {\n                    return;\n                }\n\n                if (!price[priceLabel].gross && !price[priceLabel].net) {\n                    price[priceLabel] = null;\n                    return;\n                }\n\n                if (!price[priceLabel].gross) {\n                    price[priceLabel].gross = 0;\n                    return;\n                }\n\n                if (!price[priceLabel].net) {\n                    price[priceLabel].net = 0;\n                }\n            });\n        },\n\n        onSaveFinished(response) {\n            const updatePromises = [];\n\n            if (Cicada.State.list().includes('swSeoUrl')) {\n                const seoUrls = Cicada.State.getters['swSeoUrl/getNewOrModifiedUrls']();\n                const defaultSeoUrl = Cicada.State.get('swSeoUrl').defaultSeoUrl;\n\n                if (seoUrls) {\n                    seoUrls.forEach((seoUrl) => {\n                        if (!seoUrl.seoPathInfo) {\n                            seoUrl.seoPathInfo = defaultSeoUrl.seoPathInfo;\n                            seoUrl.isModified = false;\n                        } else {\n                            seoUrl.isModified = true;\n                        }\n\n                        updatePromises.push(this.seoUrlService.updateCanonicalUrl(seoUrl, seoUrl.languageId));\n                    });\n                }\n\n                if (response === 'empty' && seoUrls.length > 0) {\n                    response = 'success';\n                }\n            }\n\n            Promise.all(updatePromises)\n                .then(() => {\n                    if (this.isCompatEnabled('INSTANCE_EVENT_EMITTER')) {\n                        this.$root.$emit('seo-url-save-finish');\n                    } else {\n                        Cicada.Utils.EventBus.emit('sw-product-detail-save-finish');\n                    }\n                })\n                .then(() => {\n                    switch (response) {\n                        case 'empty': {\n                            this.isSaveSuccessful = true;\n                            Cicada.State.commit('error/resetApiErrors');\n                            break;\n                        }\n\n                        case 'success': {\n                            this.isSaveSuccessful = true;\n\n                            break;\n                        }\n\n                        default: {\n                            const errorCode = response?.response?.data?.errors?.[0]?.code;\n\n                            if (errorCode === 'CONTENT__DUPLICATE_PRODUCT_NUMBER') {\n                                const titleSaveError = this.$tc('global.default.error');\n                                const messageSaveError = this.$t(\n                                    'sw-product.notification.notificationSaveErrorProductNoAlreadyExists',\n                                    {\n                                        productNo: response.response.data.errors[0].meta.parameters.number,\n                                    },\n                                );\n\n                                this.createNotificationError({\n                                    title: titleSaveError,\n                                    message: messageSaveError,\n                                });\n                                break;\n                            }\n\n                            const errorDetail = response?.response?.data?.errors?.[0]?.detail;\n                            const titleSaveError = this.$tc('global.default.error');\n                            const messageSaveError =\n                                errorDetail ??\n                                this.$tc('global.notification.notificationSaveErrorMessageRequiredFieldsInvalid');\n\n                            this.createNotificationError({\n                                title: titleSaveError,\n                                message: messageSaveError,\n                            });\n                            break;\n                        }\n                    }\n                });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.product.index' });\n        },\n\n        saveProduct() {\n            Cicada.State.commit('swProductDetail/setLoading', [\n                'product',\n                true,\n            ]);\n\n            if (this.product.media) {\n                this.product.media.forEach((medium, index) => {\n                    medium.position = index;\n                });\n            }\n\n            return new Promise((resolve) => {\n                // check if product exists\n                if (!this.productRepository.hasChanges(this.product)) {\n                    Cicada.State.commit('swProductDetail/setLoading', [\n                        'product',\n                        false,\n                    ]);\n                    resolve('empty');\n                    Cicada.State.commit('swProductDetail/setLoading', [\n                        'product',\n                        false,\n                    ]);\n                    return;\n                }\n\n                // save product\n                this.syncRepository\n                    .save(this.product)\n                    .then(() => {\n                        this.loadAll().then(() => {\n                            Cicada.State.commit('swProductDetail/setLoading', [\n                                'product',\n                                false,\n                            ]);\n\n                            resolve('success');\n                        });\n                    })\n                    .catch((response) => {\n                        Cicada.State.commit('swProductDetail/setLoading', [\n                            'product',\n                            false,\n                        ]);\n                        resolve(response);\n                    });\n            });\n        },\n\n        removeMediaItem(state, mediaId) {\n            const media = this.product.media.find((mediaItem) => mediaItem.mediaId === mediaId);\n\n            // remove cover id if mediaId matches\n            if (this.product.coverId === media.id) {\n                this.product.coverId = null;\n            }\n\n            this.product.media.remove(mediaId);\n        },\n\n        onCoverChange(mediaId) {\n            if (!mediaId || mediaId.length < 0) {\n                return;\n            }\n\n            const media = this.product.media.find((mediaItem) => mediaItem.mediaId === mediaId);\n\n            if (media) {\n                this.product.coverId = media.id;\n            }\n        },\n\n        getInheritTitle() {\n            if (\n                this.product.hasOwnProperty('translated') &&\n                this.product.translated.hasOwnProperty('name') &&\n                this.product.translated.name !== null\n            ) {\n                return this.product.translated.name;\n            }\n            if (this.product.name !== null) {\n                return this.product.name;\n            }\n            if (this.parentProduct && this.parentProduct.hasOwnProperty('translated')) {\n                const pProduct = this.parentProduct;\n                return pProduct.translated.hasOwnProperty('name') ? pProduct.translated.name : pProduct.name;\n            }\n            return '';\n        },\n\n        onDuplicate() {\n            this.cloning = true;\n        },\n\n        onDuplicateFinish(duplicate) {\n            this.cloning = false;\n            this.$router.push({\n                name: 'sw.product.detail',\n                params: { id: duplicate.id },\n            });\n        },\n\n        validateProductPurchase() {\n            if (this.product.maxPurchase && this.product.minPurchase > this.product.maxPurchase) {\n                return false;\n            }\n\n            return true;\n        },\n\n        getCmsPageOverrides() {\n            if (this.currentPage === null) {\n                return null;\n            }\n\n            this.deleteSpecifcKeys(this.currentPage.sections);\n\n            const changesetGenerator = new ChangesetGenerator();\n            const { changes } = changesetGenerator.generate(this.currentPage);\n\n            const slotOverrides = {};\n            if (changes === null) {\n                return slotOverrides;\n            }\n\n            if (type.isArray(changes.sections)) {\n                changes.sections.forEach((section) => {\n                    if (type.isArray(section.blocks)) {\n                        section.blocks.forEach((block) => {\n                            if (type.isArray(block.slots)) {\n                                block.slots.forEach((slot) => {\n                                    slotOverrides[slot.id] = slot.config;\n                                });\n                            }\n                        });\n                    }\n                });\n            }\n\n            return slotOverrides;\n        },\n\n        deleteSpecifcKeys(sections) {\n            if (!sections) {\n                return;\n            }\n\n            sections.forEach((section) => {\n                if (!section.blocks) {\n                    return;\n                }\n\n                section.blocks.forEach((block) => {\n                    if (!block.slots) {\n                        return;\n                    }\n\n                    block.slots.forEach((slot) => {\n                        if (!slot.config) {\n                            return;\n                        }\n\n                        Object.values(slot.config).forEach((configField) => {\n                            if (configField.entity) {\n                                delete configField.entity;\n                            }\n                            if (configField.hasOwnProperty('required')) {\n                                delete configField.required;\n                            }\n                            if (configField.type) {\n                                delete configField.type;\n                            }\n                        });\n                    });\n                });\n            });\n        },\n    },\n};\n"],"names":["template","Context","Mixin","Criteria","ChangesetGenerator","cloneDeep","mapPageErrors","mapState","mapGetters","type","index","errorConfiguration","criteria","swProductDetailState","mediaId","response","newModeSettings","defaultSettings","items","modeSettings","accumulator","defaultEntry","foundEntry","dbEntry","enabledModeItems","item","result","salesChannels","salesChannel","visibilities","product","_a","_b","res","ids","visibility","languageId","resolve","pageOverrides","titleSaveError","messageSaveError","errors","EntityValidationService","advancedPrice","priceLabel","prices","price","updatePromises","seoUrls","defaultSeoUrl","seoUrl","_d","_c","errorDetail","_h","_g","_f","_e","medium","state","media","mediaItem","pProduct","duplicate","changesetGenerator","changes","slotOverrides","section","block","slot","sections","configField"],"mappings":"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"}
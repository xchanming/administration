{"version":3,"file":"index-G52Yi39x.js","sources":["../../../app/administration/src/module/sw-product-stream/page/sw-product-stream-detail/sw-product-stream-detail.html.twig","../../../app/administration/src/module/sw-product-stream/page/sw-product-stream-detail/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_product_stream_detail %}\n<sw-page class=\"sw-product-stream-detail\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_stream_detail_header %}\n    <template #smart-bar-header>\n        <h2 v-if=\"productStream\">\n            {{ productStream.name }}\n        </h2>\n        <h2\n            v-else\n            class=\"sw-product-stream-detail__empty-title\"\n        >\n            {{ placeholder(productStream, 'name', $tc('sw-product-stream.detail.textHeadline')) }}\n        </h2>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_stream_detail_actions %}\n    <template #smart-bar-actions>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_stream_detail_actions_abort %}\n        <sw-button\n            v-tooltip.bottom=\"tooltipCancel\"\n            :disabled=\"isLoading\"\n            @click=\"onCancel\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <sw-button-group\n            v-tooltip.bottom=\"{\n                message: $tc('sw-privileges.tooltip.warning'),\n                disabled: acl.can('product_stream.editor'),\n                showOnDisabledElements: true\n            }\"\n            class=\"sw-product-stream-detail__save-button-group\"\n            :split-button=\"true\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_stream_detail_actions_save %}\n            <sw-button-process\n                v-model:processSuccess=\"isSaveSuccessful\"\n                v-tooltip.bottom=\"tooltipSave\"\n                class=\"sw-product-stream-detail__save-action\"\n                :is-loading=\"isLoading\"\n                :disabled=\"!acl.can('product_stream.editor')\"\n                variant=\"primary\"\n                @click.prevent=\"onSave\"\n            >\n                {{ $tc('sw-product-stream.detail.buttonSave') }}\n            </sw-button-process>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_stream_detail_actions_save_context_menu %}\n            <sw-context-button>\n                <template #button>\n                    <sw-button\n                        class=\"sw-product-stream-detail__button-context-menu\"\n                        square\n                        variant=\"primary\"\n                        :disabled=\"isLoading || !acl.can('product_stream.editor')\"\n                    >\n                        <sw-icon name=\"regular-chevron-down-xs\" />\n                    </sw-button>\n                </template>\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_stream_detail_actions_save_context_menu_actions %}\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_stream_detail_actions_duplicate %}\n                <sw-context-menu-item\n                    class=\"sw-product-stream-detail__save-duplicate-action\"\n                    :disabled=\"!acl.can('product_stream.creator') || !acl.can('product_stream.editor')\"\n                    @click=\"onDuplicate\"\n                >\n                    {{ $tc('sw-product.detail.buttonSaveDuplicate') }}\n                </sw-context-menu-item>\n                {% endblock %}\n                {% endblock %}\n            </sw-context-button>\n            {% endblock %}\n        </sw-button-group>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_stream_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch\n            :save-changes-function=\"saveOnLanguageChange\"\n            :abort-change-function=\"abortOnLanguageChange\"\n            :disabled=\"!productStreamId\"\n            @on-change=\"onChangeLanguage\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_stream_detail_content %}\n    <template #content>\n        <sw-card-view>\n            <template v-if=\"isLoading || customFieldsLoading\">\n                <sw-skeleton variant=\"detail-bold\" />\n                <sw-skeleton />\n            </template>\n\n            <template v-else>\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_stream_detail_content_language_info %}\n                <sw-language-info\n                    :entity-description=\"placeholder(productStream, 'name', $tc('sw-product-stream.detail.textHeadline'))\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_stream_detail_basic_info %}\n                <sw-card\n                    position-identifier=\"sw-product-stream-detail-basic-info\"\n                    :large=\"true\"\n                    :title=\"$tc('sw-product-stream.detail.titleCard')\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_basic_form_name_field %}\n                    <sw-text-field\n                        v-if=\"productStream\"\n                        v-model:value=\"productStream.name\"\n                        v-tooltip.bottom=\"getNoPermissionsTooltip('product_stream.editor')\"\n                        name=\"sw-field--productStream-name\"\n                        :label=\"$tc('sw-product-stream.detail.labelName')\"\n                        :validation=\"nameRequired\"\n                        :required=\"isSystemLanguage\"\n                        :placeholder=\"placeholder(productStream, 'name', $tc('sw-product-stream.detail.placeholderName'))\"\n                        :error=\"productStreamNameError\"\n                        :disabled=\"!acl.can('product_stream.editor')\"\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_basic_form_description_field %}\n                    <sw-textarea-field\n                        v-if=\"productStream\"\n                        v-model:value=\"productStream.description\"\n                        v-tooltip.bottom=\"getNoPermissionsTooltip('product_stream.editor')\"\n                        name=\"sw-field--productStream-description\"\n                        :label=\"$tc('sw-product-stream.detail.labelDescription')\"\n                        :placeholder=\"placeholder(productStream, 'description', $tc('sw-product-stream.detail.placeholderDescription'))\"\n                        :disabled=\"!acl.can('product_stream.editor')\"\n                    />\n                    {% endblock %}\n                </sw-card>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_stream_detail_filter %}\n                <sw-card\n                    :large=\"true\"\n                    position-identifier=\"sw-product-stream-detail-filter\"\n                    class=\"sw-product-stream-detail__condition_container\"\n                    :class=\"{ 'is--disabled': !acl.can('product_stream.editor') }\"\n                    :title=\"$tc('sw-product-stream.detail.titleFilter')\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_stream_detail_filter_tree %}\n                    <sw-condition-tree\n                        v-if=\"productStream\"\n                        :initial-conditions=\"productStreamFilters\"\n                        :condition-repository=\"productStreamFiltersRepository\"\n                        :condition-data-provider-service=\"productStreamConditionService\"\n                        child-association-field=\"queries\"\n                        association-field=\"productStreamId\"\n                        :association-value=\"productStream.id\"\n                        :root-condition=\"null\"\n                        :disabled=\"!acl.can('product_stream.editor')\"\n                        @conditions-changed=\"updateFilterTree\"\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_stream_detail_filter_preview_button %}\n                    <sw-button\n                        class=\"sw-product-stream-detail__open_modal_preview\"\n                        @click.prevent=\"openModalPreview\"\n                    >\n                        {{ $tc('sw-product-stream.detail.buttonOpenPreview') }}\n                    </sw-button>\n                    {% endblock %}\n                </sw-card>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_prouct_stream_detail_preview_modal %}\n                <sw-product-stream-modal-preview\n                    v-if=\"showModalPreview\"\n                    ref=\"modalPreview\"\n                    :filters=\"productStreamFiltersTree\"\n                    @modal-close=\"closeModalPreview\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_prouct_stream_detail_custom_field_sets %}\n                <sw-card\n                    v-if=\"showCustomFields\"\n                    position-identifier=\"sw-product-stream-detail-custom-field-sets\"\n                    :large=\"true\"\n                    :title=\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\"\n                >\n                    <sw-custom-field-set-renderer\n                        :entity=\"productStream\"\n                        :disabled=\"!acl.can('product_stream.editor')\"\n                        :sets=\"customFieldSets\"\n                    />\n                </sw-card>\n                {% endblock %}\n            </template>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","/*\n * @package services-settings\n */\n\nimport template from './sw-product-stream-detail.html.twig';\nimport './sw-product-stream-detail.scss';\n\nconst { Mixin, Context } = Cicada;\nconst { mapPropertyErrors } = Cicada.Component.getComponentHelper();\nconst { Criteria } = Cicada.Data;\n\n/**\n * @private\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'productStreamConditionService',\n        'acl',\n        'customFieldDataProviderService',\n    ],\n\n    provide() {\n        return {\n            productCustomFields: this.productCustomFields,\n        };\n    },\n\n    beforeRouteLeave(to, from, next) {\n        if (this.showModalPreview) {\n            this.showModalPreview = false;\n            this.$nextTick(() => next());\n            return;\n        }\n\n        next();\n    },\n\n    mixins: [\n        Mixin.getByName('placeholder'),\n        Mixin.getByName('notification'),\n        Mixin.getByName('discard-detail-page-changes')('productStream'),\n        Mixin.getByName('sw-inline-snippet'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    props: {\n        productStreamId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            isLoading: false,\n            customFieldsLoading: false,\n            isSaveSuccessful: false,\n            productStream: null,\n            productStreamFilters: null,\n            productStreamFiltersTree: null,\n            deletedProductStreamFilters: [],\n            productCustomFields: {},\n            showModalPreview: false,\n            languageId: null,\n            customFieldSets: null,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.placeholder(this.productStream, 'name');\n        },\n\n        productStreamRepository() {\n            return this.repositoryFactory.create('product_stream');\n        },\n\n        productStreamFiltersRepository() {\n            if (!this.productStream) {\n                return null;\n            }\n\n            return this.repositoryFactory.create(this.productStream.filters.entity, this.productStream.filters.source);\n        },\n\n        customFieldSetRepository() {\n            return this.repositoryFactory.create('custom_field_set');\n        },\n\n        tooltipSave() {\n            if (!this.acl.can('product_stream.editor')) {\n                return {\n                    message: this.$tc('sw-privileges.tooltip.warning'),\n                    appearance: 'dark',\n                    showOnDisabledElements: true,\n                };\n            }\n\n            const systemKey = this.$device.getSystemKey();\n\n            return {\n                message: `${systemKey} + S`,\n                appearance: 'light',\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        isSystemLanguage() {\n            return this.languageId === Context.api.systemLanguageId;\n        },\n\n        nameRequired() {\n            return this.isSystemLanguage;\n        },\n\n        ...mapPropertyErrors('productStream', ['name']),\n\n        showCustomFields() {\n            return this.productStream && this.customFieldSets && this.customFieldSets.length > 0;\n        },\n    },\n\n    watch: {\n        productStreamId: {\n            immediate: true,\n            handler() {\n                if (!this.productStreamId) {\n                    this.createProductStream();\n                    return;\n                }\n\n                this.isLoading = true;\n                this.loadEntityData(this.productStreamId).then(() => {\n                    this.isLoading = false;\n                });\n            },\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            Cicada.ExtensionAPI.publishData({\n                id: 'sw-product-stream-detail__productStream',\n                path: 'productStream',\n                scope: this,\n            });\n            this.languageId = Context.api.languageId;\n            if (this.productStreamId) {\n                this.getProductCustomFields();\n            }\n            this.loadCustomFieldSets();\n        },\n\n        loadCustomFieldSets() {\n            this.customFieldDataProviderService.getCustomFieldSets('product_stream').then((sets) => {\n                this.customFieldSets = sets;\n            });\n        },\n\n        createProductStream() {\n            this.getProductCustomFields().then(() => {\n                Context.api.languageId = Context.api.systemLanguageId;\n                this.productStream = this.productStreamRepository.create(Context.api);\n                this.productStreamFilters = this.productStream.filters;\n            });\n        },\n\n        loadEntityData(productStreamId) {\n            return this.productStreamRepository.get(productStreamId, Context.api).then((productStream) => {\n                this.productStream = productStream;\n                return this.loadFilters();\n            });\n        },\n\n        loadFilters(collection = null) {\n            if (collection === null) {\n                const filterCriteria = new Criteria(1, 25);\n                filterCriteria.addFilter(Criteria.equals('productStreamId', this.productStreamId));\n\n                return this.productStreamFiltersRepository.search(filterCriteria, Context.api).then((productFilter) => {\n                    return this.loadFilters(productFilter);\n                });\n            }\n\n            if (collection.length >= collection.total) {\n                this.productStreamFilters = collection;\n                return Promise.resolve();\n            }\n\n            const nextCriteria = Criteria.fromCriteria(collection.criteria);\n            nextCriteria.page += 1;\n\n            return this.productStreamFiltersRepository.search(nextCriteria, collection.context).then((nextFilters) => {\n                collection.push(...nextFilters);\n                collection.criteria = nextFilters.criteria;\n                collection.total = nextFilters.total;\n\n                return this.loadFilters(collection);\n            });\n        },\n\n        abortOnLanguageChange() {\n            return this.productStreamRepository.hasChanges(this.productStream);\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        onChangeLanguage(languageId) {\n            this.languageId = languageId;\n\n            this.isLoading = true;\n            this.loadEntityData(this.productStream.id).then(() => {\n                this.isLoading = false;\n            });\n        },\n\n        onDuplicate() {\n            return this.onSave().then(() => {\n                const behavior = {\n                    cloneChildren: true,\n                    overwrites: {\n                        // eslint-disable-next-line max-len\n                        name: `${this.productStream.name || this.productStream.translated.name} ${this.$tc('global.default.copy')}`,\n                    },\n                };\n\n                this.isLoading = true;\n\n                return this.productStreamRepository\n                    .clone(this.productStream.id, behavior, Cicada.Context.api)\n                    .then((clone) => {\n                        const route = {\n                            name: 'sw.product.stream.detail',\n                            params: { id: clone.id },\n                        };\n\n                        this.$router.push(route);\n                    })\n                    .catch(() => {\n                        this.isLoading = false;\n\n                        this.createNotificationError({\n                            message: this.$tc('global.notification.unspecifiedSaveErrorMessage'),\n                        });\n                    });\n            });\n        },\n\n        onSave() {\n            this.isSaveSuccessful = false;\n            this.isLoading = true;\n\n            if (this.productStream.isNew()) {\n                this.productStream.filters = this.productStreamFiltersTree;\n                return this.saveProductStream()\n                    .then(() => {\n                        this.$router.push({\n                            name: 'sw.product.stream.detail',\n                            params: { id: this.productStream.id },\n                        });\n                        this.isSaveSuccessful = true;\n                    })\n                    .catch(() => {\n                        this.showErrorNotification();\n                        this.isLoading = false;\n                    });\n            }\n\n            return this.productStreamRepository\n                .save(this.productStream, Context.api)\n                .then(this.syncProductStreamFilters)\n                .then(() => {\n                    return this.loadEntityData(this.productStream.id);\n                })\n                .then(() => {\n                    this.isSaveSuccessful = true;\n                    this.isLoading = false;\n                })\n                .catch(() => {\n                    this.isLoading = false;\n                    this.showErrorNotification();\n                });\n        },\n\n        showErrorNotification() {\n            this.createNotificationError({\n                message: this.$tc('global.notification.notificationSaveErrorMessageRequiredFieldsInvalid'),\n            });\n        },\n\n        saveProductStream() {\n            return this.productStreamRepository.save(this.productStream, Context.api);\n        },\n\n        syncProductStreamFilters() {\n            return this.productStreamFiltersRepository.sync(this.productStreamFiltersTree, Context.api).then(() => {\n                if (this.deletedProductStreamFilters.length > 0) {\n                    return this.productStreamFiltersRepository\n                        .syncDeleted(this.deletedProductStreamFilters, Context.api)\n                        .then(() => {\n                            this.deletedProductStreamFilters = [];\n                        });\n                }\n\n                return Promise.resolve();\n            });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.product.stream.index' });\n        },\n\n        openModalPreview() {\n            this.showModalPreview = true;\n        },\n        closeModalPreview() {\n            this.showModalPreview = false;\n        },\n\n        getProductCustomFields() {\n            this.customFieldsLoading = true;\n            const customFieldsCriteria = new Criteria(1, null);\n            customFieldsCriteria.addFilter(Criteria.equals('relations.entityName', 'product'));\n\n            const loadingPromises = [];\n            return this.customFieldSetRepository.search(customFieldsCriteria, Context.api).then((customFieldSets) => {\n                const singleCriteria = new Criteria(1, null);\n                singleCriteria.addAssociation('customFields').addAssociation('relations');\n\n                customFieldSets.forEach((customFieldSet) => {\n                    loadingPromises.push(\n                        this.customFieldSetRepository.get(customFieldSet.id, Context.api, singleCriteria).then((set) => {\n                            const customFields = set.customFields.reduce((acc, customField) => {\n                                acc[customField.name] = this.mapCustomFieldType({\n                                    type: customField.type,\n                                    value: `customFields.${customField.name}`,\n                                    label: this.getCustomFieldLabel(customField),\n                                    config: customField.config,\n                                });\n                                return acc;\n                            }, {});\n                            Object.assign(this.productCustomFields, customFields);\n                        }),\n                    );\n                });\n\n                Promise.all(loadingPromises).then(() => {\n                    this.customFieldsLoading = false;\n                });\n            });\n        },\n\n        getCustomFieldLabel(customField) {\n            return this.getInlineSnippet(customField.config.label) || customField.name;\n        },\n\n        mapCustomFieldType(customField) {\n            switch (customField.type) {\n                case 'bool':\n                    customField.type = 'boolean';\n                    break;\n                case 'html':\n                case 'text':\n                    customField.type = 'string';\n                    break;\n                case 'date':\n                    customField.type = 'string';\n                    customField.format = 'date-time';\n                    break;\n                default:\n                    break;\n            }\n            return customField;\n        },\n\n        updateFilterTree({ conditions, deletedIds }) {\n            this.productStreamFiltersTree = conditions;\n            this.deletedProductStreamFilters = [\n                ...this.deletedProductStreamFilters,\n                ...deletedIds,\n            ];\n        },\n\n        getNoPermissionsTooltip(role, showOnDisabledElements = true) {\n            return {\n                showDelay: 300,\n                message: this.$tc('sw-privileges.tooltip.warning'),\n                appearance: 'dark',\n                showOnDisabledElements,\n                disabled: this.acl.can(role),\n            };\n        },\n    },\n};\n"],"names":["template","Mixin","Context","mapPropertyErrors","Criteria","index","to","from","next","sets","productStreamId","productStream","collection","filterCriteria","productFilter","nextCriteria","nextFilters","languageId","behavior","clone","route","customFieldsCriteria","loadingPromises","customFieldSets","singleCriteria","customFieldSet","set","customFields","acc","customField","conditions","deletedIds","role","showOnDisabledElements"],"mappings":"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"}
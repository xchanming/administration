{"version":3,"file":"index-BKBnkalB.js","sources":["../../../app/administration/src/module/sw-settings-shipping/page/sw-settings-shipping-detail/sw-settings-shipping-detail.html.twig","../../../app/administration/src/module/sw-settings-shipping/page/sw-settings-shipping-detail/state.js","../../../app/administration/src/module/sw-settings-shipping/page/sw-settings-shipping-detail/index.js"],"sourcesContent":["\n<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_shipping_detail %}\n<sw-page class=\"sw-settings-shipping-detail\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_shipping_detail_header %}\n    <template #smart-bar-header>\n        <h2>{{ placeholder(shippingMethod, 'name', $tc('sw-settings-shipping.detail.textHeadline')) }}</h2>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_shipping_detail_actions %}\n    <template #smart-bar-actions>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_shipping_detail_actions_abort %}\n        <sw-button\n            v-tooltip.bottom=\"tooltipCancel\"\n            :disabled=\"isLoading || undefined\"\n            @click=\"onCancel\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_shipping_detail_actions_save %}\n        <sw-button-process\n            v-model:processSuccess=\"isSaveSuccessful\"\n            v-tooltip.bottom=\"tooltipSave\"\n            class=\"sw-settings-shipping-method-detail__save-action\"\n            :is-loading=\"isProcessLoading\"\n            :disabled=\"isProcessLoading || !acl.can('shipping.editor') || undefined\"\n            variant=\"primary\"\n            @click.prevent=\"onSave\"\n        >\n            {{ $tc('sw-settings-shipping.detail.buttonSave') }}\n        </sw-button-process>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_shipping_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch\n            :disabled=\"isNewShippingMethod || undefined\"\n            :save-changes-function=\"saveOnLanguageChange\"\n            :abort-change-function=\"abortOnLanguageChange\"\n            @on-change=\"onChangeLanguage\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_shipping_detail_content %}\n    <template #content>\n        <sw-card-view>\n            <template v-if=\"isLoading\">\n                <sw-skeleton variant=\"detail-bold\" />\n                <sw-skeleton />\n            </template>\n\n            <template v-else>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_shipping_detail_content_language_info %}\n                <sw-language-info\n                    :is-new-entity=\"isNewShippingMethod\"\n                    :entity-description=\"placeholder(shippingMethod, 'name', $tc('sw-settings-shipping.detail.textHeadline'))\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_shipping_detail_base %}\n                <sw-card\n                    position-identifier=\"sw-settings-shipping-detail-base\"\n                    :title=\"$tc('sw-settings-shipping.detail.labelBasicInfo')\"\n                    :is-loading=\"isLoading\"\n                >\n                    <sw-container\n                        columns=\"3fr 3fr 1fr\"\n                        gap=\"0px 30px\"\n                    >\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_shipping_detail_base_content_field_name %}\n                        <sw-text-field\n                            v-model:value=\"shippingMethod.name\"\n                            name=\"sw-field--shippingMethod-name\"\n                            required\n                            :disabled=\"!acl.can('shipping.editor') || undefined\"\n                            :error=\"shippingMethodNameError\"\n                            :label=\"$tc('sw-settings-shipping.detail.labelName')\"\n                            :placeholder=\"placeholder(shippingMethod, 'name', $tc('sw-settings-shipping.detail.placeholderName'))\"\n                        />\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_shipping_detail_content_field_technical_name %}\n                        <sw-text-field\n                            v-model:value=\"shippingMethod.technicalName\"\n                            name=\"sw-field--shippingMethod-technicalName\"\n                            class=\"sw-settings-shipping-detail__field-technical-name\"\n                            :required=\"feature.isActive('v6.7.0.0')\"\n                            :disabled=\"!acl.can('shipping.editor') || undefined\"\n                            :label=\"$tc('sw-settings-shipping.detail.labelTechnicalName')\"\n                            :placeholder=\"placeholder(shippingMethod, 'technicalName', $tc('sw-settings-shipping.detail.placeholderTechnicalName'))\"\n                            :error=\"shippingMethodTechnicalNameError\"\n                            :help-text=\"$tc('sw-settings-shipping.detail.helpTextTechnicalName')\"\n                            :class=\"!shippingMethod.technicalName ? 'has--warning' : ''\"\n                        >\n                            {# @deprecated tag:v6.7.0 - Hint can be removed: with technical names now required, the hint is no longer needed. Also remove the snippet and dynamic class has--warning #}\n                            <template #hint>\n                                <span v-if=\"!shippingMethod.technicalName\">{{ $tc('sw-settings-shipping.detail.hintTextTechnicalName') }}</span>\n                            </template>\n                        </sw-text-field>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_shipping_detail_base_content_field_position %}\n                        <sw-number-field\n                            v-model:value=\"shippingMethod.position\"\n                            name=\"sw-field--shippingMethod-position\"\n                            class=\"sw-settings-shipping-detail__field-position\"\n                            :disabled=\"!acl.can('shipping.editor') || undefined\"\n                            :label=\"$tc('sw-settings-shipping.detail.labelPosition')\"\n                            :placeholder=\"$tc('sw-settings-shipping.detail.placeholderPosition')\"\n                        />\n                        {% endblock %}\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_shipping_detail_base_content_field_active %}\n                        <sw-switch-field\n                            v-model:value=\"shippingMethod.active\"\n                            name=\"sw-field--shippingMethod-active\"\n                            bordered\n                            :disabled=\"!acl.can('shipping.editor') || undefined\"\n                            :label=\"$tc('sw-settings-shipping.detail.labelActive')\"\n                        />\n                        {% endblock %}\n                    </sw-container>\n                    <sw-container\n                        columns=\"repeat(auto-fit, minmax(250px, 1fr))\"\n                        gap=\"0px 30px\"\n                    >\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_shipping_detail_base_content_field_description %}\n                        <sw-textarea-field\n                            v-model:value=\"shippingMethod.description\"\n                            name=\"sw-field--shippingMethod-description\"\n                            :value=\"shippingMethod.description\"\n                            class=\"sw-settings-shipping-detail__description\"\n                            :disabled=\"!acl.can('shipping.editor') || undefined\"\n                            :label=\"$tc('sw-settings-shipping.detail.labelDescription')\"\n                            :placeholder=\"placeholder(shippingMethod, 'description', $tc('sw-settings-shipping.detail.placeholderDescription'))\"\n                        />\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_shipping_detail_base_content_media_upload %}\n                        <sw-upload-listener\n                            :upload-tag=\"uploadTag\"\n                            auto-upload\n                            @media-upload-finish=\"setMediaItem\"\n                        />\n                        <sw-media-upload-v2\n                            v-if=\"!isLoading\"\n                            :upload-tag=\"uploadTag\"\n                            :source=\"logoMediaItem\"\n                            class=\"sw-settings-shipping-detail__logo-image-upload\"\n                            :allow-multi-select=\"false\"\n                            variant=\"regular\"\n                            :disabled=\"!acl.can('shipping.editor') || undefined\"\n                            :label=\"$tc('sw-settings-shipping.detail.labelLogoUpload')\"\n                            :default-folder=\"shippingMethod.getEntityName()\"\n                            @media-drop=\"onDropMedia\"\n                            @media-upload-sidebar-open=\"openMediaSidebar\"\n                            @media-upload-remove-image=\"onUnlinkLogo\"\n                        />\n                        {% endblock %}\n                    </sw-container>\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_settings_shipping_detail_base_content_field_delivery_time %}\n                    <sw-entity-single-select\n                        v-model:value=\"shippingMethod.deliveryTimeId\"\n                        name=\"sw-field--shippingMethod-deliveryTimeId\"\n                        class=\"sw-settings-shipping-detail__delivery-time\"\n                        entity=\"delivery_time\"\n                        :disabled=\"!acl.can('shipping.editor') || undefined\"\n                        :criteria=\"deliveryTimeCriteria\"\n                        :label=\"$tc('sw-settings-shipping.detail.labelDeliveryTime')\"\n                        :placeholder=\"$tc('sw-settings-shipping.detail.placeholderDeliveryTime')\"\n                        :error=\"shippingMethodDeliveryTimeIdError\"\n                        show-clearable-button\n                        required\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_settings_shipping_detail_base_content_tracking_url_field %}\n                    <sw-text-field\n                        v-model:value=\"shippingMethod.trackingUrl\"\n                        name=\"sw-field--shippingMethod-trackingUrl\"\n                        :disabled=\"!acl.can('shipping.editor') || undefined\"\n                        :label=\"$tc('sw-settings-shipping.detail.labelTrackingUrl')\"\n                        :placeholder=\"placeholder(shippingMethod, 'trackingUrl', $tc('sw-settings-shipping.detail.placeholderTrackingUrl'))\"\n                        :help-text=\"$tc('sw-settings-shipping.detail.helpTextTrackingUrl')\"\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_settings_shipping_detail_base_content_tags_field %}\n                    <sw-entity-tag-select\n                        v-if=\"!isLoading\"\n                        v-model:entityCollection=\"shippingMethod.tags\"\n                        :disabled=\"!acl.can('shipping.editor') || undefined\"\n                        :placeholder=\"$tc('sw-product.categoryForm.placeholderTags')\"\n                    />\n                    {% endblock %}\n                </sw-card>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_shipping_detail_top_ruleshippingPriceStore %}\n                <sw-card\n                    position-identifier=\"sw-settings-shipping-detail-condition-container\"\n                    class=\"sw-settings-shipping-detail__condition_container\"\n                    :title=\"$tc('sw-settings-shipping.detail.topRule')\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_settings_shipping_detail_top_rule_select %}\n                    <sw-select-rule-create\n                        :rule-id=\"shippingMethod.availabilityRuleId\"\n                        :rule-filter=\"ruleFilter\"\n                        :disabled=\"!acl.can('shipping.editor') || undefined\"\n                        :error=\"shippingMethodAvailabilityRuleIdError\"\n                        :label=\"$tc('sw-settings-shipping.detail.topRule')\"\n                        class=\"sw-settings-shipping-detail__top-rule\"\n                        rule-aware-group-key=\"shippingMethods\"\n                        @save-rule=\"onSaveRule\"\n                    />\n                    {% endblock %}\n                </sw-card>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_shipping_detail_tax_cost %}\n                <sw-settings-shipping-tax-cost\n                    v-if=\"!isLoading\"\n                    :disabled=\"!acl.can('shipping.editor') || undefined\"\n                />\n                {% endblock %}\n                <sw-skeleton v-else />\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_shipping_detail_price_matrices %}\n                <sw-settings-shipping-price-matrices\n                    v-if=\"!isLoading\"\n                    ref=\"priceMatrices\"\n                    :disabled=\"!acl.can('shipping.editor') || undefined\"\n                />\n                {% endblock %}\n                <sw-skeleton v-else />\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_shipping_detail_custom_field_sets %}\n                <sw-card\n                    v-if=\"showCustomFields\"\n                    position-identifier=\"sw-settings-shipping-detail-custom-fields\"\n                    :title=\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\"\n                    :is-loading=\"isLoading\"\n                >\n                    <sw-custom-field-set-renderer\n                        :entity=\"shippingMethod\"\n                        :disabled=\"!acl.can('shipping.editor') || undefined\"\n                        :sets=\"customFieldSets\"\n                    />\n                </sw-card>\n                {% endblock %}\n            </template>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n\n    <template #sidebar>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_shipping_detail_sidebar %}\n        <sw-sidebar :propagate-width=\"true\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_setting_shipping_detail_sidebar_media_item %}\n            <sw-sidebar-media-item ref=\"mediaSidebarItem\">\n                <template\n                    #context-menu-items=\"media\"\n                >\n                    <sw-context-menu-item @click=\"setMediaFromSidebar(media.mediaItem)\">\n                        {{ $tc('sw-settings-shipping.sidebar.labelUseAsLogo') }}\n                    </sw-context-menu-item>\n                </template>\n            </sw-sidebar-media-item>\n            {% endblock %}\n        </sw-sidebar>\n        {% endblock %}\n    </template>\n\n</sw-page>\n{% endblock %}\n","/**\n * @package checkout\n * @deprecated tag:v6.7.0 - Will be replaced with Pinia store\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    namespaced: true,\n\n    state() {\n        return {\n            shippingMethod: {},\n            currencies: [],\n            restrictedRuleIds: [],\n        };\n    },\n\n    mutations: {\n        setShippingMethod(state, shippingMethod) {\n            state.shippingMethod = shippingMethod;\n        },\n        setCurrencies(state, currencies) {\n            state.currencies = currencies;\n        },\n        setRestrictedRuleIds(state, restrictedRuleIds) {\n            state.restrictedRuleIds = restrictedRuleIds;\n        },\n    },\n\n    getters: {\n        shippingPriceGroups(state) {\n            if (!state.shippingMethod.prices) {\n                return {};\n            }\n\n            const shippingPriceGroups = {};\n\n            state.shippingMethod.prices.forEach((shippingPrice) => {\n                let key = shippingPrice.ruleId;\n                if (shippingPrice._inNewMatrix) {\n                    key = 'new';\n                }\n                if (!shippingPriceGroups[key]) {\n                    shippingPriceGroups[key] = {\n                        isNew: key === 'new',\n                        ruleId: shippingPrice.ruleId,\n                        rule: shippingPrice.rule,\n                        calculation: shippingPrice.calculation,\n                        prices: [],\n                    };\n                }\n\n                shippingPriceGroups[key].prices.push(shippingPrice);\n            });\n\n            return shippingPriceGroups;\n        },\n\n        defaultCurrency(state) {\n            return state.currencies.find((currency) => currency.isSystemDefault);\n        },\n\n        usedRules(state, getters) {\n            return Object.keys(getters.shippingPriceGroups);\n        },\n\n        unrestrictedPriceMatrixExists(state) {\n            return state.shippingMethod.prices.some((shippingPrice) => {\n                return shippingPrice.ruleId === null;\n            });\n        },\n\n        newPriceMatrixExists(state, getters) {\n            return getters.shippingPriceGroups.hasOwnProperty('new');\n        },\n    },\n};\n","import { mapPropertyErrors } from 'src/app/service/map-errors.service';\nimport template from './sw-settings-shipping-detail.html.twig';\nimport './sw-settings-shipping-detail.scss';\nimport swShippingDetailState from './state';\n\nconst { Mixin, Context } = Cicada;\nconst { mapState, mapGetters } = Cicada.Component.getComponentHelper();\nconst { Criteria } = Cicada.Data;\nconst { warn } = Cicada.Utils.debug;\n\n/**\n * @package checkout\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'ruleConditionDataProviderService',\n        'repositoryFactory',\n        'acl',\n        'customFieldDataProviderService',\n        'feature',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('placeholder'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    props: {\n        shippingMethodId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            logoMediaItem: null,\n            uploadTag: 'sw-shipping-method-upload-tag',\n            isSaveSuccessful: false,\n            isProcessLoading: false,\n            isLoading: false,\n            currenciesLoading: false,\n            customFieldSets: [],\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        ...mapState('swShippingDetail', [\n            'shippingMethod',\n            'currencies',\n            'restrictedRuleIds',\n        ]),\n\n        ...mapGetters('swShippingDetail', [\n            'usedRules',\n        ]),\n\n        ...mapPropertyErrors('shippingMethod', [\n            'name',\n            'technicalName',\n            'deliveryTimeId',\n            'availabilityRuleId',\n        ]),\n\n        identifier() {\n            return this.placeholder(this.shippingMethod, 'name');\n        },\n\n        shippingMethodRepository() {\n            return this.repositoryFactory.create('shipping_method');\n        },\n\n        shippingMethodPricesRepository() {\n            return this.repositoryFactory.create('shipping_method_price');\n        },\n\n        currencyRepository() {\n            return this.repositoryFactory.create('currency');\n        },\n\n        isNewShippingMethod() {\n            return Object.keys(this.shippingMethod).length > 0 && this.shippingMethod.isNew();\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        deliveryTimeRepository() {\n            return this.repositoryFactory.create('delivery_time');\n        },\n\n        deliveryTimeCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addSorting(Criteria.sort('unit'));\n            criteria.addSorting(Criteria.sort('name'));\n            return criteria;\n        },\n\n        tooltipSave() {\n            const systemKey = this.$device.getSystemKey();\n\n            return {\n                message: `${systemKey} + S`,\n                appearance: 'light',\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        ruleFilter() {\n            const criteria = new Criteria(1, 25);\n            criteria.addFilter(\n                Criteria.multi('OR', [\n                    Criteria.contains('rule.moduleTypes.types', 'shipping'),\n                    Criteria.equals('rule.moduleTypes', null),\n                ]),\n            );\n\n            criteria.addAssociation('conditions');\n\n            return criteria;\n        },\n\n        shippingMethodCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('tags');\n\n            criteria.getAssociation('prices').addAssociation('rule').addSorting(Criteria.sort('quantityStart'));\n\n            if (!Cicada.Feature.isActive('v6.7.0.0')) {\n                criteria.getAssociation('prices').addAssociation('calculationRule');\n            }\n\n            return criteria;\n        },\n\n        showCustomFields() {\n            return this.customFieldSets && this.customFieldSets.length > 0;\n        },\n    },\n\n    watch: {\n        'shippingMethod.mediaId'() {\n            if (this.shippingMethod.mediaId) {\n                this.setMediaItem({ targetId: this.shippingMethod.mediaId });\n            }\n        },\n\n        shippingMethodId() {\n            // We must reset the page if the user clicks his browsers back button and navigates back to create\n            this.createdComponent();\n        },\n    },\n\n    beforeCreate() {\n        Cicada.State.registerModule('swShippingDetail', swShippingDetailState);\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    beforeUnmount() {\n        Cicada.State.unregisterModule('swShippingDetail');\n    },\n\n    methods: {\n        createdComponent() {\n            if (!this.shippingMethodId) {\n                Cicada.State.commit('context/resetLanguageToDefault');\n\n                const shippingMethod = this.shippingMethodRepository.create();\n                const shippingMethodPrice = this.shippingMethodPricesRepository.create();\n                shippingMethodPrice.calculation = 1;\n                shippingMethodPrice.quantityStart = 1;\n                shippingMethodPrice.shippingMethodId = shippingMethod.id;\n                shippingMethodPrice.ruleId = null;\n                shippingMethod.prices.add(shippingMethodPrice);\n                Cicada.State.commit('swShippingDetail/setShippingMethod', shippingMethod);\n            } else {\n                this.loadEntityData();\n            }\n            this.loadCurrencies();\n        },\n\n        onSaveRule(ruleId) {\n            this.shippingMethod.availabilityRuleId = ruleId;\n        },\n\n        loadCurrencies() {\n            this.currenciesLoading = true;\n            this.currencyRepository.search(new Criteria(1, 500), Context.api).then((currencyResponse) => {\n                Cicada.State.commit('swShippingDetail/setCurrencies', this.sortCurrencies(currencyResponse));\n                this.currenciesLoading = false;\n            });\n        },\n\n        loadEntityData() {\n            if (!this.shippingMethodId) {\n                return;\n            }\n\n            this.isLoading = true;\n\n            this.shippingMethodRepository\n                .get(this.shippingMethodId, Cicada.Context.api, this.shippingMethodCriteria)\n                .then((res) => {\n                    Cicada.State.commit('swShippingDetail/setShippingMethod', res);\n\n                    this.ruleConditionDataProviderService.getRestrictedRules('shippingMethodPrices').then((result) => {\n                        Cicada.State.commit('swShippingDetail/setRestrictedRuleIds', this.usedRules.concat(result));\n                    });\n\n                    this.loadCustomFieldSets().then(() => {\n                        this.isLoading = false;\n                    });\n                });\n        },\n\n        loadCustomFieldSets() {\n            return this.customFieldDataProviderService.getCustomFieldSets('shipping_method').then((sets) => {\n                this.customFieldSets = sets;\n            });\n        },\n\n        abortOnLanguageChange() {\n            return this.shippingMethodRepository.hasChanges(this.shippingMethod);\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        onChangeLanguage() {\n            this.loadEntityData();\n        },\n\n        onSave() {\n            this.filterIncompletePrices();\n\n            this.isSaveSuccessful = false;\n            this.isProcessLoading = true;\n\n            return this.shippingMethodRepository\n                .save(this.shippingMethod, Context.api)\n                .then(() => {\n                    this.isSaveSuccessful = true;\n                    if (!this.shippingMethodId) {\n                        this.$router.push({\n                            name: 'sw.settings.shipping.detail',\n                            params: { id: this.shippingMethod.id },\n                        });\n                    }\n                    this.$refs.mediaSidebarItem.getList();\n                    this.loadEntityData();\n                })\n                .catch((exception) => {\n                    this.onError(exception);\n                    warn(this._name, exception.message, exception.response);\n                    this.isProcessLoading = false;\n                    throw exception;\n                })\n                .finally(() => {\n                    this.isProcessLoading = false;\n                });\n        },\n\n        onError(error) {\n            let errorDetails = null;\n\n            try {\n                errorDetails = error.response.data.errors[0].detail;\n            } catch (e) {\n                errorDetails = '';\n            }\n\n            this.createNotificationError({\n                title: this.$tc('global.default.error'),\n                // eslint-disable-next-line max-len\n                message: `${this.$tc('sw-settings-shipping.detail.messageSaveError', 0, { name: this.shippingMethod.name })} ${errorDetails}`,\n            });\n        },\n\n        filterIncompletePrices() {\n            this.getIncompletePrices().forEach((incompletePrice) => {\n                this.shippingMethod.prices.remove(incompletePrice.id);\n            });\n        },\n\n        getIncompletePrices() {\n            return this.shippingMethod.prices.filter((price) => {\n                return (!price.calculation && !price.calculationRuleId) || price._inNewMatrix;\n            });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.settings.shipping.index' });\n        },\n\n        setMediaItem({ targetId }) {\n            this.mediaRepository.get(targetId, Context.api).then((updatedMedia) => {\n                this.logoMediaItem = updatedMedia;\n            });\n            this.shippingMethod.mediaId = targetId;\n        },\n\n        onDropMedia(mediaItem) {\n            this.setMediaItem({ targetId: mediaItem.id });\n        },\n\n        setMediaFromSidebar(mediaEntity) {\n            this.logoMediaItem = mediaEntity;\n            this.shippingMethod.mediaId = mediaEntity.id;\n        },\n\n        onUnlinkLogo() {\n            this.logoMediaItem = null;\n            this.shippingMethod.mediaId = null;\n        },\n\n        openMediaSidebar() {\n            this.$refs.mediaSidebarItem.openContent();\n        },\n\n        sortCurrencies(currencies) {\n            currencies.sort((a, b) => {\n                if (a.isSystemDefault) {\n                    return -1;\n                }\n                if (b.isSystemDefault) {\n                    return 1;\n                }\n                if (a.translated.name < b.translated.name) {\n                    return -1;\n                }\n                if (a.translated.name > b.translated.name) {\n                    return 1;\n                }\n                return 0;\n            });\n\n            return currencies;\n        },\n    },\n};\n"],"names":["template","swShippingDetailState","state","shippingMethod","currencies","restrictedRuleIds","shippingPriceGroups","shippingPrice","key","currency","getters","Mixin","Context","mapState","mapGetters","Criteria","warn","index","mapPropertyErrors","criteria","shippingMethodPrice","ruleId","currencyResponse","res","result","sets","exception","error","errorDetails","incompletePrice","price","targetId","updatedMedia","mediaItem","mediaEntity","a","b"],"mappings":"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"}
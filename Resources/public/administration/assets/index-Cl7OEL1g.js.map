{"version":3,"file":"index-Cl7OEL1g.js","sources":["../../../app/administration/src/module/sw-flow/component/modals/sw-flow-change-customer-group-modal/sw-flow-change-customer-group-modal.html.twig","../../../app/administration/src/module/sw-flow/component/modals/sw-flow-change-customer-group-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_flow_change_customer_group_modal %}\n<sw-modal\n    class=\"sw-flow-change-customer-group-modal\"\n    :title=\"$tc('sw-flow.modals.customerGroup.titleChangeCustomerGroup')\"\n    :closable=\"false\"\n    @modal-close=\"onClose\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_flow_change_customer_group_modal_select %}\n    <sw-entity-single-select\n        v-model:value=\"customerGroupId\"\n        name=\"sw-field--customerGroupId\"\n        required\n        class=\"sw-flow-change-customer-group-modal__type-select\"\n        entity=\"customer_group\"\n        label-property=\"translated.name\"\n        value-property=\"id\"\n        :criteria=\"customerGroupCriteria\"\n        :label=\"$tc('sw-flow.modals.customerGroup.labelCustomerGroup')\"\n        :placeholder=\"$tc('sw-flow.modals.customerGroup.placeholderCustomerGroup')\"\n        :error=\"fieldError\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_flow_change_customer_group_modal_content_custom %}\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_flow_change_customer_group_modal_footer %}\n    <template #modal-footer>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_change_customer_group_modal_footer_cancel_button %}\n        <sw-button\n            class=\"sw-flow-change-customer-group-modal__cancel-button\"\n            size=\"small\"\n            @click=\"onClose\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_change_customer_group_modal_footer_save_button %}\n        <sw-button\n            class=\"sw-flow-change-customer-group-modal__save-button\"\n            variant=\"primary\"\n            size=\"small\"\n            @click=\"onAddAction\"\n        >\n            {{ sequence.id ? $tc('sw-flow.modals.buttonSaveAction') : $tc('sw-flow.modals.buttonAddAction') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n","import template from './sw-flow-change-customer-group-modal.html.twig';\n\nconst { Component } = Cicada;\nconst { Criteria } = Cicada.Data;\nconst { mapState } = Component.getComponentHelper();\nconst { CicadaError } = Cicada.Classes;\n\n/**\n * @private\n * @package services-settings\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    emits: [\n        'modal-close',\n        'process-finish',\n    ],\n\n    props: {\n        sequence: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            customerGroupId: '',\n            fieldError: null,\n        };\n    },\n\n    computed: {\n        customerGroupRepository() {\n            return this.repositoryFactory.create('customer_group');\n        },\n\n        customerGroupCriteria() {\n            const criteria = new Criteria(1, 100);\n            criteria.addSorting(Criteria.sort('name', 'ASC'));\n\n            return criteria;\n        },\n\n        ...mapState('swFlowState', ['customerGroups']),\n    },\n\n    watch: {\n        customerGroupId(value) {\n            if (value && this.fieldError) {\n                this.fieldError = null;\n            }\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.customerGroupId = this.sequence?.config?.customerGroupId || '';\n\n            if (!this.customerGroups.length) {\n                this.customerGroupRepository.search(this.customerGroupCriteria).then((data) => {\n                    Cicada.State.commit('swFlowState/setCustomerGroups', data);\n                });\n            }\n        },\n\n        onClose() {\n            this.$emit('modal-close');\n        },\n\n        onAddAction() {\n            if (!this.customerGroupId) {\n                this.fieldError = new CicadaError({\n                    code: 'c1051bb4-d103-4f74-8988-acbcafc7fdc3',\n                });\n\n                return;\n            }\n\n            const sequence = {\n                ...this.sequence,\n                config: {\n                    customerGroupId: this.customerGroupId,\n                },\n            };\n\n            this.$emit('process-finish', sequence);\n        },\n    },\n};\n"],"names":["template","Component","Criteria","mapState","CicadaError","index","criteria","value","_a","_b","data","sequence"],"mappings":"AAAA,MAAeA,EAAA,u8CCET,CAAE,UAAAC,CAAW,EAAG,OAChB,CAAE,SAAAC,CAAQ,EAAK,OAAO,KACtB,CAAE,SAAAC,CAAU,EAAGF,EAAU,qBACzB,CAAE,YAAAG,CAAW,EAAK,OAAO,QAMhBC,EAAA,CACX,SAAAL,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CACH,cACA,gBACH,EAED,MAAO,CACH,SAAU,CACN,KAAM,OACN,SAAU,EACb,CACJ,EAED,MAAO,CACH,MAAO,CACH,gBAAiB,GACjB,WAAY,IACxB,CACK,EAED,SAAU,CACN,yBAA0B,CACtB,OAAO,KAAK,kBAAkB,OAAO,gBAAgB,CACxD,EAED,uBAAwB,CACpB,MAAMM,EAAW,IAAIJ,EAAS,EAAG,GAAG,EACpC,OAAAI,EAAS,WAAWJ,EAAS,KAAK,OAAQ,KAAK,CAAC,EAEzCI,CACV,EAED,GAAGH,EAAS,cAAe,CAAC,gBAAgB,CAAC,CAChD,EAED,MAAO,CACH,gBAAgBI,EAAO,CACfA,GAAS,KAAK,aACd,KAAK,WAAa,KAEzB,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CDjE3B,IAAAC,EAAAC,ECkEY,KAAK,kBAAkBA,GAAAD,EAAA,KAAK,WAAL,YAAAA,EAAe,SAAf,YAAAC,EAAuB,kBAAmB,GAE5D,KAAK,eAAe,QACrB,KAAK,wBAAwB,OAAO,KAAK,qBAAqB,EAAE,KAAMC,GAAS,CAC3E,OAAO,MAAM,OAAO,gCAAiCA,CAAI,CAC7E,CAAiB,CAER,EAED,SAAU,CACN,KAAK,MAAM,aAAa,CAC3B,EAED,aAAc,CACV,GAAI,CAAC,KAAK,gBAAiB,CACvB,KAAK,WAAa,IAAIN,EAAY,CAC9B,KAAM,sCAC1B,CAAiB,EAED,MACH,CAED,MAAMO,EAAW,CACb,GAAG,KAAK,SACR,OAAQ,CACJ,gBAAiB,KAAK,eACzB,CACjB,EAEY,KAAK,MAAM,iBAAkBA,CAAQ,CACxC,CACJ,CACL"}
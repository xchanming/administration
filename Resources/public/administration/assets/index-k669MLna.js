const o=`{% block sw_flow_affiliate_and_campaign_code_modal %} <sw-modal class="sw-flow-affiliate-and-campaign-code-modal" :title="$tc('sw-flow.modals.affiliateAndCampaignCode.title')" :closable="false" @modal-close="onClose" > {% block sw_flow_affiliate_and_campaign_code_modal_content %} <div class="sw-flow-affiliate-and-campaign-code-modal__content"> {% block sw_flow_affiliate_and_campaign_code_modal_entity %} <sw-single-select v-model:value="entity" name="sw-field--entity" class="sw-flow-affiliate-and-campaign-code-modal__entity" required show-clearable-button :label="$tc('sw-flow.modals.affiliateAndCampaignCode.labelEntity')" :placeholder="$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderEntity')" :error="entityError" :options="entityOptions" /> {% endblock %} <sw-container columns="3fr 1fr" gap="16px" > {% block sw_flow_affiliate_and_campaign_code_modal_affiliate_code %} <sw-text-field v-model:value="affiliateCode.value" name="sw-field--affiliateCode-value" class="sw-flow-affiliate-and-campaign-code-modal__affiliate-code" :label="$tc('sw-flow.modals.affiliateAndCampaignCode.labelAffiliateCode')" :placeholder="$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderAffiliateCode')" /> {% endblock %} {% block sw_flow_affiliate_and_campaign_code_modal_affiliate_code_overwrite %} <sw-switch-field v-model:value="affiliateCode.upsert" name="sw-field--affiliateCode-upsert" class="sw-flow-affiliate-and-campaign-code-modal__affiliate-code-overwrite" :label="$tc('sw-flow.modals.affiliateAndCampaignCode.overwrite')" /> {% endblock %} </sw-container> <sw-container columns="3fr 1fr" gap="16px" > {% block sw_flow_affiliate_and_campaign_code_modal_campaign_code %} <sw-text-field v-model:value="campaignCode.value" name="sw-field--campaignCode-value" class="sw-flow-affiliate-and-campaign-code-modal__campaign-code" :label="$tc('sw-flow.modals.affiliateAndCampaignCode.labelCampaignCode')" :placeholder="$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderCampaignCode')" /> {% endblock %} {% block sw_flow_affiliate_and_campaign_code_modal_campaign_code_overwrite %} <sw-switch-field v-model:value="campaignCode.upsert" name="sw-field--campaignCode-upsert" class="sw-flow-affiliate-and-campaign-code-modal__campaign-code-overwrite" :label="$tc('sw-flow.modals.affiliateAndCampaignCode.overwrite')" /> {% endblock %} </sw-container> </div> {% endblock %} <template #modal-footer> {% block sw_flow_affiliate_and_campaign_code_modal_footer_cancel_button %} <sw-button class="sw-flow-affiliate-and-campaign-code-modal__cancel-button" size="small" @click="onClose" > {{ $tc('global.default.cancel') }} </sw-button> {% endblock %} {% block sw_flow_affiliate_and_campaign_code_modal_footer_save_button %} <sw-button class="sw-flow-affiliate-and-campaign-code-modal__save-button" variant="primary" size="small" @click="onSave" > {{ sequence.id ? $tc('sw-flow.modals.buttonSaveAction') : $tc('sw-flow.modals.buttonAddAction') }} </sw-button> {% endblock %} </template> </sw-modal> {% endblock %}`,{Component:l,Mixin:t,Store:n}=Shopware,{ShopwareError:s}=Shopware.Classes,{mapState:c}=l.getComponentHelper(),d={template:o,inject:["flowBuilderService"],emits:["process-finish","modal-close"],mixins:[t.getByName("placeholder"),t.getByName("notification")],props:{sequence:{type:Object,required:!0},action:{type:String,required:!1,default:null}},data(){return{entityError:null,entity:null,affiliateCode:{value:null,upsert:!1},campaignCode:{value:null,upsert:!1}}},computed:{entityOptions(){if(!this.triggerEvent)return[];const e=this.triggerEvent.aware??[],a=[];return this.flowBuilderService.getAvailableEntities(this.action,this.triggerActions,e,a)},...c(()=>n.get("swFlow"),["triggerEvent","triggerActions"])},watch:{entity(e){e&&this.entityError&&(this.entityError=null)}},created(){this.createdComponent()},methods:{createdComponent(){var a;const e=this.flowBuilderService.getEntityNameByAction(this.action);this.entityOptions.length&&(this.entity=((a=this.entityOptions.find(i=>i.value===e))==null?void 0:a.value)||this.entityOptions[0].value),this.sequence.config&&(this.entity=this.sequence.config.entity,this.affiliateCode={...this.sequence.config.affiliateCode},this.campaignCode={...this.sequence.config.campaignCode})},fieldError(e){return!e||!e.length?new s({code:"c1051bb4-d103-4f74-8988-acbcafc7fdc3"}):null},onSave(){if(this.entityError=this.fieldError(this.entity),this.entityError)return;const e={entity:this.entity,affiliateCode:this.affiliateCode,campaignCode:this.campaignCode},a={...this.sequence,config:e};this.$emit("process-finish",a),this.onClose()},onClose(){this.$emit("modal-close")}}};export{d as default};

{"version":3,"file":"index-BESKQfgD.js","sources":["../../../app/administration/src/app/component/form/sw-list-price-field/sw-list-price-field.html.twig","../../../app/administration/src/app/component/form/sw-list-price-field/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_list_price_field %}\n<div\n    :class=\"{\n        'sw-list-price-field': true,\n        'sw-list-price-field__vertical': vertical\n    }\"\n>\n\n    <div class=\"sw-list-price-field__price\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_list_price_field_price %}\n        <sw-price-field\n            class=\"sw-list-price-field__price-field\"\n            :value=\"price\"\n            required\n            :compact=\"compact\"\n            :disable-suffix=\"disableSuffix\"\n            :default-price=\"defaultPrice\"\n            :tax-rate=\"taxRate\"\n            :error=\"error\"\n            :disabled=\"disabled || undefined\"\n            :enable-inheritance=\"enableInheritance\"\n            :label=\"label\"\n            :currency=\"currency\"\n        />\n        {% endblock %}\n    </div>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_price_form_purchase_price_field %}\n    <div\n        v-if=\"!hidePurchasePrices && showSettingPrice\"\n        class=\"sw-list-price-field__purchase-price\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_price_form_purchase_price_field_content %}\n        <sw-price-field\n            class=\"sw-purchase-price-field\"\n            :value=\"purchasePrices\"\n            :gross-label=\"$tc('sw-product.priceForm.labelPurchasePriceGross')\"\n            :net-label=\"$tc('sw-product.priceForm.labelPurchasePriceNet')\"\n            :tax-rate=\"taxRate\"\n            :disabled=\"disabled || undefined\"\n            :currency=\"currency\"\n        />\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <div class=\"sw-list-price-field__list-price\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_list_price_field_list_price %}\n        <sw-price-field\n            v-if=\"!hideListPrices && showSettingPrice\"\n            :value=\"listPrice\"\n            :default-price=\"defaultListPrice\"\n            :tax-rate=\"taxRate\"\n            :disabled=\"disabled || undefined\"\n            allow-empty\n            :gross-label=\"$tc('global.sw-list-price-field.labelListPriceGross')\"\n            :gross-help-text=\"listPriceHelpText\"\n            :net-label=\"$tc('global.sw-list-price-field.labelListPriceNet')\"\n            :compact=\"compact\"\n            :disable-suffix=\"disableSuffix\"\n            :label=\"label\"\n            :enable-inheritance=\"enableInheritance\"\n            :inherited=\"isInherited\"\n            class=\"sw-list-price-field__list-price-field\"\n            :currency=\"currency\"\n            @change=\"listPriceChanged\"\n        />\n        {% endblock %}\n    </div>\n\n    <div class=\"sw-list-price-field__regulation-price\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_list_price_field_regulation_price %}\n        <sw-price-field\n            v-if=\"!hideRegulationPrices && showSettingPrice\"\n            :value=\"regulationPrice\"\n            :default-price=\"defaultRegulationPrice\"\n            :tax-rate=\"taxRate\"\n            :disabled=\"disabled || undefined\"\n            allow-empty\n            :gross-label=\"$tc('global.sw-list-price-field.labelRegulationPriceGross')\"\n            :gross-help-text=\"regulationPriceHelpText\"\n            :net-label=\"$tc('global.sw-list-price-field.labelRegulationPriceNet')\"\n            :compact=\"compact\"\n            :disable-suffix=\"disableSuffix\"\n            :label=\"label\"\n            :enable-inheritance=\"enableInheritance\"\n            :inherited=\"isInherited\"\n            class=\"sw-list-price-field__regulation-price-field\"\n            :currency=\"currency\"\n            @change=\"regulationPriceChanged\"\n        />\n        {% endblock %}\n    </div>\n</div>\n{% endblock %}\n","/**\n * @package admin\n */\n\nimport template from './sw-list-price-field.html.twig';\nimport './sw-list-price-field.scss';\n\nconst { Component } = Cicada;\n\n/**\n * @private\n */\nComponent.register('sw-list-price-field', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inheritAttrs: false,\n\n    props: {\n        price: {\n            type: Array,\n            required: true,\n            default() {\n                return [];\n            },\n        },\n\n        purchasePrices: {\n            type: Array,\n            default() {\n                return [];\n            },\n        },\n\n        defaultPrice: {\n            type: Object,\n            required: false,\n            default() {\n                return {};\n            },\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        label: {\n            required: false,\n            default: true,\n        },\n\n        taxRate: {\n            type: Object,\n            required: true,\n            default() {\n                return {};\n            },\n        },\n\n        currency: {\n            type: Object,\n            required: true,\n            default() {\n                return {};\n            },\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        compact: {\n            required: false,\n            default: false,\n        },\n\n        error: {\n            type: Object,\n            required: false,\n            default: null,\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        disabled: {\n            required: false,\n            default: false,\n        },\n\n        enableInheritance: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        disableSuffix: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        vertical: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        hideListPrices: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        hidePurchasePrices: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        hideRegulationPrices: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        showSettingPrice: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    computed: {\n        priceForCurrency: {\n            get() {\n                const priceForCurrency = Object.values(this.price).find((price) => {\n                    return price.currencyId === this.currency.id;\n                });\n\n                // check if price exists\n                if (priceForCurrency) {\n                    return priceForCurrency;\n                }\n\n                // otherwise calculate values\n                return {\n                    gross: this.convertPrice(this.defaultPrice.gross),\n                    linked: this.defaultPrice.linked,\n                    net: this.convertPrice(this.defaultPrice.net),\n                    listPrice: this.defaultPrice.listPrice,\n                    regulationPrice: this.defaultPrice.regulationPrice,\n                };\n            },\n            set(newValue) {\n                this.priceForCurrency.gross = newValue.gross;\n                this.priceForCurrency.linked = newValue.linked;\n                this.priceForCurrency.net = newValue.net;\n            },\n        },\n\n        listPrice: {\n            get() {\n                const price = this.priceForCurrency;\n\n                if (price.listPrice) {\n                    return [price.listPrice];\n                }\n\n                return [\n                    {\n                        gross: null,\n                        currencyId: this.defaultPrice.currencyId ? this.defaultPrice.currencyId : this.currency.id,\n                        linked: true,\n                        net: null,\n                    },\n                ];\n            },\n\n            set(newValue) {\n                const price = this.priceForCurrency;\n\n                if (price) {\n                    if (this.isCompatEnabled('INSTANCE_SET')) {\n                        this.$set(price, 'listPrice', newValue);\n                    } else {\n                        // eslint-disable-next-line vue/no-mutating-props\n                        price.listPrice = newValue;\n                    }\n                }\n            },\n        },\n\n        regulationPrice: {\n            get() {\n                const price = this.priceForCurrency;\n\n                if (price.regulationPrice) {\n                    return [price.regulationPrice];\n                }\n\n                return [\n                    {\n                        gross: null,\n                        currencyId: this.defaultPrice.currencyId ? this.defaultPrice.currencyId : this.currency.id,\n                        linked: true,\n                        net: null,\n                    },\n                ];\n            },\n\n            set(newValue) {\n                const price = this.priceForCurrency;\n\n                if (price) {\n                    this.$set(price, 'regulationPrice', newValue);\n                }\n            },\n        },\n\n        defaultListPrice() {\n            if (this.defaultPrice.listPrice) {\n                return this.defaultPrice.listPrice;\n            }\n\n            return {\n                currencyId: this.defaultPrice.currencyId ? this.defaultPrice.currencyId : this.currency.id,\n                gross: null,\n                net: null,\n                linked: true,\n            };\n        },\n\n        defaultRegulationPrice() {\n            if (this.defaultPrice.regulationPrice) {\n                return this.defaultPrice.regulationPrice;\n            }\n\n            return {\n                currencyId: this.defaultPrice.currencyId ? this.defaultPrice.currencyId : this.currency.id,\n                gross: null,\n                net: null,\n                linked: true,\n            };\n        },\n\n        isInherited() {\n            const priceForCurrency = Object.values(this.price).find((price) => {\n                return price.currencyId === this.currency.id;\n            });\n\n            return !priceForCurrency;\n        },\n\n        listPriceHelpText() {\n            if (!this.vertical || this.compact) {\n                return null;\n            }\n\n            return this.$tc('global.sw-list-price-field.helpTextListPriceGross');\n        },\n\n        regulationPriceHelpText() {\n            if (!this.vertical || this.compact) {\n                return null;\n            }\n\n            return this.$tc('global.sw-list-price-field.helpTextRegulationPriceGross');\n        },\n    },\n\n    methods: {\n        listPriceChanged(value) {\n            if (Number.isNaN(value.gross) || Number.isNaN(value.net)) {\n                value = null;\n            }\n\n            this.listPrice = value;\n        },\n\n        regulationPriceChanged(value) {\n            if (Number.isNaN(value.gross) || Number.isNaN(value.net)) {\n                value = null;\n            }\n\n            this.regulationPrice = value;\n        },\n\n        convertPrice(value) {\n            const calculatedPrice = value * this.currency.factor;\n            const priceRounded = calculatedPrice.toFixed(this.currency.decimalPrecision);\n            return Number(priceRounded);\n        },\n    },\n});\n"],"names":["template","Component","priceForCurrency","price","newValue","value","priceRounded"],"mappings":"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"}
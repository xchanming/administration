const a=`{% block sw_data_grid_slot_pagination %} <sw-pagination v-bind="{ page, limit, total, steps }" :total-visible="7" @page-change="paginate" /> {% endblock %} {% block sw_data_grid_bulk_selected_actions_content %} {% block sw_data_grid_bulk_edit_content %} <a v-if="allowBulkEdit" class="link link-primary" role="button" tabindex="0" @click="onClickBulkEdit" @keydown.enter="onClickBulkEdit" > {{ $tc('global.sw-bulk-edit-modal.bulkEdit') }} </a> {% endblock %} {% block sw_data_grid_bulk_delete_content %} <a v-if="allowDelete" class="link link-danger" role="button" tabindex="0" @click="showBulkDeleteModal = true" @keydown.enter="showBulkDeleteModal = true" > {{ $tc('global.default.delete') }} </a> {% endblock %} <slot name="bulk-additional" v-bind="{ selectionCount }" ></slot> {% endblock %} {% block sw_data_grid_slot_bulk_modals %} {% block sw_data_grid_bulk_edit_modal %} <slot name="bulk-edit-modal" v-bind="{ selection }" > {% block sw_data_grid_slot_bulk_edit_modal %} <sw-bulk-edit-modal v-if="showBulkEditModal" :selection="selection" :bulk-grid-edit-columns="bulkGridEditColumns" @modal-close="onCloseBulkEditModal" /> {% endblock %} </slot> {% endblock %} {% block sw_data_grid_bulk_delete_modal %} <sw-modal v-if="showBulkDeleteModal" class="sw-entity-listing__confirm-bulk-delete-modal" variant="small" :title="$tc('global.default.warning')" @modal-close="showBulkDeleteModal = false" > <p class="sw-data-grid__confirm-bulk-delete-text"> <slot name="bulk-modal-delete-confirm-text" v-bind="{ selectionCount }" > {{ $tc('global.entity-components.deleteMessage', selectionCount, { count: selectionCount }) }} </slot> </p> <template #modal-footer> <slot name="bulk-modal-cancel"> <sw-button size="small" @click="showBulkDeleteModal = false" > {{ $tc('global.default.cancel') }} </sw-button> </slot> <slot name="bulk-modal-delete-items" v-bind="{ isBulkLoading, deleteItems }" > <sw-button variant="danger" size="small" :is-loading="isBulkLoading" @click="deleteItems" > {{ $tc('global.default.delete') }} </sw-button> </slot> </template> </sw-modal> {% endblock %} <slot name="bulk-modals-additional" v-bind="{ selection, ids: Object.keys(selection) }" ></slot> {% endblock %} {% block sw_data_grid_slot_actions %} <slot name="detail-action" v-bind="{ item }" > <sw-context-menu-item v-if="detailRoute" v-tooltip="{ message: $tc('sw-privileges.tooltip.warning'), disabled: allowEdit || allowView, showOnDisabledElements: true, zIndex: 9050, }" class="sw-entity-listing__context-menu-edit-action" :disabled="(!allowEdit && !allowView) || undefined" :router-link="{ name: detailRoute, params: { id: item.id } }" > {{ detailPageLinkText }} </sw-context-menu-item> </slot> <slot name="more-actions" v-bind="{ item }" ></slot> <slot name="delete-action" v-bind="{ item, showDelete, allowDelete }" > <sw-context-menu-item v-tooltip.bottom="{ message: $tc('sw-privileges.tooltip.warning'), disabled: allowDelete, showOnDisabledElements: true, zIndex: 9050, }" :disabled="!allowDelete || undefined" class="sw-entity-listing__context-menu-edit-delete" variant="danger" @click="showDelete(item.id)" > {{ $tc('global.default.delete') }} </sw-context-menu-item> </slot> {% endblock %} {% block sw_data_grid_slot_action_modals %} <sw-modal v-if="deleteId === item.id" :title="$tc('global.default.warning')" variant="small" @modal-close="closeModal" > <p class="sw-listing__confirm-delete-text"> <slot name="delete-confirm-text" v-bind="{ item }" > {{ $tc('global.entity-components.deleteMessage') }} </slot> </p> <template #modal-footer> <slot name="delete-modal-footer" v-bind="{ item }" > <slot name="delete-modal-cancel" v-bind="{ item }" > <sw-button size="small" @click="closeModal" > {{ $tc('global.default.cancel') }} </sw-button> </slot> <slot name="delete-modal-delete-item" v-bind="{ item }" > <sw-button variant="danger" size="small" @click="deleteItem(item.id)" > {{ $tc('global.default.delete') }} </sw-button> </slot> </slot> </template> </sw-modal> {% endblock %}`,{Component:o}=Shopware,{Criteria:d}=Shopware.Data;o.extend("sw-entity-listing","sw-data-grid",{template:a,inject:["feature"],emits:["update-records","delete-item-finish","delete-item-failed","delete-items-failed","items-delete-finish","inline-edit-save","inline-edit-cancel","column-sort","page-change","bulk-edit-modal-open","bulk-edit-modal-close"],props:{detailRoute:{type:String,required:!1,default:null},repository:{type:Object,required:!0},items:{type:Array,required:!1,default:null},dataSource:{type:[Array,Object],required:!1},showSettings:{type:Boolean,required:!1,default:!0},steps:{type:Array,required:!1,default(){return[10,25,50,75,100]}},fullPage:{type:Boolean,required:!1,default:!0},allowInlineEdit:{type:Boolean,required:!1,default:!0},allowColumnEdit:{type:Boolean,required:!1,default:!0},criteriaLimit:{type:Number,required:!1,default:25},allowEdit:{type:Boolean,required:!1,default:!0},allowView:{type:Boolean,required:!1,default:!1},allowDelete:{type:Boolean,required:!1,default:!0},disableDataFetching:{type:Boolean,required:!1,default:!1},naturalSorting:{type:Boolean,required:!1,default:!1},allowBulkEdit:{type:Boolean,required:!1,default:!1},showBulkEditModal:{type:Boolean,required:!1,default:!1},bulkGridEditColumns:{type:Array,required:!1,default(){return[]}},maximumSelectItems:{type:Number,required:!1,default:1e3}},data(){return{deleteId:null,showBulkDeleteModal:!1,isBulkLoading:!1,page:1,limit:this.criteriaLimit,total:10,lastSortedColumn:null}},computed:{detailPageLinkText(){return!this.allowEdit&&this.allowView?this.$tc("global.default.view"):this.$tc("global.default.edit")}},watch:{items(){this.applyResult(this.items)}},methods:{createdComponent(){this.$super("createdComponent"),this.items&&this.applyResult(this.items)},applyResult(e){var i,s;this.records=e;const{total:t,criteria:l}=e;this.total=t,this.page=l.page||1,this.limit=l.limit||this.criteriaLimit,this.loading=!1,(s=(i=l==null?void 0:l.sortings)==null?void 0:i[0])!=null&&s.field&&(this.currentSortBy=l.sortings[0].field),this.$emit("update-records",e)},deleteItem(e){return this.deleteId=null,this.repository.delete(e,this.items.context).then(()=>(this.resetSelection(),this.$emit("delete-item-finish",e),this.doSearch())).catch(t=>{this.$emit("delete-item-failed",{id:e,errorResponse:t})})},deleteItems(){this.isBulkLoading=!0;let e=null;return e=Object.keys(this.selection),this.repository.syncDeleted(e,this.items.context).then(()=>this.deleteItemsFinish()).catch(t=>(this.$emit("delete-items-failed",{selectedIds:e,errorResponse:t}),this.deleteItemsFinish()))},deleteItemsFinish(){return this.resetSelection(),this.isBulkLoading=!1,this.showBulkDeleteModal=!1,this.$emit("items-delete-finish"),this.doSearch()},doSearch(){return this.loading=!0,this.repository.search(this.items.criteria,this.items.context).then(this.applyResult)},save(e){const t=this.repository.save(e,this.items.context).then(()=>this.doSearch());return this.$emit("inline-edit-save",t,e),t},revert(){const e=this.doSearch();return this.$emit("inline-edit-cancel",e),e},sort(e){this.lastSortedColumn=e,this.items.criteria.resetSorting();let t="ASC";return this.currentSortBy===this.lastSortedColumn.dataIndex&&this.currentSortDirection===t&&(t="DESC"),this.lastSortedColumn.dataIndex.split(",").forEach(l=>{this.items.criteria.addSorting(d.sort(l,t,this.lastSortedColumn.naturalSorting))}),this.currentSortBy=this.lastSortedColumn.dataIndex,this.currentSortDirection=t,this.currentNaturalSorting=this.lastSortedColumn.naturalSorting,this.$emit("column-sort",this.lastSortedColumn,this.currentSortDirection),this.lastSortedColumn.useCustomSort||this.disableDataFetching?!1:this.doSearch()},paginate({page:e=1,limit:t=25}){return this.items.criteria.setPage(e),this.items.criteria.setLimit(t),this.$emit("page-change",{page:e,limit:t}),this.lastSortedColumn&&this.lastSortedColumn.useCustomSort||this.disableDataFetching?!1:this.doSearch()},showDelete(e){this.deleteId=e},closeModal(){this.deleteId=null},onClickBulkEdit(){this.$emit("bulk-edit-modal-open")},onCloseBulkEditModal(){this.$emit("bulk-edit-modal-close")}}});

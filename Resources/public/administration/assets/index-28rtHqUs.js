const i=`{% block sw_text_field %} {% block sw_url_field %} <sw-contextual-field class="sw-field--url" v-bind="{ ...$attrs, ...inheritanceAttrs }" :error="combinedError" :name="formFieldName" @inheritance-restore="$emit('inheritance-restore', $event)" @inheritance-remove="$emit('inheritance-remove', $event)" > <template #sw-contextual-field-prefix="{ disabled }"> <span class="sw-field__url-input__prefix" :class="prefixClass" role="button" tabindex="0" @click="changeMode(disabled)" @keydown.enter="changeMode(disabled)" > <sw-icon v-if="sslActive" name="regular-lock" :small="true" /> <sw-icon v-else name="regular-lock-open" :small="true" /> {{ urlPrefix }} </span> </template> <template #sw-field-input="{ identification, error, disabled, size, setFocusClass, removeFocusClass }"> <input :id="identification" type="url" class="sw-url-input-field__input" :name="identification" :value="unicodeUriFilter(currentUrlValue)" :placeholder="placeholder" :disabled="disabled" :aria-label="ariaLabel && $tc(ariaLabel)" @focus="setFocusClass" @blur="onBlur($event); removeFocusClass();" > </template> <template v-if="copyable" #sw-contextual-field-suffix="{ identification }" > <sw-field-copyable v-if="copyable" :display-name="identification" :copyable-text="url" :tooltip="copyableTooltip" /> </template> <template #label> <slot name="label"></slot> </template> <template #hint> <slot name="hint"></slot> </template> </sw-contextual-field> {% endblock %} {% endblock %}`,{Component:a}=Shopware,{ShopwareError:s}=Shopware.Classes,r={PROTOCOL:/([a-zA-Z0-9]+\:\/\/)+/,PROTOCOL_HTTP:/^https?:\/\//,SSL:/^\s*https:\/\//,TRAILING_SLASH:/\/+$/};a.extend("sw-url-field-deprecated","sw-text-field-deprecated",{template:i,inheritAttrs:!1,inject:["feature"],emits:["update:value","inheritance-restore","inheritance-remove"],props:{error:{type:Object,required:!1,default:null},omitUrlHash:{type:Boolean,default:!1},omitUrlSearch:{type:Boolean,default:!1},addTrailingSlash:{type:Boolean,default:!1}},data(){return{sslActive:!0,currentUrlValue:"",errorUrl:null,currentDebounce:null}},computed:{prefixClass(){return this.sslActive?"is--ssl":""},urlPrefix(){return this.sslActive?"https://":"http://"},url(){const e=this.currentUrlValue.trim();return e===""?"":`${this.urlPrefix}${e}`},combinedError(){return this.errorUrl||this.error},unicodeUriFilter(){return Shopware.Filter.getByName("unicodeUri")}},watch:{value:{handler(){this.checkInput(this.value||"")},immediate:!0}},created(){this.createdComponent()},methods:{createdComponent(){this.currentUrlValue=this.validateCurrentValue(this.value||""),this.checkInput(this.currentUrlValue||"")},onBlur(e){this.checkInput(e.target.value)},checkInput(e){if(this.errorUrl=null,!e||!e.length){this.handleEmptyUrl();return}e.match(r.PROTOCOL_HTTP)&&(this.sslActive=this.getSSLMode(e));const t=this.validateCurrentValue(e);t?this.currentUrlValue!==t&&(this.currentUrlValue=t,this.$emit("update:value",this.url)):this.setInvalidUrlError()},handleEmptyUrl(){this.currentUrlValue="",this.$emit("update:value",this.url)},validateCurrentValue(e){const t=this.getURLInstance(e);if(!t)return null;this.omitUrlSearch&&(t.search=""),this.omitUrlHash&&(t.hash="");const l=t.hash===""&&t.search===""&&!this.addTrailingSlash?r.TRAILING_SLASH:"";return t.toString().replace(r.PROTOCOL,"").replace(l,"").replace(t.host,this.unicodeUriFilter(t.host))},changeMode(e){e||(this.sslActive=!this.sslActive,this.$emit("update:value",this.url))},getURLInstance(e){try{const t=e.match(r.PROTOCOL)?e:`${this.urlPrefix}${e}`;return new URL(t)}catch{return this.setInvalidUrlError(),null}},getSSLMode(e){return!!e.match(r.SSL)},setInvalidUrlError(){this.errorUrl=new s({code:"INVALID_URL"})}}});

{"version":3,"file":"index-CrV6N7ZH.js","sources":["../../../app/administration/src/app/component/rule/sw-condition-or-container/sw-condition-or-container.html.twig","../../../app/administration/src/app/component/rule/sw-condition-or-container/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_condition_and_container %}\n<div\n    class=\"sw-condition-or-container\"\n    :class=\"containerRowClass\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_condition_or_container_children %}\n    <template\n        v-for=\"(child, index) in condition[childAssociationField]\"\n        :key=\"`condition-or-container-child--${index}`\"\n    >\n        <div\n            v-if=\"index > 0\"\n            class=\"condition-content__spacer--or\"\n        >\n            {{ $tc('global.sw-condition.condition.or') }}\n        </div>\n\n        <sw-condition-tree-node\n            :parent-condition=\"condition\"\n            :condition=\"child\"\n            :disabled=\"disabled || undefined\"\n            :level=\"level + 1\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_condition_or_container_actions %}\n    <div class=\"sw-condition-or-container__actions\">\n        <sw-button\n            v-tooltip.top=\"getNoPermissionsTooltip('product_stream.editor')\"\n            variant=\"ghost\"\n            size=\"small\"\n            class=\"sw-condition-or-container__actions--or\"\n            :disabled=\"disabled\"\n            @click=\"onAddPlaceholder\"\n        >\n            {{ $tc('global.sw-condition.condition.AddOrCondition') }}\n        </sw-button>\n\n        <sw-button\n            v-if=\"level !== 0\"\n            v-tooltip.top=\"getNoPermissionsTooltip('product_stream.editor')\"\n            variant=\"ghost\"\n            size=\"small\"\n            class=\"sw-condition-or-container__actions--sub\"\n            :disabled=\"disabled\"\n            @click=\"onAddAndContainer\"\n        >\n            {{ $tc('global.sw-condition.condition.AddSubCondition') }}\n        </sw-button>\n\n        <sw-button\n            v-tooltip.top=\"getNoPermissionsTooltip('product_stream.editor')\"\n            size=\"small\"\n            class=\"sw-condition-or-container__actions--delete\"\n            :disabled=\"disabled\"\n            @click=\"onDeleteAll\"\n        >\n            <span v-if=\"level !== 0\">{{ $tc('global.sw-condition.condition.deleteConditions') }}</span>\n            <span v-else>{{ $tc('global.sw-condition.condition.deleteAllConditions') }}</span>\n        </sw-button>\n    </div>\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-condition-or-container.html.twig';\nimport './sw-condition-or-container.scss';\n\nconst { Component, Mixin } = Cicada;\n\n/**\n * @private\n * @package services-settings\n * @description Contains some sw-base-conditions / sw-condition-and-container connected by or.\n * This component must be a child of sw-condition-tree\n * @status prototype\n * @example-type code-only\n * @component-example\n * <sw-condition-or-container :condition=\"condition\" :level=\"0\"></sw-condition-or-container>\n */\nComponent.register('sw-condition-or-container', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['acl'],\n\n    mixins: [\n        Mixin.getByName('ruleContainer'),\n    ],\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            if (this.nextPosition === 0) {\n                this.onAddPlaceholder();\n            }\n        },\n\n        onAddPlaceholder() {\n            if (this.level === 0) {\n                this.onAddAndContainer();\n                return;\n            }\n            this.insertNodeIntoTree(\n                this.condition,\n                this.createCondition(\n                    this.conditionDataProviderService.getPlaceholderData(),\n                    this.condition.id,\n                    this.nextPosition,\n                ),\n            );\n        },\n\n        onAddAndContainer() {\n            const andContainer = this.createCondition(\n                this.conditionDataProviderService.getAndContainerData(),\n                this.condition.id,\n                this.nextPosition,\n            );\n\n            this.insertNodeIntoTree(this.condition, andContainer);\n\n            // \"replace\" first child if it is a placeholder\n            if (\n                this.condition[this.childAssociationField].length === 2 &&\n                this.condition[this.childAssociationField][0].type === null\n            ) {\n                this.removeNodeFromTree(this.condition, this.condition[this.childAssociationField][0]);\n            }\n        },\n\n        onDeleteAll() {\n            // if container is root container remove its children but not itself\n            if (this.level === 0) {\n                while (this.condition[this.childAssociationField].length > 0) {\n                    this.removeNodeFromTree(this.condition, this.condition[this.childAssociationField][0]);\n                }\n\n                return;\n            }\n\n            // else remove container\n            this.removeNodeFromTree(this.parentCondition, this.condition);\n        },\n\n        getNoPermissionsTooltip(role, showOnDisabledElements = true) {\n            return {\n                showDelay: 300,\n                message: this.$tc('sw-privileges.tooltip.warning'),\n                appearance: 'dark',\n                showOnDisabledElements,\n                disabled: this.acl.can(role),\n            };\n        },\n    },\n});\n"],"names":["template","Component","Mixin","andContainer","role","showOnDisabledElements"],"mappings":"AAAA,MAAeA,EAAA,0lDCGT,CAAE,UAAAC,EAAW,MAAAC,CAAO,EAAG,OAY7BD,EAAU,SAAS,4BAA6B,CAC5C,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,KAAK,EAEd,OAAQ,CACJE,EAAM,UAAU,eAAe,CAClC,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACX,KAAK,eAAiB,GACtB,KAAK,iBAAgB,CAE5B,EAED,kBAAmB,CACf,GAAI,KAAK,QAAU,EAAG,CAClB,KAAK,kBAAiB,EACtB,MACH,CACD,KAAK,mBACD,KAAK,UACL,KAAK,gBACD,KAAK,6BAA6B,mBAAoB,EACtD,KAAK,UAAU,GACf,KAAK,YACR,CACjB,CACS,EAED,mBAAoB,CAChB,MAAMC,EAAe,KAAK,gBACtB,KAAK,6BAA6B,oBAAqB,EACvD,KAAK,UAAU,GACf,KAAK,YACrB,EAEY,KAAK,mBAAmB,KAAK,UAAWA,CAAY,EAIhD,KAAK,UAAU,KAAK,qBAAqB,EAAE,SAAW,GACtD,KAAK,UAAU,KAAK,qBAAqB,EAAE,CAAC,EAAE,OAAS,MAEvD,KAAK,mBAAmB,KAAK,UAAW,KAAK,UAAU,KAAK,qBAAqB,EAAE,CAAC,CAAC,CAE5F,EAED,aAAc,CAEV,GAAI,KAAK,QAAU,EAAG,CAClB,KAAO,KAAK,UAAU,KAAK,qBAAqB,EAAE,OAAS,GACvD,KAAK,mBAAmB,KAAK,UAAW,KAAK,UAAU,KAAK,qBAAqB,EAAE,CAAC,CAAC,EAGzF,MACH,CAGD,KAAK,mBAAmB,KAAK,gBAAiB,KAAK,SAAS,CAC/D,EAED,wBAAwBC,EAAMC,EAAyB,GAAM,CACzD,MAAO,CACH,UAAW,IACX,QAAS,KAAK,IAAI,+BAA+B,EACjD,WAAY,OACZ,uBAAAA,EACA,SAAU,KAAK,IAAI,IAAID,CAAI,CAC3C,CACS,CACJ,CACL,CAAC"}
const r=`{% block sw_product_detail_cross_selling %} <div v-if="isLoading"> <sw-skeleton /> <sw-skeleton /> </div> <div v-else class="sw-product-detail-cross-selling" > {% block sw_product_detail_cross_selling_items_wrapper %} <template v-if="showCrossSellingCard"> {% block sw_product_detail_cross_selling_restore_inheritance %} <sw-button v-if="isChild" class="sw-product-detail-cross-selling__restore-inheritance-btn" :disabled="!acl.can('product.editor')" @click="onShowRestoreInheritanceModal" > <sw-icon key="inherit-icon" name="regular-link-horizontal" size="16px" /> {{ $tc('sw-product.crossselling.buttonRestoreCrossSellingInheritance') }} </sw-button> {% endblock %} {% block sw_product_detail_cross_selling_items %} <ul class="sw-product-detail-cross-selling__cross-selling-list"> <sw-product-cross-selling-form v-for="item in product.crossSellings" :key="item.id" :cross-selling="item" :allow-edit="acl.can('product.editor')" /> </ul> {% endblock %} {% block sw_product_detail_cross_selling_add %} <sw-button v-tooltip="{ message: onAddCrossSellingTooltipMessage, disabled: acl.can('product.editor') && isSystemDefaultLanguage, showOnDisabledElements: true }" class="sw-product-detail-cross-selling__add-btn" variant="ghost" :disabled="!acl.can('product.editor') || !isSystemDefaultLanguage" @click="onAddCrossSelling" > {{ $tc('sw-product.crossselling.buttonAddCrossSelling') }} </sw-button> {% endblock %} </template> {% endblock %} {% block sw_product_detail_cross_selling_empty_state_card %} {# @deprecated tag:v6.7.0 - Block will be removed. Use \`sw_product_detail_cross_selling_empty_state_card\` instead. #} {% block sw_product_detail_empty_state %} <sw-card v-else position-identifier="sw-product-detail-cross-selling-empty-state" > {% block sw_product_detail_cross_selling_empty_state %} <sw-empty-state :title="$tc('sw-product.crossselling.cardTitleCrossSelling')" :absolute="false" empty-module > {% block sw_product_detail_cross_selling_empty_state_icon %} <template #icon> <img :src="assetFilter('/administration/static/img/empty-states/products-empty-state.svg')" :alt="$tc('sw-product.crossselling.cardTitleCrossSelling')" > </template> {% endblock %} <template #default> {% block sw_product_detail_cross_selling_empty_state_content %} <template v-if="isChild"> {% block sw_product_detail_cross_selling_empty_state_content_child %} <template v-if="isInherited"> {% block sw_product_detail_cross_selling_empty_state_content_child_inherited %} <p>{{ $tc('sw-product.crossselling.inheritedEmptyStateDescription') }}</p> {% endblock %} {% block sw_product_detail_cross_selling_empty_state_content_child_inherited_link %} <router-link v-if="isChild && isInherited" :to="{ name: 'sw.product.detail.crossSelling', params: { id: product.parentId } }" class="sw-product-detail-cross-selling__parent-cross-sellings-link" > {{ $tc('sw-product.crossselling.linkCrossSellingsOfParent') }} <sw-icon name="regular-long-arrow-right" small /> </router-link> {% endblock %} </template> <template v-else> {% block sw_product_detail_cross_selling_empty_state_content_child_not_inherited %} <p>{{ $tc('sw-product.crossselling.notInheritedEmptyStateDescription') }}</p> {% endblock %} </template> {% endblock %} </template> <template v-else> {% block sw_product_detail_cross_selling_empty_state_content_empty %} <p>{{ $tc('sw-product.crossselling.emptyStateDescription') }}</p> {% endblock %} </template> {% endblock %} {% block sw_product_detail_cross_selling_empty_state_inherit_switch %} <template v-if="isChild"> <div class="sw-product-detail-cross-selling__inherit-toggle-wrapper" :class="{ 'is--inherited': isInherited }" > <sw-switch-field v-model:value="isInherited" class="sw-product-detail-cross-selling__inherit-switch" :disabled="!acl.can('product.editor')" /> <sw-inheritance-switch class="sw-product-detail-cross-selling__inheritance-icon" :is-inherited="isInherited" :disabled="!acl.can('product.editor')" @inheritance-restore="restoreInheritance" @inheritance-remove="removeInheritance" /> <label class="sw-product-detail-cross-selling__inheritance-label"> {{ $tc('sw-product.crossselling.inheritSwitchLabel') }} </label> </div> </template> {% endblock %} </template> {% block sw_product_detail_cross_selling_empty_state_actions %} {# @deprecated tag:v6.7.0 - Block will be removed. Use \`sw_product_detail_cross_selling_empty_state_actions\` instead. #} {% block sw_product_detail_empty_state_cross_selling_add %} <template #actions> {% block sw_product_detail_cross_selling_empty_state_actions_add %} <sw-button v-tooltip="{ message: onAddCrossSellingTooltipMessage, disabled: acl.can('product.editor') && isSystemDefaultLanguage, showOnDisabledElements: true }" variant="ghost" :disabled="isInherited || !acl.can('product.editor') || !isSystemDefaultLanguage" @click="onAddCrossSelling" > {{ $tc('sw-product.crossselling.buttonAddCrossSelling') }} </sw-button> {% endblock %} </template> {% endblock %} {% endblock %} </sw-empty-state> {% endblock %} </sw-card> {% endblock %} {% endblock %} {% block sw_product_detail_cross_selling_modal_restore_inheritance %} <sw-modal v-if="showRestoreInheritanceModal" variant="small" :title="$tc('sw-product.crossselling.restoreInheritanceConfirmTitle')" class="sw-product-detail-cross-selling__restore-inheritance-modal" @modal-close="onCloseRestoreInheritanceModal" > {% block sw_product_detail_cross_selling_modal_restore_inheritance_text %} <p> {{ $tc('sw-product.crossselling.restoreInheritanceConfirmText') }} </p> {% endblock %} {% block sw_product_detail_cross_selling_modal_restore_inheritance_footer %} <template #modal-footer> {% block sw_product_detail_cross_selling_modal_restore_inheritance_action_cancel %} <sw-button size="small" @click="onCloseRestoreInheritanceModal" > {{ $tc('global.default.cancel') }} </sw-button> {% endblock %} {% block sw_product_detail_cross_selling_modal_restore_inheritance_action_restore %} <sw-button class="sw-product-detail-cross-selling__restore-button" size="small" variant="danger" @click="onConfirmRestoreInheritance" > {{ $tc('sw-product.crossselling.restoreInheritanceButtonRestore') }} </sw-button> {% endblock %} </template> {% endblock %} </sw-modal> {% endblock %} </div> {% endblock %}`,{Criteria:s,EntityCollection:n}=Cicada.Data,{mapState:c,mapGetters:i}=Cicada.Component.getComponentHelper(),a={template:r,compatConfig:Cicada.compatConfig,inject:["repositoryFactory","acl"],props:{allowEdit:{type:Boolean,required:!1,default:!0}},data(){return{crossSelling:null,isInherited:!1,showRestoreInheritanceModal:!1}},computed:{...c("swProductDetail",["product"]),...i("swProductDetail",["isLoading","isChild"]),...i("context",["isSystemDefaultLanguage"]),showCrossSellingCard(){return!this.isLoading&&this.product.crossSellings&&this.product.crossSellings.length>0},onAddCrossSellingTooltipMessage(){return this.isSystemDefaultLanguage?this.$tc("sw-privileges.tooltip.warning"):this.$tc("sw-product.crossselling.buttonAddCrossSellingLanguageWarning")},assetFilter(){return Cicada.Filter.getByName("asset")},crossSellingRepository(){return this.repositoryFactory.create(this.product.crossSellings.entity,this.product.crossSellings.source)}},watch:{product(e){e.crossSellings.forEach(t=>{t.assignedProducts.length>0||this.loadAssignedProducts(t)})},"product.crossSellings":{handler(e){e&&(this.isInherited=this.isChild&&!this.product.crossSellings.total)},immediate:!0}},mounted(){this.mountedComponent()},methods:{mountedComponent(){this.isInherited=this.isChild&&!this.product.crossSellings.total},loadAssignedProducts(e){const t=this.repositoryFactory.create(e.assignedProducts.entity,e.assignedProducts.source),o=new s(1,25);return o.addFilter(s.equals("crossSellingId",e.id)).addSorting(s.sort("position","ASC")).addAssociation("product"),t.search(o,{...Cicada.Context.api,inheritance:!0}).then(l=>{e.assignedProducts=l}),e},onAddCrossSelling(){this.crossSelling=this.crossSellingRepository.create(),this.crossSelling.productId=this.product.id,this.crossSelling.position=this.product.crossSellings.length+1,this.crossSelling.type="productStream",this.crossSelling.sortBy="name",this.crossSelling.sortDirection="ASC",this.crossSelling.limit=24,this.product.crossSellings.push(this.crossSelling)},restoreInheritance(){this.isInherited=!0},removeInheritance(){this.isInherited=!1},onShowRestoreInheritanceModal(){this.showRestoreInheritanceModal=!0},onCloseRestoreInheritanceModal(){this.showRestoreInheritanceModal=!1},onConfirmRestoreInheritance(){this.onCloseRestoreInheritanceModal(),this.$nextTick(()=>{this.product.crossSellings=new n(this.crossSellingRepository.route,this.product.crossSellings.entity,Cicada.Context.api),this.restoreInheritance()})}}};export{a as default};
//# sourceMappingURL=index-DvD6uQkG.js.map

{"version":3,"file":"index-BnKXXNDZ.js","sources":["../../../app/administration/src/module/sw-product/view/sw-product-detail-context-prices/sw-product-detail-context-prices.html.twig","../../../app/administration/src/module/sw-product/view/sw-product-detail-context-prices/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_product_detail_prices %}\n<div v-if=\"isLoading\">\n    <sw-skeleton />\n    <sw-skeleton />\n</div>\n\n<sw-container\n    v-else\n    rows=\"auto\"\n    columns=\"100%\"\n    class=\"sw-product-detail-context-prices\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_detail_prices_price_card %}\n    <sw-container\n        v-if=\"priceRuleGroupsExists\"\n        columns=\"100%\"\n    >\n        <sw-card\n            v-for=\"(priceGroup, key, index) in priceRuleGroups\"\n            :key=\"priceGroup.ruleId\"\n            class=\"context-price\"\n            position-identifier=\"sw-product-detail-context-prices-context-price\"\n            :class=\"getPriceRuleGroupClass(index)\"\n            :title=\"priceGroup.rule ? priceGroup.rule.name : $tc('sw-product.prices.cardTitlePriceRule')\"\n            :large=\"true\"\n        >\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_prices_price_card_toolbar %}\n            <div class=\"sw-product-detail-context-prices__toolbar\">\n                <sw-container\n                    columns=\"1fr minmax(50px, max-content) minmax(50px, max-content)\"\n                    gap=\"0 10px\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_card_toolbar_rule_selection %}\n                    <sw-select-rule-create\n                        v-if=\"rules.entity\"\n                        id=\"rule\"\n                        :rule-id=\"priceGroup.ruleId\"\n                        :placeholder=\"$tc('sw-product.advancedPrices.selectRule')\"\n                        :disabled=\"!acl.can('product.editor')\"\n                        class=\"sw-product-detail-context-prices__toolbar-selection\"\n                        size=\"small\"\n                        rule-aware-group-key=\"productPrices\"\n                        :restricted-rule-ids=\"Object.keys(priceRuleGroups)\"\n                        :restricted-rule-ids-tooltip-label=\"$tc('sw-product.advancedPrices.ruleAlreadyUsed')\"\n                        @save-rule=\"onRuleChange($event, priceGroup.ruleId)\"\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_card_toolbar_rule_delete %}\n                    <sw-button\n                        v-tooltip=\"{\n                            message: $tc('sw-privileges.tooltip.warning'),\n                            disabled: acl.can('product.editor'),\n                            showOnDisabledElements: true\n                        }\"\n                        size=\"small\"\n                        :disabled=\"!acl.can('product.editor')\"\n                        @click=\"onPriceGroupDelete(priceGroup.ruleId)\"\n                    >\n                        {{ $tc('sw-product.prices.buttonPriceRuleDelete') }}\n                    </sw-button>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_card_toolbar_add_price_rule %}\n                    <sw-button\n                        v-if=\"canAddPriceRule\"\n                        v-tooltip=\"{\n                            message: $tc('sw-privileges.tooltip.warning'),\n                            disabled: acl.can('product.editor'),\n                            showOnDisabledElements: true\n                        }\"\n                        class=\"sw-product-detail-context-prices__toolbar-duplicate\"\n                        size=\"small\"\n                        :disabled=\"priceGroup.ruleId === null || !acl.can('product.editor')\"\n                        @click=\"onPriceGroupDuplicate(priceGroup)\"\n                    >\n                        {{ $tc('sw-product.prices.buttonPriceRuleDuplicate') }}\n                    </sw-button>\n                    {% endblock %}\n\n                </sw-container>\n            </div>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_prices_price_card_price_group_grid %}\n            <sw-data-grid\n                v-if=\"priceGroup.ruleId\"\n                :data-source=\"priceGroup.prices\"\n                :columns=\"pricesColumns\"\n                show-settings\n                :show-selection=\"false\"\n                :compact-mode=\"true\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_card_price_group_grid_settings %}\n                <template #additionalSettings>\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_card_price_group_grid_settings_list_prices %}\n                    <sw-switch-field\n                        size=\"medium\"\n                        :value=\"showListPrices[priceGroup.ruleId] !== false\"\n                        no-margin-top\n                        :label=\"$tc('sw-product.prices.settingShowListPrices')\"\n                        @update:value=\"onChangeShowListPrices($event, priceGroup.ruleId)\"\n                    />\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_card_price_group_grid_type %}\n                <template\n                    #column-type=\"{ item, itemIndex, compact }\"\n                >\n                    <div class=\"sw-product-detail-context-prices__type-label\">\n                        <!-- eslint-disable-next-line vuejs-accessibility/label-has-for -->\n                        <label>{{ $tc('sw-product.advancedPrices.advancedListPricePriceLabel') }}</label>\n                        <!-- eslint-disable-next-line vuejs-accessibility/label-has-for -->\n                        <label v-if=\"showListPrices[priceGroup.ruleId] !== false\">\n                            {{ $tc('sw-product.advancedPrices.advancedListPriceLabel') }}\n                        </label>\n                        <!-- eslint-disable-next-line vuejs-accessibility/label-has-for -->\n                        <label v-if=\"showListPrices[priceGroup.ruleId] !== false\">\n                            {{ $tc('sw-product.advancedPrices.labelRegulationPrice') }}\n                        </label>\n                    </div>\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_card_price_group_grid_quantity_start %}\n                <template\n                    #column-quantityStart=\"{ item, itemIndex, compact }\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_card_price_group_grid_quantity_start_field %}\n                    <sw-number-field\n                        v-model:value=\"item.quantityStart\"\n                        v-tooltip=\"getStartQuantityTooltip(itemIndex, item.quantityStart)\"\n                        :name=\"`${item.ruleId}-${item.quantityStart}-quantityStart`\"\n                        validation=\"required\"\n                        :min=\"priceGroup.prices[itemIndex - 1] ? priceGroup.prices[itemIndex - 1].quantityEnd + 1 : 1\"\n                        :max=\"item.quantityEnd ? item.quantityEnd : null\"\n                        :size=\"compact ? 'small' : 'default'\"\n                        :disabled=\"(itemIndex === 0 && item.quantityStart === 1) || !acl.can('product.editor')\"\n                    />\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_card_price_group_grid_quantity_end %}\n                <template\n                    #column-quantityEnd=\"{ item, itemIndex, compact }\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_card_price_group_grid_quantity_end_field %}\n                    <sw-number-field\n                        v-model:value=\"item.quantityEnd\"\n                        :validation=\"item.quantityEnd === null || item.quantityEnd > item.quantityStart\"\n                        placeholder=\"âˆž\"\n                        :name=\"`${item.ruleId}-${item.quantityStart}-quantityEnd`\"\n                        :min=\"item.quantityStart\"\n                        :max=\"priceGroup.prices[itemIndex + 1] ? priceGroup.prices[itemIndex + 1].quantityStart - 1 : null\"\n                        :size=\"compact ? 'small' : 'default'\"\n                        :disabled=\"!acl.can('product.editor')\"\n                        @update:value=\"onQuantityEndChange(item, priceGroup)\"\n                    />\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_card_price_group_grid_currencies_list %}\n                <template\n                    v-for=\"currency in currencies\"\n                    :key=\"currency.id\"\n                    #[`column-price-${currency.isoCode}`]=\"{ item, column, compact }\"\n                >\n                    <template v-if=\"showListPrices[priceGroup.ruleId] === false\">\n                        <div\n                            class=\"product-detail-context-prices__price-field-wrapper\"\n                        >\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_product_detail_prices_price_card_price_group_grid_currencies_list_inherit_field %}\n                            <sw-inheritance-switch\n                                v-if=\"!currency.isSystemDefault\"\n                                class=\"sw-product-detail-context-prices__inherited-icon\"\n                                :is-inherited=\"isPriceFieldInherited(item, currency)\"\n                                :disabled=\"!acl.can('product.editor')\"\n                                @inheritance-restore=\"onInheritanceRestore(item, currency)\"\n                                @inheritance-remove=\"onInheritanceRemove(item, currency)\"\n                            />\n                            {% endblock %}\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_product_detail_prices_price_card_price_group_grid_currencies_list_price_field %}\n                            <sw-price-field\n                                :value=\"item.price\"\n                                :default-price=\"findDefaultPriceOfRule(item)\"\n                                :tax-rate=\"productTaxRate\"\n                                :label=\"false\"\n                                :compact=\"compact\"\n                                :name=\"`${item.ruleId}-${currency.isoCode}-${item.quantityStart}`\"\n                                :currency=\"currency\"\n                                :disabled=\"!acl.can('product.editor')\"\n                            />\n                            {% endblock %}\n                        </div>\n                    </template>\n\n                    <template v-if=\"showListPrices[priceGroup.ruleId] !== false\">\n                        <div\n                            :key=\"`else-${currency}`\"\n                            class=\"product-detail-context-prices__price-field-wrapper\"\n                        >\n                            <sw-inheritance-switch\n                                v-if=\"!currency.isSystemDefault\"\n                                class=\"sw-product-detail-context-prices__inherited-icon\"\n                                :is-inherited=\"isPriceFieldInherited(item, currency)\"\n                                :disabled=\"!acl.can('product.editor')\"\n                                @inheritance-restore=\"onInheritanceRestore(item, currency)\"\n                                @inheritance-remove=\"onInheritanceRemove(item, currency)\"\n                            />\n                            <sw-list-price-field\n                                :price=\"item.price\"\n                                :default-price=\"findDefaultPriceOfRule(item)\"\n                                :vertical=\"true\"\n                                :tax-rate=\"productTaxRate\"\n                                :label=\"false\"\n                                :compact=\"compact\"\n                                :disabled=\"!acl.can('product.editor')\"\n                                :currency=\"currency\"\n                                hide-purchase-prices\n                            />\n                        </div>\n                    </template>\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_card_price_group_grid_actions %}\n                <template\n                    #actions=\"{ item }\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_card_price_group_grid_actions_delete %}\n                    <sw-context-menu-item\n                        variant=\"danger\"\n                        class=\"product-detail-context-prices__context-delete\"\n                        :disabled=\"!acl.can('product.editor')\"\n                        @click=\"onPriceRuleDelete(item)\"\n                    >\n                        {{ $tc('sw-product.prices.contextMenuDelete') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n\n                </template>\n                {% endblock %}\n\n            </sw-data-grid>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_prices_price_card_price_group_empty_state %}\n            <div\n                v-else\n                class=\"sw-product-detail-context-prices__empty-state\"\n            >\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_card_price_group_empty_state_warning %}\n                <p>{{ $tc('sw-product.advancedPrices.newRuleWarning') }}</p>\n                {% endblock %}\n\n            </div>\n            {% endblock %}\n\n        </sw-card>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_prices_price_card_price_group_add_price_rule %}\n        <sw-container\n            justify=\"center\"\n            columns=\"250x\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_prices_price_card_price_group_add_price_rule_button %}\n            <sw-button\n                v-if=\"canAddPriceRule\"\n                v-tooltip=\"{\n                    message: $tc('sw-privileges.tooltip.warning'),\n                    disabled: acl.can('product.editor'),\n                    showOnDisabledElements: true\n                }\"\n                class=\"sw-product-detail-context-prices__add-new-rule\"\n                variant=\"ghost\"\n                :disabled=\"emptyPriceRuleExists || !acl.can('product.editor')\"\n                size=\"small\"\n                @click=\"onAddNewPriceGroup(null)\"\n            >\n                {{ $tc('sw-product.prices.buttonAddAdditionalPriceRuleGroup') }}\n            </sw-button>\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n\n    </sw-container>\n\n    <sw-card\n        v-else\n        class=\"sw-product-detail-context-prices__empty-state-card\"\n        position-identifier=\"sw-product-detail-context-prices-empty-state-card\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_detail_prices_price_empty_state %}\n        <div class=\"sw-product-detail-context-prices__empty-state\">\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_prices_empty_state_image %}\n            <img\n                :src=\"assetFilter('/administration/static/img/empty-states/products-empty-state.svg')\"\n                alt=\"\"\n            >\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_prices_price_empty_state_text %}\n            <template v-if=\"isChild\">\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_empty_state_text_child %}\n                <template v-if=\"isInherited\">\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_empty_state_text_inherited %}\n                    <p>{{ $tc('sw-product.advancedPrices.advancedPricesInherited') }}</p>\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_empty_state_text_link %}\n                    <router-link\n                        v-if=\"isInherited\"\n                        :to=\"{ name: 'sw.product.detail.prices', params: { id: product.parentId } }\"\n                        class=\"sw-product-detail-context-prices__parent-prices-link\"\n                    >\n                        {{ $tc('sw-product.advancedPrices.linkAdvancedPricesOfParent') }}\n                        <sw-icon\n                            name=\"regular-long-arrow-right\"\n                            small\n                        />\n                    </router-link>\n                    {% endblock %}\n                    {% endblock %}\n                </template>\n\n                <template v-else>\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_product_detail_prices_price_empty_state_text_not_inherited %}\n                    <p>{{ $tc('sw-product.advancedPrices.advancedPricesNotInherited') }}</p>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n            </template>\n\n            <template v-else>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_detail_prices_price_empty_state_text_empty %}\n                <p>{{ $tc('sw-product.advancedPrices.advancedPricesNotExisting') }}</p>\n                {% endblock %}\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_prices_price_empty_state__inherit_switch %}\n            <template v-if=\"isChild\">\n                <div\n                    class=\"sw-product-detail-context-prices__inherit-toggle-wrapper\"\n                    :class=\"{ 'is--inherited': isInherited }\"\n                >\n                    <sw-switch-field\n                        v-model:value=\"isInherited\"\n                        class=\"sw-product-detail-context-prices__inherit-switch\"\n                        :disabled=\"!acl.can('product.editor')\"\n                    />\n                    <sw-inheritance-switch\n                        class=\"sw-product-detail-context-prices__inheritance-icon\"\n                        :is-inherited=\"isInherited\"\n                        :disabled=\"!acl.can('product.editor')\"\n                        @inheritance-restore=\"restoreInheritance\"\n                        @inheritance-remove=\"removeInheritance\"\n                    />\n                    <!-- eslint-disable-next-line vuejs-accessibility/label-has-for -->\n                    <label class=\"sw-product-detail-context-prices__inheritance-label\">\n                        {{ $tc('sw-product.advancedPrices.inheritSwitchLabel') }}\n                    </label>\n                </div>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_detail_prices_price_empty_state_select_rule %}\n            <sw-select-rule-create\n                v-if=\"rules.entity\"\n                id=\"rule\"\n                class=\"sw-product-detail-context-prices__empty-state-select-rule\"\n                :placeholder=\"$tc('sw-product.advancedPrices.selectRule')\"\n                :disabled=\"isInherited || !acl.can('product.editor')\"\n                rule-aware-group-key=\"productPrices\"\n                :restricted-rule-ids=\"Object.keys(priceRuleGroups)\"\n                :restricted-rule-ids-tooltip-label=\"$tc('sw-product.advancedPrices.ruleAlreadyUsed')\"\n                @save-rule=\"onAddNewPriceGroup($event)\"\n            />\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </sw-card>\n\n    {% endblock %}\n</sw-container>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport template from './sw-product-detail-context-prices.html.twig';\nimport './sw-product-detail-context-prices.scss';\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\nconst { mapState, mapGetters } = Cicada.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n        'feature',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        isSetDefaultPrice: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        canSetLoadingRules: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            rules: [],\n            totalRules: 0,\n            isInherited: false,\n            showListPrices: {},\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'product',\n            'parentProduct',\n            'taxes',\n            'currencies',\n        ]),\n\n        ...mapGetters('swProductDetail', [\n            'isLoading',\n            'defaultCurrency',\n            'defaultPrice',\n            'productTaxRate',\n            'isChild',\n        ]),\n\n        priceRepository() {\n            if (this.product && this.product.prices) {\n                return this.repositoryFactory.create(this.product.prices.entity, this.product.prices.source);\n            }\n            return null;\n        },\n\n        ruleRepository() {\n            return this.repositoryFactory.create('rule');\n        },\n\n        priceRuleGroups() {\n            const priceRuleGroups = {};\n\n            if (!this.product.prices) {\n                return priceRuleGroups;\n            }\n\n            if (!this.rules) {\n                return priceRuleGroups;\n            }\n\n            // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n            const sortedPrices = this.product.prices.sort((a, b) => {\n                const aRule = this.findRuleById(a.ruleId);\n                const bRule = this.findRuleById(b.ruleId);\n\n                if (!aRule || !aRule.name || !bRule || !bRule.name) {\n                    return 0;\n                }\n\n                return aRule.name > bRule.name ? 1 : -1;\n            });\n\n            sortedPrices.forEach((rule) => {\n                if (!priceRuleGroups[rule.ruleId]) {\n                    priceRuleGroups[rule.ruleId] = {\n                        ruleId: rule.ruleId,\n                        rule: this.findRuleById(rule.ruleId),\n                        prices: this.findPricesByRuleId(rule.ruleId),\n                    };\n                }\n            });\n\n            // Sort prices\n            Object.values(priceRuleGroups).forEach((priceRule) => {\n                priceRule.prices.sort((a, b) => {\n                    return a.quantityStart - b.quantityStart;\n                });\n            });\n\n            return priceRuleGroups;\n        },\n\n        priceRuleGroupsExists() {\n            return Object.values(this.priceRuleGroups).length > 0;\n        },\n\n        canAddPriceRule() {\n            const usedRules = Object.keys(this.priceRuleGroups).length;\n            const availableRules = this.rules.length;\n\n            return usedRules !== availableRules;\n        },\n\n        emptyPriceRuleExists() {\n            return typeof this.priceRuleGroups.null !== 'undefined';\n        },\n\n        isLoaded() {\n            return !this.isLoading && this.currencies && this.taxes && this.product;\n        },\n\n        currencyColumns() {\n            this.sortCurrencies();\n\n            return this.currencies.map((currency) => {\n                return {\n                    property: `price-${currency.isoCode}`,\n                    label: currency.translated.name || currency.name,\n                    visible: true,\n                    allowResize: true,\n                    primary: false,\n                    rawData: false,\n                    width: '270px',\n                    multiLine: true,\n                };\n            });\n        },\n\n        pricesColumns() {\n            const priceColumns = [\n                {\n                    property: 'quantityStart',\n                    label: 'sw-product.advancedPrices.columnFrom',\n                    visible: true,\n                    allowResize: true,\n                    primary: true,\n                    rawData: false,\n                    width: '120px',\n                },\n                {\n                    property: 'quantityEnd',\n                    label: 'sw-product.advancedPrices.columnTo',\n                    visible: true,\n                    allowResize: true,\n                    primary: true,\n                    rawData: false,\n                    width: '120px',\n                },\n                {\n                    property: 'type',\n                    label: 'sw-product.advancedPrices.columnType',\n                    visible: true,\n                    allowResize: true,\n                    width: '250px',\n                    multiLine: true,\n                },\n            ];\n\n            return [\n                ...priceColumns,\n                ...this.currencyColumns,\n            ];\n        },\n\n        assetFilter() {\n            return Cicada.Filter.getByName('asset');\n        },\n    },\n\n    watch: {\n        'product.prices': {\n            handler(value) {\n                if (!value) {\n                    return;\n                }\n\n                this.isInherited = this.isChild && !this.product.prices.total;\n            },\n            immediate: true,\n        },\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        mountedComponent() {\n            const ruleCriteria = new Criteria(1, 500);\n            ruleCriteria.addFilter(\n                Criteria.multi('OR', [\n                    Criteria.contains('rule.moduleTypes.types', 'price'),\n                    Criteria.equals('rule.moduleTypes', null),\n                ]),\n            );\n\n            if (this.canSetLoadingRules) {\n                Cicada.State.commit('swProductDetail/setLoading', [\n                    'rules',\n                    true,\n                ]);\n            }\n            this.ruleRepository.search(ruleCriteria).then((res) => {\n                this.rules = res;\n                this.totalRules = res.total;\n\n                Cicada.State.commit('swProductDetail/setLoading', [\n                    'rules',\n                    false,\n                ]);\n            });\n\n            this.isInherited = this.isChild && !this.product.prices.total;\n        },\n\n        sortCurrencies() {\n            this.currencies.sort((a, b) => {\n                if (a.isSystemDefault) {\n                    return -1;\n                }\n                if (b.isSystemDefault) {\n                    return 1;\n                }\n                if (a.translated.name < b.translated.name) {\n                    return -1;\n                }\n                if (a.translated.name > b.translated.name) {\n                    return 1;\n                }\n                return 0;\n            });\n        },\n\n        onRuleChange(value, ruleId) {\n            const changeRules = () => {\n                this.product.prices.forEach((priceRule) => {\n                    if (priceRule.ruleId === ruleId) {\n                        priceRule.ruleId = value;\n                    }\n                });\n            };\n\n            /*\n             * Adding a $nextTick here for the case when the user creates a new rule.\n             * this $nextTick is needed because vue first needs to remove the modal from the DOM.\n             * without it this would not happen.\n             */\n            this.$nextTick(() => {\n                changeRules();\n            });\n        },\n\n        async onAddNewPriceGroup(ruleId = null) {\n            /*\n             * Adding a nextTick to wait until DOM has been updated. We do this because of the rule create modal.\n             * Otherwise the modal won't disappear.\n             */\n            await this.$nextTick();\n\n            if (this.emptyPriceRuleExists) {\n                return;\n            }\n\n            const newPriceRule = this.priceRepository.create();\n\n            newPriceRule.ruleId = ruleId;\n            newPriceRule.productId = this.product.id;\n            newPriceRule.quantityStart = 1;\n            newPriceRule.quantityEnd = null;\n            newPriceRule.currencyId = this.defaultCurrency.id;\n            newPriceRule.price = [\n                {\n                    currencyId: this.defaultCurrency.id,\n                    gross: this.isSetDefaultPrice ? 0 : this.defaultPrice.gross,\n                    linked: this.defaultPrice.linked,\n                    net: this.isSetDefaultPrice ? 0 : this.defaultPrice.net,\n                    listPrice: null,\n                },\n            ];\n\n            if (this.defaultPrice.listPrice) {\n                newPriceRule.price[0].listPrice = {\n                    currencyId: this.defaultCurrency.id,\n                    gross: this.defaultPrice.listPrice.gross,\n                    linked: this.defaultPrice.listPrice.linked,\n                    net: this.defaultPrice.listPrice.net,\n                };\n            }\n\n            this.product.prices.add(newPriceRule);\n\n            await this.$nextTick();\n\n            const scrollableArea = this.$parent.$el.children.item(0);\n\n            if (scrollableArea) {\n                scrollableArea.scrollTo({\n                    top: scrollableArea.scrollHeight,\n                    behavior: 'smooth',\n                });\n            }\n        },\n\n        onPriceGroupDelete(ruleId) {\n            const allPriceRules = this.product.prices.map((priceRule) => {\n                return { id: priceRule.id, ruleId: priceRule.ruleId };\n            });\n\n            allPriceRules.forEach((priceRule) => {\n                if (ruleId !== priceRule.ruleId) {\n                    return;\n                }\n\n                this.product.prices.remove(priceRule.id);\n            });\n        },\n\n        onPriceGroupDuplicate(priceGroup) {\n            if (typeof this.priceRuleGroups.null !== 'undefined') {\n                return;\n            }\n\n            // duplicate each price rule\n            priceGroup.prices.forEach((price) => {\n                this.duplicatePriceRule(price, null);\n            });\n        },\n\n        onPriceRuleDelete(priceRule) {\n            // get the priceRuleGroup for the priceRule\n            const matchingPriceRuleGroup = this.priceRuleGroups[priceRule.ruleId];\n\n            // if it is the only item in the priceRuleGroup\n            if (matchingPriceRuleGroup.prices.length <= 1) {\n                this.createNotificationError({\n                    message: this.$tc('sw-product.advancedPrices.deletionNotPossibleMessage'),\n                });\n\n                return;\n            }\n\n            // get actual rule index\n            const actualRuleIndex = matchingPriceRuleGroup.prices.indexOf(priceRule);\n\n            // if it is the last item\n            if (typeof priceRule.quantityEnd === 'undefined' || priceRule.quantityEnd === null) {\n                // get previous rule\n                const previousRule = matchingPriceRuleGroup.prices[actualRuleIndex - 1];\n\n                // set the quantityEnd from the previous rule to null\n                previousRule.quantityEnd = null;\n            } else {\n                // get next rule\n                const nextRule = matchingPriceRuleGroup.prices[actualRuleIndex + 1];\n\n                // set the quantityStart from the next rule to the quantityStart from the actual rule\n                nextRule.quantityStart = priceRule.quantityStart;\n            }\n\n            // delete rule\n            this.product.prices.remove(priceRule.id);\n        },\n\n        onInheritanceRestore(rule, currency) {\n            // remove price from rule.price with the currency id\n            const indexOfPrice = rule.price.findIndex((price) => price.currencyId === currency.id);\n            rule.price.splice(indexOfPrice, 1);\n        },\n\n        onInheritanceRemove(rule, currency) {\n            // create new price based on the default price\n            const defaultPrice = this.findDefaultPriceOfRule(rule);\n            const newPrice = {\n                currencyId: currency.id,\n                gross: this.convertPrice(defaultPrice.gross, currency),\n                linked: defaultPrice.linked,\n                net: this.convertPrice(defaultPrice.net, currency),\n                listPrice: null,\n            };\n\n            if (defaultPrice.listPrice) {\n                newPrice.listPrice = {\n                    currencyId: currency.id,\n                    gross: this.convertPrice(defaultPrice.listPrice.gross, currency),\n                    linked: defaultPrice.listPrice.linked,\n                    net: this.convertPrice(defaultPrice.listPrice.net, currency),\n                };\n            }\n\n            // add price to rule.price\n            this.$set(rule.price, rule.price.length, newPrice);\n        },\n\n        isPriceFieldInherited(rule, currency) {\n            return rule.price.findIndex((price) => price.currencyId === currency.id) < 0;\n        },\n\n        convertPrice(value, currency) {\n            const calculatedPrice = value * currency.factor;\n            const priceRounded = calculatedPrice.toFixed(currency.decimalPrecision);\n            return Number(priceRounded);\n        },\n\n        findRuleById(ruleId) {\n            return this.rules.find((rule) => {\n                return rule.id === ruleId;\n            });\n        },\n\n        findPricesByRuleId(ruleId) {\n            return this.product.prices.filter((item) => {\n                return item.ruleId === ruleId;\n            });\n        },\n\n        findDefaultPriceOfRule(rule) {\n            return rule.price.find((price) => price.currencyId === this.defaultCurrency.id);\n        },\n\n        onQuantityEndChange(price, priceGroup) {\n            // when not last price\n            if (priceGroup.prices.indexOf(price) + 1 !== priceGroup.prices.length) {\n                return;\n            }\n\n            this.createPriceRule(priceGroup);\n        },\n\n        createPriceRule(priceGroup) {\n            // create new price rule\n            const newPriceRule = this.priceRepository.create();\n            newPriceRule.productId = this.product.id;\n            newPriceRule.ruleId = priceGroup.ruleId;\n\n            const highestEndValue = Math.max(...priceGroup.prices.map((price) => price.quantityEnd));\n            newPriceRule.quantityStart = highestEndValue + 1;\n\n            newPriceRule.price = [\n                {\n                    currencyId: this.defaultCurrency.id,\n                    gross: this.defaultPrice.gross,\n                    linked: this.defaultPrice.linked,\n                    net: this.defaultPrice.net,\n                    listPrice: null,\n                },\n            ];\n\n            if (this.defaultPrice.listPrice) {\n                newPriceRule.price[0].listPrice = {\n                    currencyId: this.defaultCurrency.id,\n                    gross: this.defaultPrice.listPrice ? this.defaultPrice.listPrice.gross : null,\n                    linked: this.defaultPrice.listPrice ? this.defaultPrice.listPrice.linked : true,\n                    net: this.defaultPrice.listPrice ? this.defaultPrice.listPrice.net : null,\n                };\n            }\n\n            this.product.prices.add(newPriceRule);\n        },\n\n        canCreatePriceRule(priceGroup) {\n            const emptyPrices = priceGroup.prices.filter((price) => {\n                return !price.quantityEnd;\n            });\n\n            return !!emptyPrices.length;\n        },\n\n        duplicatePriceRule(referencePrice, ruleId = null) {\n            const newPriceRule = this.priceRepository.create();\n\n            newPriceRule.productId = referencePrice.productId;\n            newPriceRule.quantityEnd = referencePrice.quantityEnd;\n            newPriceRule.quantityStart = referencePrice.quantityStart;\n            newPriceRule.ruleId = ruleId;\n\n            // add prices\n            newPriceRule.price = [];\n\n            referencePrice.price.forEach((price, index) => {\n                this.$set(newPriceRule.price, index, { ...price });\n            });\n\n            this.product.prices.add(newPriceRule);\n        },\n\n        getPriceRuleGroupClass(number) {\n            return [\n                `context-price-group-${number}`,\n            ];\n        },\n\n        restoreInheritance() {\n            this.isInherited = true;\n        },\n\n        removeInheritance() {\n            this.isInherited = false;\n        },\n\n        onChangeShowListPrices(value, ruleId) {\n            this.$set(this.showListPrices, ruleId, value);\n        },\n\n        getStartQuantityTooltip(itemIndex, quantity) {\n            return {\n                message: this.$tc('sw-product.advancedPrices.advancedPriceDisabledTooltip'),\n                width: 275,\n                showDelay: 200,\n                disabled: itemIndex !== 0 || quantity !== 1,\n            };\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","mapState","mapGetters","index","priceRuleGroups","a","b","aRule","bRule","rule","priceRule","usedRules","availableRules","currency","value","ruleCriteria","res","ruleId","changeRules","newPriceRule","scrollableArea","priceGroup","price","matchingPriceRuleGroup","actualRuleIndex","previousRule","nextRule","indexOfPrice","defaultPrice","newPrice","priceRounded","item","highestEndValue","referencePrice","number","itemIndex","quantity"],"mappings":"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"}
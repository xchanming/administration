{"version":3,"file":"index-udGp8baI.js","sources":["../../../app/administration/src/app/component/rule/sw-condition-unit-menu/sw-condition-unit-menu.html.twig","../../../app/administration/src/app/component/rule/sw-condition-unit-menu/index.js"],"sourcesContent":["<div\n    class=\"sw-condition-unit-menu__wrapper\"\n>\n    <button\n        v-if=\"defaultUnit\"\n        class=\"sw-condition-unit-menu sw-condition-unit-menu__label\"\n        @click=\"showMenu = !showMenu\"\n        @keydown.esc=\"showMenu = false\"\n    >\n        <span>\n            {{ unitSnippet }}\n        </span>\n\n        <sw-icon\n            class=\"sw-condition-unit-menu__icon\"\n            name=\"solid-chevron-down-s\"\n        />\n    </button>\n    <div\n        v-else\n        class=\"sw-condition-unit-menu__label\"\n    >\n        {{ $tc(`global.sw-condition-generic.units.${type}`) }}\n    </div>\n\n    <sw-popover\n        v-if=\"showMenu && defaultUnit\"\n        :z-index=\"10\"\n    >\n        <!-- eslint-disable-next-line vuejs-accessibility/mouse-events-have-key-events -->\n        <div\n            v-click-outside=\"() => showMenu = false\"\n            class=\"sw-condition-unit-menu__menu\"\n            role=\"menu\"\n            tabindex=\"0\"\n            @mouseover=\"hoveringOverMenu = true\"\n            @mouseout=\"hoveringOverMenu = false\"\n        >\n            <template\n                v-for=\"(item) in unitOptions\"\n                :key=\"item.value\"\n            >\n                <div\n                    class=\"sw-condition-unit-menu__menu-item\"\n                    role=\"menuitem\"\n                    tabindex=\"0\"\n                    @click=\"onUnitChange(item.value)\"\n                    @keyup.enter=\"onUnitChange(item.value)\"\n                >\n                    <span\n                        v-if=\"isSelected(item.value)\"\n                        class=\"sw-condition-unit-menu__menu-item__selected-label\"\n                    >{{ item.label }}</span>\n                    <span\n                        v-else\n                        class=\"sw-condition-unit-menu__menu-item__label\"\n                    >\n                        {{ item.label }}\n                    </span>\n                    <span class=\"sw-condition-unit-menu__menu-item__shortcut\">\n                        {{ item.shortLabel }}\n                    </span>\n                </div>\n            </template>\n        </div>\n    </sw-popover>\n</div>\n","import template from './sw-condition-unit-menu.html.twig';\nimport './sw-condition-unit-menu.scss';\nimport convertUnit, { baseUnits } from '../../../../module/sw-settings-rule/utils/unit-conversion.utils';\n\n/**\n * @private\n */\nCicada.Component.register('sw-condition-unit-menu', {\n    template,\n\n    emits: [\n        'set-default-unit',\n        'change-unit',\n    ],\n\n    props: {\n        type: {\n            type: String,\n            required: true,\n        },\n        value: {\n            type: [\n                Number,\n                Date,\n            ],\n            default: undefined,\n            required: false,\n        },\n        visibleValue: {\n            type: [\n                Number,\n                Date,\n            ],\n            default: undefined,\n            required: false,\n        },\n    },\n\n    data() {\n        return {\n            showMenu: false,\n            selectedUnit: null,\n            hoveringOverMenu: false,\n        };\n    },\n\n    computed: {\n        defaultUnit() {\n            const defaultUnit = baseUnits[this.type];\n            this.$emit('set-default-unit', defaultUnit);\n\n            return defaultUnit;\n        },\n\n        unitSnippet() {\n            if (!this.defaultUnit) {\n                return this.$tc(`global.sw-condition-generic.units.${this.type}`);\n            }\n\n            return this.$tc(`global.sw-condition-generic.units.short.${this.selectedUnit || this.defaultUnit}`);\n        },\n\n        unitOptions() {\n            switch (this.type) {\n                case 'weight':\n                    return [\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.g'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.g'),\n                            value: 'g',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.kg'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.kg'),\n                            value: 'kg',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.oz'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.oz'),\n                            value: 'oz',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.lb'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.lb'),\n                            value: 'lb',\n                        },\n                    ];\n                case 'dimension':\n                    return [\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.mm'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.mm'),\n                            value: 'mm',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.cm'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.cm'),\n                            value: 'cm',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.m'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.m'),\n                            value: 'm',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.km'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.km'),\n                            value: 'km',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.in'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.in'),\n                            value: 'in',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.ft'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.ft'),\n                            value: 'ft',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.mi'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.mi'),\n                            value: 'mi',\n                        },\n                    ];\n                case 'time':\n                    return [\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.min'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.min'),\n                            value: 'min',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.hr'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.hr'),\n                            value: 'hr',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.d'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.d'),\n                            value: 'd',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.wk'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.wk'),\n                            value: 'wk',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.mth'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.mth'),\n                            value: 'mth',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.yr'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.yr'),\n                            value: 'yr',\n                        },\n                    ];\n                case 'volume':\n                    return [\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.mm3'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.mm3'),\n                            value: 'mm3',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.cm3'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.cm3'),\n                            value: 'cm3',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.m3'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.m3'),\n                            value: 'm3',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.in3'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.in3'),\n                            value: 'in3',\n                        },\n                        {\n                            label: this.$tc('global.sw-condition-generic.units.ft3'),\n                            shortLabel: this.$tc('global.sw-condition-generic.units.short.ft3'),\n                            value: 'ft3',\n                        },\n                    ];\n                default:\n                    return [];\n            }\n        },\n    },\n\n    methods: {\n        onUnitChange(unit) {\n            const value = this.getConvertedValue(unit);\n\n            this.$emit('change-unit', {\n                value,\n                unit: unit,\n            });\n\n            this.selectedUnit = unit;\n            this.showMenu = false;\n        },\n\n        getConvertedValue(unit) {\n            // convert value to new unit or set to base value if selected unit is the default unit\n            const value =\n                unit === this.defaultUnit\n                    ? this.value\n                    : convertUnit(this.value, {\n                          from: this.defaultUnit,\n                          to: unit,\n                      });\n\n            if (Number.isNaN(value)) {\n                return this.value;\n            }\n\n            return value;\n        },\n\n        isSelected(unit) {\n            // mark the first unit option as selected if no value is set\n            if (!this.selectedUnit && this.defaultUnit === unit) {\n                return true;\n            }\n\n            return this.selectedUnit === unit;\n        },\n    },\n});\n"],"names":["template","defaultUnit","baseUnits","unit","value","convertUnit"],"mappings":"sHAAA,MAAeA,EAAA,ktCCOf,OAAO,UAAU,SAAS,yBAA0B,CAChD,SAAAA,EAEA,MAAO,CACH,mBACA,aACH,EAED,MAAO,CACH,KAAM,CACF,KAAM,OACN,SAAU,EACb,EACD,MAAO,CACH,KAAM,CACF,OACA,IACH,EACD,QAAS,OACT,SAAU,EACb,EACD,aAAc,CACV,KAAM,CACF,OACA,IACH,EACD,QAAS,OACT,SAAU,EACb,CACJ,EAED,MAAO,CACH,MAAO,CACH,SAAU,GACV,aAAc,KACd,iBAAkB,EAC9B,CACK,EAED,SAAU,CACN,aAAc,CACV,MAAMC,EAAcC,EAAU,KAAK,IAAI,EACvC,YAAK,MAAM,mBAAoBD,CAAW,EAEnCA,CACV,EAED,aAAc,CACV,OAAK,KAAK,YAIH,KAAK,IAAI,2CAA2C,KAAK,cAAgB,KAAK,WAAW,EAAE,EAHvF,KAAK,IAAI,qCAAqC,KAAK,IAAI,EAAE,CAIvE,EAED,aAAc,CACV,OAAQ,KAAK,KAAI,CACb,IAAK,SACD,MAAO,CACH,CACI,MAAO,KAAK,IAAI,qCAAqC,EACrD,WAAY,KAAK,IAAI,2CAA2C,EAChE,MAAO,GACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,CACzB,EACgB,IAAK,YACD,MAAO,CACH,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,qCAAqC,EACrD,WAAY,KAAK,IAAI,2CAA2C,EAChE,MAAO,GACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,CACzB,EACgB,IAAK,OACD,MAAO,CACH,CACI,MAAO,KAAK,IAAI,uCAAuC,EACvD,WAAY,KAAK,IAAI,6CAA6C,EAClE,MAAO,KACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,qCAAqC,EACrD,WAAY,KAAK,IAAI,2CAA2C,EAChE,MAAO,GACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,uCAAuC,EACvD,WAAY,KAAK,IAAI,6CAA6C,EAClE,MAAO,KACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,CACzB,EACgB,IAAK,SACD,MAAO,CACH,CACI,MAAO,KAAK,IAAI,uCAAuC,EACvD,WAAY,KAAK,IAAI,6CAA6C,EAClE,MAAO,KACV,EACD,CACI,MAAO,KAAK,IAAI,uCAAuC,EACvD,WAAY,KAAK,IAAI,6CAA6C,EAClE,MAAO,KACV,EACD,CACI,MAAO,KAAK,IAAI,sCAAsC,EACtD,WAAY,KAAK,IAAI,4CAA4C,EACjE,MAAO,IACV,EACD,CACI,MAAO,KAAK,IAAI,uCAAuC,EACvD,WAAY,KAAK,IAAI,6CAA6C,EAClE,MAAO,KACV,EACD,CACI,MAAO,KAAK,IAAI,uCAAuC,EACvD,WAAY,KAAK,IAAI,6CAA6C,EAClE,MAAO,KACV,CACzB,EACgB,QACI,MAAO,EACd,CACJ,CACJ,EAED,QAAS,CACL,aAAaE,EAAM,CACf,MAAMC,EAAQ,KAAK,kBAAkBD,CAAI,EAEzC,KAAK,MAAM,cAAe,CACtB,MAAAC,EACA,KAAMD,CACtB,CAAa,EAED,KAAK,aAAeA,EACpB,KAAK,SAAW,EACnB,EAED,kBAAkBA,EAAM,CAEpB,MAAMC,EACFD,IAAS,KAAK,YACR,KAAK,MACLE,EAAY,KAAK,MAAO,CACpB,KAAM,KAAK,YACX,GAAIF,CAC9B,CAAuB,EAEX,OAAI,OAAO,MAAMC,CAAK,EACX,KAAK,MAGTA,CACV,EAED,WAAWD,EAAM,CAEb,MAAI,CAAC,KAAK,cAAgB,KAAK,cAAgBA,EACpC,GAGJ,KAAK,eAAiBA,CAChC,CACJ,CACL,CAAC"}
{"version":3,"file":"index-C-vzWrQg.js","sources":["../../../app/administration/src/app/component/utils/sw-verify-user-modal/sw-verify-user-modal.html.twig","../../../app/administration/src/app/component/utils/sw-verify-user-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_user_detail_content_confirm_password_modal %}\n<sw-modal\n    :title=\"$tc('sw-users-permissions.users.user-detail.passwordConfirmation.titleConfirmPasswordModal')\"\n    variant=\"small\"\n    @modal-close=\"onCloseConfirmPasswordModal\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_user_detail_content_confirm_password_modal_input__confirm_password %}\n    <sw-password-field\n        v-model:value=\"confirmPassword\"\n        class=\"sw-settings-user-detail__confirm-password\"\n        name=\"sw-field--confirm-password\"\n        :password-toggle-able=\"true\"\n        autocomplete=\"current-password\"\n        :label=\"$tc('sw-users-permissions.users.user-detail.passwordConfirmation.labelConfirmPassword')\"\n        :placeholder=\"$tc('sw-users-permissions.users.user-detail.passwordConfirmation.placeholderConfirmPassword')\"\n        @keypress.enter=\"onSubmitConfirmPassword\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_user_detail_content_confirm_password_modal_footer %}\n    <template #modal-footer>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_user_detail_content_confirm_password_modal_actions_cancel %}\n        <sw-button\n            size=\"small\"\n            @click=\"onCloseConfirmPasswordModal\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_user_detail_content_confirm_password_modal_actions_change %}\n        <sw-button\n            variant=\"primary\"\n            :disabled=\"!confirmPassword\"\n            size=\"small\"\n            @click=\"onSubmitConfirmPassword\"\n        >\n            {{ $tc('sw-users-permissions.users.user-detail.passwordConfirmation.labelButtonConfirm') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n","import template from './sw-verify-user-modal.html.twig';\n\nconst { Component, Mixin } = Cicada;\n\n/**\n * @private\n */\nComponent.register('sw-verify-user-modal', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'loginService',\n    ],\n\n    emits: [\n        'verified',\n        'close',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    data() {\n        return {\n            confirmPassword: '',\n        };\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {},\n\n        onSubmitConfirmPassword() {\n            return this.loginService\n                .verifyUserToken(this.confirmPassword)\n                .then((verifiedToken) => {\n                    const context = { ...Cicada.Context.api };\n                    context.authToken.access = verifiedToken;\n\n                    const authObject = {\n                        ...this.loginService.getBearerAuthentication(),\n                        ...{\n                            access: verifiedToken,\n                        },\n                    };\n\n                    this.loginService.setBearerAuthentication(authObject);\n\n                    this.$emit('verified', context);\n                })\n                .catch(() => {\n                    this.createNotificationError({\n                        title: this.$tc(\n                            'sw-users-permissions.users.user-detail.passwordConfirmation.notificationPasswordErrorTitle',\n                        ),\n                        message: this.$tc(\n                            'sw-users-permissions.users.user-detail.passwordConfirmation.notificationPasswordErrorMessage',\n                        ),\n                    });\n                })\n                .finally(() => {\n                    this.confirmPassword = '';\n                    this.$emit('close');\n                });\n        },\n\n        onCloseConfirmPasswordModal() {\n            this.confirmPassword = '';\n            this.$emit('close');\n        },\n    },\n});\n"],"names":["template","Component","Mixin","verifiedToken","context","authObject"],"mappings":"AAAA,MAAeA,EAAA,w7CCET,CAAE,UAAAC,EAAW,MAAAC,CAAO,EAAG,OAK7BD,EAAU,SAAS,uBAAwB,CACvC,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,cACH,EAED,MAAO,CACH,WACA,OACH,EAED,OAAQ,CACJE,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,MAAO,CACH,gBAAiB,EAC7B,CACK,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CAAE,EAErB,yBAA0B,CACtB,OAAO,KAAK,aACP,gBAAgB,KAAK,eAAe,EACpC,KAAMC,GAAkB,CACrB,MAAMC,EAAU,CAAE,GAAG,OAAO,QAAQ,GAAG,EACvCA,EAAQ,UAAU,OAASD,EAE3B,MAAME,EAAa,CACf,GAAG,KAAK,aAAa,wBAAyB,EAE1C,OAAQF,CAEpC,EAEoB,KAAK,aAAa,wBAAwBE,CAAU,EAEpD,KAAK,MAAM,WAAYD,CAAO,CAClD,CAAiB,EACA,MAAM,IAAM,CACT,KAAK,wBAAwB,CACzB,MAAO,KAAK,IACR,4FACH,EACD,QAAS,KAAK,IACV,8FACH,CACzB,CAAqB,CACrB,CAAiB,EACA,QAAQ,IAAM,CACX,KAAK,gBAAkB,GACvB,KAAK,MAAM,OAAO,CACtC,CAAiB,CACR,EAED,6BAA8B,CAC1B,KAAK,gBAAkB,GACvB,KAAK,MAAM,OAAO,CACrB,CACJ,CACL,CAAC"}
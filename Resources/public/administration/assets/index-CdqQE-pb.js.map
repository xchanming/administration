{"version":3,"file":"index-CdqQE-pb.js","sources":["../../../app/administration/src/module/sw-cms/elements/form/config/sw-cms-el-config-form.html.twig","../../../app/administration/src/module/sw-cms/elements/form/config/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_el_config_form %}\n<sw-tabs\n    position-identifier=\"sw-cms-element-config-form\"\n    class=\"sw-cms-el-config-form__tabs\"\n    default-item=\"content\"\n>\n\n    <template #default=\"{ active }\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_el_config_form_tab_content %}\n        <sw-tabs-item\n            :title=\"$tc('sw-cms.elements.general.config.tab.content')\"\n            name=\"content\"\n            :active-tab=\"active\"\n        >\n            {{ $tc('sw-cms.elements.general.config.tab.content') }}\n        </sw-tabs-item>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_el_form_config_tab_options %}\n        <sw-tabs-item\n            v-if=\"element.config.type.value === 'contact'\"\n            :title=\"$tc('sw-cms.elements.general.config.tab.settings')\"\n            name=\"options\"\n            :active-tab=\"active\"\n        >\n            {{ $tc('sw-cms.elements.general.config.tab.settings') }}\n        </sw-tabs-item>\n        {% endblock %}\n    </template>\n\n    <template\n        #content=\"{ active }\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_el_form_config_content %}\n        <sw-container\n            v-if=\"active === 'content'\"\n            class=\"sw-cms-el-config-form__tab-content\"\n        >\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_el_form_config_content_form_type %}\n            <sw-select-field\n                v-model:value=\"element.config.type.value\"\n                :label=\"$tc('sw-cms.elements.form.config.label.type')\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_el_form_config_content_form_type_options %}\n                <option\n                    value=\"\"\n                    disabled\n                >\n                    {{ $tc('sw-cms.elements.form.config.label.type') }}\n                </option>\n                <option value=\"contact\">\n                    {{ $tc('sw-cms.elements.form.config.label.typeContact') }}\n                </option>\n                <option value=\"newsletter\">\n                    {{ $tc('sw-cms.elements.form.config.label.typeNewsletter') }}\n                </option>\n                {% endblock %}\n            </sw-select-field>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_el_form_config_content_form_title %}\n            <sw-text-field\n                v-model:value=\"element.config.title.value\"\n                :label=\"$tc('sw-cms.elements.form.config.label.title')\"\n            />\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_el_form_config_content_form_confirmation_text %}\n            <sw-textarea-field\n                v-if=\"element.config.type.value === 'contact'\"\n                v-model:value=\"element.config.confirmationText.value\"\n                :label=\"$tc('sw-cms.elements.form.config.label.confirmationText')\"\n            />\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_el_form_config_options %}\n        <sw-container\n            v-else-if=\"active === 'options' && element.config.type.value === 'contact'\"\n            class=\"sw-cms-el-config-form__tab-options\"\n        >\n            <sw-tagged-field\n                :value=\"element.config.mailReceiver.value\"\n                :class=\"getLastMailClass\"\n                :label=\"$tc('sw-cms.elements.form.config.label.receiverEmail')\"\n                name=\"mailReceiver\"\n                placeholder=\"john@doe.com\"\n                @update:value=\"updateMailReceiver\"\n            />\n        </sw-container>\n        {% endblock %}\n    </template>\n</sw-tabs>\n{% endblock %}\n","import template from './sw-cms-el-config-form.html.twig';\nimport './sw-cms-el-config-form.scss';\n\nconst { Mixin } = Cicada;\n\n/**\n * @private\n * @package discovery\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['systemConfigApiService'],\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    computed: {\n        getLastMailClass() {\n            if (this.element.config.mailReceiver.value.length === 1) {\n                return 'is--last';\n            }\n            return '';\n        },\n    },\n\n    created() {\n        this.createdComponent();\n        this.setShopMail();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('form');\n        },\n\n        async getShopMail() {\n            const response = await this.systemConfigApiService.getValues('core.basicInformation');\n            return response['core.basicInformation.email'];\n        },\n\n        async setShopMail() {\n            const shopMail = await this.getShopMail();\n\n            if (\n                this.element.config.defaultMailReceiver.value &&\n                !this.element.config.mailReceiver.value.includes(shopMail)\n            ) {\n                this.element.config.mailReceiver.value.push(shopMail);\n            }\n        },\n\n        async updateMailReceiver(value) {\n            this.element.config.mailReceiver.value = value;\n\n            if (!this.validateMail()) {\n                return;\n            }\n\n            const shopMail = await this.getShopMail();\n            this.element.config.defaultMailReceiver.value = this.element.config.mailReceiver.value.includes(shopMail);\n        },\n\n        validateMail() {\n            const lastMail = this.element.config.mailReceiver.value.at(-1);\n\n            if (lastMail) {\n                if (!lastMail.includes('@')) {\n                    this.element.config.mailReceiver.value.pop();\n                    return false;\n                }\n            }\n            return true;\n        },\n    },\n};\n"],"names":["template","Mixin","index","shopMail","value","lastMail"],"mappings":"AAAA,MAAeA,EAAA,43ECGT,CAAE,MAAAC,CAAO,EAAG,OAMHC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,wBAAwB,EAEjC,OAAQ,CACJC,EAAM,UAAU,aAAa,CAChC,EAED,SAAU,CACN,kBAAmB,CACf,OAAI,KAAK,QAAQ,OAAO,aAAa,MAAM,SAAW,EAC3C,WAEJ,EACV,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,EACrB,KAAK,YAAW,CACnB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAkB,MAAM,CAChC,EAED,MAAM,aAAc,CAEhB,OADiB,MAAM,KAAK,uBAAuB,UAAU,uBAAuB,GACpE,6BAA6B,CAChD,EAED,MAAM,aAAc,CAChB,MAAME,EAAW,MAAM,KAAK,cAGxB,KAAK,QAAQ,OAAO,oBAAoB,OACxC,CAAC,KAAK,QAAQ,OAAO,aAAa,MAAM,SAASA,CAAQ,GAEzD,KAAK,QAAQ,OAAO,aAAa,MAAM,KAAKA,CAAQ,CAE3D,EAED,MAAM,mBAAmBC,EAAO,CAG5B,GAFA,KAAK,QAAQ,OAAO,aAAa,MAAQA,EAErC,CAAC,KAAK,eACN,OAGJ,MAAMD,EAAW,MAAM,KAAK,cAC5B,KAAK,QAAQ,OAAO,oBAAoB,MAAQ,KAAK,QAAQ,OAAO,aAAa,MAAM,SAASA,CAAQ,CAC3G,EAED,cAAe,CACX,MAAME,EAAW,KAAK,QAAQ,OAAO,aAAa,MAAM,GAAG,EAAE,EAE7D,OAAIA,GACI,CAACA,EAAS,SAAS,GAAG,GACtB,KAAK,QAAQ,OAAO,aAAa,MAAM,IAAG,EACnC,IAGR,EACV,CACJ,CACL"}
const l=`{% block sw_order_detail_details %} <div class="sw-order-detail-details"> {% block sw_order_detail_details_payment %} <sw-order-details-state-card v-if="transaction" :title="$tc('sw-order.detailsTab.labelTransactionCard')" :order="order" :entity="transaction" :state-label="$tc('sw-order.stateCard.headlineTransactionState')" :disabled="!acl.can('order.editor') || undefined" @show-status-history="showStateHistoryModal = true" @save-edits="onSaveEdits" > {% block sw_order_detail_details_payment_billing_address %} <sw-order-address-selection class="sw-order-detail-details__billing-address" type="billing" :address="billingAddress" :address-id="selectedBillingAddressId" :disabled="!acl.can('order.editor') || undefined" :label="$tc('sw-order.createBase.detailsBody.labelBillingAddress')" @change-address="onChangeOrderAddress" /> {% endblock %} {% block sw_order_detail_details_payment_method_select %} <sw-entity-single-select v-model:value="transaction.paymentMethodId" entity="payment_method" label-property="distinguishableName" disabled :criteria="paymentMethodCriteria" :label="$tc('sw-order.createBase.detailsFooter.labelPaymentMethod')" :placeholder="$tc('sw-order.createBase.detailsFooter.placeholderPaymentMethod')" show-clearable-button /> {% endblock %} </sw-order-details-state-card> {% endblock %} {% block sw_order_detail_details_shipping %} <sw-order-details-state-card v-if="delivery" :title="$tc('sw-order.detailsTab.labelDeliveryCard')" :order="order" :entity="delivery" :state-label="$tc('sw-order.stateCard.headlineDeliveryState')" :disabled="!acl.can('order.editor') || undefined" @show-status-history="showStateHistoryModal = true" @save-edits="onSaveEdits" > {% block sw_order_detail_details_shipping_address %} <sw-order-address-selection class="sw-order-detail-details__shipping-address" type="shipping" :address="shippingAddress" :address-id="selectedShippingAddressId" :disabled="!acl.can('order.editor') || undefined" :label="$tc('sw-order.createBase.detailsBody.labelShippingAddress')" @change-address="onChangeOrderAddress" /> {% endblock %} {% block sw_order_detail_details_shipping_method_select %} <sw-entity-single-select v-model:value="delivery.shippingMethodId" entity="shipping_method" disabled :criteria="salesChannelCriteria" :label="$tc('sw-order.createBase.detailsFooter.labelShippingMethod')" :placeholder="$tc('sw-order.createBase.detailsFooter.placeholderShippingMethod')" show-clearable-button /> {% endblock %} {% block sw_order_detail_details_shipping_costs %} <sw-number-field v-model:value="shippingCosts" class="sw-order-detail-details__shipping-cost" :disabled="!acl.can('order.editor')" fill-digits :label="$tc('sw-order.detailDeliveries.labelShippingCosts')" > <template #suffix> {{ order.currency.symbol }} </template> </sw-number-field> {% endblock %} {% block sw_order_detail_details_shipping_date %} <sw-datepicker v-model:value="delivery.shippingDateEarliest" disabled hide-hint :label="$tc('sw-order.detailDeliveries.labelDeliveryDate')" /> {% endblock %} {% block sw_order_detail_details_shipping_tracking_codes %} <sw-multi-tag-select v-model:value="delivery.trackingCodes" class="sw-order-user-card__tracking-code-select" :disabled="!acl.can('order.editor') || undefined" :placeholder="$tc('sw-order.detailBase.placeholderTrackingCodeSelect')" :label="$tc('sw-order.detailBase.labelTrackingCodes')" :validate="validateTrackingCode" @update:value="saveAndReload" > <template #message-add-data> <span>{{ $tc('sw-order.detailBase.addTrackingCode') }}</span> </template> <template #message-enter-valid-data> <span>{{ $tc('sw-order.detailBase.enterValidTrackingCode') }}</span> </template> </sw-multi-tag-select> {% endblock %} </sw-order-details-state-card> {% endblock %} {% block sw_order_detail_details_order %} <sw-order-details-state-card :title="$tc('sw-order.detailsTab.labelOrderCard')" :order="order" :entity="order" :disabled="!acl.can('order.editor') || undefined" :state-label="$tc('sw-order.stateCard.headlineOrderState')" @show-status-history="showStateHistoryModal = true" @save-edits="onSaveEdits" > {% block sw_order_detail_details_order_email %} <sw-text-field v-model:value="order.orderCustomer.email" class="sw-order-detail-details__email" :disabled="!acl.can('order.editor') || undefined" :label="$tc('sw-order.createBase.detailsBody.labelEmail')" :placeholder="$tc('sw-order.createBase.detailsBody.placeholderEmail')" :error="orderOrderCustomerEmailError" required /> {% endblock %} {% block sw_order_detail_details_order_phone_number %} <sw-text-field v-model:value="order.addresses.get(order.billingAddressId).phoneNumber" class="sw-order-detail-details__phone-number" :disabled="!acl.can('order.editor') || undefined" :label="$tc('sw-order.createBase.detailsBody.labelPhoneNumber')" :placeholder="$tc('sw-order.createBase.detailsBody.placeholderPhoneNumber')" /> {% endblock %} {% block sw_order_detail_details_order_sales_channel %} <sw-entity-single-select v-model:value="order.salesChannelId" entity="sales_channel" disabled :label="$tc('sw-order.createBase.detailsFooter.labelSalesChannel')" :placeholder="$tc('sw-order.createBase.detailsFooter.placeholderSalesChannel')" show-clearable-button /> {% endblock %} {% block sw_order_detail_details_order_language %} <sw-entity-single-select v-model:value="order.languageId" entity="language" disabled :criteria="salesChannelCriteria" :label="$tc('sw-order.createBase.detailsFooter.labelOrderLanguage')" :placeholder="$tc('sw-order.createBase.detailsFooter.placeholderOrderLanguage')" show-clearable-button /> {% endblock %} {% block sw_order_detail_details_order_affiliate %} <sw-text-field v-model:value="order.affiliateCode" class="sw-order-detail-details__affiliate-code" :disabled="!acl.can('order.editor') || undefined" :label="$tc('sw-order.detailBase.labelAffiliateCode')" /> {% endblock %} {% block sw_order_detail_details_order_campaign %} <sw-text-field v-model:value="order.campaignCode" class="sw-order-detail-details__campaign-code" :disabled="!acl.can('order.editor') || undefined" :label="$tc('sw-order.detailBase.labelCampaignCode')" /> {% endblock %} {% block sw_order_detail_details_order_customer_comment %} <sw-textarea-field v-model:value="order.customerComment" class="sw-order-detail-details__customer-comment" :disabled="!acl.can('order.editor')" :label="$tc('sw-order.detailBase.labelCustomerComment')" /> {% endblock %} {% block sw_order_detail_details_order_promotion %} <sw-order-promotion-field class="sw-order-detail-details__promotion" @loading-change="updateLoading" @reload-entity-data="reloadEntityData" @error="showError" /> {% endblock %} </sw-order-details-state-card> {% endblock %} {% block sw_order_detail_details_custom_fields %} <sw-extension-component-section position-identifier="sw-order-detail-base-custom-fields__before" /> <sw-card v-if="customFieldSets.length > 0" position-identifier="sw-order-detail-details-custom-fields" :title="$tc('sw-settings-custom-field.general.mainMenuItemGeneral')" > <sw-custom-field-set-renderer :entity="order" :disabled="!acl.can('order.editor')" :sets="customFieldSets" /> </sw-card> <sw-extension-component-section position-identifier="sw-order-detail-base-custom-fields__after" /> {% endblock %} {% block sw_order_detail_base_state_history_modal %} <sw-order-state-history-modal v-if="showStateHistoryModal" :order="order" :is-loading="isLoading" @modal-close="showStateHistoryModal = false" /> {% endblock %} </div> {% endblock %}`,{Component:o,State:s}=Cicada,{Criteria:t}=Cicada.Data,{mapGetters:n,mapState:c,mapPropertyErrors:h}=o.getComponentHelper(),w={template:l,compatConfig:Cicada.compatConfig,inject:{swOrderDetailOnSaveAndReload:{from:"swOrderDetailOnSaveAndReload",default:null},swOrderDetailOnSaveEdits:{from:"swOrderDetailOnSaveEdits",default:null},swOrderDetailOnLoadingChange:{from:"swOrderDetailOnLoadingChange",default:null},swOrderDetailOnSaveAndRecalculate:{from:"swOrderDetailOnSaveAndRecalculate",default:null},swOrderDetailOnReloadEntityData:{from:"swOrderDetailOnReloadEntityData",default:null},swOrderDetailOnError:{from:"swOrderDetailOnError",default:null},acl:{from:"acl",default:null},repositoryFactory:{from:"repositoryFactory",default:null}},emits:["update-loading","save-and-recalculate","save-and-reload","save-edits","reload-entity-data","error"],props:{orderId:{type:String,required:!0},isSaveSuccessful:{type:Boolean,required:!0}},data(){return{customFieldSets:[],showStateHistoryModal:!1}},computed:{...n("swOrderDetail",["isLoading"]),...c("swOrderDetail",["order","versionContext","orderAddressIds"]),...h("order",["orderCustomer.email"]),delivery(){return this.order.deliveries.length>0&&this.order.deliveries[0]},transaction(){for(let e=0;e<this.order.transactions.length;e+=1)if(!["cancelled","failed"].includes(this.order.transactions[e].stateMachineState.technicalName))return this.order.transactions[e];return this.order.transactions.last()},customFieldSetRepository(){return this.repositoryFactory.create("custom_field_set")},customFieldSetCriteria(){const e=new t(1,null);return e.addFilter(t.equals("relations.entityName","order")),e},salesChannelCriteria(){const e=new t(1,25);return this.order.salesChannelId&&e.addFilter(t.equals("salesChannels.id",this.order.salesChannelId)),e},paymentMethodCriteria(){return new t(1,25)},taxStatus(){return this.order.price.taxStatus},currency(){return this.order.currency},billingAddress(){return this.order.addresses.find(e=>e.id===this.order.billingAddressId)},shippingAddress(){return this.delivery.shippingOrderAddress},selectedBillingAddressId(){const e=this.orderAddressIds.find(d=>d.type==="billing");return(e==null?void 0:e.customerAddressId)||this.billingAddress.id},selectedShippingAddressId(){const e=this.orderAddressIds.find(d=>d.type==="shipping");return(e==null?void 0:e.customerAddressId)||this.shippingAddress.id},shippingCosts:{get(){var e;return((e=this.delivery)==null?void 0:e.shippingCosts.totalPrice)||0},set(e){this.onShippingChargeEdited(e)}}},created(){this.createdComponent()},methods:{createdComponent(){this.$emit("update-loading",!0),this.swOrderDetailOnLoadingChange&&this.swOrderDetailOnLoadingChange(!0),this.customFieldSetRepository.search(this.customFieldSetCriteria).then(e=>{this.customFieldSets=e,this.$emit("update-loading",!1),this.swOrderDetailOnLoadingChange&&this.swOrderDetailOnLoadingChange(!1)})},onShippingChargeEdited(e){this.delivery.shippingCosts.unitPrice=e,this.delivery.shippingCosts.totalPrice=e,this.saveAndRecalculate()},saveAndRecalculate(){this.$emit("save-and-recalculate"),this.swOrderDetailOnSaveAndRecalculate&&this.swOrderDetailOnSaveAndRecalculate()},saveAndReload(){this.$emit("save-and-reload"),this.swOrderDetailOnSaveAndReload&&this.swOrderDetailOnSaveAndReload()},onSaveEdits(){this.$emit("save-edits"),this.swOrderDetailOnSaveEdits&&this.swOrderDetailOnSaveEdits()},reloadEntityData(){this.$emit("reload-entity-data"),this.swOrderDetailOnReloadEntityData&&this.swOrderDetailOnReloadEntityData()},showError(e){this.$emit("error",e),this.swOrderDetailOnError&&this.swOrderDetailOnError(e)},updateLoading(e){s.commit("swOrderDetail/setLoading",["order",e])},validateTrackingCode(e){var r,a;const d=e.trim();return d.length<=0?!1:!((a=(r=this.delivery)==null?void 0:r.trackingCodes)==null?void 0:a.find(i=>i===d))},onChangeOrderAddress(e){s.commit("swOrderDetail/setOrderAddressIds",e)}}};export{w as default};
//# sourceMappingURL=index-Clbap5bo.js.map

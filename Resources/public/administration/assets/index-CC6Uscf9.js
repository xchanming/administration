const o=`{% block sw_order_document_settings_modal_form_first_row %} <sw-container columns="1fr 1fr 1fr" gap="0 14px" > {% block sw_order_document_settings_modal_form_credit_document_number %} <sw-text-field v-model:value="documentConfig.documentNumber" :label="$tc('sw-order.documentModal.labelDocumentNumber')" /> {% endblock %} {% block sw_order_document_settings_modal_form_document_select_invoice %} <sw-select-field v-model:value="documentConfig.custom.invoiceNumber" class="sw-order-document-settings-credit-note-modal__invoice-select" required :label="$tc('sw-order.documentModal.labelInvoiceNumber')" :placeholder="$tc('sw-order.documentModal.selectInvoiceNumber')" > <option v-for="number in invoiceNumbers" :key="number" :value="number" > {{ number }} </option> </sw-select-field> {% endblock %} {% block sw_order_document_settings_modal_form_document_date %} <sw-datepicker v-model:value="documentConfig.documentDate" date-type="date" required hide-hint :label="$tc('sw-order.documentModal.labelDocumentDate')" :placeholder="$tc('sw-datepicker.date.placeholder')" /> {% endblock %} </sw-container> {% endblock %}`,n={template:o,emits:["loading-document"],data(){return{documentConfig:{custom:{creditNoteNumber:"",invoiceNumber:""}},invoiceNumbers:[]}},computed:{highlightedItems(){const t=[];return this.order.lineItems.forEach(e=>{e.type==="credit"&&t.push(e)}),t},documentPreconditionsFulfilled(){return this.highlightedItems.length!==0&&this.documentConfig.custom.invoiceNumber}},created(){this.createdComponent()},methods:{createdComponent(){this.$super("createdComponent");const t=this.order.documents.filter(e=>e.documentType.technicalName==="invoice").map(e=>e.config.custom.invoiceNumber);this.invoiceNumbers=[...new Set(t)].sort()},onCreateDocument(t=!1){this.$emit("loading-document"),this.documentNumberPreview===this.documentConfig.documentNumber?this.numberRangeService.reserve(`document_${this.currentDocumentType.technicalName}`,this.order.salesChannelId,!1).then(e=>{this.documentConfig.custom.creditNoteNumber=e.number,e.number!==this.documentConfig.documentNumber&&this.createNotificationInfo({message:this.$tc("sw-order.documentCard.info.DOCUMENT__NUMBER_WAS_CHANGED")}),this.documentConfig.documentNumber=e.number,this.callDocumentCreate(t)}):(this.documentConfig.custom.creditNoteNumber=this.documentConfig.documentNumber,this.callDocumentCreate(t))}}};export{n as default};

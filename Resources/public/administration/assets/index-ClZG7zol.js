const a=`{% block sw_promotion_v2_detail_base %} <div class="sw-promotion-v2-detail-base"> {% block sw_promotion_v2_detail_base_general_card %} <sw-card v-if="promotion" position-identifier="sw-promotion-detail-base-general" class="sw-promotion-v2-detail-base__card-general" :is-loading="isLoading" :title="$tc('sw-promotion-v2.detail.base.general.cardTitle')" > {% block sw_promotion_v2_detail_base_general_name %} <sw-container columns="2fr 1fr" gap="0 32px" > <sw-text-field v-model:value="promotion.name" class="sw-promotion-v2-detail-base__field-name" :label="$tc('sw-promotion-v2.detail.base.general.nameLabel')" :disabled="!acl.can('promotion.editor')" required :error="promotionNameError" :placeholder="placeholder(promotion, 'name', $tc('sw-promotion-v2.detail.base.general.namePlaceholder'))" /> <sw-number-field v-model:value="promotion.priority" :disabled="!acl.can('promotion.editor')" :label="$tc('sw-promotion-v2.detail.base.general.priorityLabel')" :help-text="$tc('sw-promotion-v2.detail.base.general.helpTextPriority')" /> </sw-container> {% endblock %} {% block sw_promotion_v2_detail_base_general_valid_container %} <sw-container columns="1fr 1fr" gap="0 32px" > {% block sw_promotion_v2_detail_base_general_valid_from %} <sw-datepicker v-model:value="promotion.validFrom" class="sw-promotion-v2-detail-base__field-valid-from" date-type="datetime" :label="$tc('sw-promotion-v2.detail.base.general.validFromLabel')" :placeholder="$tc('sw-promotion-v2.detail.base.general.validFromPlaceholder')" :disabled="!acl.can('promotion.editor')" /> {% endblock %} {% block sw_promotion_v2_detail_base_general_valid_until %} <sw-datepicker v-model:value="promotion.validUntil" class="sw-promotion-v2-detail-base__field-valid-until" date-type="datetime" :label="$tc('sw-promotion-v2.detail.base.general.validUntilLabel')" :placeholder="$tc('sw-promotion-v2.detail.base.general.validUntilPlaceholder')" :disabled="!acl.can('promotion.editor')" :error="promotionValidUntilError" /> {% endblock %} </sw-container> {% endblock %} {% block sw_promotion_v2_detail_base_general_max_uses %} <sw-container columns="1fr 1fr" gap="0 32px" > {% block sw_promotion_v2_detail_base_general_max_uses_global %} <sw-number-field v-model:value="promotion.maxRedemptionsGlobal" class="sw-promotion-v2-detail-base__field-max-uses-global" number-type="int" :label="$tc('sw-promotion-v2.detail.base.general.maxUsesGlobalLabel')" :placeholder="$tc('sw-promotion-v2.detail.base.general.maxUsesGlobalPlaceholder')" :disabled="!acl.can('promotion.editor')" allow-empty /> {% endblock %} {% block sw_promotion_v2_detail_base_general_max_uses_customer %} <sw-number-field v-model:value="promotion.maxRedemptionsPerCustomer" class="sw-promotion-v2-detail-base__field-max-uses-per-customer" number-type="int" :label="$tc('sw-promotion-v2.detail.base.general.maxUsesPerCustomerLabel')" :placeholder="$tc('sw-promotion-v2.detail.base.general.maxUsesPerCustomerPlaceholder')" :disabled="!acl.can('promotion.editor')" allow-empty /> {% endblock %} </sw-container> {% endblock %} {% block sw_promotion_v2_detail_base_general_active %} <sw-switch-field v-model:value="promotion.active" class="sw-promotion-v2-detail-base__field-active" :label="$tc('sw-promotion-v2.detail.base.general.activeLabel')" :disabled="!acl.can('promotion.editor')" bordered /> {% endblock %} </sw-card> {% endblock %} {% block sw_promotion_v2_detail_base_codes_card %} <sw-card v-if="promotion && !isCreateMode" class="sw-promotion-v2-detail-base__card-codes" position-identifier="sw-promotion-detail-base-codes" :is-loading="isLoading" :title="$tc('sw-promotion-v2.detail.base.codes.cardTitle')" > {% block sw_promotion_v2_detail_base_codes_select %} <sw-select-field class="sw-promotion-v2-detail-base__field-code-type" :label="$tc('sw-promotion-v2.detail.base.codes.codeTypeLabel')" :disabled="!acl.can('promotion.editor')" :value="selectedCodeType" @update:value="onChangeCodeType" > {% block sw_promotion_v2_detail_base_codes_select_options %} <option v-for="option in codeTypeOptions" :key="option.value" :value="option.value" :selected="option.value === selectedCodeType" > {{ option.label }} </option> {% endblock %} </sw-select-field> {% endblock %} {% block sw_promotion_v2_detail_base_codes_type_fixed %} <template v-if="selectedCodeType === CODE_TYPES.FIXED"> {% block sw_promotion_v2_detail_base_codes_type_fixed_code %} <sw-text-field v-model:value="promotion.code" class="sw-promotion-v2-detail-base__fixed-field-code" :disabled="!acl.can('promotion.editor')" :label="$tc('sw-promotion-v2.detail.base.codes.fixed.codeLabel')" :placeholder="$tc('sw-promotion-v2.detail.base.codes.fixed.codePlaceholder')" copyable /> {% endblock %} {% block sw_promotion_v2_detail_base_codes_type_fixed_generate %} <sw-button-process class="sw-promotion-v2-detail-base__fixed-generate-button" :is-loading="isGenerating" :disabled="!acl.can('promotion.editor')" :process-success="isGenerateSuccessful" @update:process-success="generateFinish" @click.prevent="onGenerateCodeFixed" > {{ $tc('sw-promotion-v2.detail.base.codes.fixed.generateButton') }} </sw-button-process> {% endblock %} </template> {% endblock %} {% block sw_promotion_v2_detail_base_codes_type_individual %} <template v-else-if="selectedCodeType === CODE_TYPES.INDIVIDUAL"> {% block sw_promotion_v2_detail_base_codes_type_individual_codes_behavior %} <sw-promotion-v2-individual-codes-behavior :promotion="promotion" @generate-finish="$emit('generate-individual-codes-finish')" @delete-finish="$emit('delete-individual-codes-finish')" /> {% endblock %} </template> {% endblock %} </sw-card> {% endblock %} {% block sw_promotion_detail_custom_field_sets %} <sw-card v-if="showCustomFields" position-identifier="sw-promotion-detail-base-custom-field-sets" :title="$tc('sw-settings-custom-field.general.mainMenuItemGeneral')" :is-loading="isLoading" > <sw-custom-field-set-renderer :entity="promotion" :disabled="!acl.can('promotion.editor')" :sets="customFieldSets" /> </sw-card> {% endblock %} </div> {% endblock %}`,{Mixin:l}=Cicada,{mapPropertyErrors:d}=Cicada.Component.getComponentHelper(),n={template:a,compatConfig:Cicada.compatConfig,inject:["acl","promotionCodeApiService","customFieldDataProviderService"],emits:["generate-individual-codes-finish","delete-individual-codes-finish","clean-up-codes"],mixins:[l.getByName("placeholder")],props:{promotion:{type:Object,required:!1,default(){return null}},isLoading:{type:Boolean,required:!1,default:!1},isCreateMode:{type:Boolean,required:!0}},data(){return{selectedCodeType:"0",isGenerating:!1,isGenerateSuccessful:!1,codeSortProperty:"code",codeSortDirection:"ASC",CODE_TYPES:Object.freeze({NONE:"0",FIXED:"1",INDIVIDUAL:"2"}),customFieldSets:null}},computed:{codeTypeOptions(){return Object.entries(this.CODE_TYPES).map(e=>Object.create({label:this.$tc(`sw-promotion-v2.detail.base.codes.${e[0].toLowerCase()}.description`),value:e[1]}))},...d("promotion",["name","validUntil"]),showCustomFields(){return this.customFieldSets&&this.customFieldSets.length>0}},watch:{promotion(){this.createdComponent()}},created(){this.createdComponent()},methods:{createdComponent(){if(this.promotion){if(this.loadCustomFieldSets(),this.promotion.useCodes&&this.promotion.useIndividualCodes){this.setNewCodeType(this.CODE_TYPES.INDIVIDUAL),this.initialSort();return}this.setNewCodeType(this.promotion.useCodes?this.CODE_TYPES.FIXED:this.CODE_TYPES.NONE)}},initialSort(){this.promotion.individualCodes.sort((e,s)=>{const o=e[this.codeSortProperty],i=s[this.codeSortProperty];let t=null;return typeof o=="string"&&typeof i=="string"&&(t=o.toUpperCase()>i.toUpperCase()),typeof o=="number"&&typeof i=="number"&&(t=o-i>0),t!==null?this.codeSortDirection==="DESC"?t?-1:1:t?1:-1:0})},onChangeCodeType(e){const s=e!==this.CODE_TYPES.INDIVIDUAL&&this.promotion.individualCodes!==null&&this.promotion.individualCodes.length>0,o=e!==this.CODE_TYPES.FIXED&&this.promotion.code!==null&&this.promotion.code.length>0;this.$emit("clean-up-codes",s,o),this.setNewCodeType(e)},setNewCodeType(e){this.promotion.useCodes=e!==this.CODE_TYPES.NONE,this.promotion.useIndividualCodes=e===this.CODE_TYPES.INDIVIDUAL,this.selectedCodeType=e},loadCustomFieldSets(){this.customFieldDataProviderService.getCustomFieldSets("promotion").then(e=>{this.customFieldSets=e})},onGenerateCodeFixed(){this.isGenerating=!0,this.promotionCodeApiService.generateCodeFixed().then(e=>{this.promotion.code=e,this.isGenerateSuccessful=!0}).finally(()=>{this.isGenerating=!1})},generateFinish(){this.isGenerateSuccessful=!1}}};export{n as default};
//# sourceMappingURL=index-ClZG7zol.js.map

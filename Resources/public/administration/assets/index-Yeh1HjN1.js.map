{"version":3,"file":"index-Yeh1HjN1.js","sources":["../../../app/administration/src/app/component/form/sw-text-editor/sw-text-editor-toolbar-button/sw-text-editor-toolbar-button.html.twig","../../../app/administration/src/app/component/form/sw-text-editor/sw-text-editor-toolbar-button/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_text_editor_toolbar_button %}\n<div\n    class=\"sw-text-editor-toolbar-button\"\n    :class=\"'sw-text-editor-toolbar-button__type-' + buttonConfig.type\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_button_icon %}\n    <template v-if=\"buttonConfig.icon\">\n        <div\n            v-tooltip=\"{ appearance: tooltipAppearance, message: buttonConfig.title }\"\n            class=\"sw-text-editor-toolbar-button__icon\"\n            :class=\"classes\"\n            role=\"button\"\n            tabindex=\"0\"\n            @click=\"buttonHandler($event, buttonConfig)\"\n            @keydown.enter=\"buttonHandler($event, buttonConfig)\"\n        >\n            <sw-icon\n                :name=\"buttonConfig.icon\"\n                size=\"12\"\n            />\n            <sw-icon\n                v-if=\"buttonConfig.children\"\n                name=\"regular-chevron-down\"\n                size=\"8\"\n            />\n        </div>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_button_name %}\n    <!-- eslint-disable-next-line vuejs-accessibility/click-events-have-key-events -->\n    <div\n        v-else-if=\"buttonConfig.name\"\n        v-tooltip=\"{ appearance: tooltipAppearance, message: buttonConfig.title }\"\n        :class=\"classes\"\n        role=\"button\"\n        tabindex=\"0\"\n        @click=\"buttonHandler($event, buttonConfig)\"\n    >\n        {{ buttonConfig.name }}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_button_color %}\n    <!-- eslint-disable-next-line vuejs-accessibility/click-events-have-key-events -->\n    <div\n        v-else-if=\"buttonConfig.type === 'foreColor'\"\n        v-tooltip=\"{ appearance: tooltipAppearance, message: buttonConfig.title }\"\n        :class=\"classes\"\n        role=\"button\"\n        tabindex=\"0\"\n        @click=\"buttonHandler($event, buttonConfig)\"\n    >\n        <sw-compact-colorpicker\n            v-model:value=\"buttonConfig.value\"\n            :disabled=\"disabled\"\n            compact\n            :alpha=\"false\"\n            @update:value=\"handleButtonClick(buttonConfig)\"\n        />\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_button_child %}\n    <div\n        v-if=\"buttonConfig.children && buttonConfig.expanded\"\n        class=\"sw-text-editor-toolbar-button__children\"\n        :class=\"getDropdownClasses(buttonConfig)\"\n    >\n        <div class=\"sw-text-editor-toolbar-button__children-inner-container\">\n            <!-- eslint-disable-next-line vuejs-accessibility/click-events-have-key-events, vuejs-accessibility/no-static-element-interactions -->\n            <div\n                v-for=\"(child, childIndex) in buttonConfig.children\"\n                :key=\"childIndex\"\n                v-tooltip.right=\"getTooltipConfig(buttonConfig, child)\"\n                :class=\"childActive(child)\"\n                class=\"sw-text-editor-toolbar-button__children-child\"\n                @click=\"handleButtonClick(child)\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_text_editor_toolbar_button_child_item %}\n                <div>\n                    <sw-icon\n                        v-if=\"child.icon\"\n                        :name=\"child.icon\"\n                    />\n                    <div\n                        v-else\n                        class=\"sw-text-editor-toolbar-button__children-child-content\"\n                    >\n                        {{ child.name }}\n                    </div>\n                </div>\n                {% endblock %}\n            </div>\n        </div>\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_button_link_menu %}\n    <div\n        v-else-if=\"buttonConfig.type === 'link' && buttonConfig.expanded\"\n        ref=\"flyoutLinkMenu\"\n        class=\"sw-text-editor-toolbar-button__children\"\n    >\n        <sw-text-editor-link-menu\n            :button-config=\"buttonConfig\"\n            @button-click=\"handleButtonClick\"\n            @mounted=\"positionLinkMenu\"\n        />\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_button_table %}\n    <div\n        v-else-if=\"buttonConfig.type === 'table' && buttonConfig.expanded\"\n        ref=\"flyoutMenu\"\n        class=\"sw-text-editor-toolbar-button__children sw-text-editor-toolbar-button__table-menu\"\n        :class=\"flyoutClasses\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_text_editor_toolbar_button_table_menu_content %}\n        <sw-text-editor-toolbar-table-button\n            :button-config=\"buttonConfig\"\n            @mounted=\"onChildMounted\"\n            @table-create=\"handleButtonClick(buttonConfig)\"\n        />\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_button_slot %}\n    <slot name=\"buttonSlot\"></slot>\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-text-editor-toolbar-button.html.twig';\nimport './sw-text-editor-toolbar-button.scss';\n\nconst { Component } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n */\nComponent.register('sw-text-editor-toolbar-button', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: [\n        'button-click',\n        'menu-toggle',\n    ],\n\n    props: {\n        buttonConfig: {\n            type: Object,\n            required: true,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        isInlineEdit: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            flyoutClasses: [],\n        };\n    },\n\n    computed: {\n        classes() {\n            return {\n                'is--active': !!this.buttonConfig.active || this.buttonConfig.expanded,\n                'is--disabled': !!this.disabled,\n            };\n        },\n\n        tooltipAppearance() {\n            return this.isInlineEdit ? 'light' : 'dark';\n        },\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        mountedComponent() {\n            this.$device.onResize({\n                listener: this.positionLinkMenu,\n            });\n        },\n        buttonHandler(event, button) {\n            if (this.disabled) {\n                return null;\n            }\n\n            return button.children || button.type === 'link' || button.type === 'table' || button.type === 'foreColor'\n                ? this.onToggleMenu(event, button)\n                : this.handleButtonClick(button);\n        },\n\n        childActive(child) {\n            return {\n                'is--active': !!child.active,\n            };\n        },\n\n        handleButtonClick(button, parent = null) {\n            if (this.disabled) {\n                return;\n            }\n\n            this.$emit('button-click', button, parent);\n            this.$emit('menu-toggle', null, button);\n        },\n\n        onToggleMenu(event, button) {\n            if (\n                ![\n                    'link',\n                    'table',\n                    'foreColor',\n                ].includes(button.type) &&\n                !button.children\n            ) {\n                return;\n            }\n\n            if (button.type === 'foreColor' && event.target.closest('.sw-colorpicker__colorpicker')) {\n                return;\n            }\n\n            if (button.type === 'link' && event.target.closest('.sw-text-editor-toolbar-button__link-menu')) {\n                return;\n            }\n\n            if (button.type === 'table' && event.target.closest('.sw-text-editor-toolbar-button__table-menu')) {\n                return;\n            }\n\n            if (event.target.closest('.sw-text-editor-toolbar-button__children')) {\n                return;\n            }\n\n            this.$emit('menu-toggle', event, button);\n        },\n\n        getDropdownClasses(buttonConfig) {\n            const position = buttonConfig.dropdownPosition || 'right';\n            const positionClass = `is--${position}`;\n\n            return [positionClass];\n        },\n\n        onChildMounted() {\n            const flyoutMenu = this.$refs?.flyoutMenu;\n\n            if (!flyoutMenu || this.flyoutClasses.includes('is--left', 'is--right')) {\n                return;\n            }\n\n            const flyoutMenuRightBound = flyoutMenu.getBoundingClientRect().right;\n            const windowRightBound = this.$root.$el.getBoundingClientRect().right;\n\n            const isOutOfRightBound = flyoutMenuRightBound - windowRightBound > 0;\n            this.flyoutClasses = isOutOfRightBound ? ['is--left'] : ['is--right'];\n        },\n\n        getTooltipConfig(buttonConfig, child) {\n            return {\n                disabled: !child.title,\n                appearance: this.tooltipAppearance,\n                width: 'auto',\n                message: child.title,\n                showDelay: buttonConfig.tooltipShowDelay || 100,\n                hideDelay: buttonConfig.tooltipHideDelay || 100,\n            };\n        },\n\n        positionLinkMenu() {\n            const flyoutLinkMenu = this.$refs?.flyoutLinkMenu;\n\n            if (!(flyoutLinkMenu instanceof HTMLElement)) {\n                return;\n            }\n\n            const flyoutLinkMenuWidth = flyoutLinkMenu.clientWidth;\n\n            const linkIcon = this.$el;\n            const linkIconWidth = linkIcon.clientWidth;\n\n            const linkIconRightBound = linkIcon.getBoundingClientRect().right;\n\n            const linkFlyoutMenuRightBound = linkIconRightBound - linkIconWidth + flyoutLinkMenuWidth;\n            const windowRightBound = this.$device.getViewportWidth();\n\n            const isOutOfRightBound = windowRightBound - linkFlyoutMenuRightBound;\n\n            let flyoutLinkLeftOffset = 0;\n            let arrowPosition = 10;\n\n            if (isOutOfRightBound < 0) {\n                flyoutLinkLeftOffset = isOutOfRightBound - 50;\n                arrowPosition = Math.abs(flyoutLinkLeftOffset) + 10;\n            }\n\n            flyoutLinkMenu.style.setProperty('--flyoutLinkLeftOffset', `${flyoutLinkLeftOffset}px`);\n            flyoutLinkMenu.style.setProperty('--arrow-position', `${arrowPosition}px`);\n        },\n    },\n});\n"],"names":["template","Component","event","button","child","parent","buttonConfig","_a","flyoutMenu","flyoutMenuRightBound","windowRightBound","isOutOfRightBound","flyoutLinkMenu","flyoutLinkMenuWidth","linkIcon","linkIconWidth","linkFlyoutMenuRightBound","flyoutLinkLeftOffset","arrowPosition"],"mappings":"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"}
{"version":3,"file":"index-ktTitv8I.js","sources":["../../../app/administration/src/module/sw-cms/elements/image/config/sw-cms-el-config-image.html.twig","../../../app/administration/src/module/sw-cms/elements/image/config/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_element_image_config %}\n<div class=\"sw-cms-el-config-image\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_image_config_media_upload %}\n    <sw-cms-mapping-field\n        v-model:config=\"element.config.media\"\n        :label=\"$tc('sw-cms.elements.image.label')\"\n        value-types=\"entity\"\n        entity=\"media\"\n    >\n        <sw-media-upload-v2\n            variant=\"regular\"\n            :upload-tag=\"uploadTag\"\n            :source=\"previewSource\"\n            :allow-multi-select=\"false\"\n            :default-folder=\"cmsPageState.pageEntityName\"\n            :caption=\"$tc('sw-cms.elements.general.config.caption.mediaUpload')\"\n            @media-upload-sidebar-open=\"onOpenMediaModal\"\n            @media-upload-remove-image=\"onImageRemove\"\n        />\n\n        <template #preview=\"{ demoValue }\">\n            <div class=\"sw-cms-el-config-image__mapping-preview\">\n                <img\n                    v-if=\"demoValue.url\"\n                    :src=\"demoValue.url\"\n                    alt=\"\"\n                >\n                <sw-alert\n                    v-else\n                    class=\"sw-cms-el-config-image__preview-info\"\n                    variant=\"info\"\n                >\n                    {{ $tc('sw-cms.detail.label.mappingEmptyPreview') }}\n                </sw-alert>\n            </div>\n        </template>\n    </sw-cms-mapping-field>\n\n    <sw-upload-listener\n        :upload-tag=\"uploadTag\"\n        auto-upload\n        @media-upload-finish=\"onImageUpload\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_image_config_display_mode %}\n    <sw-select-field\n        v-model:value=\"element.config.displayMode.value\"\n        class=\"sw-cms-el-config-image__display-mode\"\n        :label=\"$tc('sw-cms.elements.general.config.label.displayMode')\"\n        :help-text=\"$tc('sw-cms.elements.general.config.helpText.displayMode')\"\n        @update:value=\"onChangeDisplayMode\"\n    >\n        <option value=\"standard\">\n            {{ $tc('sw-cms.elements.general.config.label.displayModeStandard') }}\n        </option>\n        <option value=\"stretch\">\n            {{ $tc('sw-cms.elements.general.config.label.displayModeStretch') }}\n        </option>\n        <option value=\"cover\">\n            {{ $tc('sw-cms.elements.general.config.label.displayModeCover') }}\n        </option>\n    </sw-select-field>\n    {% endblock %}\n\n    <template v-if=\"element.config.displayMode.value === 'cover'\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_image_config_min_height %}\n        <sw-text-field\n            v-model:value=\"element.config.minHeight.value\"\n            :label=\"$tc('sw-cms.elements.image.config.label.minHeight')\"\n            :placeholder=\"$tc('sw-cms.elements.image.config.placeholder.enterMinHeight')\"\n            @update:value=\"onChangeMinHeight\"\n        />\n        {% endblock %}\n    </template>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_image_config_vertical_align %}\n    <sw-select-field\n        v-model:value=\"element.config.verticalAlign.value\"\n        :label=\"$tc('sw-cms.elements.general.config.label.verticalAlign')\"\n        :placeholder=\"$tc('sw-cms.elements.general.config.label.verticalAlign')\"\n        :disabled=\"['cover'].includes(element.config.displayMode.value)\"\n    >\n        <option value=\"flex-start\">\n            {{ $tc('sw-cms.elements.general.config.label.verticalAlignTop') }}\n        </option>\n        <option value=\"center\">\n            {{ $tc('sw-cms.elements.general.config.label.verticalAlignCenter') }}\n        </option>\n        <option value=\"flex-end\">\n            {{ $tc('sw-cms.elements.general.config.label.verticalAlignBottom') }}\n        </option>\n    </sw-select-field>\n    {% endblock %}\n\n    {% block sw_cms_element_image_config_horizontal_align %}\n    <sw-select-field\n        v-model:value=\"element.config.horizontalAlign.value\"\n        :label=\"$tc('sw-cms.elements.general.config.label.horizontalAlign')\"\n        :placeholder=\"$tc('sw-cms.elements.general.config.label.horizontalAlign')\"\n        :disabled=\"element.config.displayMode.value === 'cover'\"\n    >\n        <option value=\"flex-start\">\n            {{ $tc('sw-cms.elements.general.config.label.horizontalAlignLeft') }}\n        </option>\n        <option value=\"center\">\n            {{ $tc('sw-cms.elements.general.config.label.horizontalAlignCenter') }}\n        </option>\n        <option value=\"flex-end\">\n            {{ $tc('sw-cms.elements.general.config.label.horizontalAlignRight') }}\n        </option>\n    </sw-select-field>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_image_config_link %}\n    <div class=\"sw-cms-el-config-image__link\">\n        <sw-dynamic-url-field\n            v-model:value=\"element.config.url.value\"\n        />\n        <sw-switch-field\n            v-model:value=\"element.config.newTab.value\"\n            class=\"sw-cms-el-config-image__link-tab\"\n            :label=\"$tc('sw-cms.elements.image.config.label.linkNewTab')\"\n        />\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_image_config_media_modal %}\n    <sw-media-modal-v2\n        v-if=\"mediaModalIsOpen\"\n        variant=\"full\"\n        :caption=\"$tc('sw-cms.elements.general.config.caption.mediaUpload')\"\n        :entity-context=\"cmsPageState.entityName\"\n        :allow-multi-select=\"false\"\n        :initial-folder-id=\"cmsPageState.defaultMediaFolderId\"\n        @media-upload-remove-image=\"onImageRemove\"\n        @media-modal-selection-change=\"onSelectionChanges\"\n        @modal-close=\"onCloseModal\"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-cms-el-config-image.html.twig';\nimport './sw-cms-el-config-image.scss';\n\nconst { Mixin } = Cicada;\n\n/**\n * @private\n * @package discovery\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    emits: ['element-update'],\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    data() {\n        return {\n            mediaModalIsOpen: false,\n            initialFolderId: null,\n        };\n    },\n\n    computed: {\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        uploadTag() {\n            return `cms-element-media-config-${this.element.id}`;\n        },\n\n        previewSource() {\n            if (this.element?.data?.media?.id) {\n                return this.element.data.media;\n            }\n\n            return this.element.config.media.value;\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('image');\n        },\n\n        async onImageUpload({ targetId }) {\n            const mediaEntity = await this.mediaRepository.get(targetId);\n\n            this.element.config.media.value = mediaEntity.id;\n            this.element.config.media.source = 'static';\n\n            this.updateElementData(mediaEntity);\n\n            this.$emit('element-update', this.element);\n        },\n\n        onImageRemove() {\n            this.element.config.media.value = null;\n\n            this.updateElementData();\n\n            this.$emit('element-update', this.element);\n        },\n\n        onCloseModal() {\n            this.mediaModalIsOpen = false;\n        },\n\n        onSelectionChanges(mediaEntity) {\n            const media = mediaEntity[0];\n            this.element.config.media.value = media.id;\n            this.element.config.media.source = 'static';\n\n            this.updateElementData(media);\n\n            this.$emit('element-update', this.element);\n        },\n\n        updateElementData(media = null) {\n            const mediaId = media === null ? null : media.id;\n            if (!this.element.data) {\n                if (this.isCompatEnabled('INSTANCE_SET')) {\n                    this.$set(this.element, 'data', { mediaId, media });\n                } else {\n                    this.element.data = { mediaId, media };\n                }\n\n                return;\n            }\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                this.$set(this.element.data, 'mediaId', mediaId);\n                this.$set(this.element.data, 'media', media);\n            } else {\n                this.element.data.mediaId = mediaId;\n                this.element.data.media = media;\n            }\n        },\n\n        onOpenMediaModal() {\n            this.mediaModalIsOpen = true;\n        },\n\n        onChangeMinHeight(value) {\n            this.element.config.minHeight.value = value === null ? '' : value;\n\n            this.$emit('element-update', this.element);\n        },\n\n        onChangeDisplayMode() {\n            this.$emit('element-update', this.element);\n        },\n    },\n};\n"],"names":["template","Mixin","index","_a","_b","_c","targetId","mediaEntity","media","mediaId","value"],"mappings":"AAAA,MAAeA,EAAA,krICGT,CAAE,MAAAC,CAAO,EAAG,OAMHC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,gBAAgB,EAExB,OAAQ,CACJC,EAAM,UAAU,aAAa,CAChC,EAED,MAAO,CACH,MAAO,CACH,iBAAkB,GAClB,gBAAiB,IAC7B,CACK,EAED,SAAU,CACN,iBAAkB,CACd,OAAO,KAAK,kBAAkB,OAAO,OAAO,CAC/C,EAED,WAAY,CACR,MAAO,4BAA4B,KAAK,QAAQ,EAAE,EACrD,EAED,eAAgB,CDtCxB,IAAAE,EAAAC,EAAAC,ECuCY,OAAIA,GAAAD,GAAAD,EAAA,KAAK,UAAL,YAAAA,EAAc,OAAd,YAAAC,EAAoB,QAApB,MAAAC,EAA2B,GACpB,KAAK,QAAQ,KAAK,MAGtB,KAAK,QAAQ,OAAO,MAAM,KACpC,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAkB,OAAO,CACjC,EAED,MAAM,cAAc,CAAE,SAAAC,GAAY,CAC9B,MAAMC,EAAc,MAAM,KAAK,gBAAgB,IAAID,CAAQ,EAE3D,KAAK,QAAQ,OAAO,MAAM,MAAQC,EAAY,GAC9C,KAAK,QAAQ,OAAO,MAAM,OAAS,SAEnC,KAAK,kBAAkBA,CAAW,EAElC,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,EAED,eAAgB,CACZ,KAAK,QAAQ,OAAO,MAAM,MAAQ,KAElC,KAAK,kBAAiB,EAEtB,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,EAED,cAAe,CACX,KAAK,iBAAmB,EAC3B,EAED,mBAAmBA,EAAa,CAC5B,MAAMC,EAAQD,EAAY,CAAC,EAC3B,KAAK,QAAQ,OAAO,MAAM,MAAQC,EAAM,GACxC,KAAK,QAAQ,OAAO,MAAM,OAAS,SAEnC,KAAK,kBAAkBA,CAAK,EAE5B,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,EAED,kBAAkBA,EAAQ,KAAM,CAC5B,MAAMC,EAAUD,IAAU,KAAO,KAAOA,EAAM,GAC9C,GAAI,CAAC,KAAK,QAAQ,KAAM,CAChB,KAAK,gBAAgB,cAAc,EACnC,KAAK,KAAK,KAAK,QAAS,OAAQ,CAAE,QAAAC,EAAS,MAAAD,CAAK,CAAE,EAElD,KAAK,QAAQ,KAAO,CAAE,QAAAC,EAAS,MAAAD,CAAK,EAGxC,MACH,CAEG,KAAK,gBAAgB,cAAc,GACnC,KAAK,KAAK,KAAK,QAAQ,KAAM,UAAWC,CAAO,EAC/C,KAAK,KAAK,KAAK,QAAQ,KAAM,QAASD,CAAK,IAE3C,KAAK,QAAQ,KAAK,QAAUC,EAC5B,KAAK,QAAQ,KAAK,MAAQD,EAEjC,EAED,kBAAmB,CACf,KAAK,iBAAmB,EAC3B,EAED,kBAAkBE,EAAO,CACrB,KAAK,QAAQ,OAAO,UAAU,MAAQA,IAAU,KAAO,GAAKA,EAE5D,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,EAED,qBAAsB,CAClB,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,CACJ,CACL"}
const l=`{% block sw_mail_header_footer_list_grid %} <sw-card :title="$tc('sw-mail-header-footer.list.textMailHeaderFooterOverview')" position-identifier="sw-mail-header-footer-list" > {% block sw_mail_header_footer_list_grid_empty_state %} <sw-empty-state v-if="!isLoading && !showListing" :title="$tc('sw-mail-header-footer.list.emptyStateTitle')" :subline="$tc('sw-mail-header-footer.list.emptyStateSubTitle')" :absolute="false" > {% block sw_mail_header_footer_list_grid_empty_state_icon %} <template #icon> <img :src="assetFilter('/administration/static/img/empty-states/settings-empty-state.svg')" :alt="$tc('sw-mail-header-footer.list.emptyStateTitle')" > </template> {% endblock %} </sw-empty-state> {% endblock %} {% block sw_mail_template_list_grid %} <template #grid> <sw-entity-listing v-if="isLoading || showListing" id="mailHeaderFooterGrid" ref="listing" class="sw-mail-templates-list-grid" detail-route="sw.mail.template.detail_head_foot" identifier="sw-mail-header-footer-list" :items="mailHeaderFooters" :columns="getListColumns()" :repository="mailHeaderFooterRepository" :full-page="false" :is-loading="isLoading" :allow-view="acl.can('mail_templates.viewer')" :allow-edit="acl.can('mail_templates.editor')" :allow-delete="acl.can('mail_templates.deleter')" :show-selection="acl.can('mail_templates.deleter') || undefined" :skeleton-item-amount="skeletonItemAmount" @update-records="updateRecords" > <template #column-salesChannels.name="{ item }"> {% block sw_mail_template_list_columns_sales_channels_label %} {{ getSalesChannelsString(item) }} {% endblock %} </template> <template #bulk-modal-delete-items> <sw-button variant="danger" size="small" @click="onMultipleDelete" > {{ $tc('global.default.delete') }} </sw-button> </template> <template #delete-modal-delete-item="{ item }"> <sw-button variant="danger" size="small" @click="onDelete(item)" > {{ $tc('global.default.delete') }} </sw-button> </template> <template #more-actions="{ item }"> {% block sw_mail_header_footer_list_grid_columns_actions_duplicate %} <sw-context-menu-item class="sw-mail-header-footer-list-grid__duplicate-action" :disabled="!acl.can('mail_templates.creator') || undefined" @click="onDuplicate(item.id)" > {{ $tc('sw-mail-header-footer.list.contextMenuDuplicate') }} </sw-context-menu-item> {% endblock %} </template> </sw-entity-listing> </template> {% endblock %} </sw-card> {% endblock %}`,{Mixin:s}=Cicada,{Criteria:i}=Cicada.Data,o={template:l,compatConfig:Cicada.compatConfig,inject:["repositoryFactory","acl"],mixins:[s.getByName("listing"),s.getByName("notification")],props:{searchTerm:{type:String,required:!1,default:""}},data(){return{mailHeaderFooters:null,showDeleteModal:null,isLoading:!1}},computed:{mailHeaderFooterRepository(){return this.repositoryFactory.create("mail_header_footer")},skeletonItemAmount(){return this.mailHeaderFooters&&this.mailHeaderFooters.length!==0?this.mailHeaderFooters.length:3},showListing(){return!!this.mailHeaderFooters&&this.mailHeaderFooters.length!==0},assetFilter(){return Cicada.Filter.getByName("asset")}},watch:{searchTerm(){this.getList()}},methods:{onEdit(e){e!=null&&e.id&&this.$router.push({name:"sw.mail.template.detail_head_foot",params:{id:e.id}})},getList(){this.isLoading=!0;const e=new i(this.page,this.limit);e.addAssociation("salesChannels").addSorting(i.sort("name")),this.searchTerm&&e.setTerm(this.searchTerm),this.mailHeaderFooterRepository.search(e).then(t=>(this.total=t.total,this.mailHeaderFooters=t,this.isLoading=!1,this.mailHeaderFooters))},getListColumns(){return[{property:"name",dataIndex:"name",label:"sw-mail-header-footer.list.columnName",allowResize:!0,routerLink:"sw.mail.template.detail_head_foot",primary:!0},{property:"description",dataIndex:"description",label:"sw-mail-header-footer.list.columnDescription",allowResize:!0},{property:"salesChannels.name",dataIndex:"salesChannels.name",label:"sw-mail-header-footer.list.columnSalesChannels",allowResize:!0,sortable:!1}]},getSalesChannelsString(e){if(typeof e.salesChannels>"u")return"";let t="";return e.salesChannels.forEach(a=>{t!==""&&(t+=", "),t+=`${a.translated.name}`}),e.salesChannels.length>=5&&(t+="..."),t},onDuplicate(e){this.mailHeaderFooterRepository.clone(e).then(t=>{this.$router.push({name:"sw.mail.template.detail_head_foot",params:{id:t.id}})})},checkCanBeDeleted(e){return!e.salesChannels.length},onDelete(e){return this.$refs.listing.deleteId=null,this.checkCanBeDeleted(e)||this.showDeleteErrorNotification(e),this.mailHeaderFooterRepository.delete(e.id).then(()=>{this.$refs.listing.resetSelection(),this.$refs.listing.doSearch()})},getMailHeaderFooterCriteria(e){const t=new i(1,25);return t.addFilter(i.equalsAny("id",e)),t.addAssociation("salesChannels"),t},onMultipleDelete(){const e=Object.values(this.$refs.listing.selection).map(t=>t.id);this.mailHeaderFooterRepository.search(this.getMailHeaderFooterCriteria(e)).then(t=>{t.forEach(a=>{this.checkCanBeDeleted(a)||this.showDeleteErrorNotification(a)}),this.$refs.listing.deleteItems()})},showDeleteErrorNotification(e){return this.createNotificationError({message:this.$tc("sw-mail-header-footer.list.messageDeleteError",0,{name:e.name})})},updateRecords(e){this.mailHeaderFooters=e}}};export{o as default};
//# sourceMappingURL=index-BRIJZK3j.js.map

{"version":3,"file":"index-oGBrQzBO.js","sources":["../../../app/administration/src/app/component/form/sw-text-editor/sw-text-editor-toolbar-table-button/sw-text-editor-toolbar-table-button.html.twig","../../../app/administration/src/app/component/form/sw-text-editor/sw-text-editor-toolbar-table-button/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_text_editor_toolbar_table_button %}\n<div class=\"sw-text-editor-toolbar-table-button\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_table_button_table_head_switch %}\n    <sw-switch-field\n        v-model:value=\"addTableHead\"\n        :label=\"$tc('sw-text-editor-toolbar.table.addHeading')\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_table_button_table_grid_input %}\n    <div class=\"sw-text-editor-toolbar-table-button__grid-input\">\n        <sw-number-field\n            v-model:value=\"selectedCols\"\n            number-type=\"int\"\n            :min=\"0\"\n            :max=\"colMaxLimit\"\n            :label=\"$tc('sw-text-editor-toolbar.table.cols')\"\n            @input-change=\"setSelectedCols\"\n            @update:value=\"setSelectedCols\"\n        />\n        <sw-icon\n            class=\"sw-text-editor-toolbar-table-button__grid-input-icon\"\n            name=\"regular-times\"\n            size=\"12\"\n        />\n        <sw-number-field\n            v-model:value=\"selectedRows\"\n            number-type=\"int\"\n            :min=\"0\"\n            :max=\"rowMaxLimit\"\n            :label=\"$tc('sw-text-editor-toolbar.table.rows')\"\n            @input-change=\"setSelectedRows\"\n            @update:value=\"setSelectedRows\"\n        />\n    </div>\n    {% endblock %}\n\n    <p class=\"sw-text-editor-toolbar-table-button__grid-info\">\n        {{ $tc('sw-text-editor-toolbar.table.editInfo') }}\n    </p>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_table_button_table %}\n    <!-- eslint-disable-next-line vuejs-accessibility/click-events-have-key-events, vuejs-accessibility/no-static-element-interactions -->\n    <table\n        class=\"sw-text-editor-toolbar-table-button__table\"\n        @click=\"emitTable\"\n    >\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_text_editor_toolbar_table_button_table_head %}\n        <thead\n            v-if=\"addTableHead\"\n            class=\"sw-text-editor-toolbar-table-button__table-head\"\n        >\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_text_editor_toolbar_table_button_table_head_row %}\n            <tr class=\"sw-text-editor-toolbar-table-button__row\">\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_text_editor_toolbar_table_button_table_head_col %}\n                <td\n                    v-for=\"colIndex in tableCols\"\n                    :key=\"colIndex\"\n                    class=\"sw-text-editor-toolbar-table-button__col\"\n                >\n                    <div class=\"sw-text-editor-toolbar-table-button__col-placeholder\"></div>\n                </td>\n                {% endblock %}\n            </tr>\n            {% endblock %}\n        </thead>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_text_editor_toolbar_table_button_table_body %}\n        <tbody class=\"sw-text-editor-toolbar-table-button__table-body\">\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_text_editor_toolbar_table_button_table_body_row %}\n            <tr\n                v-for=\"rowIndex in tableRows\"\n                :key=\"rowIndex\"\n                class=\"sw-text-editor-toolbar-table-button__row\"\n                v-on=\"rowIndex === tableRows ? { mouseleave: (event) => onLastRowMouseOut(event) } : null\"\n            >\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_text_editor_toolbar_table_button_table_body_col %}\n                <!-- eslint-disable-next-line vuejs-accessibility/mouse-events-have-key-events, vuejs-accessibility/no-static-element-interactions -->\n                <td\n                    v-for=\"colIndex in tableCols\"\n                    :key=\"colIndex\"\n                    class=\"sw-text-editor-toolbar-table-button__col\"\n                    v-on=\"colIndex === tableCols ? { mouseleave: (event) => onLastColMouseOut(event) } : null\"\n                    @mouseover=\"onMouseOverColumn($event, { rows: rowIndex, cols: colIndex })\"\n                >\n                    <div class=\"sw-text-editor-toolbar-table-button__col-placeholder\"></div>\n                </td>\n                {% endblock %}\n            </tr>\n            {% endblock %}\n        </tbody>\n        {% endblock %}\n    </table>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_text_editor_toolbar_table_button_table_insert %}\n    <div class=\"sw-text-editor-toolbar-table-button__insert\">\n        <sw-button\n            size=\"small\"\n            variant=\"primary\"\n            @click=\"emitTable\"\n        >\n            {{ $tc('global.default.add') }}\n        </sw-button>\n    </div>\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-text-editor-toolbar-table-button.html.twig';\nimport './sw-text-editor-toolbar-table-button.scss';\n\nconst { Component } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n */\nComponent.register('sw-text-editor-toolbar-table-button', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: [\n        'mounted',\n        'table-create',\n    ],\n\n    props: {\n        buttonConfig: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            addTableHead: false,\n            tableRows: 6,\n            tableCols: 6,\n            tableMinCols: 6,\n            tableMinRows: 6,\n            rowMaxLimit: 10,\n            colMaxLimit: 10,\n            selectedRows: 0,\n            selectedCols: 0,\n            oldHorizontalDirection: '',\n            oldVerticalDirection: '',\n        };\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        mountedComponent() {\n            this.$emit('mounted');\n        },\n\n        onMouseOverColumn(event, data) {\n            if (!event.target) {\n                return;\n            }\n\n            this.selectedRows = data.rows;\n            this.selectedCols = data.cols;\n\n            this.setSelectedTableColsAndRows();\n        },\n\n        setSelectedTableColsAndRows() {\n            if (this.selectedRows <= 0 && this.selectedCols <= 0) {\n                this.tableCols = 6;\n                this.tableRows = 6;\n\n                return;\n            }\n\n            const tbody = this.$el.querySelector('tbody');\n            this.loopTableRows(tbody);\n        },\n\n        setSelectedCols(cols) {\n            if (cols >= this.tableCols) {\n                this.tableCols = cols;\n            }\n\n            this.$nextTick(() => {\n                this.selectedCols = cols;\n\n                this.setSelectedTableColsAndRows();\n            });\n        },\n\n        setSelectedRows(rows) {\n            if (rows >= this.tableRows) {\n                this.tableRows = rows;\n            }\n\n            this.$nextTick(() => {\n                this.selectedRows = rows;\n\n                this.setSelectedTableColsAndRows();\n            });\n        },\n\n        loopTableRows(tbody) {\n            Object.values(tbody.children).forEach((child, index) => {\n                this.loopTableCols(child, index);\n            });\n        },\n\n        loopTableCols(row, rowIndex) {\n            Object.values(row.children).forEach((child, index) => {\n                if (index < this.selectedCols && rowIndex < this.selectedRows) {\n                    child.classList.add('is--selected');\n                } else {\n                    child.classList.remove('is--selected');\n                }\n            });\n        },\n\n        onMouseOut(event) {\n            if (!event.target) {\n                return;\n            }\n\n            this.selectedRows = 0;\n            this.selectedCols = 0;\n        },\n\n        onLastRowMouseOut(event) {\n            if (!event) {\n                return;\n            }\n\n            const verticalDirection = this.oldVerticalDirection < event.pageY ? 'down' : 'up';\n\n            this.oldVerticalDirection = event.pageY;\n\n            if (verticalDirection === 'down' && this.tableRows < this.rowMaxLimit) {\n                this.tableRows += 1;\n            } else if (verticalDirection === 'up' && this.tableRows > this.tableMinRows) {\n                this.tableRows -= 1;\n            }\n        },\n\n        onLastColMouseOut(event) {\n            if (!event) {\n                return;\n            }\n\n            const horizontalDirection = this.oldHorizontalDirection < event.pageX ? 'right' : 'left';\n\n            this.oldHorizontalDirection = event.pageX;\n\n            if (horizontalDirection === 'right' && this.tableCols < this.colMaxLimit) {\n                this.tableCols += 1;\n            } else if (horizontalDirection === 'left' && this.tableCols > this.tableMinCols) {\n                this.tableCols -= 1;\n            }\n        },\n\n        emitTable() {\n            this.$emit('table-create', this.createHtmlTable());\n        },\n\n        createHtmlTable() {\n            let tableHtml = '<table class=\"sw-text-editor-table\">';\n            let resizeHandle = '<div class=\"sw-text-editor-table__col-selector\" contenteditable=\"false\"></div>';\n\n            if (this.addTableHead) {\n                tableHtml += '<thead class=\"sw-text-editor-table__head\"><tr class=\"sw-text-editor-table__row\">';\n\n                for (let i = 0; i < this.selectedCols; i += 1) {\n                    tableHtml += `<td class=\"sw-text-editor-table__col\">${resizeHandle}</td>`;\n                }\n\n                resizeHandle = '';\n                tableHtml += '</tr></thead>';\n            }\n\n            tableHtml += '<tbody class=\"sw-text-editor-table__body\">';\n\n            for (let rows = 0; rows < this.selectedRows; rows += 1) {\n                tableHtml += '<tr class=\"sw-text-editor-table__row\">';\n\n                for (let cols = 0; cols < this.selectedCols; cols += 1) {\n                    tableHtml += `<td class=\"sw-text-editor-table__col\">${resizeHandle}</td>`;\n                }\n\n                resizeHandle = '';\n                tableHtml += '</tr>';\n            }\n\n            tableHtml += '</tbody></table>';\n            // eslint-disable-next-line vue/no-mutating-props\n            this.buttonConfig.value = tableHtml;\n        },\n    },\n});\n"],"names":["template","Component","event","data","tbody","cols","rows","child","index","row","rowIndex","verticalDirection","horizontalDirection","tableHtml","resizeHandle","i"],"mappings":"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"}
{"version":3,"file":"index-DzEBdeS4.js","sources":["../../../app/administration/src/module/sw-settings-seo/component/sw-seo-main-category/sw-seo-main-category.html.twig","../../../app/administration/src/module/sw-settings-seo/component/sw-seo-main-category/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_seo_main_category %}\n<div class=\"sw-seo-main-category\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_seo_main_category_select %}\n    <sw-single-select\n        :options=\"categories\"\n        label-property=\"translated.name\"\n        value-property=\"id\"\n        show-clearable-button\n        :placeholder=\"$tc('sw-seo-url.placeholderMainCategory')\"\n        :label=\"overwriteLabel ? undefined : $tc('sw-seo-url.labelMainCategory')\"\n        :value=\"selectedCategory\"\n        :disabled=\"currentSalesChannelId === null || !allowEdit\"\n        @update:value=\"onMainCategorySelected\"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n","/**\n * @package buyers-experience\n */\n\nimport template from './sw-seo-main-category.html.twig';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    emits: ['main-category-add'],\n\n    props: {\n        currentSalesChannelId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n        categories: {\n            type: Array,\n            required: true,\n        },\n        mainCategories: {\n            type: Array,\n            required: true,\n        },\n        isLoading: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        allowEdit: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n        overwriteLabel: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            mainCategoryForSalesChannel: null,\n        };\n    },\n\n    computed: {\n        mainCategoryRepository() {\n            return this.repositoryFactory.create('main_category');\n        },\n\n        isHeadlessSalesChannel() {\n            if (Cicada.State.get('swSeoUrl').salesChannelCollection === null) {\n                return true;\n            }\n\n            const salesChannel = Cicada.State.get('swSeoUrl').salesChannelCollection.find((entry) => {\n                return entry.id === this.currentSalesChannelId;\n            });\n\n            // from Defaults.php\n            return this.currentSalesChannelId !== null && salesChannel.typeId === 'f183ee5650cf4bdb8a774337575067a6';\n        },\n\n        selectedCategory() {\n            return this.mainCategoryForSalesChannel !== null ? this.mainCategoryForSalesChannel.categoryId : null;\n        },\n    },\n\n    watch: {\n        currentSalesChannelId() {\n            this.refreshMainCategoryForSalesChannel();\n        },\n        mainCategories() {\n            this.refreshMainCategoryForSalesChannel();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.refreshMainCategoryForSalesChannel();\n        },\n        onMainCategorySelected(categoryId) {\n            if (categoryId === null) {\n                return;\n            }\n\n            const selectedCategory = this.categories.find((value) => {\n                return value.id === categoryId;\n            });\n\n            if (this.mainCategoryForSalesChannel !== null) {\n                this.mainCategoryForSalesChannel.category = selectedCategory;\n                this.mainCategoryForSalesChannel.categoryId = selectedCategory.id;\n                return;\n            }\n\n            const mainCategory = this.mainCategoryRepository.create();\n            mainCategory.salesChannelId = this.currentSalesChannelId;\n            mainCategory.category = selectedCategory;\n            mainCategory.categoryId = selectedCategory.id;\n            this.$emit('main-category-add', mainCategory);\n            this.refreshMainCategoryForSalesChannel();\n        },\n        refreshMainCategoryForSalesChannel() {\n            const mainCategory = this.mainCategories.find((category) => {\n                return category.salesChannelId === this.currentSalesChannelId;\n            });\n\n            if (mainCategory === undefined) {\n                this.mainCategoryForSalesChannel = null;\n                return;\n            }\n\n            this.mainCategoryForSalesChannel = mainCategory;\n        },\n    },\n};\n"],"names":["template","index","salesChannel","entry","categoryId","selectedCategory","value","mainCategory","category"],"mappings":"AAAA,MAAeA,EAAA,sgBCOAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,mBAAmB,EAE3B,MAAO,CACH,sBAAuB,CACnB,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EACD,WAAY,CACR,KAAM,MACN,SAAU,EACb,EACD,eAAgB,CACZ,KAAM,MACN,SAAU,EACb,EACD,UAAW,CACP,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EACD,UAAW,CACP,KAAM,QACN,SAAU,GAEV,QAAS,EACZ,EACD,eAAgB,CACZ,KAAM,QACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,4BAA6B,IACzC,CACK,EAED,SAAU,CACN,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,eAAe,CACvD,EAED,wBAAyB,CACrB,GAAI,OAAO,MAAM,IAAI,UAAU,EAAE,yBAA2B,KACxD,MAAO,GAGX,MAAME,EAAe,OAAO,MAAM,IAAI,UAAU,EAAE,uBAAuB,KAAMC,GACpEA,EAAM,KAAO,KAAK,qBAC5B,EAGD,OAAO,KAAK,wBAA0B,MAAQD,EAAa,SAAW,kCACzE,EAED,kBAAmB,CACf,OAAO,KAAK,8BAAgC,KAAO,KAAK,4BAA4B,WAAa,IACpG,CACJ,EAED,MAAO,CACH,uBAAwB,CACpB,KAAK,mCAAkC,CAC1C,EACD,gBAAiB,CACb,KAAK,mCAAkC,CAC1C,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,mCAAkC,CAC1C,EACD,uBAAuBE,EAAY,CAC/B,GAAIA,IAAe,KACf,OAGJ,MAAMC,EAAmB,KAAK,WAAW,KAAMC,GACpCA,EAAM,KAAOF,CACvB,EAED,GAAI,KAAK,8BAAgC,KAAM,CAC3C,KAAK,4BAA4B,SAAWC,EAC5C,KAAK,4BAA4B,WAAaA,EAAiB,GAC/D,MACH,CAED,MAAME,EAAe,KAAK,uBAAuB,OAAM,EACvDA,EAAa,eAAiB,KAAK,sBACnCA,EAAa,SAAWF,EACxBE,EAAa,WAAaF,EAAiB,GAC3C,KAAK,MAAM,oBAAqBE,CAAY,EAC5C,KAAK,mCAAkC,CAC1C,EACD,oCAAqC,CACjC,MAAMA,EAAe,KAAK,eAAe,KAAMC,GACpCA,EAAS,iBAAmB,KAAK,qBAC3C,EAED,GAAID,IAAiB,OAAW,CAC5B,KAAK,4BAA8B,KACnC,MACH,CAED,KAAK,4BAA8BA,CACtC,CACJ,CACL"}
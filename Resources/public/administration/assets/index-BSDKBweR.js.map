{"version":3,"file":"index-BSDKBweR.js","sources":["../../../app/administration/src/module/sw-customer/component/sw-customer-base-info/sw-customer-base-info.html.twig","../../../app/administration/src/module/sw-customer/component/sw-customer-base-info/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_customer_base_info %}\n<sw-container\n    class=\"sw-customer-base-info\"\n    columns=\"repeat(auto-fit, minmax(250px, 1fr))\"\n    gap=\"0px 15px\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_customer_base_info_metadata %}\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_customer_base_info_metadata_left %}\n    <sw-loader v-if=\"isLoading\" />\n\n    <div\n        v-else\n        class=\"sw-customer-base-info-columns\"\n    >\n        <template v-if=\"isBusinessAccountType && !customerEditMode\">\n            <sw-description-list>\n                <dt class=\"sw-customer-base-info__label\">\n                    {{ $tc('sw-customer.baseInfo.labelCompany') }}\n                </dt>\n\n                <dd>\n                    {{ customer.company }}\n                </dd>\n            </sw-description-list>\n\n            <sw-description-list>\n                <dt class=\"sw-customer-base-info__label\">\n                    {{ $tc('sw-customer.baseInfo.labelVatId') }}\n                </dt>\n\n                <dd>\n                    {{ customer.vatIds[0] || '-' }}\n                </dd>\n            </sw-description-list>\n        </template>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_customer_group %}\n        <sw-description-list>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_customer_group_label %}\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelCustomerGroup') }}\n            </dt>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_customer_group_content %}\n            <dd v-if=\"!customerEditMode\">\n                {{ customer.group.translated.name }}\n            </dd>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_customer_group_editor %}\n            <dd v-else>\n                <sw-entity-single-select\n                    v-model:value=\"customer.groupId\"\n                    name=\"sw-field--customer-groupId\"\n                    entity=\"customer_group\"\n                    size=\"small\"\n                    show-clearable-button\n                    :error=\"customerGroupIdError\"\n                />\n            </dd>\n            {% endblock %}\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_active %}\n        <sw-description-list>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_active_label %}\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelActive') }}\n            </dt>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_active_content %}\n            <dd\n                v-if=\"!customerEditMode\"\n                class=\"sw-customer-base__label-is-active\"\n            >\n                {{ $tc('sw-customer.baseInfo.contentActive', customer.active ? 1 : 2) }}\n            </dd>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_active_editor %}\n            <dd v-else>\n                <sw-checkbox-field\n                    v-model:value=\"customer.active\"\n                    name=\"sw-field--customer-active\"\n                    class=\"sw-customer-base-info__checkbox-field\"\n                    :label=\"$tc('sw-customer.baseInfo.contentActive')\"\n                    size=\"small\"\n                />\n            </dd>\n            {% endblock %}\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_confirmed %}\n        <sw-description-list v-if=\"customer.doubleOptInRegistration\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_confirmed_label %}\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelConfirmed') }}\n            </dt>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_confirmed_content %}\n            <dd\n                v-if=\"!customerEditMode\"\n                class=\"sw-customer-base__label-is-confirmed\"\n            >\n                {{ $tc('sw-customer.baseInfo.contentConfirmed', customer.doubleOptInConfirmDate ? 1 : 2) }}\n            </dd>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_confirmed_editor %}\n            <dd v-else>\n                <sw-checkbox-field\n                    name=\"sw-field--customer-confirmed\"\n                    class=\"sw-customer-base-info__checkbox-field\"\n                    :value=\"!!customer.doubleOptInConfirmDate\"\n                    :label=\"$tc('sw-customer.baseInfo.contentConfirmed')\"\n                    size=\"small\"\n                    @update:value=\"customer.doubleOptInConfirmDate = $event ? new Date() : null\"\n                />\n            </dd>\n            {% endblock %}\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_language %}\n        <sw-description-list>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_language_label %}\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelLanguage') }}\n            </dt>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_language_content %}\n            <dd\n                v-if=\"!customerEditMode\"\n                class=\"sw-customer-base__label-language\"\n            >\n                {{ customerLanguageName }}\n            </dd>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_language_editor %}\n            <dd v-else>\n                <sw-entity-single-select\n                    v-model:value=\"customer.languageId\"\n                    name=\"sw-field--customer-languageId\"\n                    class=\"sw-customer-base-info__language-select\"\n                    entity=\"language\"\n                    :criteria=\"languageCriteria\"\n                    size=\"small\"\n                    show-clearable-button\n                />\n            </dd>\n            {% endblock %}\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block ssw_customer_base_metadata_affiliate %}\n        <sw-description-list>\n            <dt>{{ $tc('sw-customer.baseInfo.labelAffiliateCode') }}</dt>\n            <dd v-if=\"!customerEditMode\">\n                {{ customer.affiliateCode || '-' }}\n            </dd>\n            <dd v-else>\n                <sw-text-field\n                    v-model:value=\"customer.affiliateCode\"\n                    name=\"sw-field--customer-customerAffiliateCode\"\n                    :placeholder=\"$tc('sw-customer.baseInfo.placeholderCustomerAffiliateCode')\"\n                    size=\"small\"\n                />\n            </dd>\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_campaign %}\n        <sw-description-list>\n            <dt>{{ $tc('sw-customer.baseInfo.labelCampaignCode') }}</dt>\n            <dd v-if=\"!customerEditMode\">\n                {{ customer.campaignCode || '-' }}\n            </dd>\n            <dd v-else>\n                <sw-text-field\n                    v-model:value=\"customer.campaignCode\"\n                    name=\"sw-field--customer-customerCampaignCode\"\n                    :placeholder=\"$tc('sw-customer.baseInfo.placeholderCustomerCampaignCode')\"\n                    size=\"small\"\n                />\n            </dd>\n        </sw-description-list>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_customer_base_info_metadata_right %}\n    <div class=\"sw-customer-base-info-columns\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_customer_number %}\n        <sw-description-list>\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelCustomerNumber') }}\n            </dt>\n            <dd class=\"sw-customer-base__label-customer-number\">\n                {{ customer.customerNumber }}\n            </dd>\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_bound_sales_channel %}\n        <sw-description-list>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_bound_sales_channel_label %}\n            <dt class=\"sw-customer-base-info__label sw-bound-sales-channel__label\">\n                {{ $tc('sw-customer.baseInfo.labelBoundSalesChannel') }}\n                <sw-help-text :text=\"$tc('sw-customer.baseInfo.helpTextBoundSalesChannel')\" />\n            </dt>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_bound_saleschannel_content %}\n            <dd class=\"sw-customer-base__label-bound-sales-channel\">\n                <template v-if=\"customer.boundSalesChannelId\">\n                    {{ customer.boundSalesChannel.translated.name }}\n                </template>\n                <template v-else>\n                    {{ $tc('sw-customer.baseInfo.emptyBoundSalesChannel') }}\n                </template>\n            </dd>\n            {% endblock %}\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_last_login %}\n        <sw-description-list>\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelLastLogin') }}\n            </dt>\n            <dd class=\"sw-customer-base__label-last-login\">\n                <template v-if=\"customer.lastLogin\">\n                    {{ dateFilter(customer.lastLogin) }}\n                </template>\n                <template v-else>\n                    {{ $tc('sw-customer.baseInfo.emptyTextLogin') }}\n                </template>\n            </dd>\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_turnover %}\n        <sw-description-list>\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelTurnover') }}\n            </dt>\n            <dd class=\"sw-customer-base__label-turnover\">\n                {{ currencyFilter(customer.orderTotalAmount, currencyCode) }}\n            </dd>\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_orders %}\n        <sw-description-list>\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelOrders') }}\n            </dt>\n            <dd>{{ orderCount }}</dd>\n        </sw-description-list>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_customer_base_metadata_birthday %}\n        <sw-description-list>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_birthday_label %}\n            <dt class=\"sw-customer-base-info__label\">\n                {{ $tc('sw-customer.baseInfo.labelBirthday') }}\n            </dt>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_customer_base_metadata_birthday_content %}\n            <dd\n                v-if=\"!customerEditMode\"\n                class=\"sw-customer-base__label-birthday\"\n            >\n                <template v-if=\"customer.birthday\">\n                    {{ dateFilter(customer.birthday, { minute: undefined, hour: undefined }) }}\n                </template>\n                <template v-else>\n                    {{ $tc('sw-customer.baseInfo.emptyTextBirthday') }}\n                </template>\n            </dd>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_custoemr_base_metadata_birthday_editor %}\n            <dd v-else>\n                <sw-datepicker\n                    v-model:value=\"customer.birthday\"\n                    name=\"sw-field--customer-birthday\"\n                    size=\"small\"\n                    date-type=\"date\"\n                    hide-hint\n                    :placeholder=\"$tc('sw-datepicker.date.placeholder')\"\n                />\n            </dd>\n            {% endblock %}\n        </sw-description-list>\n        {% endblock %}\n    </div>\n    {% endblock %}\n    {% endblock %}\n</sw-container>\n{% endblock %}\n","import template from './sw-customer-base-info.html.twig';\nimport './sw-customer-base-info.scss';\nimport errorConfig from '../../error-config.json';\n\nimport CUSTOMER from '../../constant/sw-customer.constant';\n\n/**\n * @package checkout\n */\n\nconst { Criteria } = Cicada.Data;\nconst { mapPropertyErrors } = Cicada.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'feature',\n    ],\n\n    props: {\n        customer: {\n            type: Object,\n            required: true,\n        },\n        customerEditMode: {\n            type: Boolean,\n            required: true,\n            default: false,\n        },\n        isLoading: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            orderCount: 0,\n            customerLanguage: null,\n            currencyCode: Cicada.Context.app.systemCurrencyISOCode,\n        };\n    },\n\n    computed: {\n        orderRepository() {\n            return this.repositoryFactory.create('order');\n        },\n\n        languageRepository() {\n            return this.repositoryFactory.create('language');\n        },\n\n        languageId() {\n            return this.customer.languageId;\n        },\n\n        customerLanguageName() {\n            if (this.customerLanguage) {\n                return this.customerLanguage.name;\n            }\n            return '…';\n        },\n\n        languageCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addFilter(Criteria.equals('salesChannels.id', this.customer.salesChannelId));\n\n            return criteria;\n        },\n\n        orderCriteria() {\n            const criteria = new Criteria(1, 1);\n            criteria.addFilter(Criteria.equals('order.orderCustomer.customerId', this.$route.params.id));\n\n            return criteria;\n        },\n\n        ...mapPropertyErrors('customer', [\n            ...errorConfig['sw.customer.detail.base'].customer,\n        ]),\n\n        isBusinessAccountType() {\n            return this.customer?.accountType === CUSTOMER.ACCOUNT_TYPE_BUSINESS;\n        },\n\n        dateFilter() {\n            return Cicada.Filter.getByName('date');\n        },\n\n        currencyFilter() {\n            return Cicada.Filter.getByName('currency');\n        },\n    },\n\n    watch: {\n        languageId: {\n            immediate: true,\n            handler() {\n                this.languageRepository.get(this.languageId).then((language) => {\n                    this.customerLanguage = language;\n                });\n            },\n        },\n        customer() {\n            this.createdComponent();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.orderRepository.search(this.orderCriteria).then((response) => {\n                this.orderCount = response.total;\n            });\n        },\n    },\n};\n"],"names":["template","Criteria","mapPropertyErrors","index","criteria","errorConfig","_a","CUSTOMER","language","response"],"mappings":"sGAAA,MAAeA,EAAA,uvPCUT,CAAE,SAAAC,CAAQ,EAAK,OAAO,KACtB,CAAE,kBAAAC,CAAiB,EAAK,OAAO,UAAU,mBAAkB,EAGlDC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,SACH,EAED,MAAO,CACH,SAAU,CACN,KAAM,OACN,SAAU,EACb,EACD,iBAAkB,CACd,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EACD,UAAW,CACP,KAAM,QACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,WAAY,EACZ,iBAAkB,KAClB,aAAc,OAAO,QAAQ,IAAI,qBAC7C,CACK,EAED,SAAU,CACN,iBAAkB,CACd,OAAO,KAAK,kBAAkB,OAAO,OAAO,CAC/C,EAED,oBAAqB,CACjB,OAAO,KAAK,kBAAkB,OAAO,UAAU,CAClD,EAED,YAAa,CACT,OAAO,KAAK,SAAS,UACxB,EAED,sBAAuB,CACnB,OAAI,KAAK,iBACE,KAAK,iBAAiB,KAE1B,GACV,EAED,kBAAmB,CACf,MAAMI,EAAW,IAAIH,EAAS,EAAG,EAAE,EACnC,OAAAG,EAAS,UAAUH,EAAS,OAAO,mBAAoB,KAAK,SAAS,cAAc,CAAC,EAE7EG,CACV,EAED,eAAgB,CACZ,MAAMA,EAAW,IAAIH,EAAS,EAAG,CAAC,EAClC,OAAAG,EAAS,UAAUH,EAAS,OAAO,iCAAkC,KAAK,OAAO,OAAO,EAAE,CAAC,EAEpFG,CACV,EAED,GAAGF,EAAkB,WAAY,CAC7B,GAAGG,EAAY,yBAAyB,EAAE,QACtD,CAAS,EAED,uBAAwB,OACpB,QAAOC,EAAA,KAAK,WAAL,YAAAA,EAAe,eAAgBC,EAAS,qBAClD,EAED,YAAa,CACT,OAAO,OAAO,OAAO,UAAU,MAAM,CACxC,EAED,gBAAiB,CACb,OAAO,OAAO,OAAO,UAAU,UAAU,CAC5C,CACJ,EAED,MAAO,CACH,WAAY,CACR,UAAW,GACX,SAAU,CACN,KAAK,mBAAmB,IAAI,KAAK,UAAU,EAAE,KAAMC,GAAa,CAC5D,KAAK,iBAAmBA,CAC5C,CAAiB,CACJ,CACJ,EACD,UAAW,CACP,KAAK,iBAAgB,CACxB,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,gBAAgB,OAAO,KAAK,aAAa,EAAE,KAAMC,GAAa,CAC/D,KAAK,WAAaA,EAAS,KAC3C,CAAa,CACJ,CACJ,CACL"}
{"version":3,"file":"index-C_ZKqLnb.js","sources":["../../../app/administration/src/module/sw-flow/component/modals/sw-flow-affiliate-and-campaign-code-modal/sw-flow-affiliate-and-campaign-code-modal.html.twig","../../../app/administration/src/module/sw-flow/component/modals/sw-flow-affiliate-and-campaign-code-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_flow_affiliate_and_campaign_code_modal %}\n<sw-modal\n    class=\"sw-flow-affiliate-and-campaign-code-modal\"\n    :title=\"$tc('sw-flow.modals.affiliateAndCampaignCode.title')\"\n    :closable=\"false\"\n    @modal-close=\"onClose\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_flow_affiliate_and_campaign_code_modal_content %}\n    <div class=\"sw-flow-affiliate-and-campaign-code-modal__content\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_affiliate_and_campaign_code_modal_entity %}\n        <sw-single-select\n            v-model:value=\"entity\"\n            name=\"sw-field--entity\"\n            class=\"sw-flow-affiliate-and-campaign-code-modal__entity\"\n            required\n            show-clearable-button\n            :label=\"$tc('sw-flow.modals.affiliateAndCampaignCode.labelEntity')\"\n            :placeholder=\"$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderEntity')\"\n            :error=\"entityError\"\n            :options=\"entityOptions\"\n        />\n        {% endblock %}\n\n        <sw-container\n            columns=\"3fr 1fr\"\n            gap=\"16px\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_affiliate_and_campaign_code_modal_affiliate_code %}\n            <sw-text-field\n                v-model:value=\"affiliateCode.value\"\n                name=\"sw-field--affiliateCode-value\"\n                class=\"sw-flow-affiliate-and-campaign-code-modal__affiliate-code\"\n                :label=\"$tc('sw-flow.modals.affiliateAndCampaignCode.labelAffiliateCode')\"\n                :placeholder=\"$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderAffiliateCode')\"\n            />\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_affiliate_and_campaign_code_modal_affiliate_code_overwrite %}\n            <sw-switch-field\n                v-model:value=\"affiliateCode.upsert\"\n                name=\"sw-field--affiliateCode-upsert\"\n                class=\"sw-flow-affiliate-and-campaign-code-modal__affiliate-code-overwrite\"\n                :label=\"$tc('sw-flow.modals.affiliateAndCampaignCode.overwrite')\"\n            />\n            {% endblock %}\n        </sw-container>\n\n        <sw-container\n            columns=\"3fr 1fr\"\n            gap=\"16px\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_affiliate_and_campaign_code_modal_campaign_code %}\n            <sw-text-field\n                v-model:value=\"campaignCode.value\"\n                name=\"sw-field--campaignCode-value\"\n                class=\"sw-flow-affiliate-and-campaign-code-modal__campaign-code\"\n                :label=\"$tc('sw-flow.modals.affiliateAndCampaignCode.labelCampaignCode')\"\n                :placeholder=\"$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderCampaignCode')\"\n            />\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_flow_affiliate_and_campaign_code_modal_campaign_code_overwrite %}\n            <sw-switch-field\n                v-model:value=\"campaignCode.upsert\"\n                name=\"sw-field--campaignCode-upsert\"\n                class=\"sw-flow-affiliate-and-campaign-code-modal__campaign-code-overwrite\"\n                :label=\"$tc('sw-flow.modals.affiliateAndCampaignCode.overwrite')\"\n            />\n            {% endblock %}\n        </sw-container>\n    </div>\n    {% endblock %}\n\n    <template #modal-footer>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_affiliate_and_campaign_code_modal_footer_cancel_button %}\n        <sw-button\n            class=\"sw-flow-affiliate-and-campaign-code-modal__cancel-button\"\n            size=\"small\"\n            @click=\"onClose\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_flow_affiliate_and_campaign_code_modal_footer_save_button %}\n        <sw-button\n            class=\"sw-flow-affiliate-and-campaign-code-modal__save-button\"\n            variant=\"primary\"\n            size=\"small\"\n            @click=\"onSave\"\n        >\n            {{ sequence.id ? $tc('sw-flow.modals.buttonSaveAction') : $tc('sw-flow.modals.buttonAddAction') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n</sw-modal>\n{% endblock %}\n","import template from './sw-flow-affiliate-and-campaign-code-modal.html.twig';\n\nconst { Component, Mixin } = Cicada;\nconst { CicadaError } = Cicada.Classes;\nconst { mapState } = Component.getComponentHelper();\n\n/**\n * @private\n * @package services-settings\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['flowBuilderService'],\n\n    emits: [\n        'process-finish',\n        'modal-close',\n    ],\n\n    mixins: [\n        Mixin.getByName('placeholder'),\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        sequence: {\n            type: Object,\n            required: true,\n        },\n        action: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            entityError: null,\n            entity: null,\n            affiliateCode: {\n                value: null,\n                upsert: false,\n            },\n            campaignCode: {\n                value: null,\n                upsert: false,\n            },\n        };\n    },\n\n    computed: {\n        entityOptions() {\n            if (!this.triggerEvent) {\n                return [];\n            }\n\n            const allowedAware = this.triggerEvent.aware ?? [];\n            const properties = [];\n            // eslint-disable-next-line max-len\n            return this.flowBuilderService.getAvailableEntities(this.action, this.triggerActions, allowedAware, properties);\n        },\n\n        ...mapState('swFlowState', [\n            'triggerEvent',\n            'triggerActions',\n        ]),\n    },\n\n    watch: {\n        entity(value) {\n            if (value && this.entityError) {\n                this.entityError = null;\n            }\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            const entityName = this.flowBuilderService.getEntityNameByAction(this.action);\n\n            if (this.entityOptions.length) {\n                this.entity =\n                    this.entityOptions.find((option) => option.value === entityName)?.value || this.entityOptions[0].value;\n            }\n\n            if (!this.sequence.config) {\n                return;\n            }\n\n            this.entity = this.sequence.config.entity;\n            this.affiliateCode = { ...this.sequence.config.affiliateCode };\n            this.campaignCode = { ...this.sequence.config.campaignCode };\n        },\n\n        fieldError(field) {\n            if (!field || !field.length) {\n                return new CicadaError({\n                    code: 'c1051bb4-d103-4f74-8988-acbcafc7fdc3',\n                });\n            }\n\n            return null;\n        },\n\n        onSave() {\n            this.entityError = this.fieldError(this.entity);\n            if (this.entityError) {\n                return;\n            }\n\n            const config = {\n                entity: this.entity,\n                affiliateCode: this.affiliateCode,\n                campaignCode: this.campaignCode,\n            };\n\n            const sequence = {\n                ...this.sequence,\n                config,\n            };\n\n            this.$emit('process-finish', sequence);\n            this.onClose();\n        },\n\n        onClose() {\n            this.$emit('modal-close');\n        },\n    },\n};\n"],"names":["template","Component","Mixin","CicadaError","mapState","index","allowedAware","properties","value","_a","entityName","option","field","config","sequence"],"mappings":"AAAA,MAAeA,EAAA,k8FCET,CAAE,UAAAC,EAAW,MAAAC,CAAO,EAAG,OACvB,CAAE,YAAAC,CAAW,EAAK,OAAO,QACzB,CAAE,SAAAC,CAAU,EAAGH,EAAU,qBAMhBI,EAAA,CACX,SAAAL,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,oBAAoB,EAE7B,MAAO,CACH,iBACA,aACH,EAED,OAAQ,CACJE,EAAM,UAAU,aAAa,EAC7BA,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,SAAU,CACN,KAAM,OACN,SAAU,EACb,EACD,OAAQ,CACJ,KAAM,OACN,SAAU,GACV,QAAS,IACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,YAAa,KACb,OAAQ,KACR,cAAe,CACX,MAAO,KACP,OAAQ,EACX,EACD,aAAc,CACV,MAAO,KACP,OAAQ,EACX,CACb,CACK,EAED,SAAU,CACN,eAAgB,CACZ,GAAI,CAAC,KAAK,aACN,MAAO,GAGX,MAAMI,EAAe,KAAK,aAAa,OAAS,CAAA,EAC1CC,EAAa,CAAA,EAEnB,OAAO,KAAK,mBAAmB,qBAAqB,KAAK,OAAQ,KAAK,eAAgBD,EAAcC,CAAU,CACjH,EAED,GAAGH,EAAS,cAAe,CACvB,eACA,gBACZ,CAAS,CACJ,EAED,MAAO,CACH,OAAOI,EAAO,CACNA,GAAS,KAAK,cACd,KAAK,YAAc,KAE1B,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CDrF3B,IAAAC,ECsFY,MAAMC,EAAa,KAAK,mBAAmB,sBAAsB,KAAK,MAAM,EAExE,KAAK,cAAc,SACnB,KAAK,SACDD,EAAA,KAAK,cAAc,KAAME,GAAWA,EAAO,QAAUD,CAAU,IAA/D,YAAAD,EAAkE,QAAS,KAAK,cAAc,CAAC,EAAE,OAGpG,KAAK,SAAS,SAInB,KAAK,OAAS,KAAK,SAAS,OAAO,OACnC,KAAK,cAAgB,CAAE,GAAG,KAAK,SAAS,OAAO,eAC/C,KAAK,aAAe,CAAE,GAAG,KAAK,SAAS,OAAO,cACjD,EAED,WAAWG,EAAO,CACd,MAAI,CAACA,GAAS,CAACA,EAAM,OACV,IAAIT,EAAY,CACnB,KAAM,sCAC1B,CAAiB,EAGE,IACV,EAED,QAAS,CAEL,GADA,KAAK,YAAc,KAAK,WAAW,KAAK,MAAM,EAC1C,KAAK,YACL,OAGJ,MAAMU,EAAS,CACX,OAAQ,KAAK,OACb,cAAe,KAAK,cACpB,aAAc,KAAK,YACnC,EAEkBC,EAAW,CACb,GAAG,KAAK,SACR,OAAAD,CAChB,EAEY,KAAK,MAAM,iBAAkBC,CAAQ,EACrC,KAAK,QAAO,CACf,EAED,SAAU,CACN,KAAK,MAAM,aAAa,CAC3B,CACJ,CACL"}
{"version":3,"file":"index-Dh89FMcz.js","sources":["../../../app/administration/src/module/sw-extension/component/sw-extension-permissions-modal/sw-extension-permissions-modal.html.twig","../../../app/administration/src/module/sw-extension/component/sw-extension-permissions-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_extension_permissions_modal %}\n<sw-modal\n    class=\"sw-extension-permissions-modal\"\n    :title=\"modalTitle\"\n    variant=\"small\"\n    v-on=\"listeners\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_extension_permissions_modal_content %}\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_extension_permissions_modal_intro %}\n    <div class=\"sw-extension-permissions-modal__intro\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_extension_permissions_modal_intro_image %}\n        <img\n            class=\"sw-extension-permissions-modal__image\"\n            :src=\"assetFilter('/administration/static/img/extension-store/permissions.svg')\"\n            alt=\"\"\n        >\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_extension_permissions_modal_intro_text %}\n        <p class=\"sw-extension-permissions-modal__description\">\n            {{ descriptionText }}\n        </p>\n\n        <p\n            v-if=\"domainsList.length > 0\"\n            class=\"sw-extension-permissions-modal__domain-hint\"\n        >\n            {{ $tc('sw-extension-store.component.sw-extension-permissions-modal.domainHint') }}\n        </p>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_extension_permissions_modal_categories %}\n    <div class=\"sw-extension-permissions-modal__categories\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_extension_permissions_modal_category %}\n        <div\n            v-for=\"(permission, key) in permissionsWithGroupedOperations\"\n            :key=\"key\"\n            class=\"sw-extension-permissions-modal__category\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_extension_permissions_modal_category_inner %}\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_extension_permissions_modal_category_label %}\n            <span class=\"sw-extension-permissions-modal__category-label\">\n                {{ categoryLabel(key) }}\n            </span>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_extension_permissions_modal_link %}\n            <sw-button\n                class=\"sw-extension-permissions-modal__link\"\n                @click=\"openDetailsModal(key)\"\n            >\n                {{ $tc('sw-extension-store.component.sw-extension-permissions-modal.textEntities') }}\n                <sw-icon\n                    name=\"regular-long-arrow-right\"\n                    size=\"12px\"\n                />\n            </sw-button>\n            {% endblock %}\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_extension_permissions_modal_category_domains %}\n        <div\n            v-if=\"domainsList.length > 0\"\n            class=\"sw-extension-permissions-modal__category\"\n        >\n            <span class=\"sw-extension-permissions-modal__category-label\">\n                {{ $tc('sw-extension-store.component.sw-extension-permissions-modal.domains') }}\n            </span>\n\n            <sw-button\n                class=\"sw-extension-permissions-modal__link\"\n                @click=\"toggleDomainsModal(true)\"\n            >\n                {{ $tc('sw-extension-store.component.sw-extension-permissions-modal.showDomains') }}\n\n                <sw-icon\n                    name=\"regular-long-arrow-right\"\n                    size=\"12px\"\n                />\n            </sw-button>\n        </div>\n        {% endblock %}\n    </div>\n    {% endblock %}\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_extension_permissions_modal_footer %}\n    <template #modal-footer>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_extension_permissions_modal_footer_inner %}\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_extension_permissions_modal_footer_close %}\n        <sw-button\n            :variant=\"actionLabel === null ? 'primary' : ''\"\n            size=\"small\"\n            @click=\"close\"\n        >\n            {{ closeBtnLabel }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_extension_permissions_modal_footer_action %}\n        <sw-button\n            v-if=\"actionLabel\"\n            variant=\"primary\"\n            size=\"small\"\n            @click=\"closeWithAction\"\n        >\n            {{ actionLabel }}\n        </sw-button>\n        {% endblock %}\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_extension_permissions_modal_details %}\n    <sw-extension-permissions-details-modal\n        v-if=\"showDetailsModal\"\n        :modal-title=\"modalTitle\"\n        :permissions=\"permissionsWithGroupedOperations\"\n        :selected-entity=\"selectedEntity\"\n        @modal-close=\"closeDetailsModal\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_extension_permissions_modal_domains %}\n    <sw-extension-domains-modal\n        v-if=\"showDomainsModal\"\n        :extension-label=\"extensionLabel\"\n        :domains=\"domainsList\"\n        @modal-close=\"toggleDomainsModal(false)\"\n    />\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n","import template from './sw-extension-permissions-modal.html.twig';\nimport './sw-extension-permissions-modal.scss';\n\n/**\n * @package checkout\n * @private\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: [\n        'modal-close',\n        'close-with-action',\n    ],\n\n    props: {\n        permissions: {\n            type: Object,\n            required: true,\n        },\n        domains: {\n            type: Array,\n            required: false,\n            default: () => [],\n        },\n        extensionLabel: {\n            type: String,\n            required: true,\n        },\n        actionLabel: {\n            type: String,\n            required: false,\n            default: null,\n        },\n        closeLabel: {\n            type: String,\n            required: false,\n            default: null,\n        },\n        title: {\n            type: String,\n            required: false,\n            default: null,\n        },\n        description: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            showDetailsModal: false,\n            showDomainsModal: false,\n            selectedEntity: '',\n        };\n    },\n\n    computed: {\n        modalTitle() {\n            if (this.title) {\n                return this.title;\n            }\n\n            return this.$tc('sw-extension-store.component.sw-extension-permissions-modal.title', 1, {\n                extensionLabel: this.extensionLabel,\n            });\n        },\n\n        permissionsWithGroupedOperations() {\n            return Object.fromEntries(\n                Object.entries(this.permissions).map(\n                    ([\n                        category,\n                        permissions,\n                    ]) => {\n                        permissions = permissions.reduce((acc, permission) => {\n                            const entity = permission.entity;\n\n                            if (entity === 'additional_privileges') {\n                                acc[permission.operation] = [];\n\n                                return acc;\n                            }\n\n                            acc[entity] = (acc[entity] || []).concat(permission.operation);\n\n                            return acc;\n                        }, {});\n                        return [\n                            category,\n                            permissions,\n                        ];\n                    },\n                ),\n            );\n        },\n\n        domainsList() {\n            if (this.domains && Array.isArray(this.domains)) {\n                return this.domains;\n            }\n\n            return [];\n        },\n\n        closeBtnLabel() {\n            if (this.closeLabel) {\n                return this.closeLabel;\n            }\n\n            return this.$tc('global.sw-modal.labelClose');\n        },\n\n        descriptionText() {\n            if (this.description) {\n                return this.description;\n            }\n\n            return this.$tc('sw-extension-store.component.sw-extension-permissions-modal.description', 1, {\n                extensionLabel: this.extensionLabel,\n            });\n        },\n\n        assetFilter() {\n            return Cicada.Filter.getByName('asset');\n        },\n\n        listeners() {\n            if (this.isCompatEnabled('INSTANCE_LISTENERS')) {\n                return this.$listeners;\n            }\n\n            return {};\n        },\n    },\n\n    methods: {\n        close() {\n            this.$emit('modal-close');\n        },\n\n        closeWithAction() {\n            this.$emit('close-with-action');\n        },\n\n        categoryLabel(category) {\n            return this.$tc(`entityCategories.${category}.title`);\n        },\n\n        openDetailsModal(category) {\n            this.selectedEntity = category;\n            this.showDetailsModal = true;\n        },\n\n        closeDetailsModal() {\n            this.selectedEntity = '';\n            this.showDetailsModal = false;\n        },\n\n        toggleDomainsModal(shouldOpen) {\n            this.showDomainsModal = !!shouldOpen;\n        },\n    },\n};\n"],"names":["template","index","category","permissions","acc","permission","entity","shouldOpen"],"mappings":"AAAA,MAAeA,EAAA,40GCOAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,MAAO,CACH,cACA,mBACH,EAED,MAAO,CACH,YAAa,CACT,KAAM,OACN,SAAU,EACb,EACD,QAAS,CACL,KAAM,MACN,SAAU,GACV,QAAS,IAAM,CAAE,CACpB,EACD,eAAgB,CACZ,KAAM,OACN,SAAU,EACb,EACD,YAAa,CACT,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EACD,WAAY,CACR,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EACD,MAAO,CACH,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EACD,YAAa,CACT,KAAM,OACN,SAAU,GACV,QAAS,IACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,iBAAkB,GAClB,iBAAkB,GAClB,eAAgB,EAC5B,CACK,EAED,SAAU,CACN,YAAa,CACT,OAAI,KAAK,MACE,KAAK,MAGT,KAAK,IAAI,oEAAqE,EAAG,CACpF,eAAgB,KAAK,cACrC,CAAa,CACJ,EAED,kCAAmC,CAC/B,OAAO,OAAO,YACV,OAAO,QAAQ,KAAK,WAAW,EAAE,IAC7B,CAAC,CACGE,EACAC,CACxB,KACwBA,EAAcA,EAAY,OAAO,CAACC,EAAKC,IAAe,CAClD,MAAMC,EAASD,EAAW,OAE1B,OAAIC,IAAW,yBACXF,EAAIC,EAAW,SAAS,EAAI,GAErBD,IAGXA,EAAIE,CAAM,GAAKF,EAAIE,CAAM,GAAK,CAAA,GAAI,OAAOD,EAAW,SAAS,EAEtDD,EACV,EAAE,CAAE,CAAA,EACE,CACHF,EACAC,CAC5B,EAEiB,CACjB,CACS,EAED,aAAc,CACV,OAAI,KAAK,SAAW,MAAM,QAAQ,KAAK,OAAO,EACnC,KAAK,QAGT,EACV,EAED,eAAgB,CACZ,OAAI,KAAK,WACE,KAAK,WAGT,KAAK,IAAI,4BAA4B,CAC/C,EAED,iBAAkB,CACd,OAAI,KAAK,YACE,KAAK,YAGT,KAAK,IAAI,0EAA2E,EAAG,CAC1F,eAAgB,KAAK,cACrC,CAAa,CACJ,EAED,aAAc,CACV,OAAO,OAAO,OAAO,UAAU,OAAO,CACzC,EAED,WAAY,CACR,OAAI,KAAK,gBAAgB,oBAAoB,EAClC,KAAK,WAGT,EACV,CACJ,EAED,QAAS,CACL,OAAQ,CACJ,KAAK,MAAM,aAAa,CAC3B,EAED,iBAAkB,CACd,KAAK,MAAM,mBAAmB,CACjC,EAED,cAAcD,EAAU,CACpB,OAAO,KAAK,IAAI,oBAAoBA,CAAQ,QAAQ,CACvD,EAED,iBAAiBA,EAAU,CACvB,KAAK,eAAiBA,EACtB,KAAK,iBAAmB,EAC3B,EAED,mBAAoB,CAChB,KAAK,eAAiB,GACtB,KAAK,iBAAmB,EAC3B,EAED,mBAAmBK,EAAY,CAC3B,KAAK,iBAAmB,CAAC,CAACA,CAC7B,CACJ,CACL"}
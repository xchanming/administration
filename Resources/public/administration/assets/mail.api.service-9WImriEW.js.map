{"version":3,"file":"mail.api.service-9WImriEW.js","sources":["../../../app/administration/src/core/service/api/mail.api.service.js"],"sourcesContent":["import ApiService from '../api.service';\n\n/**\n * Gateway for the API end point \"mail\"\n * @class\n * @extends ApiService\n * @package services-settings\n */\nclass MailApiService extends ApiService {\n    constructor(httpClient, loginService, apiEndpoint = 'mail-template') {\n        super(httpClient, loginService, apiEndpoint);\n        this.name = 'mailService';\n    }\n\n    sendMailTemplate(\n        recipientMail,\n        recipient,\n        mailTemplate,\n        mailTemplateMedia,\n        salesChannelId,\n        testMode = false,\n        documentIds = [],\n        templateData = null,\n        mailTemplateTypeId = null,\n        mailTemplateId = null,\n    ) {\n        const apiRoute = `/_action/${this.getApiBasePath()}/send`;\n\n        return this.httpClient\n            .post(\n                apiRoute,\n                {\n                    contentHtml: mailTemplate.contentHtml ?? mailTemplate.translated?.contentHtml,\n                    contentPlain: mailTemplate.contentPlain ?? mailTemplate.translated?.contentPlain,\n                    mailTemplateData: templateData ?? mailTemplate.mailTemplateType.templateData,\n                    recipients: { [recipientMail]: recipient },\n                    salesChannelId: salesChannelId,\n                    mediaIds: mailTemplateMedia.getIds(),\n                    subject: mailTemplate.subject ?? mailTemplate.translated?.subject,\n                    senderMail: mailTemplate.senderMail,\n                    senderName: mailTemplate.senderName ?? mailTemplate.translated?.senderName,\n                    documentIds,\n                    testMode,\n                    mailTemplateTypeId,\n                    mailTemplateId,\n                },\n                {\n                    headers: this.getBasicHeaders(),\n                },\n            )\n            .then((response) => {\n                return ApiService.handleResponse(response);\n            });\n    }\n\n    testMailTemplate(\n        recipient,\n        mailTemplate,\n        mailTemplateMedia,\n        salesChannelId,\n        mailTemplateTypeId,\n        mailTemplateId,\n        documentIds = [],\n    ) {\n        return this.sendMailTemplate(\n            recipient,\n            recipient,\n            mailTemplate,\n            mailTemplateMedia,\n            salesChannelId,\n            true,\n            documentIds,\n            null,\n            mailTemplateTypeId,\n            mailTemplateId,\n        );\n    }\n\n    buildRenderPreview(mailTemplateType, mailTemplate) {\n        const apiRoute = `/_action/${this.getApiBasePath()}/build`;\n\n        return this.httpClient\n            .post(\n                apiRoute,\n                {\n                    mailTemplateType: mailTemplateType,\n                    mailTemplate: mailTemplate,\n                },\n                {\n                    headers: this.getBasicHeaders(),\n                },\n            )\n            .then((response) => {\n                return ApiService.handleResponse(response);\n            });\n    }\n}\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default MailApiService;\n"],"names":["MailApiService","ApiService","httpClient","loginService","apiEndpoint","recipientMail","recipient","mailTemplate","mailTemplateMedia","salesChannelId","testMode","documentIds","templateData","mailTemplateTypeId","mailTemplateId","apiRoute","_a","_b","_c","_d","response","mailTemplateType"],"mappings":"iHAQA,MAAMA,UAAuBC,CAAW,CACpC,YAAYC,EAAYC,EAAcC,EAAc,gBAAiB,CACjE,MAAMF,EAAYC,EAAcC,CAAW,EAC3C,KAAK,KAAO,aACf,CAED,iBACIC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAW,GACXC,EAAc,CAAE,EAChBC,EAAe,KACfC,EAAqB,KACrBC,EAAiB,KACnB,aACE,MAAMC,EAAW,YAAY,KAAK,eAAc,CAAE,QAElD,OAAO,KAAK,WACP,KACGA,EACA,CACI,YAAaR,EAAa,eAAeS,EAAAT,EAAa,aAAb,YAAAS,EAAyB,aAClE,aAAcT,EAAa,gBAAgBU,EAAAV,EAAa,aAAb,YAAAU,EAAyB,cACpE,iBAAkBL,GAAgBL,EAAa,iBAAiB,aAChE,WAAY,CAAE,CAACF,CAAa,EAAGC,CAAW,EAC1C,eAAgBG,EAChB,SAAUD,EAAkB,OAAQ,EACpC,QAASD,EAAa,WAAWW,EAAAX,EAAa,aAAb,YAAAW,EAAyB,SAC1D,WAAYX,EAAa,WACzB,WAAYA,EAAa,cAAcY,EAAAZ,EAAa,aAAb,YAAAY,EAAyB,YAChE,YAAAR,EACA,SAAAD,EACA,mBAAAG,EACA,eAAAC,CACH,EACD,CACI,QAAS,KAAK,gBAAiB,CAClC,CACJ,EACA,KAAMM,GACInB,EAAW,eAAemB,CAAQ,CAC5C,CACR,CAED,iBACId,EACAC,EACAC,EACAC,EACAI,EACAC,EACAH,EAAc,CAAE,EAClB,CACE,OAAO,KAAK,iBACRL,EACAA,EACAC,EACAC,EACAC,EACA,GACAE,EACA,KACAE,EACAC,CACZ,CACK,CAED,mBAAmBO,EAAkBd,EAAc,CAC/C,MAAMQ,EAAW,YAAY,KAAK,eAAc,CAAE,SAElD,OAAO,KAAK,WACP,KACGA,EACA,CACI,iBAAkBM,EAClB,aAAcd,CACjB,EACD,CACI,QAAS,KAAK,gBAAiB,CAClC,CACJ,EACA,KAAMa,GACInB,EAAW,eAAemB,CAAQ,CAC5C,CACR,CACL"}
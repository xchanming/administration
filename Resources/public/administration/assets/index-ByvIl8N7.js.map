{"version":3,"file":"index-ByvIl8N7.js","sources":["../../../app/administration/src/app/component/utils/sw-notification-center/sw-notification-center.html.twig","../../../app/administration/src/app/component/utils/sw-notification-center/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_notification_center %}\n<sw-context-button\n    ref=\"notificationCenterContextButton\"\n    aria-label=\"global.notification-center.title\"\n    class=\"sw-notification-center__context-button\"\n    :class=\"additionalContextButtonClass\"\n    :auto-close=\"false\"\n    :menu-width=\"360\"\n    :menu-offset-top=\"10\"\n    :menu-offset-left=\"24\"\n    :additional-context-menu-classes=\"additionalContextMenuClasses\"\n    @context-menu-after-open=\"onContextMenuOpen\"\n    @context-menu-after-close=\"onContextMenuClose\"\n>\n    <template #button>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_notification_center_context_button_button_slot %}\n        <sw-icon\n            name=\"regular-bell\"\n            size=\"20px\"\n        />\n        {% endblock %}\n    </template>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_notification_center_content %}\n    <div class=\"sw-notification-center__content\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_notification_center_content_header %}\n        <div class=\"sw-notification-center__header\">\n            <h3 class=\"sw-notification-center__title\">\n                {{ $tc('global.notification-center.title') }}\n            </h3>\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_notification_center_content_context_menu %}\n            <sw-context-button>\n                <sw-context-menu-item\n                    variant=\"danger\"\n                    @click=\"openDeleteModal\"\n                >\n                    {{ $tc('global.notification-center.deleteModal.title') }}\n                </sw-context-menu-item>\n            </sw-context-button>\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_notification_center_content_notification_container %}\n        <div class=\"sw-notification-center__notification-container\">\n            <div v-show=\"notifications.length > 0\">\n                <sw-notification-center-item\n                    v-for=\"notification in notifications\"\n                    :key=\"notification.uuid\"\n                    :notification=\"notification\"\n                    @center-close=\"changeVisibility(false)\"\n                />\n            </div>\n\n            <div\n                v-show=\"notifications.length === 0\"\n                class=\"sw-notification-center__empty-text\"\n            >\n                {{ $tc('global.notification-center.emptyText') }}\n            </div>\n        </div>\n        {% endblock %}\n    </div>\n    {% endblock %}\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_notification_center_delete_modal %}\n    <sw-modal\n        v-if=\"showDeleteModal\"\n        :title=\"$tc('global.notification-center.deleteModal.title')\"\n        variant=\"small\"\n        @modal-close=\"onCloseDeleteModal\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_notification_center_delete_modal_confirm_delete_text %}\n        <p class=\"sw_notification_center__confirm-delete-text\">\n            {{ $tc('global.notification-center.deleteModal.textConfirm') }}\n        </p>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_notification_center_delete_modal_footer %}\n        <template #modal-footer>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_notification_center_delete_modal_cancel %}\n            <sw-button\n                size=\"small\"\n                @click=\"onCloseDeleteModal\"\n            >\n                {{ $tc('global.default.cancel') }}\n            </sw-button>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_notification_center_delete_modal_confirm %}\n            <sw-button\n                variant=\"primary\"\n                size=\"small\"\n                @click=\"onConfirmDelete\"\n            >\n                {{ $tc('global.default.delete') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </sw-modal>\n    {% endblock %}\n</sw-context-button>\n{% endblock %}\n","import { POLL_BACKGROUND_INTERVAL, POLL_FOREGROUND_INTERVAL } from 'src/core/worker/worker-notification-listener';\nimport template from './sw-notification-center.html.twig';\nimport './sw-notification-center.scss';\n\nconst { Component, Mixin } = Cicada;\n\n/**\n * @private\n */\nComponent.register('sw-notification-center', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['feature'],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    data() {\n        return {\n            additionalContextMenuClasses: {\n                'sw-notification-center__context-container': true,\n            },\n            showDeleteModal: false,\n            unsubscribeFromStore: null,\n        };\n    },\n\n    computed: {\n        notifications() {\n            return Object.values(Cicada.State.getters['notification/getNotificationsObject']).reverse();\n        },\n\n        additionalContextButtonClass() {\n            return {\n                'sw-notification-center__context-button--new-available': this.notifications.some((n) => !n.visited),\n            };\n        },\n    },\n\n    created() {\n        this.unsubscribeFromStore = Cicada.State.subscribeAction(this.createNotificationFromSystemError);\n        if (this.isCompatEnabled('INSTANCE_EVENT_EMITTER')) {\n            this.$root.$on('on-change-notification-center-visibility', this.changeVisibility);\n        } else {\n            Cicada.Utils.EventBus.on('on-change-notification-center-visibility', this.changeVisibility);\n        }\n    },\n\n    beforeDestroyed() {\n        if (typeof this.unsubscribeFromStore === 'function') {\n            this.unsubscribeFromStore();\n        }\n\n        if (!this.isCompatEnabled('INSTANCE_EVENT_EMITTER')) {\n            this.$root.$off('on-change-notification-center-visibility', this.changeVisibility);\n        } else {\n            Cicada.Utils.EventBus.$off('on-change-notification-center-visibility', this.changeVisibility);\n        }\n    },\n\n    methods: {\n        onContextMenuOpen() {\n            Cicada.State.commit('notification/setWorkerProcessPollInterval', POLL_FOREGROUND_INTERVAL);\n        },\n        onContextMenuClose() {\n            Cicada.State.dispatch('notification/setAllNotificationsVisited');\n            Cicada.State.commit('notification/setWorkerProcessPollInterval', POLL_BACKGROUND_INTERVAL);\n        },\n        openDeleteModal() {\n            this.showDeleteModal = true;\n        },\n        onConfirmDelete() {\n            Cicada.State.commit('notification/clearNotificationsForCurrentUser');\n            this.showDeleteModal = false;\n        },\n        onCloseDeleteModal() {\n            this.showDeleteModal = false;\n        },\n        changeVisibility(visible) {\n            if (this.$refs.notificationCenterContextButton === undefined) {\n                return;\n            }\n\n            if (visible) {\n                this.$refs.notificationCenterContextButton.openMenu();\n                return;\n            }\n\n            this.$refs.notificationCenterContextButton.showMenu = false;\n            this.$refs.notificationCenterContextButton.removeMenuFromBody();\n            this.$refs.notificationCenterContextButton.$emit('context-menu-after-close');\n        },\n        createNotificationFromSystemError({ type, payload }) {\n            if (type !== 'addSystemError') {\n                return;\n            }\n\n            this.createSystemNotificationError({\n                id: payload.id,\n                message: payload.error.detail,\n            });\n        },\n    },\n});\n"],"names":["template","Component","Mixin","n","POLL_FOREGROUND_INTERVAL","POLL_BACKGROUND_INTERVAL","visible","type","payload"],"mappings":"sHAAA,MAAeA,EAAA,4kFCIT,CAAE,UAAAC,EAAW,MAAAC,CAAO,EAAG,OAK7BD,EAAU,SAAS,yBAA0B,CACzC,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,SAAS,EAElB,OAAQ,CACJE,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,MAAO,CACH,6BAA8B,CAC1B,4CAA6C,EAChD,EACD,gBAAiB,GACjB,qBAAsB,IAClC,CACK,EAED,SAAU,CACN,eAAgB,CACZ,OAAO,OAAO,OAAO,OAAO,MAAM,QAAQ,qCAAqC,CAAC,EAAE,SACrF,EAED,8BAA+B,CAC3B,MAAO,CACH,wDAAyD,KAAK,cAAc,KAAMC,GAAM,CAACA,EAAE,OAAO,CAClH,CACS,CACJ,EAED,SAAU,CACN,KAAK,qBAAuB,OAAO,MAAM,gBAAgB,KAAK,iCAAiC,EAC3F,KAAK,gBAAgB,wBAAwB,EAC7C,KAAK,MAAM,IAAI,2CAA4C,KAAK,gBAAgB,EAEhF,OAAO,MAAM,SAAS,GAAG,2CAA4C,KAAK,gBAAgB,CAEjG,EAED,iBAAkB,CACV,OAAO,KAAK,sBAAyB,YACrC,KAAK,qBAAoB,EAGxB,KAAK,gBAAgB,wBAAwB,EAG9C,OAAO,MAAM,SAAS,KAAK,2CAA4C,KAAK,gBAAgB,EAF5F,KAAK,MAAM,KAAK,2CAA4C,KAAK,gBAAgB,CAIxF,EAED,QAAS,CACL,mBAAoB,CAChB,OAAO,MAAM,OAAO,4CAA6CC,CAAwB,CAC5F,EACD,oBAAqB,CACjB,OAAO,MAAM,SAAS,yCAAyC,EAC/D,OAAO,MAAM,OAAO,4CAA6CC,CAAwB,CAC5F,EACD,iBAAkB,CACd,KAAK,gBAAkB,EAC1B,EACD,iBAAkB,CACd,OAAO,MAAM,OAAO,+CAA+C,EACnE,KAAK,gBAAkB,EAC1B,EACD,oBAAqB,CACjB,KAAK,gBAAkB,EAC1B,EACD,iBAAiBC,EAAS,CACtB,GAAI,KAAK,MAAM,kCAAoC,OAInD,IAAIA,EAAS,CACT,KAAK,MAAM,gCAAgC,WAC3C,MACH,CAED,KAAK,MAAM,gCAAgC,SAAW,GACtD,KAAK,MAAM,gCAAgC,qBAC3C,KAAK,MAAM,gCAAgC,MAAM,0BAA0B,EAC9E,EACD,kCAAkC,CAAE,KAAAC,EAAM,QAAAC,GAAW,CAC7CD,IAAS,kBAIb,KAAK,8BAA8B,CAC/B,GAAIC,EAAQ,GACZ,QAASA,EAAQ,MAAM,MACvC,CAAa,CACJ,CACJ,CACL,CAAC"}
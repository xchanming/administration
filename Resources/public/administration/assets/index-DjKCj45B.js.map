{"version":3,"file":"index-DjKCj45B.js","sources":["../../../app/administration/src/module/sw-sales-channel/component/sw-sales-channel-products-assignment-modal/sw-sales-channel-products-assignment-modal.html.twig","../../../app/administration/src/module/sw-sales-channel/component/sw-sales-channel-products-assignment-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_sales_channel_products_assignment_modal %}\n<sw-modal\n    class=\"sw-sales-channel-products-assignment-modal\"\n    :title=\"$tc('sw-sales-channel.detail.productAssignmentModal.title')\"\n    @modal-close=\"onCloseModal\"\n>\n    <template #default>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_products_assignment_modal_tabs %}\n        <sw-tabs\n            class=\"sw-sales-channel-products-assignment-modal__tabs\"\n            position-identifier=\"sw-sales-channel-products-assignment-modal\"\n            default-item=\"singleProducts\"\n        >\n            <template #default=\"{ active }\">\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_sales_channel_products_assignment_modal_tabs_single_products %}\n                <sw-tabs-item\n                    name=\"singleProducts\"\n                    :title=\"$tc('sw-sales-channel.detail.productAssignmentModal.singleProducts')\"\n                    :active-tab=\"active\"\n                >\n                    {{ $tc('sw-sales-channel.detail.productAssignmentModal.singleProducts') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_sales_channel_products_assignment_modal_tabs_categories %}\n                <sw-tabs-item\n                    name=\"categories\"\n                    :title=\"$tc('sw-sales-channel.detail.productAssignmentModal.categories.title')\"\n                    :active-tab=\"active\"\n                >\n                    {{ $tc('sw-sales-channel.detail.productAssignmentModal.categories.title') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_sales_channel_products_assignment_modal_tab_dynamic_product_groups %}\n                <sw-tabs-item\n                    name=\"dynamicProductGroups\"\n                    :title=\"$tc('sw-sales-channel.detail.productAssignmentModal.dynamicProductGroups.title')\"\n                    :active-tab=\"active\"\n                >\n                    {{ $tc('sw-sales-channel.detail.productAssignmentModal.dynamicProductGroups.title') }}\n                </sw-tabs-item>\n                {% endblock %}\n            </template>\n\n            <template #content=\"{ active }\">\n                <div\n                    class=\"sw-sales-channel-products-assignment-modal__content\"\n                    :height=\"tabContentHeight\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_sales_channel_products_assignment_modal_tab_content_single_products %}\n                    <sw-sales-channel-products-assignment-single-products\n                        ref=\"product\"\n                        v-hide=\"active === 'singleProducts'\"\n                        :sales-channel=\"salesChannel\"\n                        :container-style=\"productContainerStyle\"\n                        @selection-change=\"onChangeSelection\"\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_sales_channel_products_assignment_modal_tab_content_categories %}\n                    <sw-sales-channel-product-assignment-categories\n                        ref=\"category\"\n                        v-hide=\"active === 'categories'\"\n                        :sales-channel=\"salesChannel\"\n                        :container-style=\"categoryContainerStyle\"\n                        @selection-change=\"onChangeSelection\"\n                        @product-loading=\"setProductLoading\"\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_sales_channel_products_assignment_modal_tab_content_dynamic_product_groups %}\n                    <sw-sales-channel-products-assignment-dynamic-product-groups\n                        ref=\"productGroup\"\n                        v-hide=\"active === 'dynamicProductGroups'\"\n                        :sales-channel=\"salesChannel\"\n                        :container-style=\"productGroupContainerStyle\"\n                        @selection-change=\"onChangeSelection\"\n                        @product-loading=\"setProductLoading\"\n                    />\n                    {% endblock %}\n                </div>\n            </template>\n        </sw-tabs>\n        {% endblock %}\n    </template>\n\n    <template #modal-footer>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_products_assignment_modal_footer_cancel %}\n        <sw-button\n            class=\"sw-sales-channel-products-assignment-modal__close-button\"\n            size=\"small\"\n            @click=\"onCloseModal\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_products_assignment_modal_footer_submit %}\n        <sw-button\n            size=\"small\"\n            variant=\"primary\"\n            :is-loading=\"isAssignProductLoading || isProductLoading\"\n            @click=\"onAddProducts\"\n        >\n            {{ $tc('sw-sales-channel.detail.products.buttonAddProducts', productCount, { productCount: productCount }) }}\n        </sw-button>\n        {% endblock %}\n    </template>\n</sw-modal>\n{% endblock %}\n","/**\n * @package discovery\n */\n\nimport template from './sw-sales-channel-products-assignment-modal.html.twig';\nimport './sw-sales-channel-products-assignment-modal.scss';\n\nconst { uniqBy } = Cicada.Utils.array;\n\nconst updateElementVisibility = (element, binding) => {\n    element.style.visibility = binding.value ? 'visible' : 'hidden';\n    element.style.position = binding.value ? 'static' : 'absolute';\n    element.style.top = binding.value ? 'auto' : '0';\n    element.style.left = binding.value ? 'auto' : '0';\n    element.style.bottom = binding.value ? 'auto' : '0';\n    element.style.right = binding.value ? 'auto' : '0';\n    element.style.transform = binding.value ? 'translateX(0)' : 'translateX(100%)';\n};\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: [\n        'modal-close',\n        'products-add',\n    ],\n\n    directives: {\n        hide: {\n            beforeMount: updateElementVisibility,\n            updated: updateElementVisibility,\n        },\n    },\n\n    props: {\n        salesChannel: {\n            type: Object,\n            required: true,\n        },\n\n        isAssignProductLoading: {\n            type: Boolean,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            singleProducts: [],\n            categoryProducts: [],\n            groupProducts: [],\n            isProductLoading: false,\n            tabContentHeight: '600px',\n            productContainerStyle: {\n                display: 'grid',\n                placeItems: 'stretch',\n            },\n            categoryContainerStyle: {\n                display: 'grid',\n                placeItems: 'stretch',\n            },\n            productGroupContainerStyle: {\n                display: 'grid',\n                placeItems: 'stretch',\n            },\n        };\n    },\n\n    computed: {\n        productCount() {\n            return this.products.length;\n        },\n\n        products() {\n            return uniqBy(\n                [\n                    ...this.singleProducts,\n                    ...this.categoryProducts,\n                    ...this.groupProducts,\n                ],\n                'id',\n            );\n        },\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        mountedComponent() {\n            this.getProductContainerStyle();\n            this.getCategoryContainerStyle();\n            this.getProductGroupContainerStyle();\n        },\n\n        getProductContainerStyle() {\n            // eslint-disable-next-line max-len\n            const cardSectionSecondaryHeight = `${this.$refs?.product?.$refs?.cardSectionSecondary?.$el?.offsetHeight ?? 0}px`;\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                // eslint-disable-next-line max-len\n                this.$set(\n                    this.productContainerStyle,\n                    'grid-template-rows',\n                    `auto calc(${this.tabContentHeight} - ${cardSectionSecondaryHeight})`,\n                );\n            } else {\n                this.productContainerStyle['grid-template-rows'] =\n                    `auto calc(${this.tabContentHeight} - ${cardSectionSecondaryHeight})`;\n            }\n        },\n\n        getCategoryContainerStyle() {\n            const tabContentGutter = '20px';\n            const alertHeight = `${this.$refs?.category?.$refs?.alert?.$el?.offsetHeight ?? 0}px`;\n            // eslint-disable-next-line max-len\n            const cardSectionSecondaryHeight = `${this.$refs?.category?.$refs?.cardSectionSecondary?.$el?.offsetHeight ?? 0}px`;\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                this.$set(\n                    this.categoryContainerStyle,\n                    'grid-template-rows',\n                    // eslint-disable-next-line max-len\n                    `auto calc(${this.tabContentHeight} - (${tabContentGutter} + ${alertHeight} + ${cardSectionSecondaryHeight}))`,\n                );\n            } else {\n                this.productContainerStyle['grid-template-rows'] =\n                    `auto calc(${this.tabContentHeight} - (${tabContentGutter} + ${alertHeight} + ${\n                        cardSectionSecondaryHeight\n                    }))`;\n            }\n        },\n\n        getProductGroupContainerStyle() {\n            const tabContentGutter = '20px';\n            const alertHeight = `${this.$refs?.productGroup?.$refs?.alert?.$el?.offsetHeight ?? 0}px`;\n            // eslint-disable-next-line max-len\n            const cardSectionSecondaryHeight = `${this.$refs?.productGroup?.$refs?.cardSectionSecondary?.$el?.offsetHeight ?? 0}px`;\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                this.$set(\n                    this.productGroupContainerStyle,\n                    'grid-template-rows',\n                    // eslint-disable-next-line max-len\n                    `auto calc(${this.tabContentHeight} - (${tabContentGutter} + ${alertHeight} + ${cardSectionSecondaryHeight}))`,\n                );\n            } else {\n                this.productContainerStyle['grid-template-rows'] =\n                    `auto calc(${this.tabContentHeight} - (${tabContentGutter} + ${alertHeight} + ${\n                        cardSectionSecondaryHeight\n                    }))`;\n            }\n        },\n\n        onChangeSelection(products, type) {\n            this[type] = products;\n        },\n\n        onCloseModal() {\n            this.$emit('modal-close');\n        },\n\n        onAddProducts() {\n            this.$emit('products-add', this.products);\n        },\n\n        setProductLoading(isProductLoading) {\n            this.isProductLoading = isProductLoading;\n        },\n    },\n};\n"],"names":["template","uniqBy","updateElementVisibility","element","binding","index","_a","_b","_c","_d","_e","cardSectionSecondaryHeight","_f","_g","_h","_i","_j","tabContentGutter","alertHeight","products","type","isProductLoading"],"mappings":"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"}
{"version":3,"file":"index-DmmXYy7d.js","sources":["../../../app/administration/src/module/sw-review/page/sw-review-list/sw-review-list.html.twig","../../../app/administration/src/module/sw-review/page/sw-review-list/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_review_list %}\n<sw-page class=\"sw-review-list\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_review_list_search_bar %}\n    <template #search-bar>\n        <sw-search-bar\n            initial-search-type=\"product_review\"\n            :initial-search=\"term\"\n            :placeholder=\"$tc('sw-review.list.placeholderSearchBar')\"\n            @search=\"onSearch\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_review_list_smart_bar_header %}\n    <template #smart-bar-header>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_review_list_smart_bar_header_title %}\n        <h2>\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_smart_bar_header_title_text %}\n            {{ $tc('sw-review.list.textReviewOverview') }}\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_smart_bar_header_amount %}\n            <span\n                v-if=\"!isLoading\"\n                class=\"sw-page__smart-bar-amount\"\n            >\n                ({{ items.total }})\n            </span>\n            {% endblock %}\n        </h2>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_review_list_content %}\n    <template #content>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_review_list_content_list %}\n        <sw-entity-listing\n            v-if=\"isLoading || items\"\n            ref=\"listing\"\n            detail-route=\"sw.review.detail\"\n            :repository=\"repository\"\n            :columns=\"columns\"\n            :items=\"items\"\n            :allow-edit=\"acl.can('review.editor') || undefined\"\n            :allow-delete=\"acl.can('review.deleter') || undefined\"\n            :show-selection=\"acl.can('review.deleter') || undefined\"\n            :disable-data-fetching=\"true\"\n            :sort-by=\"sortBy\"\n            :sort-direction=\"sortDirection\"\n            identifier=\"sw-review-list\"\n            :is-loading=\"isLoading\"\n            @page-change=\"onPageChange\"\n            @column-sort=\"onSortColumn\"\n        >\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_content_list_status %}\n            <template #column-status=\"{ item }\">\n                <sw-data-grid-column-boolean\n                    v-model:value=\"item.status\"\n                    :is-inline-edit=\"false\"\n                />\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_content_list_title %}\n            <template #column-title=\"{ item }\">\n                <div class=\"sw-review-text_ellipsis\">\n                    <router-link :to=\"{ name: 'sw.review.detail', params: { id: item.id } }\">\n                        {{ item.title }}\n                    </router-link>\n                </div>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_content_list_created_at %}\n            <template #column-createdAt=\"{ item }\">\n                {{ dateFilter(item.createdAt, { hour: '2-digit', minute: '2-digit', second: '2-digit' }) }}\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_content_list_user %}\n            <template #column-user=\"{ item }\">\n                <router-link\n                    v-if=\"item.customer\"\n                    :to=\"{ name: 'sw.customer.detail', params: { id: item.customerId } }\"\n                >\n                    {{ item.customer.name }}\n                </router-link>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_content_list_product %}\n            <template #column-product=\"{ item }\">\n                <template v-if=\"item.productId\">\n                    <router-link :to=\"{ name: 'sw.product.detail', params: { id: item.productId } }\">\n                        {{ item.product.translated.name }}\n                    </router-link>\n                </template>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_content_list_points %}\n            <template #column-points=\"{ item }\">\n                <sw-rating-stars :value=\"item.points\" />\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_content_list_comment %}\n            <template #column-comment=\"{ item }\">\n                <!-- eslint-disable vue/valid-v-model -->\n                <sw-data-grid-column-boolean\n                    :value=\"item.comment && item.comment.length > 0\"\n                    :is-inline-edit=\"false\"\n                />\n            </template>\n            {% endblock %}\n        </sw-entity-listing>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_review_list_empty_state %}\n        <sw-empty-state\n            v-if=\"!isLoading && !total\"\n            icon=\"regular-file-text\"\n            :title=\"$tc('sw-review.list.messageEmpty')\"\n            :subline=\"$tc('sw-review.list.messageEmptySubline')\"\n        />\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_review_list_sidebar %}\n    <template #sidebar>\n        <sw-sidebar>\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_review_list_sidebar_refresh %}\n            <sw-sidebar-item\n                icon=\"regular-undo\"\n                :title=\"$tc('sw-review.list.titleSidebarItemRefresh')\"\n                @click=\"onRefresh\"\n            />\n            {% endblock %}\n        </sw-sidebar>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","import template from './sw-review-list.html.twig';\nimport './sw-review-list.scss';\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n/**\n * @package inventory\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n    ],\n\n    mixins: [\n        Mixin.getByName('listing'),\n    ],\n\n    data() {\n        return {\n            isLoading: false,\n            items: null,\n            sortBy: 'status,createdAt',\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    computed: {\n        columns() {\n            return [\n                {\n                    property: 'title',\n                    dataIndex: 'title',\n                    label: 'sw-review.list.columnTitle',\n                },\n                {\n                    property: 'points',\n                    dataIndex: 'points',\n                    label: 'sw-review.list.columnPoints',\n                },\n                {\n                    property: 'product',\n                    dataIndex: 'product.name',\n                    label: 'sw-review.list.columnProduct',\n                    routerLink: 'sw.review.detail',\n                    primary: true,\n                },\n                {\n                    property: 'user',\n                    dataIndex: 'customer.name',\n                    label: 'sw-review.list.columnUser',\n                },\n                {\n                    property: 'createdAt',\n                    dataIndex: 'createdAt',\n                    label: 'sw-review.list.columnCreatedAt',\n                },\n                {\n                    property: 'status',\n                    dataIndex: 'status',\n                    label: 'sw-review.list.columnStatus',\n                    align: 'center',\n                },\n                {\n                    property: 'comment',\n                    dataIndex: 'comment',\n                    label: 'sw-review.list.columnComment',\n                    align: 'center',\n                },\n            ];\n        },\n\n        repository() {\n            return this.repositoryFactory.create('product_review');\n        },\n\n        criteria() {\n            const criteria = new Criteria(this.page, this.limit);\n\n            criteria.setTerm(this.term);\n\n            this.sortBy.split(',').forEach((sorting) => {\n                criteria.addSorting(Criteria.sort(sorting, this.sortDirection, this.naturalSorting));\n            });\n            criteria.addAssociation('customer');\n            criteria.addAssociation('product');\n\n            return criteria;\n        },\n\n        dateFilter() {\n            return Cicada.Filter.getByName('date');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.getList();\n        },\n\n        getList() {\n            this.isLoading = true;\n\n            const context = { ...Cicada.Context.api, inheritance: true };\n            return this.repository.search(this.criteria, context).then((result) => {\n                this.total = result.total;\n                this.items = result;\n                this.isLoading = false;\n            });\n        },\n\n        onDelete(option) {\n            this.$refs.listing.deleteItem(option);\n\n            this.repository\n                .search(this.criteria, {\n                    ...Cicada.Context.api,\n                    inheritance: true,\n                })\n                .then((result) => {\n                    this.total = result.total;\n                    this.items = result;\n                });\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","criteria","sorting","context","result","option"],"mappings":"AAAA,MAAeA,EAAA,k8GCGT,CAAE,MAAAC,CAAO,EAAG,OACZ,CAAE,SAAAC,CAAQ,EAAK,OAAO,KAMbC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,KACH,EAED,OAAQ,CACJC,EAAM,UAAU,SAAS,CAC5B,EAED,MAAO,CACH,MAAO,CACH,UAAW,GACX,MAAO,KACP,OAAQ,kBACpB,CACK,EAED,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAc,CACtC,CACK,EAED,SAAU,CACN,SAAU,CACN,MAAO,CACH,CACI,SAAU,QACV,UAAW,QACX,MAAO,4BACV,EACD,CACI,SAAU,SACV,UAAW,SACX,MAAO,6BACV,EACD,CACI,SAAU,UACV,UAAW,eACX,MAAO,+BACP,WAAY,mBACZ,QAAS,EACZ,EACD,CACI,SAAU,OACV,UAAW,gBACX,MAAO,2BACV,EACD,CACI,SAAU,YACV,UAAW,YACX,MAAO,gCACV,EACD,CACI,SAAU,SACV,UAAW,SACX,MAAO,8BACP,MAAO,QACV,EACD,CACI,SAAU,UACV,UAAW,UACX,MAAO,+BACP,MAAO,QACV,CACjB,CACS,EAED,YAAa,CACT,OAAO,KAAK,kBAAkB,OAAO,gBAAgB,CACxD,EAED,UAAW,CACP,MAAMG,EAAW,IAAIF,EAAS,KAAK,KAAM,KAAK,KAAK,EAEnD,OAAAE,EAAS,QAAQ,KAAK,IAAI,EAE1B,KAAK,OAAO,MAAM,GAAG,EAAE,QAASC,GAAY,CACxCD,EAAS,WAAWF,EAAS,KAAKG,EAAS,KAAK,cAAe,KAAK,cAAc,CAAC,CACnG,CAAa,EACDD,EAAS,eAAe,UAAU,EAClCA,EAAS,eAAe,SAAS,EAE1BA,CACV,EAED,YAAa,CACT,OAAO,OAAO,OAAO,UAAU,MAAM,CACxC,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,QAAO,CACf,EAED,SAAU,CACN,KAAK,UAAY,GAEjB,MAAME,EAAU,CAAE,GAAG,OAAO,QAAQ,IAAK,YAAa,IACtD,OAAO,KAAK,WAAW,OAAO,KAAK,SAAUA,CAAO,EAAE,KAAMC,GAAW,CACnE,KAAK,MAAQA,EAAO,MACpB,KAAK,MAAQA,EACb,KAAK,UAAY,EACjC,CAAa,CACJ,EAED,SAASC,EAAQ,CACb,KAAK,MAAM,QAAQ,WAAWA,CAAM,EAEpC,KAAK,WACA,OAAO,KAAK,SAAU,CACnB,GAAG,OAAO,QAAQ,IAClB,YAAa,EACjC,CAAiB,EACA,KAAMD,GAAW,CACd,KAAK,MAAQA,EAAO,MACpB,KAAK,MAAQA,CACjC,CAAiB,CACR,CACJ,CACL"}
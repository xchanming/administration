const i=`{% block sw_extension_ratings_card %} <sw-meteor-card class="sw-extension-ratings-card" :is-loading="isLoading" :title="$tc('sw-extension-store.component.sw-extension-ratings.sw-extension-ratings-card.cardTitle')" > {% block sw_extension_ratings_card_has_reviews %} <template v-if="hasReviews"> {% block sw_extension_ratings_card_has_reviews_summary %} <sw-extension-ratings-summary :summary="summary" /> {% endblock %} {% block sw_extension_ratings_card_has_reviews_wrapper %} <div class="sw-extension-ratings-card__reviews"> {% block sw_extension_ratings_card_has_reviews_wrapper_review %} <sw-extension-review v-for="(review, index) in reviews" :key="\`sw-extension-ratings-card__reviews-review-\${index}\`" :producer-name="producerName" :review="review" /> {% endblock %} {% block sw_extension_ratings_card_has_reviews_wrapper_more_button %} <sw-button v-if="canShowMore" size="small" @click="loadMoreReviews" > {{ $tc('sw-extension-store.component.sw-extension-ratings.sw-extension-ratings-card.labelMoreReviewsBtn') }} </sw-button> {% endblock %} </div> {% endblock %} </template> {% endblock %} {% block sw_extension_ratings_card_empty_state %} <template v-else> {% block sw_extension_ratings_card_empty_state_content %} {{ $tc('sw-extension-store.component.sw-extension-ratings.sw-extension-ratings-card.labelNoReviews') }} {% endblock %} </template> {% endblock %} {% block sw_extension_ratings_card_installed_and_licensed_headline %} <h3 v-if="isInstalledAndLicensed && !isLoading" class="sw-extension-ratings-card__footer-headline" > {{ $tc('sw-extension-store.component.sw-extension-ratings.sw-extension-ratings-card.footerHeadline') }} </h3> {% endblock %} {% block sw_extension_ratings_card_footer %} <template v-if="isInstalledAndLicensed && !isLoading" #footer > {% block sw_extension_ratings_card_footer_review_creation %} <sw-extension-review-creation :extension="extension" @created="$emit('update-extension')" /> {% endblock %} </template> {% endblock %} </sw-meteor-card> {% endblock %}`,n={template:i,compatConfig:Cicada.compatConfig,emits:["update-extension"],mixins:["sw-extension-error"],props:{extension:{type:Object,required:!0},producerName:{type:String,required:!0},isInstalledAndLicensed:{type:Boolean,required:!1,default:!1}},data(){return{reviews:[],isLoading:!1,criteriaPage:1,criteriaLimit:4,summary:null,numberOfRatings:0}},computed:{canShowMore(){return this.summary.numberOfRatings>this.reviews.length},numberOfRatingsHasChanged(){return this.numberOfRatings!==this.summary.numberOfRatings},extensionStoreDataService(){return Cicada.Service("extensionStoreDataService")},hasReviews(){return this.reviews.length>0}},watch:{extension(){this.fetchReviews()}},created(){this.createdComponent()},methods:{createdComponent(){this.fetchReviews()},async fetchReviews(s=!1){this.isLoading=!0;try{const{reviews:e,summary:t}=await this.getReviews();if(this.summary=t,s&&this.numberOfRatingsHasChanged){this.criteriaPage=1,this.criteriaLimit=4,this.reviews=[],await this.fetchReviews();return}this.numberOfRatings=this.summary.numberOfRatings,this.reviews=this.reviews.concat(e)}catch(e){typeof this.showExtensionErrors=="function"&&this.showExtensionErrors(e)}finally{this.isLoading=!1}},async loadMoreReviews(){this.criteriaPage+=1,await this.fetchReviews(!0)},async getReviews(){return this.extensionStoreDataService.getReviews(this.criteriaPage,this.criteriaLimit,this.extension.id)}}};export{n as default};
//# sourceMappingURL=index-CRSX6utP.js.map

{"version":3,"file":"index-BvsTgomi.js","sources":["../../../app/administration/src/module/sw-property/page/sw-property-list/sw-property-list.html.twig","../../../app/administration/src/module/sw-property/page/sw-property-list/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_property_list %}\n<sw-page class=\"sw-property-list\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_list_search_bar %}\n    <template #search-bar>\n        <sw-search-bar\n            initial-search-type=\"property\"\n            :placeholder=\"$tc('sw-property.general.placeholderSearchBar')\"\n            @search=\"onSearch\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_list_smart_bar_header %}\n    <template #smart-bar-header>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_property_list_smart_bar_header_title %}\n        <h2>\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_property_list_smart_bar_header_title_text %}\n            {{ $tc('sw-property.list.textProperties') }}\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_property_list_smart_bar_header_title_amount %}\n            <span\n                v-if=\"!isLoading\"\n                class=\"sw-page__smart-bar-amount\"\n            >\n                ({{ total }})\n            </span>\n            {% endblock %}\n\n        </h2>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_list_ %}\n    <template #smart-bar-actions>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_property_list_add_button %}\n        <sw-button\n            v-tooltip=\"{\n                message: $tc('sw-privileges.tooltip.warning'),\n                disabled: acl.can('property.creator'),\n                showOnDisabledElements: true\n            }\"\n            class=\"sw-property-list__button-create\"\n            :disabled=\"!acl.can('property.creator')\"\n            :router-link=\"{ name: 'sw.property.create' }\"\n            variant=\"primary\"\n        >\n            {{ $tc('sw-property.list.buttonAddProperty') }}\n        </sw-button>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_list_language_switch %}\n    <template #language-switch>\n        <sw-language-switch @on-change=\"onChangeLanguage\" />\n    </template>\n    {% endblock %}\n\n    <template #content>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_property_list_content %}\n        <div class=\"sw-property-list__content\">\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_property_list_grid %}\n            <sw-entity-listing\n                v-if=\"entitySearchable\"\n                ref=\"propertyList\"\n                class=\"sw-property-list-grid\"\n                :items=\"propertyGroup\"\n                :columns=\"getPropertyColumns()\"\n                :repository=\"propertyRepository\"\n                :show-selection=\"false\"\n                :show-settings=\"true\"\n                :full-page=\"true\"\n                :sort-by=\"currentSortBy\"\n                :sort-direction=\"sortDirection\"\n                :is-loading=\"isLoading\"\n                :allow-column-edit=\"true\"\n                :compact-mode=\"false\"\n                :allow-edit=\"acl.can('property.editor')\"\n                :allow-delete=\"acl.can('property.deleter')\"\n                :allow-inline-edit=\"acl.can('property.editor')\"\n                identifier=\"sw-properties-list\"\n                :disable-data-fetching=\"true\"\n                @column-sort=\"onSortColumn\"\n                @page-change=\"onPageChange\"\n            >\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_property_list_grid_options %}\n                <template\n                    #column-options=\"{ item }\"\n                >\n                    <span\n                        v-for=\"(option, index) in item.options.slice(0, 4)\"\n                        :key=\"option.id\"\n                    >\n                        {{ (index > 0) ? `, ${option.translated.name}` : option.translated.name }}\n                    </span>\n                    <span v-if=\"item.options.length >= 5\">\n                        , ...\n                    </span>\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_property_list_grid_filterable %}\n                <template #column-filterable=\"{ item, isInlineEdit }\">\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_property_list_grid_columns_filterable_inline_edit %}\n                    <template v-if=\"isInlineEdit\">\n                        <sw-checkbox-field\n                            v-model:value=\"item.filterable\"\n                        />\n                    </template>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_property_list_grid_columns_filterable_content %}\n                    <template v-else>\n                        <sw-icon\n                            v-if=\"item.filterable\"\n                            name=\"regular-checkmark-xs\"\n                            class=\"is--active\"\n                        />\n                        <sw-icon\n                            v-else\n                            name=\"regular-times-s\"\n                            class=\"is--inactive\"\n                        />\n                    </template>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_property_list_grid_columns_actions %}\n                <template\n                    #actions=\"{ item }\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_property_list_grid_columns_actions_detail %}\n                    <sw-context-menu-item\n                        class=\"sw-property-list__edit-action\"\n                        :router-link=\"{ name: 'sw.property.detail', params: { id: item.id } }\"\n                        :disabled=\"!acl.can('property.editor')\"\n                    >\n                        {{ $tc('sw-property.list.contextMenuView') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_property_list_grid_columns_actions_delete %}\n                    <sw-context-menu-item\n                        class=\"sw-property-list__delete-action\"\n                        variant=\"danger\"\n                        :disabled=\" !acl.can('property.deleter')\"\n                        @click=\"onDelete(item.id)\"\n                    >\n                        {{ $tc('sw-property.list.contextMenuDelete') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_product_list_grid_action_modals %}\n                <template\n                    #action-modals=\"{ item }\"\n                >\n                    <sw-modal\n                        v-if=\"showDeleteModal === item.id\"\n                        variant=\"small\"\n                        :title=\"$tc('global.default.warning')\"\n                        @modal-close=\"onCloseDeleteModal\"\n                    >\n                        <p class=\"sw-property-list__confirm-delete-text\">\n                            {{ $tc('sw-property.list.textDeleteConfirm', 0, { name: item.translated.name }) }}\n                        </p>\n\n                        <template #modal-footer>\n                            <sw-button\n                                size=\"small\"\n                                @click=\"onCloseDeleteModal\"\n                            >\n                                {{ $tc('global.default.cancel') }}\n                            </sw-button>\n\n                            <sw-button\n                                variant=\"danger\"\n                                size=\"small\"\n                                @click=\"onConfirmDelete(item.id)\"\n                            >\n                                {{ $tc('sw-property.list.buttonDelete') }}\n                            </sw-button>\n                        </template>\n                    </sw-modal>\n                </template>\n                {% endblock %}\n\n            </sw-entity-listing>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_property_list_empty_state %}\n            <template v-if=\"!isLoading && !total\">\n                <sw-empty-state\n                    v-if=\"isValidTerm(term)\"\n                    :title=\"$tc('sw-empty-state.messageNoResultTitle')\"\n                >\n                    <template #default>\n                        {{ $tc('sw-empty-state.messageNoResultSublineBefore') }}\n                        <router-link\n                            class=\"sw-empty-state__description-link\"\n                            :to=\"{ name: 'sw.profile.index.searchPreferences' }\"\n                        >\n                            {{ $tc('sw-empty-state.messageNoResultSublineLink') }}\n                        </router-link>\n                        {{ $tc('sw-empty-state.messageNoResultSublineAfter') }}\n                    </template>\n                </sw-empty-state>\n\n                <sw-empty-state\n                    v-else\n                    :title=\"$tc('sw-property.list.messageEmpty')\"\n                />\n            </template>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </template>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_property_list_sidebar %}\n    <template #sidebar>\n        <sw-sidebar>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_property_list_sidebar_refresh_item %}\n            <sw-sidebar-item\n                icon=\"regular-undo\"\n                :title=\"$tc('sw-property.list.titleSidebarItemRefresh')\"\n                @click=\"onRefresh\"\n            />\n            {% endblock %}\n        </sw-sidebar>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport template from './sw-property-list.html.twig';\nimport './sw-property-list.scss';\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n    ],\n\n    mixins: [\n        Mixin.getByName('listing'),\n    ],\n\n    data() {\n        return {\n            propertyGroup: null,\n            sortBy: 'name',\n            isLoading: false,\n            sortDirection: 'ASC',\n            showDeleteModal: false,\n            searchConfigEntity: 'property_group',\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    computed: {\n        propertyRepository() {\n            return this.repositoryFactory.create('property_group');\n        },\n\n        defaultCriteria() {\n            const criteria = new Criteria(this.page, this.limit);\n\n            criteria.setTerm(this.term);\n            criteria.addSorting(Criteria.sort(this.sortBy, this.sortDirection, this.useNaturalSorting));\n            const optionPart = criteria.getAssociation('options');\n            optionPart.setLimit(5);\n\n            return criteria;\n        },\n\n        useNaturalSorting() {\n            return this.sortBy === 'property.name';\n        },\n    },\n\n    methods: {\n        onDelete(id) {\n            this.showDeleteModal = id;\n        },\n\n        onCloseDeleteModal() {\n            this.showDeleteModal = false;\n        },\n\n        onConfirmDelete(id) {\n            this.showDeleteModal = false;\n\n            return this.propertyRepository.delete(id).then(() => {\n                this.getList();\n            });\n        },\n\n        onChangeLanguage() {\n            this.getList();\n        },\n\n        async getList() {\n            this.isLoading = true;\n\n            const criteria = await this.addQueryScores(this.term, this.defaultCriteria);\n            if (!this.entitySearchable) {\n                this.isLoading = false;\n                this.total = 0;\n\n                return false;\n            }\n\n            if (this.freshSearchTerm) {\n                criteria.resetSorting();\n            }\n\n            return this.propertyRepository\n                .search(criteria)\n                .then((items) => {\n                    this.total = items.total;\n                    this.propertyGroup = items;\n                    this.isLoading = false;\n\n                    return items;\n                })\n                .catch(() => {\n                    this.isLoading = false;\n                });\n        },\n\n        getPropertyColumns() {\n            return [\n                {\n                    property: 'name',\n                    label: 'sw-property.list.columnName',\n                    routerLink: 'sw.property.detail',\n                    inlineEdit: 'string',\n                    allowResize: true,\n                    primary: true,\n                },\n                {\n                    property: 'options',\n                    label: 'sw-property.list.columnOptions',\n                    allowResize: true,\n                },\n                {\n                    property: 'description',\n                    label: 'sw-property.list.columnDescription',\n                    allowResize: true,\n                },\n                {\n                    property: 'filterable',\n                    label: 'sw-property.list.columnFilterable',\n                    inlineEdit: 'boolean',\n                    allowResize: true,\n                    align: 'center',\n                },\n            ];\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","criteria","id","items"],"mappings":"AAAA,MAAeA,EAAA,qyKCOT,CAAE,MAAAC,CAAO,EAAG,OACZ,CAAE,SAAAC,CAAQ,EAAK,OAAO,KAGbC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,KACH,EAED,OAAQ,CACJC,EAAM,UAAU,SAAS,CAC5B,EAED,MAAO,CACH,MAAO,CACH,cAAe,KACf,OAAQ,OACR,UAAW,GACX,cAAe,MACf,gBAAiB,GACjB,mBAAoB,gBAChC,CACK,EAED,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAc,CACtC,CACK,EAED,SAAU,CACN,oBAAqB,CACjB,OAAO,KAAK,kBAAkB,OAAO,gBAAgB,CACxD,EAED,iBAAkB,CACd,MAAMG,EAAW,IAAIF,EAAS,KAAK,KAAM,KAAK,KAAK,EAEnD,OAAAE,EAAS,QAAQ,KAAK,IAAI,EAC1BA,EAAS,WAAWF,EAAS,KAAK,KAAK,OAAQ,KAAK,cAAe,KAAK,iBAAiB,CAAC,EACvEE,EAAS,eAAe,SAAS,EACzC,SAAS,CAAC,EAEdA,CACV,EAED,mBAAoB,CAChB,OAAO,KAAK,SAAW,eAC1B,CACJ,EAED,QAAS,CACL,SAASC,EAAI,CACT,KAAK,gBAAkBA,CAC1B,EAED,oBAAqB,CACjB,KAAK,gBAAkB,EAC1B,EAED,gBAAgBA,EAAI,CAChB,YAAK,gBAAkB,GAEhB,KAAK,mBAAmB,OAAOA,CAAE,EAAE,KAAK,IAAM,CACjD,KAAK,QAAO,CAC5B,CAAa,CACJ,EAED,kBAAmB,CACf,KAAK,QAAO,CACf,EAED,MAAM,SAAU,CACZ,KAAK,UAAY,GAEjB,MAAMD,EAAW,MAAM,KAAK,eAAe,KAAK,KAAM,KAAK,eAAe,EAC1E,OAAK,KAAK,kBAON,KAAK,iBACLA,EAAS,aAAY,EAGlB,KAAK,mBACP,OAAOA,CAAQ,EACf,KAAME,IACH,KAAK,MAAQA,EAAM,MACnB,KAAK,cAAgBA,EACrB,KAAK,UAAY,GAEVA,EACV,EACA,MAAM,IAAM,CACT,KAAK,UAAY,EACrC,CAAiB,IArBD,KAAK,UAAY,GACjB,KAAK,MAAQ,EAEN,GAmBd,EAED,oBAAqB,CACjB,MAAO,CACH,CACI,SAAU,OACV,MAAO,8BACP,WAAY,qBACZ,WAAY,SACZ,YAAa,GACb,QAAS,EACZ,EACD,CACI,SAAU,UACV,MAAO,iCACP,YAAa,EAChB,EACD,CACI,SAAU,cACV,MAAO,qCACP,YAAa,EAChB,EACD,CACI,SAAU,aACV,MAAO,oCACP,WAAY,UACZ,YAAa,GACb,MAAO,QACV,CACjB,CACS,CACJ,CACL"}
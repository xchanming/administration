const n=`{% block sw_product_price_form %} <div class="sw-product-price-form"> {% block sw_product_price_form_fields %} <sw-container columns="1fr 2fr" gap="0px 30px" class="sw-product-price-form__prices" > {% block sw_product_price_form_tax_field %} <sw-inherit-wrapper ref="taxIdInheritation" v-model:value="product.taxId" :inherited-value="parentProduct.taxId" :has-parent="!!parentProduct.taxId" :help-text="taxRateHelpText" :label="$tc('sw-product.priceForm.labelTaxRate')" class="sw-product-price-form__tax-rate" required > <template #content="{ currentValue, updateCurrentValue, isInherited }"> <sw-select-field name="sw-field--product-taxId" :placeholder="$tc('sw-product.priceForm.placeholderTaxRate')" validation="required" :disabled="isInherited || !allowEdit || undefined" :value="currentValue" :error="productTaxIdError" @update:value="updateCurrentValue" > <option v-for="tax in taxes" :key="tax.id" :value="tax.id" :selected="currentValue === tax.id" > {{ getTaxLabel(tax) }} </option> </sw-select-field> </template> </sw-inherit-wrapper> {% endblock %} {% block sw_product_price_form_price_field %} <sw-inherit-wrapper v-if="!isLoading" v-model:value="prices" label=" " class="sw-product-price-form__price-list" :has-parent="!!parentProduct.id" :inherited-value="parentPrices" :custom-remove-inheritance-function="removePriceInheritation" :custom-inheritation-check-function="inheritationCheckFunction" > <template #content="{ currentValue, isInherited }"> <sw-list-price-field vertical :price="currentValue.price" :purchase-prices="currentValue.purchasePrices" :tax-rate="productTaxRate" :disabled="isInherited || !allowEdit || undefined" :error="productPriceError ? productPriceError[0] : null" :currency="defaultCurrency" :show-setting-price="showModeSetting" /> </template> </sw-inherit-wrapper> {% endblock %} </sw-container> {% endblock %} {% block sw_product_price_form_link %} <sw-container columns="1fr" justify="end" class="sw-product-price-form__links" > {% block sw_product_price_form_advanced_prices_link %} <router-link v-if="!product._isNew" :to="{ name: 'sw.product.detail.prices', params: { id: $route.params.id } }" class="sw-card__quick-link" > {{ $tc('sw-product.detailBase.linkAdvancedPrices') }} <sw-icon name="regular-long-arrow-right" small /> </router-link> {% endblock %} {% block sw_product_price_form_maintain_currencies_link %} <a v-if="product.price" class="sw-card__quick-link" role="button" tabindex="0" @click.prevent="displayMaintainCurrencies = true" @keydown.enter.prevent="displayMaintainCurrencies = true" > {{ $tc('sw-product.detailBase.linkMaintainCurrencyPrices') }} <sw-icon name="regular-long-arrow-right" small /> </a> {% endblock %} </sw-container> {% endblock %} {% block sw_product_price_form_maintain_currencies_modal %} <sw-maintain-currencies-modal v-if="displayMaintainCurrencies" :currencies="currencies" :prices="product.price" :default-price="defaultPrice" :tax-rate="productTaxRate" :disabled="!allowEdit || undefined" @modal-close="onMaintainCurrenciesClose" @update-prices="updatePrices" /> {% endblock %} </div> {% endblock %}`,{Mixin:o}=Cicada,{mapPropertyErrors:p,mapState:d,mapGetters:u}=Cicada.Component.getComponentHelper(),l={template:n,compatConfig:Cicada.compatConfig,mixins:[o.getByName("placeholder")],props:{allowEdit:{type:Boolean,required:!1,default:!0}},data(){return{displayMaintainCurrencies:!1}},computed:{...u("swProductDetail",["isLoading","defaultPrice","defaultCurrency","productTaxRate","showModeSetting"]),...d("swProductDetail",["product","parentProduct","taxes","currencies"]),...p("product",["taxId","price","purchasePrices"]),taxRateHelpText(){const e={name:"sw.settings.tax.index"};return this.$tc("sw-product.priceForm.taxRateHelpText.label",0,{link:`<sw-internal-link
                           :router-link=${JSON.stringify(e)}
                           :inline="true">
                           ${this.$tc("sw-product.priceForm.taxRateHelpText.linkText")}
                      </sw-internal-link>`})},prices:{get(){const e={price:[],purchasePrices:[]};return this.product&&Array.isArray(this.product.price)&&(e.price=[...this.product.price]),this.product&&Array.isArray(this.product.purchasePrices)&&(e.purchasePrices=[...this.product.purchasePrices]),e},set(e){this.product.price=(e==null?void 0:e.price)||null,this.product.purchasePrices=(e==null?void 0:e.purchasePrices)||null}},parentPrices(){return{price:this.product.price||this.parentProduct.price,purchasePrices:this.product.purchasePrices||this.parentProduct.purchasePrices}}},methods:{removePriceInheritation(e){var a,s;const r=(a=e.price)==null?void 0:a.find(c=>c.currencyId===this.defaultCurrency.id),t=(s=e.purchasePrices)==null?void 0:s.find(c=>c.currencyId===this.defaultCurrency.id),i={price:[],purchasePrices:[]};return r&&i.price.push({currencyId:r.currencyId,gross:r.gross,net:r.net,linked:r.linked,listPrice:r.listPrice?r.listPrice:null,regulationPrice:r.regulationPrice?r.regulationPrice:null}),t&&i.purchasePrices.push({currencyId:t.currencyId,gross:t.gross,net:t.net,linked:t.linked}),i},inheritationCheckFunction(){return!this.prices.price.length&&!this.prices.purchasePrices.length},onMaintainCurrenciesClose(e){this.product.price=e,this.displayMaintainCurrencies=!1},keymonitor(e){if(e.key===","){const r=e.currentTarget.value;e.currentTarget.value=r.replace(/.$/,".")}},getTaxLabel(e){return this.$te(`global.tax-rates.${e.name}`)?this.$tc(`global.tax-rates.${e.name}`):e.name},updatePrices(e){this.product.price.splice(e,1)}}};export{l as default};
//# sourceMappingURL=index-B74upb63.js.map

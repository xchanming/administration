{"version":3,"file":"index-ClEXhFDb.js","sources":["../../../app/administration/src/app/asyncComponent/media/sw-media-modal-folder-dissolve/sw-media-modal-folder-dissolve.html.twig","../../../app/administration/src/app/asyncComponent/media/sw-media-modal-folder-dissolve/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_media_modal_folder_dissolve %}\n<sw-modal\n    variant=\"small\"\n    class=\"sw-media-modal-folder-dissolve\"\n    :title=\"$tc('global.default.warning')\"\n    @modal-close=\"closeDissolveModal\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_media_modal_folder_dissolve_body %}\n    {{ $tc('global.sw-media-modal-folder-dissolve.dissolveMessage', itemsToDissolve.length, { folderName: itemsToDissolve[0].name, count: itemsToDissolve.length }) }}\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_media_modal_folder_dissolve_footer %}\n    <template #modal-footer>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_media_modal_folder_dissolve__cancel_button %}\n        <sw-button\n            size=\"small\"\n            @click=\"closeDissolveModal\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_media_modal_folder_dissolve_confirm_button %}\n        <sw-button\n            class=\"sw-media-modal-folder-dissolve__confirm\"\n            size=\"small\"\n            variant=\"danger\"\n            @click=\"dissolveSelection\"\n        >\n            {{ $tc('global.sw-media-modal-folder-dissolve.buttonDissolve') }}\n        </sw-button>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n","import template from './sw-media-modal-folder-dissolve.html.twig';\n\nconst { Mixin } = Cicada;\n\n/**\n * @status ready\n * @description The <u>sw-media-modal-folder-dissolve</u> component is used to validate the dissolve folder action.\n * @package content\n * @example-type code-only\n * @component-example\n * <sw-media-modal-folder-dissolve :itemsToDissolve=\"[items]\">\n * </sw-media-modal-folder-dissolve>\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['mediaFolderService'],\n\n    emits: [\n        'media-folder-dissolve-modal-close',\n        'media-folder-dissolve-modal-dissolve',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        itemsToDissolve: {\n            required: true,\n            type: Array,\n            validator(value) {\n                return value.length !== 0;\n            },\n        },\n    },\n\n    methods: {\n        closeDissolveModal(originalDomEvent) {\n            this.$emit('media-folder-dissolve-modal-close', {\n                originalDomEvent,\n            });\n        },\n\n        async _dissolveSelection(item) {\n            item.isLoading = true;\n\n            try {\n                await this.mediaFolderService.dissolveFolder(item.id);\n\n                this.createNotificationSuccess({\n                    title: this.$root.$tc('global.default.success'),\n                    message: this.$root.$tc('global.sw-media-modal-folder-dissolve.notification.successSingle.message', 1, {\n                        folderName: item.name,\n                    }),\n                });\n                return item.id;\n            } catch {\n                this.createNotificationError({\n                    title: this.$root.$tc('global.default.error'),\n                    message: this.$root.$tc('global.sw-media-modal-folder-dissolve.notification.errorSingle.message', 1, {\n                        folderName: item.name,\n                    }),\n                });\n\n                return null;\n            } finally {\n                item.isLoading = false;\n            }\n        },\n\n        async dissolveSelection() {\n            const dissolvedIds = [];\n\n            try {\n                await Promise.all(\n                    this.itemsToDissolve.map((item) => {\n                        dissolvedIds.push(item.id);\n                        return this._dissolveSelection(item);\n                    }),\n                );\n\n                if (this.itemsToDissolve.length > 1) {\n                    this.createNotificationSuccess({\n                        title: this.$root.$tc('global.default.success'),\n                        message: this.$root.$tc('global.sw-media-modal-folder-dissolve.notification.successOverall.message'),\n                    });\n                }\n\n                this.$emit('media-folder-dissolve-modal-dissolve', dissolvedIds);\n            } catch {\n                if (this.itemsToDissolve.length > 1) {\n                    this.createNotificationError({\n                        title: this.$root.$tc('global.default.error'),\n                        message: this.$root.$tc('global.sw-media-modal-folder-dissolve.notification.errorOverall.message'),\n                    });\n                }\n            }\n        },\n    },\n};\n"],"names":["template","Mixin","index","value","originalDomEvent","item","dissolvedIds"],"mappings":"AAAA,MAAeA,EAAA,y9BCET,CAAE,MAAAC,CAAO,EAAG,OAYHC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,oBAAoB,EAE7B,MAAO,CACH,oCACA,sCACH,EAED,OAAQ,CACJC,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,gBAAiB,CACb,SAAU,GACV,KAAM,MACN,UAAUE,EAAO,CACb,OAAOA,EAAM,SAAW,CAC3B,CACJ,CACJ,EAED,QAAS,CACL,mBAAmBC,EAAkB,CACjC,KAAK,MAAM,oCAAqC,CAC5C,iBAAAA,CAChB,CAAa,CACJ,EAED,MAAM,mBAAmBC,EAAM,CAC3BA,EAAK,UAAY,GAEjB,GAAI,CACA,aAAM,KAAK,mBAAmB,eAAeA,EAAK,EAAE,EAEpD,KAAK,0BAA0B,CAC3B,MAAO,KAAK,MAAM,IAAI,wBAAwB,EAC9C,QAAS,KAAK,MAAM,IAAI,2EAA4E,EAAG,CACnG,WAAYA,EAAK,IACzC,CAAqB,CACrB,CAAiB,EACMA,EAAK,EAC5B,MAAoB,CACJ,YAAK,wBAAwB,CACzB,MAAO,KAAK,MAAM,IAAI,sBAAsB,EAC5C,QAAS,KAAK,MAAM,IAAI,yEAA0E,EAAG,CACjG,WAAYA,EAAK,IACzC,CAAqB,CACrB,CAAiB,EAEM,IACvB,QAAsB,CACNA,EAAK,UAAY,EACpB,CACJ,EAED,MAAM,mBAAoB,CACtB,MAAMC,EAAe,CAAA,EAErB,GAAI,CACA,MAAM,QAAQ,IACV,KAAK,gBAAgB,IAAKD,IACtBC,EAAa,KAAKD,EAAK,EAAE,EAClB,KAAK,mBAAmBA,CAAI,EACtC,CACrB,EAEoB,KAAK,gBAAgB,OAAS,GAC9B,KAAK,0BAA0B,CAC3B,MAAO,KAAK,MAAM,IAAI,wBAAwB,EAC9C,QAAS,KAAK,MAAM,IAAI,2EAA2E,CAC3H,CAAqB,EAGL,KAAK,MAAM,uCAAwCC,CAAY,CAC/E,MAAoB,CACA,KAAK,gBAAgB,OAAS,GAC9B,KAAK,wBAAwB,CACzB,MAAO,KAAK,MAAM,IAAI,sBAAsB,EAC5C,QAAS,KAAK,MAAM,IAAI,yEAAyE,CACzH,CAAqB,CAER,CACJ,CACJ,CACL"}
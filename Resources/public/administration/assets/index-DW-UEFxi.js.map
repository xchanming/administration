{"version":3,"file":"index-DW-UEFxi.js","sources":["../../../app/administration/src/app/component/structure/sw-admin-menu-item/sw-admin-menu-item.html.twig","../../../app/administration/src/app/component/structure/sw-admin-menu-item/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_admin_menu_item %}\n<!-- eslint-disable-next-line vuejs-accessibility/click-events-have-key-events vuejs-accessibility/mouse-events-have-key-events, vuejs-accessibility/no-static-element-interactions -->\n<li\n    v-if=\"showMenuItem\"\n    class=\"sw-admin-menu__navigation-list-item\"\n    :class=\"getElementClasses(entry.id || entryPath)\"\n    :style=\"{ 'border-color': borderColor }\"\n    :aria-current=\"subIsActive(entryPath, entry.id) ? 'page' : 'false'\"\n    @click.prevent=\"$emit('menu-item-click', entry, $event.target)\"\n    @keydown.enter=\"$emit('menu-item-click', entry, $event.target)\"\n    @keydown.space=\"$emit('menu-item-click', entry, $event.target)\"\n    @mouseenter=\"$emit('menu-item-enter', entry, $event, parentEntries)\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_admin_menu_item_router_link %}\n    <router-link\n        v-if=\"entryPath\"\n        class=\"sw-admin-menu__navigation-link\"\n        :class=\"{'router-link-active': subIsActive(entryPath, entry.id)}\"\n        :to=\"getLinkToProp\"\n    >\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_icon %}\n        <sw-icon\n            v-if=\"displayIcon\"\n            :size=\"iconSize\"\n            class=\"sw-admin-menu__navigation-link-icon\"\n            :name=\"getIconName(entry.icon)\"\n            :style=\"{ 'color': entry.color }\"\n        />\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_text %}\n        <span\n            class=\"sw-admin-menu__navigation-link-label\"\n            :class=\"collapsibleText ? 'collapsible-text' : ''\"\n            :title=\"getEntryLabel\"\n        >\n            {{ getEntryLabel }}\n        </span>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_arrow_indicato %}\n        <sw-icon\n            v-if=\"entry.level > 1 && children.length\"\n            name=\"regular-chevron-right\"\n            size=\"8\"\n            class=\"sw-admin-menu__navigation-link-icon-arrow\"\n        />\n        {% endblock %}\n\n        <slot name=\"additional-text\"></slot>\n    </router-link>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_admin_menu_item_external_link %}\n    <a\n        v-else-if=\"entry.link\"\n        :href=\"entry.link\"\n        :target=\"entry.target\"\n        :title=\"$tc(entry.label)\"\n        class=\"sw-admin-menu__navigation-link\"\n    >\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_external_icon %}\n        <sw-icon\n            v-if=\"displayIcon\"\n            :size=\"iconSize\"\n            class=\"sw-admin-menu__navigation-link-icon\"\n            :name=\"getIconName(entry.icon)\"\n            :style=\"{ 'color': entry.color }\"\n        />\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_external_text %}\n        <span\n            class=\"sw-admin-menu__navigation-link-label\"\n            :class=\"collapsibleText ? 'collapsible-text' : ''\"\n            :title=\"getEntryLabel\"\n        >\n            {{ getEntryLabel }}\n        </span>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_external_arrow_indicato %}\n        <sw-icon\n            v-if=\"entry.level > 1 && children.length\"\n            name=\"regular-chevron-right\"\n            size=\"8\"\n            class=\"sw-admin-menu__navigation-link-icon-arrow\"\n        />\n        {% endblock %}\n\n        <slot name=\"additional-text\"></slot>\n    </a>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_admin_menu_item_navigation_link %}\n    <span\n        v-else\n        class=\"sw-admin-menu__navigation-link\"\n        :class=\"{ 'router-link-active': subIsActive(entry.id) }\"\n    >\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_navigation_icon %}\n        <sw-icon\n            v-if=\"displayIcon\"\n            :size=\"iconSize\"\n            class=\"sw-admin-menu__navigation-link-icon\"\n            :name=\"getIconName(entry.icon)\"\n            :style=\"{ 'color': entry.color }\"\n        />\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_navigation_text %}\n        <span\n            class=\"sw-admin-menu__navigation-link-label\"\n            :class=\"collapsibleText ? 'collapsible-text' : ''\"\n            :title=\"getEntryLabel\"\n        >\n            {{ getEntryLabel }}\n        </span>\n        {% endblock %}\n\n        <slot name=\"additional-text\"></slot>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_admin_menu_item_arrow_indicator %}\n        <sw-icon\n            v-if=\"entry.level > 1 && children.length\"\n            name=\"regular-chevron-right\"\n            size=\"8\"\n            class=\"sw-admin-menu__navigation-link-icon-arrow\"\n        />\n        {% endblock %}\n    </span>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sidebar_sub_items_list %}\n    <ul\n        v-if=\"children.length > 0\"\n        class=\"sw-admin-menu__sub-navigation-list\"\n    >\n        <!-- eslint-disable sw-deprecation-rules/no-twigjs-blocks,vue/no-duplicate-attributes,vue/no-parsing-error -->\n        <template\n            v-for=\"entry in children\"\n            :key=\"getCustomKey(entry.id || entryPath + '-separator')\"\n        >\n            <li\n                v-if=\"isFirstPluginInMenuEntries(entry, children)\"\n                :style=\"{ 'border-color': borderColor }\"\n                class=\"sw-admin-menu__separator\"\n                tabindex=\"0\"\n            >\n                <span class=\"sw-admin-menu__separator-line\"></span>\n            </li>\n\n            <sw-admin-menu-item\n                :entry=\"entry\"\n                :border-color=\"borderColor\"\n                :display-icon=\"false\"\n                @menu-item-enter=\"onSubMenuItemEnter\"\n            />\n        </template>\n    </ul>\n    {% endblock %}\n</li>\n{% endblock %}\n","import template from './sw-admin-menu-item.html.twig';\n\nconst { Component } = Cicada;\nconst { createId, types } = Cicada.Utils;\n\n/**\n * @package admin\n *\n * @private\n */\nComponent.register('sw-admin-menu-item', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'acl',\n        'feature',\n    ],\n\n    emits: [\n        'menu-item-click',\n        'menu-item-enter',\n        'sub-menu-item-enter',\n    ],\n\n    props: {\n        entry: {\n            type: Object,\n            required: true,\n        },\n        parentEntries: {\n            type: Array,\n            required: false,\n            default: () => [],\n        },\n\n        displayIcon: {\n            type: Boolean,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n            required: false,\n        },\n        iconSize: {\n            type: String,\n            default: '20px',\n            required: false,\n        },\n        collapsibleText: {\n            type: Boolean,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n            required: false,\n        },\n        sidebarExpanded: {\n            type: Boolean,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n            required: false,\n        },\n        borderColor: {\n            type: String,\n            default: '#333',\n            required: false,\n        },\n    },\n\n    computed: {\n        getLinkToProp() {\n            if (this.entry.params) {\n                return { name: this.entry.path, params: this.entry.params };\n            }\n\n            return { name: this.entry.path };\n        },\n\n        getEntryLabel() {\n            if (this.entry.label instanceof Object) {\n                return this.entry.label.translated ? this.entry.label.label : this.$tc(this.entry.label.label);\n            }\n            return this.$tc(this.entry.label);\n        },\n\n        showMenuItem() {\n            // special case for settings module, children are stored in a global state store\n            if (this.entry.path === 'sw.settings.index') {\n                return this.acl.hasActiveSettingModules();\n            }\n\n            if (this.children.length > 0) {\n                return true;\n            }\n\n            if (this.getLinkToProp && this.getLinkToProp.name) {\n                const { name } = this.getLinkToProp;\n\n                return this.hasAccessToRoute(name);\n            }\n\n            return false;\n        },\n\n        entryPath() {\n            if (this.entry.path && this.hasAccessToRoute(this.entry.path)) {\n                return this.entry.path;\n            }\n\n            return undefined;\n        },\n\n        children() {\n            return this.entry.children.filter((child) => {\n                if (!child.privilege) {\n                    return true;\n                }\n\n                return this.acl.can(child.privilege);\n            });\n        },\n    },\n\n    methods: {\n        hasAccessToRoute(path) {\n            let route = '';\n            let match = false;\n\n            route = `/${path.replace(/[\\.\\-]/g, '/')}`;\n            match = this.$router.resolve({\n                path: route,\n            });\n\n            if (!match.meta) {\n                return true;\n            }\n\n            return this.acl.can(match.meta.privilege);\n        },\n\n        getIconName(name) {\n            return `${name}`;\n        },\n\n        getItemName(menuItemName) {\n            return menuItemName.replace(/\\./g, '-');\n        },\n\n        subIsActive(path, entryId) {\n            // this is an extra case for the sw-sales-channel menu, without this all sales-channels\n            // would have the selection highlight as soon as one is selected.\n            if (this.$route.name?.startsWith('sw.sales.channel.') && entryId) {\n                return this.$route.params?.id === entryId;\n            }\n\n            const meta = this.$route.meta;\n            const adminMenuEntries = Cicada.Store.get('adminMenu').adminModuleNavigation;\n            let compareTo;\n\n            function findRootEntry(currentPath, foundPaths = []) {\n                const foundEntry = adminMenuEntries.find((entry) => {\n                    return entry.path === currentPath || entry.id === currentPath;\n                });\n\n                foundPaths.push(foundEntry.path || foundEntry.id);\n\n                if (foundEntry.parent?.length) {\n                    return findRootEntry(foundEntry.parent, foundPaths);\n                }\n\n                return foundPaths;\n            }\n\n            if (meta.$current) {\n                const matchingPaths = findRootEntry(meta.$current.path);\n                return matchingPaths.includes(path);\n            }\n\n            if (meta.parentPath) {\n                compareTo = meta.parentPath;\n            }\n\n            if (meta.$module?.navigation?.[0].parent) {\n                compareTo = meta.$module.navigation[0].parent;\n            }\n\n            if (!compareTo) {\n                compareTo = this.$route?.name;\n            }\n\n            if (this.entry.path) {\n                return compareTo ? compareTo.replace(/-/g, '.').indexOf(path.replace(/\\.index/g, '')) === 0 : false;\n            }\n\n            return this.entry.id === compareTo;\n        },\n\n        getElementClasses(menuItemName) {\n            const name = menuItemName.replace(/\\./g, '-');\n            const hasChildren = this.entry.children.length > 0;\n            const convertName = this.entry.id || this.entry.path;\n            const convertedId = convertName.replace(/\\./g, '-');\n\n            return [\n                convertedId,\n                `navigation-list-item__type-${this.entry.moduleType}`,\n                `navigation-list-item__${name}`,\n                `sw-admin-menu__item--${this.entry.id}`,\n                `navigation-list-item__level-${this.entry.level}`,\n                { 'navigation-list-item__has-children': hasChildren },\n            ];\n        },\n\n        onSubMenuItemEnter(entry, $event, parentEntries) {\n            this.$emit('sub-menu-item-enter', entry, $event, parentEntries);\n        },\n\n        isFirstPluginInMenuEntries(entry, menuEntries) {\n            const firstPluginEntry = menuEntries.find((menuEntry) => {\n                return menuEntry.moduleType === 'plugin';\n            });\n\n            if (!firstPluginEntry) {\n                return false;\n            }\n            return types.isEqual(entry, firstPluginEntry);\n        },\n\n        getCustomKey(path) {\n            return `${path}-${createId()}`;\n        },\n    },\n});\n"],"names":["template","Component","createId","types","name","child","path","route","match","menuItemName","entryId","_a","_b","_c","_d","_e","meta","adminMenuEntries","compareTo","findRootEntry","currentPath","foundPaths","foundEntry","entry","hasChildren","$event","parentEntries","menuEntries","firstPluginEntry","menuEntry"],"mappings":"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"}
{"version":3,"file":"index-x5-drNry.js","sources":["../../../app/administration/src/module/sw-mail-template/component/sw-mail-template-list/sw-mail-template-list.html.twig","../../../app/administration/src/module/sw-mail-template/component/sw-mail-template-list/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_mail_template_list_grid %}\n<sw-card\n    :title=\"$tc('sw-mail-template.list.titleMailTemplateList')\"\n    position-identifier=\"sw-mail-template-list\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_mail_template_list_grid_empty_state %}\n    <sw-empty-state\n        v-if=\"!isLoading && !showListing\"\n        :title=\"$tc('sw-mail-template.list.emptyStateTitle')\"\n        :subline=\"$tc('sw-mail-template.list.emptyStateSubTitle')\"\n        :absolute=\"false\"\n    >\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_mail_template_list_grid_empty_state_icon %}\n        <template #icon>\n            <img\n                :src=\"assetFilter('/administration/static/img/empty-states/settings-empty-state.svg')\"\n                alt=\"\"\n            >\n        </template>\n        {% endblock %}\n\n    </sw-empty-state>\n    {% endblock %}\n\n    <template #grid>\n        <sw-entity-listing\n            v-if=\"isLoading || showListing\"\n            id=\"mailTemplateGrid\"\n            class=\"sw-mail-templates-list-grid\"\n            detail-route=\"sw.mail.template.detail\"\n            identifier=\"sw-mail-template-list\"\n            :items=\"mailTemplates\"\n            :columns=\"getListColumns()\"\n            :repository=\"mailTemplateRepository\"\n            :full-page=\"false\"\n            :is-loading=\"isLoading\"\n            :allow-view=\"acl.can('mail_templates.viewer')\"\n            :allow-edit=\"acl.can('mail_templates.editor')\"\n            :allow-delete=\"acl.can('mail_templates.deleter')\"\n            :show-selection=\"acl.can('mail_templates.deleter') || undefined\"\n            :skeleton-item-amount=\"skeletonItemAmount\"\n            @update-records=\"updateRecords\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_mail_template_list_grid_columns %}\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_mail_template_list_grid_actions %}\n            <template #more-actions=\"{ item }\">\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_mail_template_list_grid_columns_actions_duplicate %}\n                <sw-context-menu-item\n                    class=\"sw-mail-template-list-grid__duplicate-action\"\n                    :disabled=\"!acl.can('mail_templates.creator') || undefined\"\n                    @click=\"onDuplicate(item.id)\"\n                >\n                    {{ $tc('sw-mail-template.list.contextMenuDuplicate') }}\n                </sw-context-menu-item>\n                {% endblock %}\n            </template>\n            {% endblock %}\n        </sw-entity-listing>\n    </template>\n</sw-card>\n{% endblock %}\n","import template from './sw-mail-template-list.html.twig';\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n/**\n * @package buyers-experience\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n    ],\n\n    mixins: [\n        Mixin.getByName('listing'),\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        searchTerm: {\n            type: String,\n            required: false,\n            default: '',\n        },\n    },\n\n    data() {\n        return {\n            mailTemplates: null,\n            showDeleteModal: null,\n            isLoading: false,\n        };\n    },\n\n    computed: {\n        mailTemplateRepository() {\n            return this.repositoryFactory.create('mail_template');\n        },\n\n        skeletonItemAmount() {\n            return this.mailTemplates && this.mailTemplates.length !== 0 ? this.mailTemplates.length : 3;\n        },\n\n        showListing() {\n            return !!this.mailTemplates && this.mailTemplates.length !== 0;\n        },\n\n        assetFilter() {\n            return Cicada.Filter.getByName('asset');\n        },\n    },\n\n    watch: {\n        searchTerm() {\n            this.getList();\n        },\n    },\n\n    methods: {\n        getList() {\n            this.isLoading = true;\n\n            const criteria = new Criteria(this.page, this.limit);\n            criteria.addAssociation('mailTemplateType').addSorting(Criteria.sort('mailTemplateType.name'));\n\n            if (this.searchTerm) {\n                criteria.setTerm(this.searchTerm);\n            }\n\n            this.mailTemplateRepository.search(criteria).then((items) => {\n                this.total = items.total;\n                this.mailTemplates = items;\n                this.isLoading = false;\n\n                return this.mailTemplates;\n            });\n        },\n\n        getListColumns() {\n            return [\n                {\n                    property: 'mailTemplateType.name',\n                    dataIndex: 'mailTemplateType.name',\n                    label: 'sw-mail-template.list.columnMailType',\n                    allowResize: true,\n                    routerLink: 'sw.mail.template.detail',\n                    primary: true,\n                },\n                {\n                    property: 'description',\n                    dataIndex: 'description',\n                    label: 'sw-mail-template.list.columnDescription',\n                    allowResize: true,\n                },\n            ];\n        },\n\n        onChangeLanguage(languageId) {\n            this.getList(languageId);\n        },\n\n        onDuplicate(id) {\n            this.isLoading = true;\n            this.mailTemplateRepository.clone(id).then((mailTemplate) => {\n                this.getList();\n                this.isLoading = false;\n                this.$router.push({\n                    name: 'sw.mail.template.detail',\n                    params: { id: mailTemplate.id },\n                });\n            });\n        },\n\n        updateRecords(result) {\n            this.mailTemplates = result;\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","criteria","items","languageId","id","mailTemplate","result"],"mappings":"AAAA,MAAeA,EAAA,uwDCET,CAAE,MAAAC,CAAO,EAAG,OACZ,CAAE,SAAAC,CAAQ,EAAK,OAAO,KAMbC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,KACH,EAED,OAAQ,CACJC,EAAM,UAAU,SAAS,EACzBA,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,WAAY,CACR,KAAM,OACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,cAAe,KACf,gBAAiB,KACjB,UAAW,EACvB,CACK,EAED,SAAU,CACN,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,eAAe,CACvD,EAED,oBAAqB,CACjB,OAAO,KAAK,eAAiB,KAAK,cAAc,SAAW,EAAI,KAAK,cAAc,OAAS,CAC9F,EAED,aAAc,CACV,MAAO,CAAC,CAAC,KAAK,eAAiB,KAAK,cAAc,SAAW,CAChE,EAED,aAAc,CACV,OAAO,OAAO,OAAO,UAAU,OAAO,CACzC,CACJ,EAED,MAAO,CACH,YAAa,CACT,KAAK,QAAO,CACf,CACJ,EAED,QAAS,CACL,SAAU,CACN,KAAK,UAAY,GAEjB,MAAMG,EAAW,IAAIF,EAAS,KAAK,KAAM,KAAK,KAAK,EACnDE,EAAS,eAAe,kBAAkB,EAAE,WAAWF,EAAS,KAAK,uBAAuB,CAAC,EAEzF,KAAK,YACLE,EAAS,QAAQ,KAAK,UAAU,EAGpC,KAAK,uBAAuB,OAAOA,CAAQ,EAAE,KAAMC,IAC/C,KAAK,MAAQA,EAAM,MACnB,KAAK,cAAgBA,EACrB,KAAK,UAAY,GAEV,KAAK,cACf,CACJ,EAED,gBAAiB,CACb,MAAO,CACH,CACI,SAAU,wBACV,UAAW,wBACX,MAAO,uCACP,YAAa,GACb,WAAY,0BACZ,QAAS,EACZ,EACD,CACI,SAAU,cACV,UAAW,cACX,MAAO,0CACP,YAAa,EAChB,CACjB,CACS,EAED,iBAAiBC,EAAY,CACzB,KAAK,QAAQA,CAAU,CAC1B,EAED,YAAYC,EAAI,CACZ,KAAK,UAAY,GACjB,KAAK,uBAAuB,MAAMA,CAAE,EAAE,KAAMC,GAAiB,CACzD,KAAK,QAAO,EACZ,KAAK,UAAY,GACjB,KAAK,QAAQ,KAAK,CACd,KAAM,0BACN,OAAQ,CAAE,GAAIA,EAAa,EAAI,CACnD,CAAiB,CACjB,CAAa,CACJ,EAED,cAAcC,EAAQ,CAClB,KAAK,cAAgBA,CACxB,CACJ,CACL"}
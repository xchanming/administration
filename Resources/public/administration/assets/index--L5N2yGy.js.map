{"version":3,"file":"index--L5N2yGy.js","sources":["../../../app/administration/src/module/sw-users-permissions/components/sw-users-permissions-detailed-permissions-grid/sw-users-permissions-detailed-permissions-grid.html.twig","../../../app/administration/src/module/sw-users-permissions/components/sw-users-permissions-detailed-permissions-grid/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_users_permissions_detailed_permissions_grid %}\n<sw-card\n    class=\"sw-users-permissions-detailed-permissions-grid\"\n    position-identifier=\"sw-users-permissions-detailed-permissions-grid\"\n    :title=\"$tc('sw-users-permissions.roles.grid.title')\"\n>\n    <div class=\"sw-users-permissions-detailed-permissions-grid__grid\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_users_permissions_detailed_permissions_grid_header %}\n        <div class=\"sw-users-permissions-detailed-permissions-grid__entry sw-users-permissions-detailed-permissions-grid__entry-header\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_detailed_permissions_grid_header_title %}\n            <div class=\"sw-users-permissions-detailed-permissions-grid__title\"></div>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_detailed_permissions_grid_header_roles %}\n            <div\n                v-for=\"permissionType in permissionTypes\"\n                :key=\"permissionType\"\n                class=\"sw-users-permissions-detailed-permissions-grid__checkbox-wrapper\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_users_permissions_detailed_permissions_grid_header_roles_name %}\n                {{ $tc('sw-privileges.permissionType.' + permissionType) }}\n                {% endblock %}\n            </div>\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_users_permissions_detailed_permissions_grid_permissions %}\n        <div\n            v-for=\"entity in allEntities\"\n            :key=\"entity\"\n            :class=\"'sw-users-permissions-detailed-permissions-grid__entry_' + entity\"\n            class=\"sw-users-permissions-detailed-permissions-grid__entry\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_detailed_permissions_grid_permissions_title %}\n            <div class=\"sw-users-permissions-detailed-permissions-grid__title\">\n                {{ entity }}\n            </div>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_detailed_permissions_grid_permissions_roles %}\n            <div\n                v-for=\"permissionType in permissionTypes\"\n                :key=\"permissionType\"\n                :class=\"'sw-users-permissions-detailed-permissions-grid__role_' + permissionType\"\n                class=\"sw-users-permissions-detailed-permissions-grid__checkbox-wrapper\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_users_permissions_detailed_permissions_grid_permissions_roles_field %}\n                {# Checkbox are hardcoded for better performance #}\n                <div class=\"sw-field--checkbox\">\n                    <div class=\"sw-field--checkbox__content\">\n                        <div class=\"sw-field__checkbox\">\n                            <!-- eslint-disable-next-line vuejs-accessibility/form-control-has-label -->\n                            <input\n                                type=\"checkbox\"\n                                :name=\"entity\"\n                                :disabled=\"isEntityDisabled(entity, permissionType)\"\n                                :checked=\"isEntitySelected(entity, permissionType)\"\n                                @change=\"changePermissionForEntity(entity, permissionType)\"\n                            >\n                            <div class=\"sw-field__checkbox-state\">\n                                <span\n                                    class=\"sw-icon sw-icon--fill\"\n                                    style=\"width: 16px; height: 16px;\"\n                                >\n                                    <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                                        width=\"16\"\n                                        height=\"16\"\n                                        viewBox=\"0 0 16 16\"\n                                    >\n                                        <defs>\n                                            <path\n                                                id=\"icons-small-default-checkmark-line-small-a\"\n                                                d=\"M5.70710678,7.29289322 C5.31658249,6.90236893 4.68341751,6.90236893 4.29289322,7.29289322 C3.90236893,7.68341751 3.90236893,8.31658249 4.29289322,8.70710678 L6.29289322,10.7071068 C6.68341751,11.0976311 7.31658249,11.0976311 7.70710678,10.7071068 L11.7071068,6.70710678 C12.0976311,6.31658249 12.0976311,5.68341751 11.7071068,5.29289322 C11.3165825,4.90236893 10.6834175,4.90236893 10.2928932,5.29289322 L7,8.58578644 L5.70710678,7.29289322 Z\"\n                                            />\n                                        </defs>\n                                        <use\n                                            fill=\"#758CA3\"\n                                            fill-rule=\"evenodd\"\n                                            xlink:href=\"#icons-small-default-checkmark-line-small-a\"\n                                        />\n                                    </svg>\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {% endblock %}\n            </div>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </div>\n</sw-card>\n{% endblock %}\n","/**\n * @package services-settings\n */\nimport template from './sw-users-permissions-detailed-permissions-grid.html.twig';\nimport './sw-users-permissions-detailed-permissions-grid.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['privileges'],\n\n    props: {\n        role: {\n            type: Object,\n            required: true,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        detailedPrivileges: {\n            type: Array,\n            required: true,\n        },\n    },\n\n    computed: {\n        allEntities() {\n            const entitiesMap = Cicada.Application.getContainer('factory').entityDefinition.getDefinitionRegistry();\n\n            return [...entitiesMap.keys()];\n        },\n\n        allGeneralSelectedPrivileges() {\n            return this.privileges.getPrivilegesForAdminPrivilegeKeys(this.role.privileges);\n        },\n\n        permissionTypes() {\n            return [\n                'read',\n                'update',\n                'create',\n                'delete',\n            ];\n        },\n    },\n\n    methods: {\n        isEntitySelected(entity, role) {\n            const identifier = `${entity}:${role}`;\n\n            const allPrivileges = [\n                ...this.allGeneralSelectedPrivileges,\n                ...this.detailedPrivileges,\n            ];\n\n            return allPrivileges.includes(identifier);\n        },\n\n        isEntityDisabled(entity, role) {\n            if (this.disabled) {\n                return true;\n            }\n\n            const identifier = `${entity}:${role}`;\n\n            return this.allGeneralSelectedPrivileges.includes(identifier);\n        },\n\n        changePermissionForEntity(entity, role) {\n            const identifier = `${entity}:${role}`;\n\n            const privilegeIndex = this.detailedPrivileges.indexOf(identifier);\n\n            if (privilegeIndex >= 0) {\n                this.detailedPrivileges.splice(privilegeIndex, 1);\n                return;\n            }\n\n            this.detailedPrivileges.push(identifier);\n        },\n    },\n};\n"],"names":["template","index","entity","role","identifier","privilegeIndex"],"mappings":"AAAA,MAAeA,EAAA,qsGCOAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,YAAY,EAErB,MAAO,CACH,KAAM,CACF,KAAM,OACN,SAAU,EACb,EAED,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EAED,mBAAoB,CAChB,KAAM,MACN,SAAU,EACb,CACJ,EAED,SAAU,CACN,aAAc,CAGV,MAAO,CAAC,GAFY,OAAO,YAAY,aAAa,SAAS,EAAE,iBAAiB,wBAEzD,KAAI,CAAE,CAChC,EAED,8BAA+B,CAC3B,OAAO,KAAK,WAAW,mCAAmC,KAAK,KAAK,UAAU,CACjF,EAED,iBAAkB,CACd,MAAO,CACH,OACA,SACA,SACA,QAChB,CACS,CACJ,EAED,QAAS,CACL,iBAAiBE,EAAQC,EAAM,CAC3B,MAAMC,EAAa,GAAGF,CAAM,IAAIC,CAAI,GAOpC,MALsB,CAClB,GAAG,KAAK,6BACR,GAAG,KAAK,kBACxB,EAEiC,SAASC,CAAU,CAC3C,EAED,iBAAiBF,EAAQC,EAAM,CAC3B,GAAI,KAAK,SACL,MAAO,GAGX,MAAMC,EAAa,GAAGF,CAAM,IAAIC,CAAI,GAEpC,OAAO,KAAK,6BAA6B,SAASC,CAAU,CAC/D,EAED,0BAA0BF,EAAQC,EAAM,CACpC,MAAMC,EAAa,GAAGF,CAAM,IAAIC,CAAI,GAE9BE,EAAiB,KAAK,mBAAmB,QAAQD,CAAU,EAEjE,GAAIC,GAAkB,EAAG,CACrB,KAAK,mBAAmB,OAAOA,EAAgB,CAAC,EAChD,MACH,CAED,KAAK,mBAAmB,KAAKD,CAAU,CAC1C,CACJ,CACL"}
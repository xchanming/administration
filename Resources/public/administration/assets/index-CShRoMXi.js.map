{"version":3,"file":"index-CShRoMXi.js","sources":["../../../app/administration/src/module/sw-cms/component/sw-cms-block/sw-cms-block.html.twig","../../../app/administration/src/module/sw-cms/component/sw-cms-block/index.ts"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_block %}\n<div\n    class=\"sw-cms-block\"\n    :class=\"customBlockClass\"\n    :style=\"blockStyles\"\n>\n    <sw-cms-visibility-toggle\n        v-if=\"isVisible\"\n        :text=\"toggleButtonText\"\n        :is-collapsed=\"isCollapsed\"\n        :class=\"expandedClass\"\n        @toggle=\"toggleVisibility\"\n    />\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_block_content %}\n    <div\n        v-if=\"!isCollapsed || !isVisible\"\n        class=\"sw-cms-block__content\"\n        :class=\"expandedClass\"\n        :style=\"blockPadding\"\n    >\n        <slot>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_block_slot_default %}{% endblock %}\n        </slot>\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_block_overlay %}\n    <div\n        v-if=\"!disabled\"\n        class=\"sw-cms-block__config-overlay\"\n        :class=\"overlayClasses\"\n        role=\"button\"\n        tabindex=\"0\"\n        @click=\"onBlockOverlayClick\"\n        @keydown.enter=\"onBlockOverlayClick\"\n    ></div>\n    {% endblock %}\n</div>\n{% endblock %}\n","import { type PropType } from 'vue';\nimport template from './sw-cms-block.html.twig';\nimport './sw-cms-block.scss';\nimport type CmsVisibility from '../../shared/CmsVisibility';\n\nconst { Filter, Store } = Cicada;\n\n/**\n * @package discovery\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default Cicada.Component.wrapComponentConfig({\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: ['block-overlay-click'],\n\n    props: {\n        block: {\n            type: Object as PropType<EntitySchema.Entity<'cms_block'>>,\n            required: true,\n        },\n\n        active: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        hasWarnings: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        hasErrors: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            backgroundUrl: null as string | null,\n            isCollapsed: true,\n        };\n    },\n\n    computed: {\n        customBlockClass() {\n            const errorCssClasses = {\n                'has--warning': !this.hasErrors && this.hasWarnings,\n                'has--error': this.hasErrors,\n            };\n\n            if (!this.block.cssClass) {\n                return errorCssClasses;\n            }\n\n            return this.block?.cssClass?.split(' ').reduce((accumulator: { [key: string]: boolean }, className) => {\n                accumulator[className] = true;\n\n                return accumulator;\n            }, errorCssClasses);\n        },\n\n        blockStyles() {\n            let backgroundMedia = null;\n\n            if (this.block.backgroundMedia) {\n                const url = this.block.backgroundMedia.url!;\n\n                if (this.block.backgroundMedia.id) {\n                    backgroundMedia = `url(\"${url}\")`;\n                } else {\n                    backgroundMedia = `url(\"${this.assetFilter(url)}\")`;\n                }\n            }\n\n            return {\n                'background-color': this.block.backgroundColor || 'transparent',\n                'background-image': backgroundMedia,\n                'background-size': this.block.backgroundMediaMode,\n            };\n        },\n\n        blockPadding() {\n            return {\n                'padding-top': this.block.marginTop || '0px',\n                'padding-bottom': this.block.marginBottom || '0px',\n                'padding-left': this.block.marginLeft || '0px',\n                'padding-right': this.block.marginRight || '0px',\n            };\n        },\n\n        overlayClasses() {\n            return {\n                'is--active': this.active,\n            };\n        },\n\n        toolbarClasses() {\n            return {\n                'is--active': this.active,\n            };\n        },\n\n        assetFilter() {\n            return Filter.getByName('asset');\n        },\n\n        isVisible() {\n            const view = Store.get('cmsPage').currentCmsDeviceView;\n\n            const visibility = this.block.visibility as CmsVisibility;\n\n            return (\n                (view === 'desktop' && !visibility.desktop) ||\n                (view === 'tablet-landscape' && !visibility.tablet) ||\n                (view === 'mobile' && !visibility.mobile)\n            );\n        },\n\n        toggleButtonText() {\n            return this.$tc('sw-cms.sidebar.contentMenu.visibilityBlockTextButton', this.isCollapsed ? 0 : 1);\n        },\n\n        expandedClass() {\n            return {\n                'is--expanded': this.isVisible && !this.isCollapsed,\n            };\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            if (!this.block.backgroundMediaMode) {\n                this.block.backgroundMediaMode = 'cover';\n            }\n        },\n\n        onBlockOverlayClick() {\n            if (!this.block.locked) {\n                this.$emit('block-overlay-click');\n            }\n        },\n\n        toggleVisibility() {\n            this.isCollapsed = !this.isCollapsed;\n        },\n    },\n});\n"],"names":["template","Filter","Store","index","_a","_b","errorCssClasses","accumulator","className","backgroundMedia","url","view","visibility"],"mappings":"AAAA,MAAeA,EAAA,uuBCKT,CAAE,OAAAC,EAAQ,MAAAC,CAAU,EAAA,OAM1BC,EAAe,OAAO,UAAU,oBAAoB,CAChD,SAAAH,EAEA,aAAc,OAAO,aAErB,MAAO,CAAC,qBAAqB,EAE7B,MAAO,CACH,MAAO,CACH,KAAM,OACN,SAAU,EACd,EAEA,OAAQ,CACJ,KAAM,QACN,SAAU,GACV,QAAS,EACb,EAEA,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACb,EAEA,YAAa,CACT,KAAM,QACN,SAAU,GACV,QAAS,EACb,EAEA,UAAW,CACP,KAAM,QACN,SAAU,GACV,QAAS,EACb,CACJ,EAEA,MAAO,CACI,MAAA,CACH,cAAe,KACf,YAAa,EAAA,CAErB,EAEA,SAAU,CACN,kBAAmB,CDzD3B,IAAAI,EAAAC,EC0DY,MAAMC,EAAkB,CACpB,eAAgB,CAAC,KAAK,WAAa,KAAK,YACxC,aAAc,KAAK,SAAA,EAGnB,OAAC,KAAK,MAAM,UAITD,GAAAD,EAAA,KAAK,QAAL,YAAAA,EAAY,WAAZ,YAAAC,EAAsB,MAAM,KAAK,OAAO,CAACE,EAAyCC,KACrFD,EAAYC,CAAS,EAAI,GAElBD,GACRD,GAPQA,CAQf,EAEA,aAAc,CACV,IAAIG,EAAkB,KAElB,GAAA,KAAK,MAAM,gBAAiB,CACtB,MAAAC,EAAM,KAAK,MAAM,gBAAgB,IAEnC,KAAK,MAAM,gBAAgB,GAC3BD,EAAkB,QAAQC,CAAG,KAE7BD,EAAkB,QAAQ,KAAK,YAAYC,CAAG,CAAC,IAEvD,CAEO,MAAA,CACH,mBAAoB,KAAK,MAAM,iBAAmB,cAClD,mBAAoBD,EACpB,kBAAmB,KAAK,MAAM,mBAAA,CAEtC,EAEA,cAAe,CACJ,MAAA,CACH,cAAe,KAAK,MAAM,WAAa,MACvC,iBAAkB,KAAK,MAAM,cAAgB,MAC7C,eAAgB,KAAK,MAAM,YAAc,MACzC,gBAAiB,KAAK,MAAM,aAAe,KAAA,CAEnD,EAEA,gBAAiB,CACN,MAAA,CACH,aAAc,KAAK,MAAA,CAE3B,EAEA,gBAAiB,CACN,MAAA,CACH,aAAc,KAAK,MAAA,CAE3B,EAEA,aAAc,CACH,OAAAR,EAAO,UAAU,OAAO,CACnC,EAEA,WAAY,CACR,MAAMU,EAAOT,EAAM,IAAI,SAAS,EAAE,qBAE5BU,EAAa,KAAK,MAAM,WAE9B,OACKD,IAAS,WAAa,CAACC,EAAW,SAClCD,IAAS,oBAAsB,CAACC,EAAW,QAC3CD,IAAS,UAAY,CAACC,EAAW,MAE1C,EAEA,kBAAmB,CACf,OAAO,KAAK,IAAI,uDAAwD,KAAK,YAAc,EAAI,CAAC,CACpG,EAEA,eAAgB,CACL,MAAA,CACH,eAAgB,KAAK,WAAa,CAAC,KAAK,WAAA,CAEhD,CACJ,EAEA,SAAU,CACN,KAAK,iBAAiB,CAC1B,EAEA,QAAS,CACL,kBAAmB,CACV,KAAK,MAAM,sBACZ,KAAK,MAAM,oBAAsB,QAEzC,EAEA,qBAAsB,CACb,KAAK,MAAM,QACZ,KAAK,MAAM,qBAAqB,CAExC,EAEA,kBAAmB,CACV,KAAA,YAAc,CAAC,KAAK,WAC7B,CACJ,CACJ,CAAC"}
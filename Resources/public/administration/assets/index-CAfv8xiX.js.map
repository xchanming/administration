{"version":3,"file":"index-CAfv8xiX.js","sources":["../../../app/administration/src/app/component/structure/sw-admin/sw-admin.html.twig","../../../app/administration/src/app/component/structure/sw-admin/index.ts"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_admin %}\n<sw-skip-link />\n\n<!-- eslint-disable-next-line vuejs-accessibility/no-static-element-interactions -->\n<div\n    id=\"app\"\n    @mousemove=\"onUserActivity\"\n    @keyup=\"onUserActivity\"\n>\n    <!-- @experimental stableVersion:v6.8.0 feature:ADMIN_COMPOSITION_API_EXTENSION_SYSTEM -->\n    <div\n        id=\"overrideComponents\"\n        style=\"display: none;\"\n    >\n        <component\n            :is=\"overrideComponent\"\n            v-for=\"(overrideComponent, index) in overrideComponents\"\n            v-once\n            :key=\"index\"\n        />\n    </div>\n\n    <sw-notifications ref=\"notifications\" />\n    <sw-duplicated-media-v2 v-if=\"isLoggedIn\" />\n    <router-view />\n    <sw-settings-cache-modal v-if=\"isLoggedIn\" />\n    <sw-license-violation />\n    <sw-hidden-iframes />\n    <sw-modals-renderer />\n    <sw-in-app-purchase-checkout v-if=\"isLoggedIn\" />\n    <sw-app-wrong-app-url-modal v-if=\"isLoggedIn\" />\n\n    <mt-toast\n        :toasts=\"toasts\"\n        @remove-toast=\"onRemoveToast\"\n    />\n</div>\n{% endblock %}\n","import type { Toast } from '@cicada-ag/meteor-component-library/dist/esm/components/feedback-indicator/mt-toast/mt-toast';\nimport template from './sw-admin.html.twig';\n\nconst { Component } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n */\nComponent.register('sw-admin', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'userActivityService',\n        'loginService',\n        'feature',\n    ],\n\n    metaInfo() {\n        return {\n            title: this.$tc('global.sw-admin-menu.textCicadaAdmin'),\n        };\n    },\n\n    data(): {\n        channel: BroadcastChannel | null;\n        toasts: Toast[];\n    } {\n        return {\n            channel: null,\n            toasts: [],\n        };\n    },\n\n    computed: {\n        isLoggedIn() {\n            return this.loginService.isLoggedIn();\n        },\n\n        /**\n         * @experimental stableVersion:v6.8.0 feature:ADMIN_COMPOSITION_API_EXTENSION_SYSTEM\n         */\n        overrideComponents() {\n            return Component.getOverrideComponents();\n        },\n    },\n\n    created() {\n        Cicada.ExtensionAPI.handle('toastDispatch', (toast) => {\n            this.toasts = [\n                {\n                    id: Cicada.Utils.createId(),\n                    ...toast,\n                },\n                ...this.toasts,\n            ];\n        });\n\n        this.channel = new BroadcastChannel('session_channel');\n        this.channel.onmessage = (event) => {\n            const data = event.data as { inactive?: boolean };\n\n            if (!data || !Cicada.Utils.object.hasOwnProperty(data, 'inactive')) {\n                return;\n            }\n\n            // eslint-disable-next-line max-len,@typescript-eslint/no-unsafe-member-access\n            const currentRouteName = this.$router.currentRoute.value.name as string;\n            const routeBlocklist = [\n                'sw.inactivity.login.index',\n                'sw.login.index.login',\n            ];\n            if (!data.inactive || routeBlocklist.includes(currentRouteName || '')) {\n                return;\n            }\n\n            this.loginService.forwardLogout(true, true);\n        };\n    },\n\n    beforeUnmount() {\n        this.channel?.close();\n    },\n\n    methods: {\n        onUserActivity() {\n            this.userActivityService.updateLastUserActivity();\n        },\n\n        onRemoveToast(id: number) {\n            this.toasts = this.toasts.filter((toast) => toast.id !== id);\n        },\n    },\n});\n"],"names":["template","Component","toast","event","data","currentRouteName","routeBlocklist","_a","id"],"mappings":"AAAA,MAAeA,EAAA,2qBCGT,CAAE,UAAAC,CAAc,EAAA,OAOtBA,EAAU,SAAS,WAAY,CAC3B,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,sBACA,eACA,SACJ,EAEA,UAAW,CACA,MAAA,CACH,MAAO,KAAK,IAAI,sCAAsC,CAAA,CAE9D,EAEA,MAGE,CACS,MAAA,CACH,QAAS,KACT,OAAQ,CAAC,CAAA,CAEjB,EAEA,SAAU,CACN,YAAa,CACF,OAAA,KAAK,aAAa,YAC7B,EAKA,oBAAqB,CACjB,OAAOC,EAAU,uBACrB,CACJ,EAEA,SAAU,CACN,OAAO,aAAa,OAAO,gBAAkBC,GAAU,CACnD,KAAK,OAAS,CACV,CACI,GAAI,OAAO,MAAM,SAAS,EAC1B,GAAGA,CACP,EACA,GAAG,KAAK,MAAA,CACZ,CACH,EAEI,KAAA,QAAU,IAAI,iBAAiB,iBAAiB,EAChD,KAAA,QAAQ,UAAaC,GAAU,CAChC,MAAMC,EAAOD,EAAM,KAEf,GAAA,CAACC,GAAQ,CAAC,OAAO,MAAM,OAAO,eAAeA,EAAM,UAAU,EAC7D,OAIJ,MAAMC,EAAmB,KAAK,QAAQ,aAAa,MAAM,KACnDC,EAAiB,CACnB,4BACA,sBAAA,EAEA,CAACF,EAAK,UAAYE,EAAe,SAASD,GAAoB,EAAE,GAI/D,KAAA,aAAa,cAAc,GAAM,EAAI,CAAA,CAElD,EAEA,eAAgB,CDnFpB,IAAAE,GCoFQA,EAAA,KAAK,UAAL,MAAAA,EAAc,OAClB,EAEA,QAAS,CACL,gBAAiB,CACb,KAAK,oBAAoB,wBAC7B,EAEA,cAAcC,EAAY,CACjB,KAAA,OAAS,KAAK,OAAO,OAAQN,GAAUA,EAAM,KAAOM,CAAE,CAC/D,CACJ,CACJ,CAAC"}
{"version":3,"file":"index-DdHBFswg.js","sources":["../../../app/administration/src/module/sw-settings-product-feature-sets/page/sw-settings-product-feature-sets-detail/sw-settings-product-feature-sets-detail.html.twig","../../../app/administration/src/module/sw-settings-product-feature-sets/page/sw-settings-product-feature-sets-detail/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_product_feature_set_detail %}\n<sw-page class=\"sw-settings-product-feature-sets-detail\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_product_feature_set_detail_header %}\n    <template #smart-bar-header>\n        <h2>{{ placeholder(productFeatureSet, 'name', $tc('sw-settings-product-feature-sets.detail.textHeadline')) }}</h2>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_product_feature_set_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch @on-change=\"onChangeLanguage\" />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_product_feature_set_detail_actions %}\n    <template #smart-bar-actions>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_product_feature_set_detail_actions_save %}\n        <sw-button-process\n            v-model:processSuccess=\"isSaveSuccessful\"\n            v-tooltip.bottom=\"tooltipSave\"\n            class=\"sw-settings-currency-detail__save-action\"\n            :is-loading=\"isLoading\"\n            :disabled=\"isLoading || !acl.can('product_feature_sets.editor') || undefined\"\n            variant=\"primary\"\n            @update:process-success=\"saveFinish\"\n            @click.prevent=\"onSave\"\n        >\n            {{ $tc('sw-settings-product-feature-sets.detail.buttonSave') }}\n        </sw-button-process>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_product_feature_set_detail_content %}\n    <template #content>\n        <sw-card-view>\n            <template v-if=\"isLoading\">\n                <sw-skeleton variant=\"detail-bold\" />\n                <sw-skeleton />\n            </template>\n\n            <template v-else>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_product_feature_set_detail_content_language_info %}\n                <sw-language-info\n                    :entity-description=\"placeholder(productFeatureSet, 'name', $tc('sw-settings-product-feature-sets.detail.textHeadline'))\"\n                />\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_product_feature_set_detail_content_card %}\n                <sw-card\n                    :title=\"$tc('sw-settings-product-feature-sets.detail.titleCard')\"\n                    position-identifier=\"sw-settings-product-feature-sets-detail\"\n                >\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_settings_product_feature_set_detail_content_field_name %}\n                    <sw-text-field\n                        v-model:value=\"productFeatureSet.name\"\n                        class=\"sw-settings-product-feature-sets-detail__name\"\n                        validation=\"required\"\n                        required\n                        :error=\"productFeatureSetNameError\"\n                        :disabled=\"!acl.can('product_feature_sets.editor')\"\n                        :label=\"$tc('sw-settings-product-feature-sets.detail.labelName')\"\n                        :placeholder=\"placeholder(productFeatureSet, 'name', $tc('sw-settings-product-feature-sets.detail.placeholderName'))\"\n                    />\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_settings_product_feature_set_detail_content_field_description %}\n                    <sw-textarea-field\n                        v-model:value=\"productFeatureSet.description\"\n                        :label=\"$tc('sw-settings-product-feature-sets.detail.labelDescription')\"\n                        class=\"sw-settings-product-feature-sets-detail__description\"\n                        :error=\"productFeatureSetDescriptionError\"\n                        :disabled=\"!acl.can('product_feature_sets.editor')\"\n                        :placeholder=\"placeholder(productFeatureSet, 'description', $tc('sw-settings-product-feature-sets.detail.placeholderDescription'))\"\n                    />\n                    {% endblock %}\n\n                </sw-card>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_product_feature_set_detail_content_values_card %}\n                <sw-settings-product-feature-sets-values-card\n                    v-if=\"productFeatureSet.id\"\n                    :disabled=\"!productFeatureSetId || undefined\"\n                    :allow-edit=\"acl.can('product_feature_sets.editor') || undefined\"\n                    class=\"sw-settings-product-feature-sets-detail__tax-rule-grid\"\n                    :product-feature-set=\"productFeatureSet\"\n                    :is-loading=\"isLoading\"\n                    @product-feature-set-rule-save=\"onSave\"\n                />\n                {% endblock %}\n            </template>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n\n</sw-page>\n{% endblock %}\n","/**\n * @package inventory\n */\nimport template from './sw-settings-product-feature-sets-detail.html.twig';\n\nconst { Mixin } = Cicada;\nconst { mapPropertyErrors } = Cicada.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n        'feature',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('placeholder'),\n    ],\n\n    props: {\n        productFeatureSetId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    data() {\n        return {\n            productFeatureSet: {},\n            isLoading: false,\n            isSaveSuccessful: false,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.placeholder(this.productFeatureSet, 'name');\n        },\n\n        productFeatureSetsRepository() {\n            return this.repositoryFactory.create('product_feature_set');\n        },\n\n        tooltipSave() {\n            if (!this.acl.can('product_feature_sets.editor')) {\n                return {\n                    message: this.$tc('sw-privileges.tooltip.warning'),\n                    disabled: this.acl.can('product_feature_sets.editor'),\n                    showOnDisabledElements: true,\n                };\n            }\n\n            const systemKey = this.$device.getSystemKey();\n\n            return {\n                message: `${systemKey} + S`,\n                appearance: 'light',\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        ...mapPropertyErrors('productFeatureSet', [\n            'name',\n            'description',\n            'features.id',\n        ]),\n    },\n\n    watch: {\n        productFeatureSetId() {\n            if (!this.productFeatureSetId) {\n                this.createdComponent();\n            }\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.isLoading = true;\n\n            if (this.productFeatureSetId) {\n                this.productFeatureSetsRepository.get(this.productFeatureSetId).then((productFeatureSet) => {\n                    if (productFeatureSet.features && !productFeatureSet.features.length) {\n                        productFeatureSet.features = [];\n                    }\n\n                    this.productFeatureSet = productFeatureSet;\n                    this.isLoading = false;\n                });\n                return;\n            }\n\n            this.productFeatureSet = this.productFeatureSetsRepository.create();\n            this.isLoading = false;\n        },\n\n        loadEntityData() {\n            this.productFeatureSetsRepository.get(this.productFeatureSetId).then((productFeatureSet) => {\n                if (productFeatureSet.features && !productFeatureSet.features.length) {\n                    productFeatureSet.features = [];\n                }\n\n                this.productFeatureSet = productFeatureSet;\n            });\n        },\n\n        saveFinish() {\n            this.isSaveSuccessful = false;\n        },\n\n        onSave() {\n            this.isSaveSuccessful = false;\n            this.isLoading = true;\n\n            return this.productFeatureSetsRepository\n                .save(this.productFeatureSet)\n                .then(() => {\n                    this.isSaveSuccessful = true;\n                    if (!this.productFeatureSetId) {\n                        this.$router.push({\n                            name: 'sw.settings.product.feature.sets.detail',\n                            params: { id: this.productFeatureSet.id },\n                        });\n                    }\n                })\n                .then(() => {\n                    this.loadEntityData();\n                })\n                .catch(() => {\n                    this.createNotificationError({\n                        message: this.$tc('sw-settings-product-feature-sets.detail.notificationErrorMessage'),\n                    });\n                })\n                .finally(() => {\n                    this.isLoading = false;\n                });\n        },\n\n        onCancel() {\n            this.$router.push({\n                name: 'sw.settings.product.feature.sets.index',\n            });\n        },\n\n        abortOnLanguageChange() {\n            return this.productFeatureSetsRepository.hasChanges(this.productFeatureSet);\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        onChangeLanguage() {\n            this.loadEntityData();\n        },\n    },\n};\n"],"names":["template","Mixin","mapPropertyErrors","index","productFeatureSet"],"mappings":"AAAA,MAAeA,EAAA,iwGCKT,CAAE,MAAAC,CAAO,EAAG,OACZ,CAAE,kBAAAC,CAAiB,EAAK,OAAO,UAAU,mBAAkB,EAGlDC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,MACA,SACH,EAED,OAAQ,CACJC,EAAM,UAAU,cAAc,EAC9BA,EAAM,UAAU,aAAa,CAChC,EAED,MAAO,CACH,oBAAqB,CACjB,KAAM,OACN,SAAU,GACV,QAAS,IACZ,CACJ,EAED,UAAW,CACP,cAAe,SACf,OAAQ,UACX,EAED,MAAO,CACH,MAAO,CACH,kBAAmB,CAAE,EACrB,UAAW,GACX,iBAAkB,EAC9B,CACK,EAED,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAa,KAAK,UAAU,CACpD,CACK,EAED,SAAU,CACN,YAAa,CACT,OAAO,KAAK,YAAY,KAAK,kBAAmB,MAAM,CACzD,EAED,8BAA+B,CAC3B,OAAO,KAAK,kBAAkB,OAAO,qBAAqB,CAC7D,EAED,aAAc,CACV,OAAK,KAAK,IAAI,IAAI,6BAA6B,EAUxC,CACH,QAAS,GAHK,KAAK,QAAQ,aAAY,CAGlB,OACrB,WAAY,OAC5B,EAZuB,CACH,QAAS,KAAK,IAAI,+BAA+B,EACjD,SAAU,KAAK,IAAI,IAAI,6BAA6B,EACpD,uBAAwB,EAC5C,CASS,EAED,eAAgB,CACZ,MAAO,CACH,QAAS,MACT,WAAY,OAC5B,CACS,EAED,GAAGC,EAAkB,oBAAqB,CACtC,OACA,cACA,aACZ,CAAS,CACJ,EAED,MAAO,CACH,qBAAsB,CACb,KAAK,qBACN,KAAK,iBAAgB,CAE5B,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CAGf,GAFA,KAAK,UAAY,GAEb,KAAK,oBAAqB,CAC1B,KAAK,6BAA6B,IAAI,KAAK,mBAAmB,EAAE,KAAME,GAAsB,CACpFA,EAAkB,UAAY,CAACA,EAAkB,SAAS,SAC1DA,EAAkB,SAAW,IAGjC,KAAK,kBAAoBA,EACzB,KAAK,UAAY,EACrC,CAAiB,EACD,MACH,CAED,KAAK,kBAAoB,KAAK,6BAA6B,OAAM,EACjE,KAAK,UAAY,EACpB,EAED,gBAAiB,CACb,KAAK,6BAA6B,IAAI,KAAK,mBAAmB,EAAE,KAAMA,GAAsB,CACpFA,EAAkB,UAAY,CAACA,EAAkB,SAAS,SAC1DA,EAAkB,SAAW,IAGjC,KAAK,kBAAoBA,CACzC,CAAa,CACJ,EAED,YAAa,CACT,KAAK,iBAAmB,EAC3B,EAED,QAAS,CACL,YAAK,iBAAmB,GACxB,KAAK,UAAY,GAEV,KAAK,6BACP,KAAK,KAAK,iBAAiB,EAC3B,KAAK,IAAM,CACR,KAAK,iBAAmB,GACnB,KAAK,qBACN,KAAK,QAAQ,KAAK,CACd,KAAM,0CACN,OAAQ,CAAE,GAAI,KAAK,kBAAkB,EAAI,CACrE,CAAyB,CAEzB,CAAiB,EACA,KAAK,IAAM,CACR,KAAK,eAAc,CACvC,CAAiB,EACA,MAAM,IAAM,CACT,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,kEAAkE,CAC5G,CAAqB,CACrB,CAAiB,EACA,QAAQ,IAAM,CACX,KAAK,UAAY,EACrC,CAAiB,CACR,EAED,UAAW,CACP,KAAK,QAAQ,KAAK,CACd,KAAM,wCACtB,CAAa,CACJ,EAED,uBAAwB,CACpB,OAAO,KAAK,6BAA6B,WAAW,KAAK,iBAAiB,CAC7E,EAED,sBAAuB,CACnB,OAAO,KAAK,QACf,EAED,kBAAmB,CACf,KAAK,eAAc,CACtB,CACJ,CACL"}
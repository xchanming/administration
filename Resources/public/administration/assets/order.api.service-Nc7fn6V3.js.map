{"version":3,"file":"order.api.service-Nc7fn6V3.js","sources":["../../../app/administration/src/core/service/api/order.api.service.js"],"sourcesContent":["import { deepCopyObject } from 'src/core/service/utils/object.utils';\nimport utils from 'src/core/service/util.service';\nimport ApiService from '../api.service';\n\n/**\n * @package checkout\n * Gateway for the API end point \"order\"\n * @class\n * @extends ApiService\n */\nclass OrderApiService extends ApiService {\n    constructor(httpClient, loginService, apiEndpoint = 'order') {\n        super(httpClient, loginService, apiEndpoint);\n        this.name = 'orderService';\n    }\n\n    recalculateOrder(orderId, versionId, additionalParams = {}, additionalHeaders = {}) {\n        const route = `/_action/order/${orderId}/recalculate`;\n        const headers = Object.assign(ApiService.getVersionHeader(versionId), this.getBasicHeaders(additionalHeaders));\n\n        return this.httpClient.post(route, {}, { additionalParams, headers });\n    }\n\n    addProductToOrder(orderId, versionId, productId, quantity, additionalParams = {}, additionalHeaders = {}) {\n        const route = `_action/order/${orderId}/product/${productId}`;\n        const headers = Object.assign(ApiService.getVersionHeader(versionId), this.getBasicHeaders(additionalHeaders));\n\n        return this.httpClient.post(route, { quantity: quantity }, { additionalParams, headers });\n    }\n\n    addCustomLineItemToOrder(orderId, versionId, item, additionalParams = {}, additionalHeaders = {}) {\n        const route = `_action/order/${orderId}/lineItem`;\n        const headers = Object.assign(ApiService.getVersionHeader(versionId), this.getBasicHeaders(additionalHeaders));\n\n        const dummyPrice = deepCopyObject(item.priceDefinition);\n        dummyPrice.taxRules = item.priceDefinition.taxRules;\n        dummyPrice.isCalculated = true;\n\n        return this.httpClient.post(\n            route,\n            JSON.stringify({\n                label: item.label,\n                quantity: item.quantity,\n                type: item.type,\n                identifier: utils.createId(),\n                description: item.description,\n                priceDefinition: dummyPrice,\n            }),\n            {\n                additionalParams,\n                headers,\n            },\n        );\n    }\n\n    addCreditItemToOrder(orderId, versionId, item, additionalParams = {}, additionalHeaders = {}) {\n        const route = `_action/order/${orderId}/creditItem`;\n        const headers = Object.assign(ApiService.getVersionHeader(versionId), this.getBasicHeaders(additionalHeaders));\n\n        const dummyPrice = deepCopyObject(item.priceDefinition);\n        return this.httpClient.post(\n            route,\n            JSON.stringify({\n                label: item.label,\n                quantity: item.quantity,\n                type: item.type,\n                identifier: utils.createId(),\n                description: item.description,\n                priceDefinition: dummyPrice,\n            }),\n            {\n                additionalParams,\n                headers,\n            },\n        );\n    }\n\n    addPromotionToOrder(orderId, versionId, code, additionalParams = {}, additionalHeaders = {}) {\n        const route = `_action/order/${orderId}/promotion-item`;\n        const headers = Object.assign(ApiService.getVersionHeader(versionId), this.getBasicHeaders(additionalHeaders));\n\n        return this.httpClient.post(route, JSON.stringify({ code }), {\n            additionalParams,\n            headers,\n        });\n    }\n\n    toggleAutomaticPromotions(orderId, versionId, skipAutomaticPromotions, additionalParams = {}, additionalHeaders = {}) {\n        const route = `_action/order/${orderId}/toggleAutomaticPromotions`;\n        const headers = Object.assign(ApiService.getVersionHeader(versionId), this.getBasicHeaders(additionalHeaders));\n\n        return this.httpClient.post(route, JSON.stringify({ skipAutomaticPromotions }), {\n            additionalParams,\n            headers,\n        });\n    }\n\n    changeOrderAddress(orderAddressId, customerAddressId, additionalParams, additionalHeaders) {\n        const route = `_action/order-address/${orderAddressId}/customer-address/${customerAddressId}`;\n        const params = { ...additionalParams };\n        const headers = this.getBasicHeaders(additionalHeaders);\n\n        return this.httpClient.post(\n            route,\n            {},\n            {\n                params,\n                headers,\n            },\n        );\n    }\n\n    updateOrderAddresses(orderId, mapping, additionalParams = {}, additionalHeaders = {}) {\n        const route = `_action/order/${orderId}/order-address`;\n        const headers = this.getBasicHeaders(additionalHeaders);\n\n        return this.httpClient.post(\n            route,\n            {\n                mapping: mapping,\n            },\n            {\n                additionalParams,\n                headers,\n            },\n        );\n    }\n}\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default OrderApiService;\n"],"names":["OrderApiService","ApiService","httpClient","loginService","apiEndpoint","orderId","versionId","additionalParams","additionalHeaders","route","headers","productId","quantity","item","dummyPrice","deepCopyObject","utils","code","skipAutomaticPromotions","orderAddressId","customerAddressId","params","mapping"],"mappings":"mTAUA,MAAMA,UAAwBC,CAAW,CACrC,YAAYC,EAAYC,EAAcC,EAAc,QAAS,CACzD,MAAMF,EAAYC,EAAcC,CAAW,EAC3C,KAAK,KAAO,cACf,CAED,iBAAiBC,EAASC,EAAWC,EAAmB,CAAE,EAAEC,EAAoB,GAAI,CAChF,MAAMC,EAAQ,kBAAkBJ,CAAO,eACjCK,EAAU,OAAO,OAAOT,EAAW,iBAAiBK,CAAS,EAAG,KAAK,gBAAgBE,CAAiB,CAAC,EAE7G,OAAO,KAAK,WAAW,KAAKC,EAAO,CAAA,EAAI,CAAE,iBAAAF,EAAkB,QAAAG,CAAO,CAAE,CACvE,CAED,kBAAkBL,EAASC,EAAWK,EAAWC,EAAUL,EAAmB,CAAA,EAAIC,EAAoB,GAAI,CACtG,MAAMC,EAAQ,iBAAiBJ,CAAO,YAAYM,CAAS,GACrDD,EAAU,OAAO,OAAOT,EAAW,iBAAiBK,CAAS,EAAG,KAAK,gBAAgBE,CAAiB,CAAC,EAE7G,OAAO,KAAK,WAAW,KAAKC,EAAO,CAAE,SAAUG,GAAY,CAAE,iBAAAL,EAAkB,QAAAG,CAAS,CAAA,CAC3F,CAED,yBAAyBL,EAASC,EAAWO,EAAMN,EAAmB,CAAE,EAAEC,EAAoB,GAAI,CAC9F,MAAMC,EAAQ,iBAAiBJ,CAAO,YAChCK,EAAU,OAAO,OAAOT,EAAW,iBAAiBK,CAAS,EAAG,KAAK,gBAAgBE,CAAiB,CAAC,EAEvGM,EAAaC,EAAeF,EAAK,eAAe,EACtD,OAAAC,EAAW,SAAWD,EAAK,gBAAgB,SAC3CC,EAAW,aAAe,GAEnB,KAAK,WAAW,KACnBL,EACA,KAAK,UAAU,CACX,MAAOI,EAAK,MACZ,SAAUA,EAAK,SACf,KAAMA,EAAK,KACX,WAAYG,EAAM,SAAU,EAC5B,YAAaH,EAAK,YAClB,gBAAiBC,CACjC,CAAa,EACD,CACI,iBAAAP,EACA,QAAAG,CACH,CACb,CACK,CAED,qBAAqBL,EAASC,EAAWO,EAAMN,EAAmB,CAAE,EAAEC,EAAoB,GAAI,CAC1F,MAAMC,EAAQ,iBAAiBJ,CAAO,cAChCK,EAAU,OAAO,OAAOT,EAAW,iBAAiBK,CAAS,EAAG,KAAK,gBAAgBE,CAAiB,CAAC,EAEvGM,EAAaC,EAAeF,EAAK,eAAe,EACtD,OAAO,KAAK,WAAW,KACnBJ,EACA,KAAK,UAAU,CACX,MAAOI,EAAK,MACZ,SAAUA,EAAK,SACf,KAAMA,EAAK,KACX,WAAYG,EAAM,SAAU,EAC5B,YAAaH,EAAK,YAClB,gBAAiBC,CACjC,CAAa,EACD,CACI,iBAAAP,EACA,QAAAG,CACH,CACb,CACK,CAED,oBAAoBL,EAASC,EAAWW,EAAMV,EAAmB,CAAE,EAAEC,EAAoB,GAAI,CACzF,MAAMC,EAAQ,iBAAiBJ,CAAO,kBAChCK,EAAU,OAAO,OAAOT,EAAW,iBAAiBK,CAAS,EAAG,KAAK,gBAAgBE,CAAiB,CAAC,EAE7G,OAAO,KAAK,WAAW,KAAKC,EAAO,KAAK,UAAU,CAAE,KAAAQ,CAAI,CAAE,EAAG,CACzD,iBAAAV,EACA,QAAAG,CACZ,CAAS,CACJ,CAED,0BAA0BL,EAASC,EAAWY,EAAyBX,EAAmB,CAAE,EAAEC,EAAoB,GAAI,CAClH,MAAMC,EAAQ,iBAAiBJ,CAAO,6BAChCK,EAAU,OAAO,OAAOT,EAAW,iBAAiBK,CAAS,EAAG,KAAK,gBAAgBE,CAAiB,CAAC,EAE7G,OAAO,KAAK,WAAW,KAAKC,EAAO,KAAK,UAAU,CAAE,wBAAAS,CAAuB,CAAE,EAAG,CAC5E,iBAAAX,EACA,QAAAG,CACZ,CAAS,CACJ,CAED,mBAAmBS,EAAgBC,EAAmBb,EAAkBC,EAAmB,CACvF,MAAMC,EAAQ,yBAAyBU,CAAc,qBAAqBC,CAAiB,GACrFC,EAAS,CAAE,GAAGd,GACdG,EAAU,KAAK,gBAAgBF,CAAiB,EAEtD,OAAO,KAAK,WAAW,KACnBC,EACA,CAAE,EACF,CACI,OAAAY,EACA,QAAAX,CACH,CACb,CACK,CAED,qBAAqBL,EAASiB,EAASf,EAAmB,CAAE,EAAEC,EAAoB,GAAI,CAClF,MAAMC,EAAQ,iBAAiBJ,CAAO,iBAChCK,EAAU,KAAK,gBAAgBF,CAAiB,EAEtD,OAAO,KAAK,WAAW,KACnBC,EACA,CACI,QAASa,CACZ,EACD,CACI,iBAAAf,EACA,QAAAG,CACH,CACb,CACK,CACL"}
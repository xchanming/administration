{"version":3,"file":"index-DVoDOUVe.js","sources":["../../../app/administration/src/app/component/form/select/entity/sw-entity-multi-select/sw-entity-multi-select.html.twig","../../../app/administration/src/app/component/form/select/entity/sw-entity-multi-select/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_entity_multi_select %}\n<sw-select-base\n    ref=\"selectBase\"\n    class=\"sw-entity-multi-select\"\n    :is-loading=\"isLoading\"\n    v-bind=\"$attrs\"\n    :label=\"label\"\n    v-on=\"listeners\"\n    @select-expanded=\"onSelectExpanded\"\n    @select-collapsed=\"onSelectCollapsed\"\n    @clear=\"clearSelection\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_entity_multi_select_base %}\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_entity_multi_select_base_selection %}\n    <template #sw-select-selection=\"{ identification, error, disabled, size, expand, collapse}\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_entity_multi_select_advanced_selection_modal %}\n        <component\n            :is=\"advancedSelectionComponent\"\n            v-if=\"isAdvancedSelectionActive && isAdvancedSelectionModalVisible\"\n            :initial-search-term=\"searchTerm\"\n            :initial-selection=\"currentCollection\"\n            v-bind=\"advancedSelectionParameters\"\n            @modal-close=\"closeAdvancedSelectionModal\"\n            @selection-submit=\"onAdvancedSelectionSubmit\"\n        />\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_entity_multi_select_base_selection_slot %}\n        <sw-select-selection-list\n            ref=\"selectionList\"\n            :selections=\"visibleValues\"\n            :invisible-count=\"invisibleValueCount\"\n            value-property=\"id\"\n            v-bind=\"{ size, labelProperty, placeholder, alwaysShowPlaceholder, searchTerm, disabled }\"\n            :input-label=\"label\"\n            :hide-labels=\"hideLabels\"\n            :selection-disabling-method=\"selectionDisablingMethod\"\n            @total-count-click=\"expandValueLimit\"\n            @item-remove=\"remove\"\n            @last-item-delete=\"removeLastItem\"\n            @search-term-change=\"onSearchTermChange\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_entity_multi_select_base_selection_list %}\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_entity_multi_select_base_selection_list_label %}\n            <template #label-property=\"{ item, index, labelProperty, valueProperty, getKey }\">\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_entity_multi_select_base_selection_list_label_inner %}\n                <slot\n                    name=\"selection-label-property\"\n                    v-bind=\"{ item, index, labelProperty, valueProperty, getKey }\"\n                >\n                    <sw-product-variant-info\n                        v-if=\"displayVariants\"\n                        :variations=\"item.variation\"\n                    >\n                        {{ displayLabelProperty(item) }}\n                    </sw-product-variant-info>\n                    <template v-else>\n                        {{ displayLabelProperty(item) }}\n                    </template>\n                </slot>\n                {% endblock %}\n            </template>\n            {% endblock %}\n            {% endblock %}\n        </sw-select-selection-list>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_entity_multi_select_base_results %}\n    <template #results-list>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_entity_multi_select_base_results_slot %}\n        <sw-select-result-list\n            ref=\"swSelectResultList\"\n            :options=\"resultCollection\"\n            :is-loading=\"isLoading\"\n            :empty-message=\"$tc('global.sw-entity-multi-select.messageNoResults', 0, { term: searchTerm })\"\n            :focus-el=\"$refs.selectionList.getFocusEl()\"\n            @paginate=\"paginate\"\n            @item-select=\"addItem\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_entity_multi_select_base_results_list %}\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_entity_multi_select_base_results_list_before %}\n            <template #before-item-list>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_entity_multi_select_base_results_list_before_advanced_selection %}\n                <!-- eslint-disable-next-line vuejs-accessibility/click-events-have-key-events, vuejs-accessibility/no-static-element-interactions -->\n                <div\n                    v-if=\"isAdvancedSelectionActive\"\n                    class=\"sw-multi-select-filtering__advanced-selection sw-select-result\"\n                    @click=\"openAdvancedSelectionModal\"\n                >\n                    {{ $tc('global.sw-entity-advanced-selection-modal.link') }}\n                </div>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_entity_multi_select_base_results_list_before_slot %}\n                <slot name=\"before-item-list\"></slot>\n                {% endblock %}\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_entity_multi_select_base_results_list_result %}\n            <template #result-item=\"{ item, index }\">\n                <slot\n                    name=\"result-item\"\n                    v-bind=\"{ item, index, labelProperty, valueProperty: 'id', searchTerm, highlightSearchTerm, isSelected, addItem, getKey, displayLabelProperty, isSelectionDisabled, descriptionPosition }\"\n                >\n                    <sw-select-result\n                        :selected=\"isSelected(item)\"\n                        v-bind=\"{ item, index }\"\n                        :disabled=\"isSelectionDisabled(item)\"\n                        :description-position=\"descriptionPosition\"\n                        @item-select=\"addItem\"\n                    >\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_entity_multi_select_base_results_list_result_preview %}\n                        <template #preview>\n                            <slot\n                                name=\"result-label-preview\"\n                                v-bind=\"{\n                                    item,\n                                    index,\n                                    labelProperty,\n                                    valueProperty: 'id',\n                                    searchTerm,\n                                    highlightSearchTerm,\n                                    getKey\n                                }\"\n                            ></slot>\n                        </template>\n                        {% endblock %}\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_entity_multi_select_base_results_list_result_label %}\n                        <slot\n                            name=\"result-label-property\"\n                            v-bind=\"{ item, index, labelProperty, valueProperty: 'id', searchTerm, highlightSearchTerm, getKey }\"\n                        >\n                            <sw-product-variant-info\n                                v-if=\"displayVariants\"\n                                :variations=\"item.variation\"\n                                :highlighted=\"true\"\n                                :search-term=\"searchTerm\"\n                            >\n                                {{ displayLabelProperty(item) }}\n                            </sw-product-variant-info>\n                            <template v-else>\n                                <sw-highlight-text\n                                    v-if=\"highlightSearchTerm\"\n                                    :text=\"displayLabelProperty(item)\"\n                                    :search-term=\"searchTerm\"\n                                />\n                                <template v-else>\n                                    {{ displayLabelProperty(item) }}\n                                </template>\n                            </template>\n                        </slot>\n                        {% endblock %}\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_entity_multi_select_base_results_list_result_description %}\n                        <template #description>\n                            <slot\n                                name=\"result-description-property\"\n                                v-bind=\"{ item, searchTerm, highlightSearchTerm }\"\n                            ></slot>\n                        </template>\n                        {% endblock %}\n                    </sw-select-result>\n                </slot>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_entity_multi_select_base_results_list_after %}\n            <template #after-item-list>\n                <slot name=\"after-item-list\"></slot>\n            </template>\n            {% endblock %}\n            {% endblock %}\n        </sw-select-result-list>\n        {% endblock %}\n    </template>\n    {% endblock %}\n    {% endblock %}\n\n    <template #label>\n        <slot name=\"label\"></slot>\n    </template>\n\n    <template #hint>\n        <slot name=\"hint\"></slot>\n    </template>\n</sw-select-base>\n{% endblock %}\n","import template from './sw-entity-multi-select.html.twig';\nimport './sw-entity-multi-select.scss';\n\nconst { Component, Mixin } = Cicada;\nconst { debounce, get } = Cicada.Utils;\nconst { Criteria, EntityCollection } = Cicada.Data;\n\n/**\n * @private\n */\nComponent.register('sw-entity-multi-select', {\n    template,\n\n    inheritAttrs: false,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'feature',\n    ],\n\n    emits: [\n        'search',\n        'update:entityCollection',\n        'item-add',\n        'item-remove',\n        'display-values-expand',\n        'search-term-change',\n    ],\n\n    mixins: [\n        Mixin.getByName('remove-api-error'),\n    ],\n\n    props: {\n        labelProperty: {\n            type: [\n                String,\n                Array,\n            ],\n            required: false,\n            default: 'name',\n        },\n\n        resultLimit: {\n            type: Number,\n            required: false,\n            default: 25,\n        },\n\n        valueLimit: {\n            type: Number,\n            required: false,\n            default: 5,\n        },\n\n        placeholder: {\n            type: String,\n            required: false,\n            default: '',\n        },\n\n        alwaysShowPlaceholder: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        criteria: {\n            type: Object,\n            required: false,\n            default(props) {\n                return new Criteria(1, props.resultLimit);\n            },\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: undefined,\n        },\n\n        highlightSearchTerm: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n\n        entityCollection: {\n            type: Array,\n            required: true,\n        },\n\n        entityName: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        context: {\n            type: Object,\n            required: false,\n            default() {\n                return Cicada.Context.api;\n            },\n        },\n\n        hideLabels: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        selectionDisablingMethod: {\n            type: Function,\n            required: false,\n            default: () => false,\n        },\n\n        descriptionPosition: {\n            type: String,\n            required: false,\n            default: 'right',\n            validValues: [\n                'bottom',\n                'right',\n            ],\n            validator(value) {\n                return [\n                    'bottom',\n                    'right',\n                ].includes(value);\n            },\n        },\n\n        advancedSelectionComponent: {\n            type: String,\n            required: false,\n            default() {\n                return '';\n            },\n        },\n\n        advancedSelectionParameters: {\n            type: Object,\n            required: false,\n            default() {\n                return {};\n            },\n        },\n\n        displayVariants: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        label: {\n            type: String,\n            required: false,\n            default: undefined,\n        },\n    },\n\n    data() {\n        return {\n            searchTerm: '',\n            limit: this.valueLimit,\n            searchCriteria: null,\n            isLoading: false,\n            currentCollection: null,\n            resultCollection: null,\n            isAdvancedSelectionModalVisible: false,\n        };\n    },\n\n    computed: {\n        listeners() {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access\n            if (this.isCompatEnabled('INSTANCE_LISTENERS')) {\n                return this.$listeners;\n            }\n\n            return {};\n        },\n\n        repository() {\n            return this.repositoryFactory.create(this.entityName || this.entityCollection.entity);\n        },\n\n        visibleValues() {\n            if (!this.currentCollection || this.currentCollection.length <= 0) {\n                return [];\n            }\n\n            return this.currentCollection.slice(0, this.limit);\n        },\n\n        totalValuesCount() {\n            if (this.currentCollection.length) {\n                return this.currentCollection.length;\n            }\n\n            return 0;\n        },\n\n        invisibleValueCount() {\n            if (!this.currentCollection) {\n                return 0;\n            }\n\n            return Math.max(0, this.totalValuesCount - this.limit);\n        },\n\n        isAdvancedSelectionActive() {\n            return this.advancedSelectionComponent && Component.getComponentRegistry().has(this.advancedSelectionComponent);\n        },\n    },\n\n    watch: {\n        entityCollection() {\n            this.refreshCurrentCollection();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.refreshCurrentCollection();\n        },\n\n        refreshCurrentCollection() {\n            if (this.entityCollection) {\n                this.currentCollection = EntityCollection.fromCollection(this.entityCollection);\n            }\n        },\n\n        createEmptyCollection() {\n            return new EntityCollection(\n                this.entityCollection.source,\n                this.entityCollection.entity,\n                this.entityCollection.context,\n                this.entityCollection.criteria,\n            );\n        },\n\n        isSelected(item) {\n            return this.currentCollection.has(item.id);\n        },\n\n        loadData() {\n            this.isLoading = true;\n\n            return this.repository.search(this.criteria, { ...this.context, inheritance: true }).then((result) => {\n                this.displaySearch(result);\n\n                this.isLoading = false;\n\n                return result;\n            });\n        },\n\n        search() {\n            if (this.criteria.term === this.searchTerm) {\n                return Promise.resolve();\n            }\n\n            this.resetCriteria();\n            this.resultCollection = null;\n\n            const searchPromise = this.loadData().then((result) => {\n                this.resetActiveItem();\n                return result;\n            });\n            this.$emit('search', searchPromise);\n\n            return searchPromise;\n        },\n\n        displaySearch(result) {\n            if (!this.resultCollection) {\n                this.resultCollection = result;\n            } else {\n                result.forEach((item) => {\n                    // Prevent duplicate entries\n                    if (!this.resultCollection.has(item.id)) {\n                        this.resultCollection.push(item);\n                    }\n                });\n            }\n        },\n\n        displayLabelProperty(item) {\n            const labelProperties = [];\n\n            if (Array.isArray(this.labelProperty)) {\n                labelProperties.push(...this.labelProperty);\n            } else {\n                labelProperties.push(this.labelProperty);\n            }\n\n            return labelProperties\n                .map((labelProperty) => {\n                    return this.getKey(item, labelProperty) || this.getKey(item, `translated.${labelProperty}`);\n                })\n                .join(' ');\n        },\n\n        resetActiveItem() {\n            if (this.$refs.swSelectResultList) {\n                this.$refs.swSelectResultList.setActiveItemIndex(0);\n            }\n        },\n\n        resetCriteria() {\n            this.criteria.setPage(1);\n            this.criteria.setLimit(this.resultLimit);\n            this.criteria.setTerm(this.searchTerm);\n        },\n\n        paginate() {\n            if (!this.resultCollection || this.resultCollection.total < this.criteria.page * this.criteria.limit) {\n                return;\n            }\n\n            this.criteria.setPage(this.criteria.page + 1);\n\n            this.loadData();\n        },\n\n        emitChanges(newCollection) {\n            this.$emit('update:entityCollection', newCollection);\n        },\n\n        addItem(item) {\n            if (this.isSelected(item)) {\n                this.remove(item);\n                return;\n            }\n\n            this.$emit('item-add', item);\n\n            const newCollection = EntityCollection.fromCollection(this.currentCollection);\n            newCollection.add(item);\n\n            this.emitChanges(newCollection);\n\n            this.$refs.selectionList.focus();\n            this.$refs.selectionList.select();\n        },\n\n        remove(item) {\n            this.$emit('item-remove', item);\n\n            const newCollection = EntityCollection.fromCollection(this.currentCollection);\n            newCollection.remove(item.id);\n\n            this.emitChanges(newCollection);\n        },\n\n        removeLastItem() {\n            if (!this.currentCollection.length) {\n                return;\n            }\n\n            if (this.invisibleValueCount > 0) {\n                this.expandValueLimit();\n                return;\n            }\n\n            const lastSelection = this.currentCollection[this.currentCollection.length - 1];\n            this.remove(lastSelection);\n        },\n\n        onSelectExpanded() {\n            this.resetCriteria();\n            this.resultCollection = null;\n\n            this.loadData();\n\n            this.$refs.selectionList.focus();\n        },\n\n        onSelectCollapsed() {\n            this.searchTerm = '';\n            this.$refs.selectionList.blur();\n        },\n\n        expandValueLimit() {\n            this.$emit('display-values-expand');\n\n            this.limit += this.limit;\n        },\n\n        onSearchTermChange(term) {\n            this.searchTerm = term;\n            this.$emit('search-term-change', term);\n            this.debouncedSearch();\n        },\n\n        debouncedSearch: debounce(function updateSearchTerm() {\n            this.search();\n        }, 400),\n\n        // Used to reset the results. Normally all search results are appended to the results list, because of pagination.\n        // Useful when the criteria changes from outside and we have to search again because of changed filters for example.\n        resetResultCollection() {\n            this.resultCollection = null;\n\n            // Direct new search if the select field is expanded\n            if (this.$refs.selectBase.expanded) {\n                this.loadData();\n            }\n        },\n\n        getKey(object, keyPath, defaultValue) {\n            return get(object, keyPath, defaultValue);\n        },\n\n        isSelectionDisabled(selection) {\n            if (this.disabled) {\n                return true;\n            }\n\n            return this.selectionDisablingMethod(selection);\n        },\n\n        openAdvancedSelectionModal() {\n            this.isAdvancedSelectionModalVisible = true;\n        },\n\n        closeAdvancedSelectionModal() {\n            this.isAdvancedSelectionModalVisible = false;\n        },\n\n        onAdvancedSelectionSubmit(selectedItems) {\n            const newCollection = this.createEmptyCollection();\n\n            selectedItems.forEach((item) => {\n                newCollection.add(item);\n            });\n\n            this.emitChanges(newCollection);\n\n            this.$refs.selectionList.focus();\n            this.$refs.selectionList.select();\n        },\n\n        clearSelection() {\n            this.emitChanges(this.createEmptyCollection());\n            this.searchTerm = '';\n            this.$refs.selectionList.blur();\n        },\n    },\n});\n"],"names":["template","Component","Mixin","debounce","get","Criteria","EntityCollection","props","value","item","result","searchPromise","labelProperties","labelProperty","newCollection","lastSelection","term","object","keyPath","defaultValue","selection","selectedItems"],"mappings":"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"}
{"version":3,"file":"index-B4cU6bS7.js","sources":["../../../app/administration/src/module/sw-settings-listing/component/sw-settings-listing-visibility-detail/sw-settings-listing-visibility-detail.html.twig","../../../app/administration/src/module/sw-settings-listing/component/sw-settings-listing-visibility-detail/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_product_visibility_detail %}\n<sw-grid\n    class=\"sw-settings-listing-visibility-detail\"\n    table\n    :items=\"items\"\n    :selectable=\"false\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_listing_visibility_detail_columns %}\n    <template #columns=\"{ item }\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_listing_visibility_detail_columns_sales_channel %}\n        <sw-grid-column\n            :label=\"$tc('sw-product.visibility.columnSalesChannel')\"\n            flex=\"0.5fr\"\n            align=\"left\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_listing_visibility_detail_columns_sales_channel_label %}\n            <span\n                v-tooltip=\"{ message: item.name, disabled: item.name.length < 10 }\"\n                class=\"sw-product-visibility-detail__name\"\n            >\n                {{ truncateFilter(item.name, 30) }}\n            </span>\n            {% endblock %}\n        </sw-grid-column>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_listing_visibility_detail_columns_all %}\n        <sw-grid-column\n            :label=\"$tc('sw-product.visibility.columnAll')\"\n            flex=\"0.3fr\"\n            align=\"left\"\n        >\n            <sw-radio-field\n                :disabled=\"disabled\"\n                :value=\"item.visibility\"\n                :name=\"'visibility' + item.id\"\n                :options=\"[{ value: 30 }]\"\n                @update:value=\"changeVisibilityValue($event, item)\"\n            />\n        </sw-grid-column>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_listing_visibility_detail_columns_search_only %}\n        <sw-grid-column\n            :label=\"$tc('sw-product.visibility.columnSearchOnly')\"\n            flex=\"0.7fr\"\n            align=\"left\"\n        >\n            <sw-radio-field\n                :disabled=\"disabled\"\n                :value=\"item.visibility\"\n                :name=\"'visibility' + item.id\"\n                :options=\"[{ value: 20 }]\"\n                @update:value=\"changeVisibilityValue($event, item)\"\n            />\n        </sw-grid-column>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_listing_visibility_detail_columns_link_only %}\n        <sw-grid-column\n            :label=\"$tc('sw-product.visibility.columnLinkOnly')\"\n            flex=\"1fr\"\n            align=\"left\"\n        >\n            <sw-radio-field\n                type=\"radio\"\n                :disabled=\"disabled\"\n                :value=\"item.visibility\"\n                :name=\"'visibility' + item.id\"\n                :options=\"[{ value: 10 }]\"\n                @update:value=\"changeVisibilityValue($event, item)\"\n            />\n        </sw-grid-column>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_listing_visibility_detail_pagination %}\n    <template #pagination>\n        <sw-pagination\n            :page=\"page\"\n            :limit=\"limit\"\n            :total=\"total\"\n            :total-visible=\"10\"\n            :steps=\"[10]\"\n            @page-change=\"onPageChange\"\n        />\n    </template>\n    {% endblock %}\n</sw-grid>\n{% endblock %}\n","import template from './sw-settings-listing-visibility-detail.html.twig';\n\n/**\n * @package inventory\n */\n\nconst { Criteria } = Cicada.Data;\nconst { Filter } = Cicada;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    props: {\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        config: {\n            required: true,\n            type: Array,\n        },\n    },\n\n    data() {\n        return {\n            items: [],\n            page: 1,\n            limit: 10,\n            total: 0,\n        };\n    },\n\n    computed: {\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n\n        truncateFilter() {\n            return Filter.getByName('truncate');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.onPageChange({ page: this.page, limit: this.limit });\n        },\n\n        onPageChange(params) {\n            const offset = (params.page - 1) * params.limit;\n            this.total = this.config.length;\n\n            this.fetchSalesChannels().then((config) => {\n                this.items = config.slice(offset, offset + params.limit);\n            });\n        },\n\n        changeVisibilityValue(event, item) {\n            item.visibility = Number(event);\n        },\n\n        fetchSalesChannels() {\n            const salesChannelIds = this.config.map((config) => config.id);\n            const criteria = new Criteria(1, 25);\n\n            criteria.addFilter(Criteria.equalsAny('id', salesChannelIds));\n\n            return this.salesChannelRepository.search(criteria).then((salesChannels) => {\n                return this.config.map((config) => {\n                    const salesChannel = salesChannels.get(config.id);\n                    if (!salesChannel) {\n                        return config;\n                    }\n\n                    return {\n                        ...config,\n                        name: salesChannel.name,\n                    };\n                });\n            });\n        },\n    },\n};\n"],"names":["template","Criteria","Filter","index","params","offset","config","event","item","salesChannelIds","criteria","salesChannels","salesChannel"],"mappings":"AAAA,MAAeA,EAAA,sjECMT,CAAE,SAAAC,CAAQ,EAAK,OAAO,KACtB,CAAE,OAAAC,CAAQ,EAAG,OAGJC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CACH,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EAED,OAAQ,CACJ,SAAU,GACV,KAAM,KACT,CACJ,EAED,MAAO,CACH,MAAO,CACH,MAAO,CAAE,EACT,KAAM,EACN,MAAO,GACP,MAAO,CACnB,CACK,EAED,SAAU,CACN,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,eAAe,CACvD,EAED,gBAAiB,CACb,OAAOE,EAAO,UAAU,UAAU,CACrC,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,aAAa,CAAE,KAAM,KAAK,KAAM,MAAO,KAAK,KAAK,CAAE,CAC3D,EAED,aAAaE,EAAQ,CACjB,MAAMC,GAAUD,EAAO,KAAO,GAAKA,EAAO,MAC1C,KAAK,MAAQ,KAAK,OAAO,OAEzB,KAAK,mBAAkB,EAAG,KAAME,GAAW,CACvC,KAAK,MAAQA,EAAO,MAAMD,EAAQA,EAASD,EAAO,KAAK,CACvE,CAAa,CACJ,EAED,sBAAsBG,EAAOC,EAAM,CAC/BA,EAAK,WAAa,OAAOD,CAAK,CACjC,EAED,oBAAqB,CACjB,MAAME,EAAkB,KAAK,OAAO,IAAKH,GAAWA,EAAO,EAAE,EACvDI,EAAW,IAAIT,EAAS,EAAG,EAAE,EAEnC,OAAAS,EAAS,UAAUT,EAAS,UAAU,KAAMQ,CAAe,CAAC,EAErD,KAAK,uBAAuB,OAAOC,CAAQ,EAAE,KAAMC,GAC/C,KAAK,OAAO,IAAKL,GAAW,CAC/B,MAAMM,EAAeD,EAAc,IAAIL,EAAO,EAAE,EAChD,OAAKM,EAIE,CACH,GAAGN,EACH,KAAMM,EAAa,IAC3C,EAN+BN,CAO/B,CAAiB,CACJ,CACJ,CACJ,CACL"}
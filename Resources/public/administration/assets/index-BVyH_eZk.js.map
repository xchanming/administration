{"version":3,"file":"index-BVyH_eZk.js","sources":["../../../app/administration/src/app/component/utils/sw-error-boundary/index.js"],"sourcesContent":["/**\n * @package admin\n *\n * @private\n * @description\n * The component catches all errors in subcomponent which aren't handled before.\n * @status ready\n * @example-type code-only\n * @component-example\n * <sw-error-boundary>\n *     <!-- Your components -->\n * </sw-error-boundary>\n */\nCicada.Component.register('sw-error-boundary', {\n    render() {\n        if (typeof this.$slots.default === 'function') {\n            return this.$slots.default();\n        }\n\n        return this.$slots.default;\n    },\n\n    inject: ['repositoryFactory'],\n\n    compatConfig: Cicada.compatConfig,\n\n    computed: {\n        logEntryRepository() {\n            return this.repositoryFactory.create('log_entry', null, {\n                keepApiErrors: true,\n            });\n        },\n    },\n\n    errorCaptured(err, vm) {\n        // Show more detailed error messages in development mode\n        if (process.env.NODE_ENV === 'development') {\n            return true;\n        }\n\n        console.error('An error was captured in current module:', err);\n\n        this.logErrorInEntries(err, vm);\n\n        // stop error propagation\n        return false;\n    },\n\n    methods: {\n        logErrorInEntries(err, vm) {\n            if (!err) {\n                return;\n            }\n\n            const newLogEntry = this.logEntryRepository.create();\n\n            newLogEntry.message = err.toString();\n            newLogEntry.channel = 'Administration';\n            newLogEntry.level = 400;\n            newLogEntry.context = {\n                component: vm?._name ?? 'Unknown component',\n                stack: err.stack ?? 'Unknown stack',\n                url: window.location.href,\n            };\n\n            this.logEntryRepository.save(newLogEntry).catch((e) => Cicada.Utils.debug.error(e));\n        },\n    },\n});\n"],"names":["err","vm","newLogEntry"],"mappings":"AAaA,OAAO,UAAU,SAAS,oBAAqB,CAC3C,QAAS,CACL,OAAI,OAAO,KAAK,OAAO,SAAY,WACxB,KAAK,OAAO,UAGhB,KAAK,OAAO,OACvB,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,aAAc,OAAO,aAErB,SAAU,CACN,oBAAqB,CACjB,OAAO,KAAK,kBAAkB,OAAO,YAAa,KAAM,CACpD,cAAe,EAAA,CAClB,CACL,CACJ,EAEA,cAAcA,EAAKC,EAAI,CAMX,eAAA,MAAM,2CAA4CD,CAAG,EAExD,KAAA,kBAAkBA,EAAKC,CAAE,EAGvB,EACX,EAEA,QAAS,CACL,kBAAkBD,EAAKC,EAAI,CACvB,GAAI,CAACD,EACD,OAGE,MAAAE,EAAc,KAAK,mBAAmB,OAAO,EAEvCA,EAAA,QAAUF,EAAI,WAC1BE,EAAY,QAAU,iBACtBA,EAAY,MAAQ,IACpBA,EAAY,QAAU,CAClB,WAAWD,GAAA,YAAAA,EAAI,QAAS,oBACxB,MAAOD,EAAI,OAAS,gBACpB,IAAK,OAAO,SAAS,IAAA,EAGzB,KAAK,mBAAmB,KAAKE,CAAW,EAAE,MAAO,GAAM,OAAO,MAAM,MAAM,MAAM,CAAC,CAAC,CACtF,CACJ,CACJ,CAAC"}
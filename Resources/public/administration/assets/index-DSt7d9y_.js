const n=`{% block sw_settings_search_searchable_content_customfields %} <div class="sw-settings-search__searchable-content-customfields"> {% block sw_settings_search_searchable_content_customfields_empty_state %} <sw-empty-state v-if="isEmpty" :title="$tc('sw-settings-search.generalTab.textEmptyStateSearchableContent')" :show-description="false" :has-action-slot="true" :absolute="false" > <template #icon> {% block sw_settings_search_searchable_content_customfields_state_image %} <img :src="assetFilter('administration/static/img/empty-states/settings-empty-state.svg')" :alt="$tc('sw-settings-search.generalTab.textEmptyStateSearchableContent')" > {% endblock %} </template> <template #actions> {% block sw_settings_search_searchable_content_customfields_empty_state_action %} <sw-button variant="ghost" size="small" :disabled="!acl.can('product_search_config.creator')" @click="onAddField" > {{ $tc('sw-settings-search.generalTab.buttonAddContent') }} </sw-button> {% endblock %} </template> </sw-empty-state> {% endblock %} {% block sw_settings_search_searchable_content_customfields_grid %} <sw-entity-listing v-if="!isEmpty" ref="customGrid" class="sw-settings-search__searchable-content-list" :columns="columns" :repository="repository" :allow-column-edit="false" :full-page="false" :show-settings="false" :show-selection="false" :is-loading="isLoading" :items="searchConfigs" :allow-inline-edit="acl.can('product_search_config.editor')" :allow-edit="acl.can('product_search_config.editor')" :allow-delete="acl.can('product_search_config.deleter')" @inline-edit-save="onInlineEditSave" @inline-edit-cancel="onInlineEditCancel" > {% block sw_settings_search_searchable_content_customfields_field %} <template #column-field="{ item, isInlineEdit }"> <template v-if="item._isNew && isInlineEdit"> {% block sw_settings_search_searchable_content_customfields_field_editor %} <sw-entity-single-select v-model:value="currentCustomFieldId" class="sw-settings-search-custom-field-select" entity="custom_field" :criteria="customFieldFilteredCriteria" show-clearable-button @update:value="(id, customfield) => onSelectCustomField(customfield)" > <template #selection-label-property="{ item }"> {{ showCustomFieldWithSet(item) }} </template> <template #result-label-property="{ item }"> {{ showCustomFieldWithSet(item) }} </template> </sw-entity-single-select> {% endblock %} </template> <template v-else> {% block sw_settings_search_searchable_content_customfields_field_label %} {{ getMatchingCustomFields(item.field) }} {% endblock %} </template> </template> {% endblock %} {% block sw_settings_search_searchable_content_customfields_ranking %} <template #column-ranking="{ item, isInlineEdit }"> <template v-if="isInlineEdit"> {% block sw_settings_search_searchable_content_customfields_ranking_editor %} <sw-number-field v-model:value="item.ranking" number-type="int" size="small" /> {% endblock %} </template> </template> {% endblock %} {% block sw_settings_search_searchable_content_customfields_searchable %} <template #column-searchable="{ item, isInlineEdit }"> <template v-if="isInlineEdit"> {% block sw_settings_search_searchable_content_customfields_searchable_editor %} <sw-checkbox-field v-model:value="item.searchable" /> {% endblock %} </template> <template v-else> {% block sw_settings_search_searchable_content_customfields_searchable_label %} <sw-icon v-if="item.searchable" class="is--active" name="regular-checkmark-xs" small /> <sw-icon v-else class="is--inactive" name="regular-times-s" small /> {% endblock %} </template> </template> {% endblock %} {% block sw_settings_search_searchable_content_customfields_tokenize %} <template #column-tokenize="{ item, isInlineEdit }"> <template v-if="isInlineEdit"> {% block sw_settings_search_searchable_content_customfields_tokenize_editor %} <sw-checkbox-field v-model:value="item.tokenize" /> {% endblock %} </template> <template v-else> {% block sw_settings_search_searchable_content_customfields_tokenize_label %} <sw-icon v-if="item.tokenize" class="is--active" name="regular-checkmark-xs" small /> <sw-icon v-else class="is--inactive" name="regular-times-s" small /> {% endblock %} </template> </template> {% endblock %} {% block sw_settings_search_searchable_content_customfields_columns_actions %} <template #actions="{ item }"> {% block sw_settings_search_searchable_content_customfields_columns_actions_edit %} <sw-context-menu-item class="sw-settings-search__searchable-content-list-action sw-settings-search__searchable-content-list-reset" :disabled="!acl.can('product_search_config.editor')" @click="onResetRanking(item)" > {{ $tc('sw-settings-search.generalTab.list.textResetRanking') }} </sw-context-menu-item> {% endblock %} {% block sw_settings_search_searchable_content_customfields_columns_actions_delete %} <sw-context-menu-item class="sw-settings-search__searchable-content-list-action sw-settings-search__searchable-content-list-remove" :disabled="!acl.can('product_search_config.deleter')" @click="onRemove(item)" > {{ $tc('sw-settings-search.generalTab.list.textRemove') }} </sw-context-menu-item> {% endblock %} </template> {% endblock %} </sw-entity-listing> {% endblock %} </div> {% endblock %}`,{Mixin:a}=Cicada,{Criteria:i}=Cicada.Data,l={template:n,compatConfig:Cicada.compatConfig,inject:["repositoryFactory","acl"],emits:["config-add","data-load","config-save","config-delete"],mixins:[a.getByName("notification"),a.getByName("sw-inline-snippet")],props:{isEmpty:{type:Boolean,required:!0},columns:{type:Array,required:!0},repository:{type:Object,required:!0},searchConfigs:{type:Array,required:!1,default(){return null}},isLoading:{type:Boolean,required:!1,default:!1}},data(){return{customFields:[],currentCustomFieldId:null,addedCustomFieldIds:[]}},computed:{customFieldRepository(){return this.repositoryFactory.create("custom_field")},customFieldFilteredCriteria(){const e=new i(1,25);return e.addAssociation("customFieldSet"),!this.searchConfigs||(this.searchConfigs.forEach(t=>{t!=null&&t.customFieldId&&this.addedCustomFieldIds.push(t.customFieldId)}),this.addedCustomFieldIds.length===0)||e.addFilter(i.not("AND",[i.equalsAny("id",this.addedCustomFieldIds)])),e},customFieldCriteria(){const e=new i(1,25);return e.addAssociation("customFieldSet"),e},assetFilter(){return Cicada.Filter.getByName("asset")}},watch:{searchConfigs(e){e[0]&&e[0]._isNew&&this.$refs.customGrid&&(this.$refs.customGrid.enableInlineEdit(),this.$refs.customGrid.onDbClickCell(this.$refs.customGrid.records[0]))}},created(){this.createdComponent()},methods:{createdComponent(){this.customFieldRepository.search(this.customFieldCriteria).then(e=>{this.customFields=e}).catch(()=>{this.createNotificationError({message:this.$tc("sw-settings-search.notification.loadError")})})},showCustomFieldWithSet(e){let t="";e!=null&&e.customFieldSet&&(t=this.getInlineSnippet(e.customFieldSet.config.label)||e.customFieldSet.name);const s=this.getInlineSnippet(e.config.label)||e.name;return`${t} - ${s}`},getMatchingCustomFields(e){if(!e)return"";const t=e.replace("customFields.",""),s=this.customFields.find(c=>c.name===t);return s?this.showCustomFieldWithSet(s):t},onSelectCustomField(e){const t=this.searchConfigs.find(s=>s._isNew);t.field=`customFields.${e.name}`,t.customFieldId=this.currentCustomFieldId},onAddField(){this.$emit("config-add")},onInlineEditSave(e){e.then(()=>{this.createNotificationSuccess({message:this.$tc("sw-settings-search.notification.saveSuccess")})}).catch(()=>{this.createNotificationError({message:this.$tc("sw-settings-search.notification.saveError")})}).finally(()=>{this.currentCustomFieldId=null,this.$emit("data-load")})},onInlineEditCancel(){this.currentCustomFieldId=null,this.$emit("data-load")},onResetRanking(e){if(!e.field){this.createNotificationError({message:this.$tc("sw-settings-search.notification.saveError")}),this.$emit("data-load");return}const t=this.searchConfigs.find(s=>s.field===e.field);if(!t){this.createNotificationError({message:this.$tc("sw-settings-search.notification.saveError")});return}t.ranking=0,this.$emit("config-save")},onRemove(e){if(!e.field){this.$emit("data-load");return}this.$emit("config-delete",e.id)}}};export{l as default};
//# sourceMappingURL=index-DSt7d9y_.js.map

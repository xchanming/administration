{"version":3,"file":"index-uulDQJKf.js","sources":["../../../app/administration/src/app/component/structure/sw-language-info/sw-language-info.html.twig","../../../app/administration/src/app/component/structure/sw-language-info/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_language_info %}\n<p\n    v-if=\"infoText\"\n    class=\"sw-language-info\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_language_info_text %}\n    <span\n        class=\"sw_language-info__info\"\n        v-html=\"$sanitize(infoText)\"\n    ></span>\n    <span\n        v-if=\"infoParent\"\n        class=\"sw-language-info__link-parent\"\n        role=\"link\"\n        tabindex=\"0\"\n        @click=\"onClickParentLanguage\"\n        @keydown.enter=\"onClickParentLanguage\"\n    >\n        \"{{ infoParent }}\".\n    </span>\n    {% endblock %}\n</p>\n{% endblock %}\n","import template from './sw-language-info.html.twig';\nimport './sw-language-info.scss';\n\nconst { Component } = Cicada;\nconst { mapState } = Cicada.Component.getComponentHelper();\nconst { warn } = Cicada.Utils.debug;\n\n/**\n * @package admin\n *\n * @private\n * @description\n * Renders information text about the current language\n * @status ready\n * @example-type code-only\n * @component-example\n * <sw-language-info\n *     :entityDescription=\"Produkt 1\">\n * </sw-language-info>\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nComponent.register('sw-language-info', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    props: {\n        entityDescription: {\n            type: String,\n            required: false,\n            default: '',\n        },\n        isNewEntity: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        changeLanguageOnParentClick: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            parentLanguage: { name: '' },\n        };\n    },\n\n    computed: {\n        ...mapState('context', {\n            languageId: (state) => state.api.languageId,\n            systemLanguageId: (state) => state.api.systemLanguageId,\n            language: (state) => state.api.language,\n        }),\n\n        languageRepository() {\n            return this.repositoryFactory.create('language');\n        },\n\n        infoParent() {\n            return this.parentLanguage.name;\n        },\n\n        infoText() {\n            // Actual language is system default, because we are creating a new entity\n            if (this.isNewEntity) {\n                return this.$tc('sw-language-info.infoTextNewEntity', 0, {\n                    entityDescription: this.entityDescription,\n                });\n            }\n\n            if (this.language === null) {\n                return '';\n            }\n\n            // Actual language is a child language with the root language as fallback\n            if (this.language.parentId !== null && this.language.parentId.length > 0) {\n                return this.$tc('sw-language-info.infoTextChildLanguage', 0, {\n                    entityDescription: this.entityDescription,\n                    language: this.language.name,\n                });\n            }\n\n            // Actual language is the system default language\n            if (this.isDefaultLanguage) {\n                return '';\n            }\n\n            // Actual language is a root language with the system default language as fallback\n            return this.$tc('sw-language-info.infoTextRootLanguage', 0, {\n                entityDescription: this.entityDescription,\n                language: this.language.name,\n            });\n        },\n\n        isDefaultLanguage() {\n            return this.languageId === this.systemLanguageId;\n        },\n    },\n\n    watch: {\n        // Watch the id because of ajax loading\n        'language.name': {\n            handler() {\n                this.refreshParentLanguage().catch((error) => warn(error));\n            },\n        },\n    },\n\n    methods: {\n        async refreshParentLanguage() {\n            if (this.language.id.length < 1 || this.isDefaultLanguage) {\n                this.parentLanguage = { name: '' };\n                return;\n            }\n\n            if (this.language.parentId !== null && this.language.parentId.length > 0) {\n                this.parentLanguage = await this.languageRepository.get(this.language.parentId, Cicada.Context.api);\n                return;\n            }\n\n            this.parentLanguage = await this.languageRepository.get(this.systemLanguageId, Cicada.Context.api);\n        },\n\n        onClickParentLanguage() {\n            if (!this.changeLanguageOnParentClick) {\n                return;\n            }\n\n            if (this.isCompatEnabled('INSTANCE_EVENT_EMITTER')) {\n                this.$root.$emit('on-change-language-clicked', this.parentLanguage.id);\n            } else {\n                Cicada.Utils.EventBus.emit('on-change-language-clicked', this.parentLanguage.id);\n            }\n        },\n    },\n});\n"],"names":["template","Component","mapState","warn","state","error"],"mappings":"AAAA,MAAeA,EAAA,wZCGT,CAAE,UAAAC,CAAW,EAAG,OAChB,CAAE,SAAAC,CAAQ,EAAK,OAAO,UAAU,mBAAkB,EAClD,CAAE,KAAAC,CAAM,EAAG,OAAO,MAAM,MAgB9BF,EAAU,SAAS,mBAAoB,CACnC,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CACH,kBAAmB,CACf,KAAM,OACN,SAAU,GACV,QAAS,EACZ,EACD,YAAa,CACT,KAAM,QACN,SAAU,GACV,QAAS,EACZ,EACD,4BAA6B,CACzB,KAAM,QACN,SAAU,GAEV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,eAAgB,CAAE,KAAM,EAAI,CACxC,CACK,EAED,SAAU,CACN,GAAGE,EAAS,UAAW,CACnB,WAAaE,GAAUA,EAAM,IAAI,WACjC,iBAAmBA,GAAUA,EAAM,IAAI,iBACvC,SAAWA,GAAUA,EAAM,IAAI,QAC3C,CAAS,EAED,oBAAqB,CACjB,OAAO,KAAK,kBAAkB,OAAO,UAAU,CAClD,EAED,YAAa,CACT,OAAO,KAAK,eAAe,IAC9B,EAED,UAAW,CAEP,OAAI,KAAK,YACE,KAAK,IAAI,qCAAsC,EAAG,CACrD,kBAAmB,KAAK,iBAC5C,CAAiB,EAGD,KAAK,WAAa,KACX,GAIP,KAAK,SAAS,WAAa,MAAQ,KAAK,SAAS,SAAS,OAAS,EAC5D,KAAK,IAAI,yCAA0C,EAAG,CACzD,kBAAmB,KAAK,kBACxB,SAAU,KAAK,SAAS,IAC5C,CAAiB,EAID,KAAK,kBACE,GAIJ,KAAK,IAAI,wCAAyC,EAAG,CACxD,kBAAmB,KAAK,kBACxB,SAAU,KAAK,SAAS,IACxC,CAAa,CACJ,EAED,mBAAoB,CAChB,OAAO,KAAK,aAAe,KAAK,gBACnC,CACJ,EAED,MAAO,CAEH,gBAAiB,CACb,SAAU,CACN,KAAK,sBAAqB,EAAG,MAAOC,GAAUF,EAAKE,CAAK,CAAC,CAC5D,CACJ,CACJ,EAED,QAAS,CACL,MAAM,uBAAwB,CAC1B,GAAI,KAAK,SAAS,GAAG,OAAS,GAAK,KAAK,kBAAmB,CACvD,KAAK,eAAiB,CAAE,KAAM,EAAE,EAChC,MACH,CAED,GAAI,KAAK,SAAS,WAAa,MAAQ,KAAK,SAAS,SAAS,OAAS,EAAG,CACtE,KAAK,eAAiB,MAAM,KAAK,mBAAmB,IAAI,KAAK,SAAS,SAAU,OAAO,QAAQ,GAAG,EAClG,MACH,CAED,KAAK,eAAiB,MAAM,KAAK,mBAAmB,IAAI,KAAK,iBAAkB,OAAO,QAAQ,GAAG,CACpG,EAED,uBAAwB,CACf,KAAK,8BAIN,KAAK,gBAAgB,wBAAwB,EAC7C,KAAK,MAAM,MAAM,6BAA8B,KAAK,eAAe,EAAE,EAErE,OAAO,MAAM,SAAS,KAAK,6BAA8B,KAAK,eAAe,EAAE,EAEtF,CACJ,CACL,CAAC"}
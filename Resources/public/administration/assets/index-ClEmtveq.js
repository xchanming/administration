import{s as y}from"./state-B0fCRhHd.js";const _=`{% block sw_bulk_edit_product %} <sw-page :class="{ 'sw-bulk-edit-product': true, 'is--variant': isChild, }" > {% block sw_bulk_edit_product_search_bar %} <template #search-bar> <sw-search-bar /> </template> {% endblock %} {% block sw_bulk_edit_product_smart_bar_back %} <template #smart-bar-back> <router-link v-if="isChild" class="smart-bar__back-btn" :to="{ name: 'sw.product.detail.variants', params: { id: $route.params.parentId } }" :style="{ 'color': $route.meta.$module?.color }" > <sw-icon name="regular-chevron-left" small /> </router-link> </template> {% endblock %} {% block sw_bulk_edit_product_smart_bar_header %} <template #smart-bar-header> {% block sw_bulk_edit_product_smart_bar_header_title %} <h2> {{ isChild ? $tc('sw-bulk-edit.variant.textTitle', selectedIds.length, { variantTotal: selectedIds.length }) : $tc('sw-bulk-edit.product.textTitle', selectedIds.length, { productTotal: selectedIds.length }) }} </h2> {% endblock %} </template> {% endblock %} {% block sw_bulk_edit_product_content_language_switch %} <template #language-switch> <sw-language-switch @on-change="onChangeLanguage" /> </template> {% endblock %} {% block sw_bulk_edit_product_content_smart_bar_actions %} <template #smart-bar-actions> {% block sw_bulk_edit_product_actions_save %} <sw-button-process class="sw-bulk-edit-product__save-action" variant="primary" :is-loading="isLoading" :process-success="isSaveSuccessful" :disabled="isLoading || !hasSelectedChanges || undefined" @click="openModal" > {{ $tc('sw-bulk-edit.applyChanges') }} </sw-button-process> {% endblock %} </template> {% endblock %} {% block sw_bulk_edit_product_content %} <template #content> <sw-card-view v-if="selectedIds.length > 0 && isLoadedData"> {% block sw_bulk_edit_product_content_inheritance_card %} <sw-card v-if="isChild" class="sw-bulk-edit-product__inheritance" position-identifier="sw-bulk-edit-product-inheritance" > {% block sw_bulk_edit_product_content_inheritance_alert %} <sw-alert variant="info"> <template #customIcon> <div class="sw-bulk-edit-product__inheritance-icon"> <sw-icon name="regular-link" color="#7363e5" size="16" /> </div> </template> <template #default> {{ $tc('sw-bulk-edit.product.alertInheritance.message') }} </template> </sw-alert> {% endblock %} </sw-card> {% endblock %} <sw-card v-if="restrictedFields.length" class="sw-bulk-edit-product__restricted-fields" position-identifier="sw-bulk-edit-product-restricted-fields" > <sw-alert :title="$tc('sw-bulk-edit.product.alertRestrictedFields.title')" variant="warning" > <span v-html="$tc('sw-bulk-edit.product.alertRestrictedFields.message')"></span> <ul> <li v-for="(restrictedField, index) in restrictedFields" :key="index" > {{ $tc(\`sw-bulk-edit.product.alertRestrictedFields.\${restrictedField}\`) }} </li> </ul> </sw-alert> </sw-card> {% block sw_bulk_edit_product_content_gereral_information_card %} <sw-card class="sw-bulk-edit-product-base__info" position-identifier="sw-bulk-edit-product-info" :title="$tc('sw-bulk-edit.product.generalInformation.cardTitle')" > {% block sw_bulk_edit_product_content_gereral_information %} <sw-bulk-edit-change-type-field-renderer :form-fields="generalFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_prices_card %} <sw-card class="sw-bulk-edit-product-base__prices" position-identifier="sw-bulk-edit-product-prices" :title="$tc('sw-bulk-edit.product.prices.cardTitle')" > {% block sw_bulk_edit_product_content_prices %} <sw-bulk-edit-change-type-field-renderer :form-fields="pricesFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @change-value="onChangePrices" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_advanced_prices_card %} <sw-card class="sw-bulk-edit-product-base__advanced-prices" position-identifier="sw-bulk-edit-product-advanced-prices" :title="$tc('sw-bulk-edit.product.advancedPrices.cardTitle')" > {% block sw_bulk_edit_product_content_advanced_prices %} <sw-bulk-edit-change-type-field-renderer :form-fields="advancedPricesFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" > <template #valueFieldWithBoxType="{ formField, entity, index }"> <sw-inheritance-switch v-if="isChild" :is-inherited="bulkEditProduct[formField.name].isInherited" @inheritance-restore="onInheritanceRestore(formField)" @inheritance-remove="onInheritanceRemove(formField)" /> <a v-if="['add', 'overwrite'].includes(bulkEditProduct[formField.name].type)" :class="{ 'is--disabled': !!bulkEditProduct[formField.name].isInherited }" class="sw-card__quick-link" role="link" tabindex="0" @click="displayAdvancePricesModal = true" @keydown.enter="displayAdvancePricesModal = true" > {{ $tc('sw-bulk-edit.product.advancedPrices.newAdvancedPrices', 0, { count: entity[formField.name] ? Object.keys(priceRuleGroups).length : 0 }) }} <sw-icon name="regular-long-arrow-right" small /> </a> {% block sw_bulk_edit_product_content_advanced_prices_rule_selection %} <sw-entity-multi-select v-else-if="bulkEditProduct[formField.name].type === 'remove'" class="sw-bulk-edit-product-base__advanced-prices-selection" :placeholder="$tc('sw-bulk-edit.product.advancedPrices.selectRule')" :criteria="ruleCriteria" entity-name="rule" :entity-collection="!!bulkEditProduct[formField.name].isInherited ? [] : entity[formField.name]" :disabled="!!bulkEditProduct[formField.name].isInherited || undefined" @update:entity-collection="onRuleChange" > <template #selection-label-property="{ item }"> {{ item.ruleName }} </template> <template #result-item="{ item, index, labelProperty, isSelected, addItem, getKey }"> <sw-select-result :selected="isSelected(item)" :disabled="!!priceRuleGroups[item.id] || undefined" v-bind="{ item, index }" @item-select="addItem" > {{ getKey(item,labelProperty) || getKey(item, \`translated.\${labelProperty}\`) }} </sw-select-result> </template> </sw-entity-multi-select> {% endblock %} </template> </sw-bulk-edit-change-type-field-renderer> {% endblock %} {% block sw_bulk_edit_product_content_advanced_prices_modal %} <sw-modal v-if="displayAdvancePricesModal" class="sw-bulk-edit-product-content-advanced-prices-modal" variant="large" :title="$tc('sw-bulk-edit.product.advancedPrices.cardTitle')" @modal-close="displayAdvancePricesModal = false" > <sw-product-detail-context-prices :is-set-default-price="true" :can-set-loading-rules="false" /> {% block sw_bulk_edit_product_content_advanced_prices_modal_footer %} <template #modal-footer> <slot name="sw-bulk-edit-modal-cancel"> <sw-button size="small" @click="displayAdvancePricesModal = false" > {{ $tc('global.default.close') }} </sw-button> </slot> </template> {% endblock %} </sw-modal> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_property_card %} <sw-card class="sw-bulk-edit-product-base__property" position-identifier="sw-bulk-edit-product-property" :title="$tc('sw-bulk-edit.product.property.cardTitle')" > {% block sw_bulk_edit_product_content_property %} <sw-bulk-edit-change-type-field-renderer :form-fields="propertyFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_deliverability_card %} <sw-card class="sw-bulk-edit-product-base__deliverability" position-identifier="sw-bulk-edit-product-deliverability" :title="$tc('sw-bulk-edit.product.deliverability.cardTitle')" > {% block sw_bulk_edit_product_content_deliverability %} <sw-bulk-edit-change-type-field-renderer :form-fields="deliverabilityFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_assignments_card %} <sw-card class="sw-bulk-edit-product-base__assignment" position-identifier="sw-bulk-edit-product-assignment" :title="$tc('sw-bulk-edit.product.assignment.cardTitle')" > {% block sw_bulk_edit_product_content_assignments %} <sw-bulk-edit-change-type-field-renderer :form-fields="assignmentFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_media_card %} <sw-card class="sw-bulk-edit-product-base__media" position-identifier="sw-bulk-edit-product-media" :title="$tc('sw-bulk-edit.product.media.cardTitle')" > {% block media %} <sw-bulk-edit-change-type-field-renderer :form-fields="mediaFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_labelling_card %} <sw-card class="sw-bulk-edit-product-base__labelling" position-identifier="sw-bulk-edit-product-labelling" :title="$tc('sw-bulk-edit.product.labelling.cardTitle')" > {% block sw_bulk_edit_product_content_labelling %} <sw-bulk-edit-change-type-field-renderer :form-fields="labellingFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_seo_card %} <sw-card class="sw-bulk-edit-product-base__seo" position-identifier="sw-bulk-edit-product-seo" :title="$tc('sw-bulk-edit.product.seo.cardTitle')" > {% block sw_bulk_edit_product_content_seo %} <sw-bulk-edit-change-type-field-renderer :form-fields="seoFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> {% endblock %} </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_meansures_packaging_card %} <sw-card class="sw-bulk-edit-product-base__measures" position-identifier="sw-bulk-edit-product-measures" :title="$tc('sw-bulk-edit.product.measuresAndPackaging.cardTitle')" > <sw-bulk-edit-change-type-field-renderer :form-fields="measuresPackagingFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_essential_card %} <sw-card class="sw-bulk-edit-product-base___essential" position-identifier="sw-bulk-edit-product-essential" :title="$tc('sw-bulk-edit.product.featureSets.cardTitle')" > <sw-bulk-edit-change-type-field-renderer :form-fields="essentialCharacteristicsFormFields" :bulk-edit-data="bulkEditProduct" :entity="product" @inheritance-restore="onInheritanceRestore" @inheritance-remove="onInheritanceRemove" /> </sw-card> {% endblock %} {% block sw_bulk_edit_product_content_meansures_custom_field_card %} <sw-card v-if="customFieldSets.length > 0" class="sw-bulk-edit-product-base__custom_fields" position-identifier="sw-bulk-edit-product-custom-fields" :title="$tc('sw-bulk-edit.product.customFields.cardTitle')" > <sw-bulk-edit-custom-fields class="sw-bulk-edit__custom-fields" :sets="customFieldSets" :entity="product" :parent-entity="parentProduct" @change="onCustomFieldsChange" /> </sw-card> {% endblock %} </sw-card-view> <sw-empty-state v-if="!isLoading && selectedIds.length == 0" :title="$tc('sw-bulk-edit.product.messageEmptyTitle')" :subline="$tc('sw-bulk-edit.product.messageEmptySubline')" /> {% block sw_bulk_edit_product_save_modal %} <router-view v-slot="{ Component }" > <component :is="Component" :item-total="selectedIds.length" :is-loading="isLoading" :process-status="processStatus" @modal-close="closeModal" @bulk-save="onSave" /> </router-view> {% endblock %} </template> {% endblock %} </sw-page> {% endblock %}`,{Component:E,Context:C}=Cicada,{Criteria:l}=Cicada.Data,{types:h}=Cicada.Utils,{chunk:I}=Cicada.Utils.array,{mapState:v,mapGetters:$}=E.getComponentHelper(),{cloneDeep:w}=Cicada.Utils.object,T={template:_,compatConfig:Cicada.compatConfig,inject:["feature","bulkEditApiFactory","repositoryFactory"],data(){return{isLoading:!1,isLoadedData:!1,isSaveSuccessful:!1,displayAdvancePricesModal:!1,isDisabledListPrice:!0,isDisabledRegulationPrice:!0,bulkEditProduct:{},bulkEditSelected:[],taxRate:{},currency:{},customFieldSets:[],processStatus:"",rules:[],parentProductFrozen:null,isComponentMounted:!0}},metaInfo(){return{title:this.$createTitle()}},computed:{...v("swProductDetail",["product","parentProduct","taxes"]),...$("swProductDetail",["defaultCurrency","defaultPrice"]),selectedIds(){return Cicada.State.get("cicadaApps").selectedIds},customFieldSetRepository(){return this.repositoryFactory.create("custom_field_set")},currencyRepository(){return this.repositoryFactory.create("currency")},taxRepository(){return this.repositoryFactory.create("tax")},productRepository(){return this.repositoryFactory.create("product")},hasSelectedChanges(){return Object.values(this.bulkEditProduct).some(e=>e.isChanged)||this.bulkEditSelected.length>0},customFieldSetCriteria(){const e=new l(1,null);return e.addFilter(l.equals("relations.entityName","product")),e},currencyCriteria(){return new l(1,25).addSorting(l.sort("name","ASC"))},taxCriteria(){const e=new l(1,500);return e.addSorting(l.sort("position")),e},productCriteria(){const e=new l(1,25);return e.getAssociation("media").addSorting(l.sort("position","ASC")),e.getAssociation("properties").addSorting(l.sort("name","ASC",!0)),e.getAssociation("prices").addSorting(l.sort("quantityStart","ASC",!0)),e.getAssociation("tags").addSorting(l.sort("name","ASC")),e.getAssociation("seoUrls").addFilter(l.equals("isCanonical",!0)),e.getAssociation("crossSellings").addSorting(l.sort("position","ASC")).getAssociation("assignedProducts").addSorting(l.sort("position","ASC")).addAssociation("product").getAssociation("product").addAssociation("options.group"),e.addAssociation("cover").addAssociation("categories").addAssociation("visibilities.salesChannel").addAssociation("options").addAssociation("configuratorSettings.option").addAssociation("unit").addAssociation("productReviews").addAssociation("seoUrls").addAssociation("mainCategories").addAssociation("options.group").addAssociation("customFieldSets").addAssociation("featureSet").addAssociation("cmsPage").addAssociation("featureSet"),e.getAssociation("manufacturer").addAssociation("media"),e},isChild(){return this.$route.params.parentId!=="null"},restrictedFields(){let e=[];const t=this.$route.params.includesDigital;return(t==="1"||t==="2")&&(e=["isCloseout","restockTime","maxPurchase","purchaseSteps","minPurchase","shippingFree"]),t==="1"&&e.push("stock"),e},generalFormFields(){var e,t,i,s,d,r,c,a;return[{name:"description",type:"html",canInherit:this.isChild,config:{componentName:"sw-bulk-edit-product-description",changeLabel:this.$tc("sw-bulk-edit.product.generalInformation.description.changeLabel"),disabled:(t=(e=this.bulkEditProduct)==null?void 0:e.description)==null?void 0:t.isInherited}},{name:"manufacturerId",canInherit:this.isChild,config:{componentName:"sw-entity-single-select",entity:"product_manufacturer",changeLabel:this.$tc("sw-bulk-edit.product.generalInformation.manufacturer.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.generalInformation.manufacturer.placeholderManufacturer"),disabled:(s=(i=this.bulkEditProduct)==null?void 0:i.manufacturerId)==null?void 0:s.isInherited}},{name:"active",type:"bool",canInherit:this.isChild,config:{type:"switch",label:this.$tc("sw-bulk-edit.product.generalInformation.active.switchLabel"),changeLabel:this.$tc("sw-bulk-edit.product.generalInformation.active.changeLabel"),disabled:(r=(d=this.bulkEditProduct)==null?void 0:d.active)==null?void 0:r.isInherited}},{name:"markAsTopseller",type:"bool",canInherit:this.isChild,config:{type:"switch",label:this.$tc("sw-bulk-edit.product.generalInformation.productPromotion.switchLabel"),changeLabel:this.$tc("sw-bulk-edit.product.generalInformation.productPromotion.changeLabel"),disabled:(a=(c=this.bulkEditProduct)==null?void 0:c.markAsTopseller)==null?void 0:a.isInherited}}]},pricesFormFields(){var t,i,s,d,r,c,a,o,n,u;const e=[{name:"taxId",canInherit:this.isChild,config:{componentName:"sw-entity-single-select",entity:"tax",changeLabel:this.$tc("sw-bulk-edit.product.prices.taxRate.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.prices.taxRate.placeholderTax"),disabled:(i=(t=this.bulkEditProduct)==null?void 0:t.taxId)==null?void 0:i.isInherited}},{name:"price",config:{componentName:"sw-price-field",price:this.product.price,taxRate:this.taxRate,currency:this.currency,changeLabel:this.isChild?this.$tc("sw-bulk-edit.product.prices.price.label"):this.$tc("sw-bulk-edit.product.prices.price.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.prices.price.placeholderPrice"),disabled:this.isChild?(d=(s=this.bulkEditProduct)==null?void 0:s.isPriceInherited)==null?void 0:d.isInherited:!1}},{name:"purchasePrices",config:{componentName:"sw-price-field",price:this.product.purchasePrices,taxRate:this.taxRate,currency:this.currency,changeLabel:this.isChild?this.$tc("sw-bulk-edit.product.prices.purchasePrices.label"):this.$tc("sw-bulk-edit.product.prices.purchasePrices.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.prices.purchasePrices.placeholderPurchasePrices"),disabled:this.isChild?(c=(r=this.bulkEditProduct)==null?void 0:r.isPriceInherited)==null?void 0:c.isInherited:!1}},{name:"listPrice",config:{componentName:"sw-price-field",price:this.product.listPrice,taxRate:this.taxRate,currency:this.currency,changeLabel:this.isChild?this.$tc("sw-bulk-edit.product.prices.listPrice.label"):this.$tc("sw-bulk-edit.product.prices.listPrice.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.prices.listPrice.placeholderListPrice"),disabled:this.isChild?(o=(a=this.bulkEditProduct)==null?void 0:a.isPriceInherited)==null?void 0:o.isInherited:this.isDisabledListPrice}},{name:"regulationPrice",config:{componentName:"sw-price-field",price:this.product.regulationPrice,taxRate:this.taxRate,currency:this.currency,changeLabel:this.isChild?this.$tc("sw-bulk-edit.product.prices.regulationPrice.label"):this.$tc("sw-bulk-edit.product.prices.regulationPrice.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.prices.regulationPrice.placeholderRegulationPrice"),disabled:this.isChild?(u=(n=this.bulkEditProduct)==null?void 0:n.isPriceInherited)==null?void 0:u.isInherited:this.isDisabledRegulationPrice}}];if(this.isChild){const p={name:"isPriceInherited",canInherit:this.isChild,config:{componentName:"",changeLabel:this.$tc("sw-bulk-edit.product.prices.isPriceInherited.changeLabel")}};e.splice(1,0,p)}return e},advancedPricesFormFields(){return[{name:"prices",canInherit:this.isChild,config:{allowOverwrite:!0,allowClear:!0,allowAdd:!0,allowRemove:!0,changeLabel:this.$tc("sw-bulk-edit.product.advancedPrices.changeLabel")}}]},propertyFormFields(){var e,t;return[{name:"properties",canInherit:this.isChild,config:{componentName:"sw-product-properties",allowOverwrite:!0,allowClear:!0,allowAdd:!0,allowRemove:!0,changeLabel:this.$tc("sw-bulk-edit.product.property.changeLabel"),disabled:(t=(e=this.bulkEditProduct)==null?void 0:e.properties)==null?void 0:t.isInherited,isAssociation:!1,showInheritanceSwitcher:!1}}]},deliverabilityFormFields(){var t,i,s,d,r,c,a,o,n,u,p,b,m,k;return[{name:"stock",type:"int",canInherit:!1,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.deliverability.stock.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.deliverability.stock.placeholderStock"),numberType:"int",allowEmpty:!0,allowOverwrite:!0,allowClear:!0,min:0}},{name:"isCloseout",type:"bool",canInherit:this.isChild,config:{type:"switch",label:this.$tc("sw-bulk-edit.product.deliverability.isCloseout.switchLabel"),changeLabel:this.$tc("sw-bulk-edit.product.deliverability.isCloseout.changeLabel"),disabled:(i=(t=this.bulkEditProduct)==null?void 0:t.isCloseout)==null?void 0:i.isInherited}},{name:"deliveryTimeId",canInherit:this.isChild,config:{componentName:"sw-entity-single-select",entity:"delivery_time",changeLabel:this.$tc("sw-bulk-edit.product.deliverability.deliveryTime.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.deliverability.deliveryTime.placeholderDeliveryTime"),disabled:(d=(s=this.bulkEditProduct)==null?void 0:s.deliveryTimeId)==null?void 0:d.isInherited}},{name:"restockTime",type:"int",canInherit:this.isChild,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.deliverability.restockTime.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.deliverability.restockTime.placeholderRestockTime"),numberType:"int",allowEmpty:!0,allowOverwrite:!0,allowClear:!0,min:0,disabled:(c=(r=this.bulkEditProduct)==null?void 0:r.restockTime)==null?void 0:c.isInherited}},{name:"shippingFree",type:"bool",canInherit:this.isChild,config:{type:"switch",label:this.$tc("sw-bulk-edit.product.deliverability.freeShipping.switchLabel"),changeLabel:this.$tc("sw-bulk-edit.product.deliverability.freeShipping.changeLabel"),disabled:(o=(a=this.bulkEditProduct)==null?void 0:a.shippingFree)==null?void 0:o.isInherited}},{name:"minPurchase",type:"int",canInherit:this.isChild,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.deliverability.minOrderQuantity.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.deliverability.minOrderQuantity.placeholderMinOrderQuantity"),numberType:"int",allowOverwrite:!0,allowClear:!0,allowEmpty:!0,min:1,disabled:(u=(n=this.bulkEditProduct)==null?void 0:n.minPurchase)==null?void 0:u.isInherited}},{name:"purchaseSteps",type:"int",canInherit:this.isChild,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.deliverability.purchaseSteps.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.deliverability.purchaseSteps.placeholderPurchaseSteps"),numberType:"int",allowOverwrite:!0,allowClear:!0,allowEmpty:!0,min:1,disabled:(b=(p=this.bulkEditProduct)==null?void 0:p.purchaseSteps)==null?void 0:b.isInherited}},{name:"maxPurchase",type:"int",canInherit:this.isChild,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.deliverability.maxOrderQuantity.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.deliverability.maxOrderQuantity.placeholderMaxOrderQuantity"),numberType:"int",allowOverwrite:!0,allowClear:!0,allowEmpty:!0,min:0,disabled:(k=(m=this.bulkEditProduct)==null?void 0:m.maxPurchase)==null?void 0:k.isInherited}}].filter(g=>!this.restrictedFields.includes(g.name))},assignmentFormFields(){var e,t,i,s,d,r,c,a;return[{name:"visibilities",canInherit:this.isChild,config:{componentName:"sw-bulk-edit-product-visibility",bulkEditProduct:this.bulkEditProduct,allowOverwrite:!0,allowClear:!0,allowAdd:!0,allowRemove:!0,changeLabel:this.$tc("sw-bulk-edit.product.assignment.visibilities.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.assignment.visibilities.placeholder"),disabled:(t=(e=this.bulkEditProduct)==null?void 0:e.visibilities)==null?void 0:t.isInherited}},{name:"categories",canInherit:this.isChild,config:{componentName:"sw-category-tree-field",categoriesCollection:this.product.categories,allowOverwrite:!0,allowClear:!0,allowAdd:!0,allowRemove:!0,changeLabel:this.$tc("sw-bulk-edit.product.assignment.categories.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.assignment.categories.placeholder"),disabled:(s=(i=this.bulkEditProduct)==null?void 0:i.categories)==null?void 0:s.isInherited}},{name:"tags",canInherit:this.isChild,config:{componentName:"sw-entity-tag-select",entityCollection:this.product.tags,entityName:"tag",allowOverwrite:!0,allowClear:!0,allowAdd:!0,allowRemove:!0,changeLabel:this.$tc("sw-bulk-edit.product.assignment.tags.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.assignment.tags.placeholder"),disabled:(r=(d=this.bulkEditProduct)==null?void 0:d.tags)==null?void 0:r.isInherited}},{name:"searchKeywords",canInherit:this.isChild,config:{componentName:"sw-multi-tag-select",value:this.product.searchKeywords,allowOverwrite:!0,allowClear:!0,allowAdd:!1,allowRemove:!1,changeLabel:this.$tc("sw-bulk-edit.product.assignment.searchKeywords.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.assignment.searchKeywords.placeholder"),disabled:(a=(c=this.bulkEditProduct)==null?void 0:c.searchKeywords)==null?void 0:a.isInherited}}]},mediaFormFields(){var e,t;return[{name:"media",canInherit:this.isChild,config:{componentName:"sw-bulk-edit-product-media",allowOverwrite:!0,allowClear:!0,allowAdd:!0,changeLabel:this.$tc("sw-bulk-edit.product.media.changeLabel"),disabled:(t=(e=this.bulkEditProduct)==null?void 0:e.media)==null?void 0:t.isInherited}}]},labellingFormFields(){var e,t;return[{name:"releaseDate",type:"datetime",canInherit:this.isChild,config:{type:"date",dateType:"datetime-local",changeLabel:this.$tc("sw-bulk-edit.product.labelling.releaseDate.changeLabel"),disabled:(t=(e=this.bulkEditProduct)==null?void 0:e.releaseDate)==null?void 0:t.isInherited}}]},seoFormFields(){var e,t,i,s,d,r;return[{name:"metaTitle",type:"text",canInherit:this.isChild,config:{componentName:"sw-field",type:"text",changeLabel:this.$tc("sw-bulk-edit.product.seo.metaTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.seo.metaTitle.placeholderMetaTitle"),disabled:(t=(e=this.bulkEditProduct)==null?void 0:e.metaTitle)==null?void 0:t.isInherited}},{name:"metaDescription",type:"text",canInherit:this.isChild,config:{componentName:"sw-field",type:"textarea",changeLabel:this.$tc("sw-bulk-edit.product.seo.metaDescription.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.seo.metaDescription.placeholderMetaDescription"),disabled:(s=(i=this.bulkEditProduct)==null?void 0:i.metaDescription)==null?void 0:s.isInherited}},{name:"keywords",type:"text",canInherit:this.isChild,config:{componentName:"sw-field",type:"text",changeLabel:this.$tc("sw-bulk-edit.product.seo.seoKeywords.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.seo.seoKeywords.placeholderSeoKeywords"),disabled:(r=(d=this.bulkEditProduct)==null?void 0:d.keywords)==null?void 0:r.isInherited}}]},measuresPackagingFields(){var e,t,i,s,d,r,c,a,o,n,u,p,b,m,k,g,f,P;return[{name:"width",type:"float",canInherit:this.isChild,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.widthTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.widthTitle.placeholder"),numberType:"float",suffixLabel:"mm",min:0,disabled:(t=(e=this.bulkEditProduct)==null?void 0:e.width)==null?void 0:t.isInherited}},{name:"height",type:"float",canInherit:this.isChild,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.heightTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.heightTitle.placeholder"),numberType:"float",suffixLabel:"mm",min:0,disabled:(s=(i=this.bulkEditProduct)==null?void 0:i.height)==null?void 0:s.isInherited}},{name:"length",type:"float",canInherit:this.isChild,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.lengthTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.lengthTitle.placeholder"),numberType:"float",suffixLabel:"mm",min:0,disabled:(r=(d=this.bulkEditProduct)==null?void 0:d.length)==null?void 0:r.isInherited}},{name:"weight",type:"float",canInherit:this.isChild,config:{componentName:"sw-number-field",changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.weightTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.weightTitle.placeholder"),numberType:"float",suffixLabel:"kg",min:0,disabled:(a=(c=this.bulkEditProduct)==null?void 0:c.weight)==null?void 0:a.isInherited}},{name:"purchaseUnit",type:"float",canInherit:this.isChild,config:{componentName:"sw-number-field",numberType:"float",min:0,changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.sellingUnitTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.sellingUnitTitle.placeholder"),disabled:(n=(o=this.bulkEditProduct)==null?void 0:o.purchaseUnit)==null?void 0:n.isInherited}},{name:"unitId",canInherit:this.isChild,config:{componentName:"sw-entity-single-select",entity:"unit",changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.scaleUnitTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.scaleUnitTitle.placeholder"),disabled:(p=(u=this.bulkEditProduct)==null?void 0:u.unitId)==null?void 0:p.isInherited}},{name:"packUnit",type:"text",canInherit:this.isChild,config:{componentName:"sw-field",type:"text",changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.packUnitTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.packUnitTitle.placeholder"),disabled:(m=(b=this.bulkEditProduct)==null?void 0:b.packUnit)==null?void 0:m.isInherited}},{name:"packUnitPlural",type:"text",canInherit:this.isChild,config:{componentName:"sw-field",type:"text",changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.packUnitPluralTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.packUnitPluralTitle.placeholder"),disabled:(g=(k=this.bulkEditProduct)==null?void 0:k.packUnitPlural)==null?void 0:g.isInherited}},{name:"referenceUnit",type:"float",canInherit:this.isChild,config:{componentName:"sw-number-field",numberType:"float",min:0,changeLabel:this.$tc("sw-bulk-edit.product.measuresAndPackaging.basicUnitTitle.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.measuresAndPackaging.basicUnitTitle.placeholder"),disabled:(P=(f=this.bulkEditProduct)==null?void 0:f.referenceUnit)==null?void 0:P.isInherited}}]},essentialCharacteristicsFormFields(){var e,t;return[{name:"featureSetId",canInherit:this.isChild,config:{componentName:"sw-entity-single-select",entity:"product_feature_set",changeLabel:this.$tc("sw-bulk-edit.product.featureSets.changeLabel"),placeholder:this.$tc("sw-bulk-edit.product.featureSets.placeholder"),disabled:(t=(e=this.bulkEditProduct)==null?void 0:e.featureSetId)==null?void 0:t.isInherited}}]},ruleRepository(){return this.repositoryFactory.create("rule")},priceRepository(){var e;return(e=this.product)!=null&&e.prices?this.repositoryFactory.create(this.product.prices.entity,this.product.prices.source):null},ruleCriteria(){const e=new l(1,500);return e.addFilter(l.multi("OR",[l.contains("rule.moduleTypes.types","price"),l.equals("rule.moduleTypes",null)])),e},priceRuleGroups(){return this.product.prices?this.product.prices.reduce((e,t)=>(e[t.ruleId]=[...e[t.ruleId]||[],t],e),{}):{}}},watch:{"bulkEditProduct.prices.type"(e){var i,s,d;if(!((s=(i=this.product)==null?void 0:i.prices)!=null&&s.length)||e!=="remove")return;((d=this.product.prices)==null?void 0:d.getIds()).forEach(r=>this.product.prices.remove(r))},"product.visibilities":{handler(e){this.isChild&&(this.isCompatEnabled("INSTANCE_SET")?this.$set(this.bulkEditProduct.visibilities,"value",e):this.bulkEditProduct.visibilities.value=e)}},"bulkEditProduct.isPriceInherited.isChanged":{handler(e){this.isChild&&(this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.bulkEditProduct.price,"isChanged",e),this.$set(this.bulkEditProduct.purchasePrices,"isChanged",e),this.$set(this.bulkEditProduct.listPrice,"isChanged",e),this.$set(this.bulkEditProduct.regulationPrice,"isChanged",e)):(this.bulkEditProduct.price.isChanged=e,this.bulkEditProduct.purchasePrices.isChanged=e,this.bulkEditProduct.listPrice.isChanged=e,this.bulkEditProduct.regulationPrice.isChanged=e))}},"bulkEditProduct.isPriceInherited.isInherited":{handler(e){this.isChild&&(this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.bulkEditProduct.price,"isInherited",e),this.$set(this.bulkEditProduct.purchasePrices,"isInherited",e),this.$set(this.bulkEditProduct.listPrice,"isInherited",e),this.$set(this.bulkEditProduct.regulationPrice,"isInherited",e)):(this.bulkEditProduct.price.isInherited=e,this.bulkEditProduct.purchasePrices.isInherited=e,this.bulkEditProduct.listPrice.isInherited=e,this.bulkEditProduct.regulationPrice.isInherited=e))}},"product.listPrice":{deep:!0,handler(e){var t,i,s,d,r,c;this.isChild&&(s=(i=(t=this.bulkEditProduct)==null?void 0:t.price)==null?void 0:i.value)!=null&&s.length&&((c=(r=(d=this.bulkEditProduct)==null?void 0:d.price)==null?void 0:r.value[0])!=null&&c.listPrice||(this.isCompatEnabled("INSTANCE_SET")?this.$set(this.bulkEditProduct.price.value[0],"listPrice",e[0]):this.bulkEditProduct.price.value[0].listPrice=e[0]))}},"product.regulationPrice":{deep:!0,handler(e){var t,i,s,d,r,c;this.isChild&&(s=(i=(t=this.bulkEditProduct)==null?void 0:t.price)==null?void 0:i.value)!=null&&s.length&&((c=(r=(d=this.bulkEditProduct)==null?void 0:d.price)==null?void 0:r.value[0])!=null&&c.regulationPrice||(this.isCompatEnabled("INSTANCE_SET")?this.$set(this.bulkEditProduct.price.value[0],"regulationPrice",e[0]):this.bulkEditProduct.price.value[0].regulationPrice=e[0]))}}},beforeCreate(){Cicada.State.registerModule("swProductDetail",y)},beforeUnmount(){Cicada.State.unregisterModule("swProductDetail")},created(){this.createdComponent()},methods:{async createdComponent(){this.setRouteMetaModule(),this.isLoading=!0,this.isChild&&await this.getParentProduct();const e=[this.loadCurrencies(),this.loadTaxes(),this.loadCustomFieldSets(),this.loadDefaultCurrency(),this.loadRules()];Promise.all(e).then(()=>{this.loadBulkEditData();const t=this.isChild?this.parentProduct:this.productRepository.create();Cicada.State.commit("swProductDetail/setProduct",t),this.definePricesBulkEdit(),this.isChild&&this.setBulkEditProductValue(),this.isLoading=!1,this.isLoadedData=!0})},setRouteMetaModule(){this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.$route.meta.$module,"color","#57D9A3"),this.$set(this.$route.meta.$module,"icon","regular-products")):(this.$route.meta.$module.color="#57D9A3",this.$route.meta.$module.icon="regular-products")},setBulkEditProductValue(){Object.keys(this.bulkEditProduct).forEach(e=>{var t,i;this.isCompatEnabled("INSTANCE_SET")?this.$set(this.bulkEditProduct[e],"value",w((t=this.parentProduct)==null?void 0:t[e])):this.bulkEditProduct[e].value=w((i=this.parentProduct)==null?void 0:i[e]),e==="searchKeywords"&&this.setProductSearchKeywords()})},getParentProduct(){return this.productRepository.get(this.$route.params.parentId,Cicada.Context.api,this.productCriteria).then(e=>{e.stock=null,Cicada.State.commit("swProductDetail/setParentProduct",e),this.parentProductFrozen=JSON.stringify(e)}).catch(()=>{Cicada.State.commit("swProductDetail/setParentProduct",{})})},loadDefaultCurrency(){return this.currencyRepository.get(C.app.systemCurrencyId).then(e=>{this.currency=e})},defineBulkEditData(e,t=null,i="overwrite",s=!1){if(!this.bulkEditProduct[e]){if(e==="stock"){this.isCompatEnabled("INSTANCE_SET")?this.$set(this.bulkEditProduct,e,{value:t,type:i,isChanged:s,isInherited:!1}):this.bulkEditProduct[e]={value:t,type:i,isChanged:s,isInherited:!1};return}this.isCompatEnabled("INSTANCE_SET")?this.$set(this.bulkEditProduct,e,{isChanged:s,type:i,value:t,isInherited:this.isChild}):this.bulkEditProduct[e]={isChanged:s,type:i,value:t,isInherited:this.isChild}}},loadBulkEditData(){[this.generalFormFields,this.deliverabilityFormFields,this.pricesFormFields,this.advancedPricesFormFields,this.propertyFormFields,this.assignmentFormFields,this.mediaFormFields,this.labellingFormFields,this.seoFormFields,this.measuresPackagingFields,this.essentialCharacteristicsFormFields].forEach(t=>{t.forEach(i=>{this.defineBulkEditData(i.name)})})},loadCustomFieldSets(){return this.customFieldSetRepository.search(this.customFieldSetCriteria).then(e=>{this.customFieldSets=e})},loadTaxes(){return this.taxRepository.search(this.taxCriteria).then(e=>{var t;this.taxRate=this.isChild?(t=this.parentProduct)==null?void 0:t.tax:e[0],Cicada.State.commit("swProductDetail/setTaxes",e)})},productTaxRate(){return this.taxes?this.taxes.find(e=>e.id===this.product.taxId):{}},loadCurrencies(){return this.currencyRepository.search(new l(1,500)).then(e=>{Cicada.State.commit("swProductDetail/setCurrencies",e)})},definePricesBulkEdit(){var e,t;if(this.isComponentMounted){if(this.isChild&&!h.isEmpty(this.parentProduct)){this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.product,"price",this.parentProduct.price),this.$set(this.product,"purchasePrices",this.parentProduct.purchasePrices)):(this.product.price=this.parentProduct.price,this.product.purchasePrices=this.parentProduct.purchasePrices),this.setProductPrice("listPrice"),this.setProductPrice("regulationPrice");return}(e=this.product).price??(e.price=[{currencyId:this.currency.id,net:null,linked:!0,gross:null}]),(t=this.product).purchasePrices??(t.purchasePrices=[{currencyId:this.currency.id,net:null,linked:!0,gross:null}]),this.product.listPrice=[{currencyId:this.currency.id,net:null,linked:!0,gross:null}],this.product.regulationPrice=[{currencyId:this.currency.id,net:null,linked:!0,gross:null}]}},setProductPrice(e){const t=[{currencyId:this.currency.id,net:null,linked:!0,gross:null}];h.isEmpty(this.parentProduct.price[0][e])?this.isCompatEnabled("INSTANCE_SET")?this.$set(this.product,`${e}`,t):this.product[e]=t:this.isCompatEnabled("INSTANCE_SET")?this.$set(this.product,`${e}`,[this.parentProduct.price[0][e]]):this.product[e]=[this.parentProduct.price[0][e]]},onChangePrices(e,t=null){if(e==="taxId"){this.taxRate=this.productTaxRate();return}e==="price"&&(this.isDisabledListPrice=!this.bulkEditProduct.price.isChanged,this.isDisabledRegulationPrice=!this.bulkEditProduct.price.isChanged),t&&typeof t!="boolean"&&(this.isCompatEnabled("INSTANCE_SET")?this.$set(this.product,`${e}`,[t]):this.product[e]=[t])},onCustomFieldsChange(e){if(Object.keys(e).length<=0){this.bulkEditSelected=this.bulkEditSelected.filter(i=>i.field!=="customFields");return}const t={field:"customFields",type:"overwrite",value:e};this.bulkEditSelected.push(t)},onProcessData(){let e=!1,t=!1;Object.keys(this.bulkEditProduct).forEach(i=>{const s=w(this.bulkEditProduct[i]);if(!s.isChanged)return;if(i==="listPrice"){e=!0;return}if(i==="regulationPrice"){t=!0;return}let d=this.product[i];["minPurchase","maxPurchase","purchaseSteps","restockTime"].includes(i)&&s.type==="clear"?(d=null,s.type="overwrite"):i==="searchKeywords"&&(i="customSearchKeywords"),s.isInherited&&(d=null);const r={field:i,type:s.type,value:d};i==="visibilities"?r.mappingReferenceField="salesChannelId":i==="media"?r.mappingReferenceField="mediaId":i==="prices"&&(r.mappingReferenceField="ruleId"),this.isChild&&r.value!==null&&h.isArray(r.value)&&r.value.forEach(c=>{delete c.id}),this.bulkEditSelected.push(r)}),e&&this.processListPrice(),t&&this.processRegulationPrice()},processListPrice(){const e=this.bulkEditSelected.find(t=>t.field==="price"&&!h.isEmpty(t.value));e&&(this.isCompatEnabled("INSTANCE_SET")?this.$set(e.value[0],"listPrice",this.product.listPrice[0]):e.value[0].listPrice=this.product.listPrice[0])},processRegulationPrice(){const e=this.bulkEditSelected.find(t=>t.field==="price"&&!h.isEmpty(t.value));e&&(this.isCompatEnabled("INSTANCE_SET")?this.$set(e.value[0],"regulationPrice",this.product.regulationPrice[0]):e.value[0].regulationPrice=this.product.regulationPrice[0])},openModal(){this.isComponentMounted=!1,this.$router.push({name:"sw.bulk.edit.product.save",params:{parentId:this.$route.params.parentId}})},async onSave(){this.isLoading=!0,this.onProcessData();const t=I(this.selectedIds,50).map(i=>this.bulkEditApiFactory.getHandler("product").bulkEdit(i,this.bulkEditSelected));return this.bulkEditSelected=[],Promise.all(t).then(i=>{const s=i.every(d=>d.data);this.processStatus=s?"success":"fail"}).catch(()=>{this.processStatus="fail"}).finally(()=>{this.isLoading=!1})},closeModal(){this.$router.push({name:"sw.bulk.edit.product"})},onChangeLanguage(e){Cicada.State.commit("context/setApiLanguageId",e)},loadRules(){return this.ruleRepository.search(this.ruleCriteria).then(e=>{this.rules=e})},onRuleChange(e){if(e.length>this.product.prices.length){const t=this.priceRepository.create();t.productId=this.product.id,t.quantityStart=1,t.quantityEnd=null,t.currencyId=this.defaultCurrency.id,t.price=[{currencyId:this.defaultCurrency.id,gross:0,linked:this.defaultPrice.linked,net:0,listPrice:null,regulationPrice:null}],this.defaultPrice.listPrice&&(t.price[0].listPrice={currencyId:this.defaultCurrency.id,gross:this.defaultPrice.listPrice.gross,linked:this.defaultPrice.listPrice.linked,net:this.defaultPrice.listPrice.net}),this.defaultPrice.regulationPrice&&(t.price[0].regulationPrice={currencyId:this.defaultCurrency.id,gross:this.defaultPrice.regulationPrice.gross,linked:this.defaultPrice.regulationPrice.linked,net:this.defaultPrice.regulationPrice.net}),e.forEach(i=>{this.product.prices.some(s=>s.ruleId===i.ruleId)||(t.ruleId=i.id,t.ruleName=i.name,this.product.prices.add(t))});return}this.product.prices.forEach(t=>{e.some(i=>t.ruleId===i.ruleId)||this.product.prices.remove(t.id)})},onInheritanceRestore(e){const t=JSON.parse(this.parentProductFrozen);if(this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.bulkEditProduct[e.name],"isInherited",!0),this.$set(this.bulkEditProduct[e.name],"value",t[e.name])):(this.bulkEditProduct[e.name].isInherited=!0,this.bulkEditProduct[e.name].value=t[e.name]),e.name==="taxId"){this.taxRate=t.tax,this.isCompatEnabled("INSTANCE_SET")?this.$set(this.product,"taxId",t.taxId):this.product.taxId=t.taxId;return}if(e.name==="isPriceInherited"){this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.product.price,0,t.price[0]),this.$set(this.product.purchasePrices,0,t.purchasePrices[0])):(this.product.price[0]=t.price[0],this.product.purchasePrices[0]=t.purchasePrices[0]);const i=h.isEmpty(t.price[0].listPrice)?{currencyId:this.currency.id,net:null,linked:!0,gross:null}:t.price[0].listPrice;this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.product,"listPrice",[i]),this.$set(this.product.price[0],"listPrice",i)):(this.product.listPrice=[i],this.product.price[0].listPrice=i);const s=h.isEmpty(t.price[0].regulationPrice)?{currencyId:this.currency.id,net:null,linked:!0,gross:null}:t.price[0].regulationPrice;this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.product,"regulationPrice",[s]),this.$set(this.product.price[0],"regulationPrice",s)):(this.product.regulationPrice=[s],this.product.price[0].regulationPrice=s);return}if(e.name==="categories"){this.setProductAssociation(e.name,t);return}if(e.name==="media"){this.isCompatEnabled("INSTANCE_SET")?this.$set(this.product,"media",t.media):this.product.media=t.media;return}if(e.name==="prices"){this.setProductAssociation(e.name,t);return}if(e.name==="properties"){this.setProductAssociation(e.name,t);return}if(e.name==="searchKeywords"){this.setProductSearchKeywords();return}this.$set(this.product,e.name,t[e.name])},onInheritanceRemove(e){["properties","prices"].includes(e.name)&&this.setProductAssociation(e.name),this.isCompatEnabled("INSTANCE_SET")?this.$set(this.bulkEditProduct[e.name],"isInherited",!1):this.bulkEditProduct[e.name].isInherited=!1},setProductSearchKeywords(){var e;if(h.isEmpty((e=this.parentProduct)==null?void 0:e.customSearchKeywords)){this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.bulkEditProduct.searchKeywords,"value",[]),this.$set(this.product,"searchKeywords",[])):(this.bulkEditProduct.searchKeywords.value=[],this.product.searchKeywords=[]);return}this.isCompatEnabled("INSTANCE_SET")?(this.$set(this.bulkEditProduct.searchKeywords,"value",this.parentProduct.customSearchKeywords),this.$set(this.product,"searchKeywords",this.parentProduct.customSearchKeywords)):(this.bulkEditProduct.searchKeywords.value=this.parentProduct.customSearchKeywords,this.product.searchKeywords=this.parentProduct.customSearchKeywords)},setProductAssociation(e,t=null){if(this.product[e].getIds().forEach(s=>this.product[e].remove(s)),!t){this.isCompatEnabled("INSTANCE_SET")?this.$set(this.bulkEditProduct[e],"value",[]):this.bulkEditProduct[e].value=[];return}t[e].forEach(s=>this.product[e].add(s))}}};export{T as default};
//# sourceMappingURL=index-ClEmtveq.js.map

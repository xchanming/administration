import{P as i,a as o}from"./main.vite-CEuAX8cl.js";import"./administration-DCOj2uiN.js";import"./channel-oRk5-XZJ.js";const n=`{% block sw_notification_center %} <sw-context-button ref="notificationCenterContextButton" aria-label="global.notification-center.title" class="sw-notification-center__context-button" :class="additionalContextButtonClass" :auto-close="false" :menu-width="360" :menu-offset-top="10" :menu-offset-left="24" :additional-context-menu-classes="additionalContextMenuClasses" @context-menu-after-open="onContextMenuOpen" @context-menu-after-close="onContextMenuClose" > <template #button> {% block sw_notification_center_context_button_button_slot %} <sw-icon name="regular-bell" size="20px" /> {% endblock %} </template> {% block sw_notification_center_content %} <div class="sw-notification-center__content"> {% block sw_notification_center_content_header %} <div class="sw-notification-center__header"> <h3 class="sw-notification-center__title"> {{ $tc('global.notification-center.title') }} </h3> {% block sw_notification_center_content_context_menu %} <sw-context-button> <sw-context-menu-item variant="danger" @click="openDeleteModal" > {{ $tc('global.notification-center.deleteModal.title') }} </sw-context-menu-item> </sw-context-button> {% endblock %} </div> {% endblock %} {% block sw_notification_center_content_notification_container %} <div class="sw-notification-center__notification-container"> <div v-show="notifications.length > 0"> <sw-notification-center-item v-for="notification in notifications" :key="notification.uuid" :notification="notification" @center-close="changeVisibility(false)" /> </div> <div v-show="notifications.length === 0" class="sw-notification-center__empty-text" > {{ $tc('global.notification-center.emptyText') }} </div> </div> {% endblock %} </div> {% endblock %} {% block sw_notification_center_delete_modal %} <sw-modal v-if="showDeleteModal" :title="$tc('global.notification-center.deleteModal.title')" variant="small" @modal-close="onCloseDeleteModal" > {% block sw_notification_center_delete_modal_confirm_delete_text %} <p class="sw_notification_center__confirm-delete-text"> {{ $tc('global.notification-center.deleteModal.textConfirm') }} </p> {% endblock %} {% block sw_notification_center_delete_modal_footer %} <template #modal-footer> {% block sw_notification_center_delete_modal_cancel %} <sw-button size="small" @click="onCloseDeleteModal" > {{ $tc('global.default.cancel') }} </sw-button> {% endblock %} {% block sw_notification_center_delete_modal_confirm %} <sw-button variant="primary" size="small" @click="onConfirmDelete" > {{ $tc('global.default.delete') }} </sw-button> {% endblock %} </template> {% endblock %} </sw-modal> {% endblock %} </sw-context-button> {% endblock %}`,{Component:c,Mixin:a}=Cicada;c.register("sw-notification-center",{template:n,compatConfig:Cicada.compatConfig,inject:["feature"],mixins:[a.getByName("notification")],data(){return{additionalContextMenuClasses:{"sw-notification-center__context-container":!0},showDeleteModal:!1,unsubscribeFromStore:null}},computed:{notifications(){return Object.values(Cicada.State.getters["notification/getNotificationsObject"]).reverse()},additionalContextButtonClass(){return{"sw-notification-center__context-button--new-available":this.notifications.some(t=>!t.visited)}}},created(){this.unsubscribeFromStore=Cicada.State.subscribeAction(this.createNotificationFromSystemError),this.isCompatEnabled("INSTANCE_EVENT_EMITTER")?this.$root.$on("on-change-notification-center-visibility",this.changeVisibility):Cicada.Utils.EventBus.on("on-change-notification-center-visibility",this.changeVisibility)},beforeDestroyed(){typeof this.unsubscribeFromStore=="function"&&this.unsubscribeFromStore(),this.isCompatEnabled("INSTANCE_EVENT_EMITTER")?Cicada.Utils.EventBus.$off("on-change-notification-center-visibility",this.changeVisibility):this.$root.$off("on-change-notification-center-visibility",this.changeVisibility)},methods:{onContextMenuOpen(){Cicada.State.commit("notification/setWorkerProcessPollInterval",i)},onContextMenuClose(){Cicada.State.dispatch("notification/setAllNotificationsVisited"),Cicada.State.commit("notification/setWorkerProcessPollInterval",o)},openDeleteModal(){this.showDeleteModal=!0},onConfirmDelete(){Cicada.State.commit("notification/clearNotificationsForCurrentUser"),this.showDeleteModal=!1},onCloseDeleteModal(){this.showDeleteModal=!1},changeVisibility(t){if(this.$refs.notificationCenterContextButton!==void 0){if(t){this.$refs.notificationCenterContextButton.openMenu();return}this.$refs.notificationCenterContextButton.showMenu=!1,this.$refs.notificationCenterContextButton.removeMenuFromBody(),this.$refs.notificationCenterContextButton.$emit("context-menu-after-close")}},createNotificationFromSystemError({type:t,payload:e}){t==="addSystemError"&&this.createSystemNotificationError({id:e.id,message:e.error.detail})}}});
//# sourceMappingURL=index-DrOFxFKU.js.map

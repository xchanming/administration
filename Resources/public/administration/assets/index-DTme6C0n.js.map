{"version":3,"file":"index-DTme6C0n.js","sources":["../../../app/administration/src/app/component/base/sw-tabs/sw-tabs.html.twig","../../../app/administration/src/app/component/base/sw-tabs/index.ts"],"sourcesContent":["{# v-on=\"listeners\" needed becaues vue/compat removes them from $attrs #}\n{# New mt-tabs component #}\n<template v-if=\"useMeteorComponent\">\n    <mt-tabs\n        v-bind=\"$attrs\"\n        ref=\"tabComponent\"\n        :items=\"itemsBackwardCompatible\"\n        v-on=\"listeners\"\n        @new-item-active=\"onNewItemActive\"\n    />\n\n    {# Render content slot as fallback #}\n    <slot\n        name=\"content\"\n        v-bind=\"{ active: activeItem }\"\n    >\n    </slot>\n</template>\n\n{# v-on=\"$listeners\" needed becaues vue/compat removes them from $attrs #}\n{# Deprecated component #}\n<sw-tabs-deprecated\n    v-else\n    v-bind=\"$attrs\"\n    ref=\"tabComponent\"\n    v-on=\"listeners\"\n>\n    <template\n        v-for=\"(index, name) in getSlots()\"\n        #[name]=\"data\"\n    >\n        <slot\n            :name=\"name\"\n            v-bind=\"data || {}\"\n        >\n        </slot>\n    </template>\n</sw-tabs-deprecated>\n","import type { PropType } from 'vue';\nimport type { TabItem } from '@cicada-ag/meteor-component-library/dist/esm/components/navigation/mt-tabs/mt-tabs';\nimport template from './sw-tabs.html.twig';\n\nconst { Component } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n * @status ready\n * @description Wrapper component for sw-tabs and mt-tabs. Autoswitches between the two components.\n */\nComponent.register('sw-tabs', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    props: {\n        /**\n         * Only used for new mt-tabs component\n         */\n        items: {\n            type: Array as PropType<TabItem[]>,\n            required: false,\n        },\n    },\n\n    computed: {\n        useMeteorComponent() {\n            // Use new meteor component in major\n            if (Cicada.Feature.isActive('v6.7.0.0')) {\n                return true;\n            }\n\n            // Throw warning when deprecated component is used\n            Cicada.Utils.debug.warn(\n                'sw-tabs',\n                // eslint-disable-next-line max-len\n                'The old usage of \"sw-tabs\" is deprecated and will be removed in v6.7.0.0. Please use \"mt-tabs\" instead.',\n            );\n\n            return false;\n        },\n\n        itemsBackwardCompatible(): TabItem[] {\n            if (this.items) {\n                return this.items;\n            }\n\n            const defaultSlotContent = this.$slots.default?.({});\n\n            if (!defaultSlotContent) {\n                return [];\n            }\n\n            /**\n             * Iterate over the default slot content and extract the tab items\n             * and convert them to the new format\n             */\n            let items = defaultSlotContent\n                .filter((item) => {\n                    return (\n                        // @ts-expect-error\n                        item.type?.name === 'sw-tabs-item' ||\n                        // eslint-disable-next-line @typescript-eslint/no-base-to-string\n                        item.type?.toString() === 'Symbol(v-fgt)'\n                    );\n                })\n                .map((item) => {\n                    // Handle fragments\n\n                    // eslint-disable-next-line @typescript-eslint/no-base-to-string\n                    if (item.type?.toString() === 'Symbol(v-fgt)') {\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n                        return (\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n                            (item.children ?? [])\n                                // @ts-expect-error\n                                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                                ?.filter((child) => child.type?.name === 'sw-tabs-item')\n                                // eslint-disable-next-line max-len\n                                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-explicit-any\n                                .map((child: any) => {\n                                    return {\n                                        // eslint-disable-next-line max-len\n                                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access\n                                        label: child.props?.title ?? child.props?.name,\n                                        // eslint-disable-next-line max-len\n                                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access\n                                        name: child.props?.name ?? child.props?.title,\n                                        onClick: () => {\n                                            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                                            if (child.props?.route) {\n                                                // eslint-disable-next-line max-len\n                                                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-member-access\n                                                void this.$router.push(child.props.route);\n                                            }\n                                        },\n                                    };\n                                })\n                        );\n                    }\n\n                    // eslint-disable-next-line max-len\n                    /* eslint-disable @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-call */\n                    let label = item.props?.title;\n                    let name = item.props?.name ?? item.props?.title;\n\n                    if (label === undefined) {\n                        // @ts-expect-error\n                        // Get label from default slot content of item\n                        const defaultSlot = item.children?.default?.()?.[0];\n                        // Check if default slot is Symbol(v-txt)\n                        if (defaultSlot?.type?.toString() === 'Symbol(v-txt)') {\n                            label = defaultSlot.children;\n                        }\n                    }\n\n                    if (name === undefined) {\n                        // Use label as name if name is not set\n                        name = label;\n                    }\n\n                    /* eslint-enable @typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-member-access */\n\n                    return {\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                        label,\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                        name,\n                        onClick: () => {\n                            if (item.props?.route) {\n                                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                                void this.$router.push(item.props.route);\n                            }\n                        },\n                    };\n                });\n\n            // Flat map items\n            items = items.flat();\n\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return items;\n        },\n\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        listeners(): Record<string, Function | Function[]> {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access\n            if (this.isCompatEnabled('INSTANCE_LISTENERS')) {\n                return this.$listeners;\n            }\n\n            return {};\n        },\n    },\n\n    data(): {\n        activeItem: unknown;\n    } {\n        return {\n            activeItem: null,\n        };\n    },\n\n    mounted() {\n        // Set first item as active\n        if (this.itemsBackwardCompatible.length > 0) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            this.activeItem = this.itemsBackwardCompatible[0].name;\n        }\n    },\n\n    methods: {\n        getSlots() {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access\n            if (this.isCompatEnabled('INSTANCE_SCOPED_SLOTS')) {\n                return {\n                    ...this.$slots,\n                    ...this.$scopedSlots,\n                };\n            }\n\n            return this.$slots;\n        },\n\n        mountedComponent() {\n            // Fallback for $refs access in some modules\n            if (this.$refs.tabComponent) {\n                // @ts-expect-error\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n                this.$refs.tabComponent.mountedComponent();\n            }\n        },\n\n        setActiveItem(item: unknown) {\n            // Fallback for $refs access in some modules\n            if (this.$refs.tabComponent) {\n                // @ts-expect-error\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n                this.$refs.tabComponent.setActiveItem(item);\n            }\n        },\n\n        onNewItemActive(item: unknown) {\n            this.$emit('new-item-active', item);\n            this.activeItem = item;\n        },\n    },\n});\n"],"names":["template","Component","_a","_b","defaultSlotContent","items","item","_c","_d","_e","_f","_g","_h","_i","child","label","name","defaultSlot"],"mappings":"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"}
{"version":3,"file":"index-CDx7QSJj.js","sources":["../../../app/administration/src/module/sw-order/component/sw-order-promotion-tag-field/sw-order-promotion-tag-field.html.twig","../../../app/administration/src/module/sw-order/component/sw-order-promotion-tag-field/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_tagged_field %}\n<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_order_promotion_tag_field %}\n<sw-block-field\n    class=\"sw-tagged-field sw-order-promotion-tag-field\"\n    :class=\"taggedFieldClasses\"\n    v-bind=\"$attrs\"\n    :disabled=\"disabled\"\n    v-on=\"listeners\"\n>\n    <template #sw-field-input=\"{ identification, error, disabled, size, setFocusClass, removeFocusClass }\">\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_tagged_field_inner %}\n        <ul\n            class=\"sw-tagged-field__tag-list\"\n            :class=\"taggedFieldListClasses\"\n            role=\"listbox\"\n            tabindex=\"0\"\n            @click=\"setFocus(true)\"\n            @keydown.enter=\"setFocus(true)\"\n        >\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_order_promotion_tag_field_tag_list %}\n            <li\n                v-for=\"(item, index) in value\"\n                :key=\"`sw-tagged-field-value--${index}`\"\n            >\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_order_promotion_tag_field_tag_item %}\n                <sw-label\n                    v-if=\"item.isInvalid\"\n                    :size=\"size\"\n                    :dismissable=\"!disabled\"\n                    variant=\"danger\"\n                    @selected=\"setFocus(true)\"\n                    @dismiss=\"dismissTag(item)\"\n                >\n                    {{ item.code }}\n                </sw-label>\n\n                <sw-label\n                    v-else\n                    v-tooltip=\"{\n                        message: getPromotionCodeDescription(item),\n                        width: 220\n                    }\"\n                    :size=\"size\"\n                    :dismissable=\"!disabled\"\n                    @selected=\"setFocus(true)\"\n                    @dismiss=\"dismissTag(item)\"\n                >\n                    {{ item.code }}\n                </sw-label>\n                {% endblock %}\n            </li>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_order_promotion_tag_field_item_input %}\n            <li>\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_order_promotion_tag_field_input %}\n                <!-- eslint-disable-next-line vuejs-accessibility/form-control-has-label -->\n                <input\n                    ref=\"taggedFieldInput\"\n                    v-model=\"newTagName\"\n                    type=\"text\"\n                    class=\"sw-tagged-field__input\"\n                    :class=\"taggedFieldInputClasses\"\n                    :disabled=\"disabled\"\n                    :placeholder=\"placeholder\"\n                    @focus=\"setFocus(true)\"\n                    @blur=\"setFocus(false)\"\n                    @keydown=\"performAddTag\"\n                >\n                {% endblock %}\n            </li>\n            {% endblock %}\n        </ul>\n        {% endblock %}\n    </template>\n</sw-block-field>\n{% endblock %}\n{% endblock %}\n","import './sw-order-promotion-tag-field.scss';\nimport template from './sw-order-promotion-tag-field.html.twig';\n\n/**\n * @package checkout\n */\n\nconst { Utils } = Cicada;\nconst { format } = Utils;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    emits: [\n        'update:value',\n        'on-remove-code',\n    ],\n\n    props: {\n        currency: {\n            type: Object,\n            required: true,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    computed: {\n        taggedFieldListClasses() {\n            return {\n                'sw-tagged-field__tag-list--disabled': this.disabled,\n            };\n        },\n\n        listeners() {\n            if (this.isCompatEnabled('INSTANCE_LISTENERS')) {\n                return this.$listeners;\n            }\n\n            return {};\n        },\n    },\n\n    methods: {\n        performAddTag(event) {\n            if (this.disabled || this.noTriggerKey(event)) {\n                return;\n            }\n\n            if (typeof this.newTagName !== 'string' || this.newTagName === '') {\n                return;\n            }\n\n            const tag = this.value.find((item) => item.code === this.newTagName);\n\n            if (tag) {\n                return;\n            }\n\n            const newTagItem = {\n                code: this.newTagName,\n            };\n\n            this.$emit('update:value', [\n                ...this.value,\n                newTagItem,\n            ]);\n\n            this.newTagName = '';\n        },\n\n        dismissTag(item) {\n            this.$emit('on-remove-code', item);\n        },\n\n        setFocus(hasFocus) {\n            if (this.disabled) {\n                return;\n            }\n\n            this.hasFocus = hasFocus;\n            if (hasFocus) {\n                this.$refs.taggedFieldInput.focus();\n            }\n        },\n\n        getPromotionCodeDescription(item) {\n            if (!item.discountId) return item.code;\n\n            const { value, discountScope, discountType, groupId } = item;\n\n            const discountValue =\n                discountType === 'percentage' ? value : format.currency(Number(value), this.currency.isoCode);\n\n            return this.$tc(`sw-order.createBase.textPromotionDescription.${discountScope}.${discountType}`, 0, {\n                value: discountValue,\n                groupId,\n            });\n        },\n    },\n};\n"],"names":["template","Utils","format","index","event","item","newTagItem","hasFocus","value","discountScope","discountType","groupId","discountValue"],"mappings":"AAAA,MAAeA,EAAA,kjDCOT,CAAE,MAAAC,CAAO,EAAG,OACZ,CAAE,OAAAC,CAAQ,EAAGD,EAGJE,EAAA,CACX,SAAAH,EAEA,MAAO,CACH,eACA,gBACH,EAED,MAAO,CACH,SAAU,CACN,KAAM,OACN,SAAU,EACb,EAED,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,SAAU,CACN,wBAAyB,CACrB,MAAO,CACH,sCAAuC,KAAK,QAC5D,CACS,EAED,WAAY,CACR,OAAI,KAAK,gBAAgB,oBAAoB,EAClC,KAAK,WAGT,EACV,CACJ,EAED,QAAS,CACL,cAAcI,EAAO,CAWjB,GAVI,KAAK,UAAY,KAAK,aAAaA,CAAK,GAIxC,OAAO,KAAK,YAAe,UAAY,KAAK,aAAe,IAInD,KAAK,MAAM,KAAMC,GAASA,EAAK,OAAS,KAAK,UAAU,EAG/D,OAGJ,MAAMC,EAAa,CACf,KAAM,KAAK,UAC3B,EAEY,KAAK,MAAM,eAAgB,CACvB,GAAG,KAAK,MACRA,CAChB,CAAa,EAED,KAAK,WAAa,EACrB,EAED,WAAWD,EAAM,CACb,KAAK,MAAM,iBAAkBA,CAAI,CACpC,EAED,SAASE,EAAU,CACX,KAAK,WAIT,KAAK,SAAWA,EACZA,GACA,KAAK,MAAM,iBAAiB,QAEnC,EAED,4BAA4BF,EAAM,CAC9B,GAAI,CAACA,EAAK,WAAY,OAAOA,EAAK,KAElC,KAAM,CAAE,MAAAG,EAAO,cAAAC,EAAe,aAAAC,EAAc,QAAAC,CAAO,EAAKN,EAElDO,EACFF,IAAiB,aAAeF,EAAQN,EAAO,SAAS,OAAOM,CAAK,EAAG,KAAK,SAAS,OAAO,EAEhG,OAAO,KAAK,IAAI,gDAAgDC,CAAa,IAAIC,CAAY,GAAI,EAAG,CAChG,MAAOE,EACP,QAAAD,CAChB,CAAa,CACJ,CACJ,CACL"}
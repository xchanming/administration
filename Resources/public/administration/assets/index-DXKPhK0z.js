const s=`{% block sw_order_nested_line_item_modal %} <sw-modal class="sw-order-nested-line-items-modal" variant="large" :title="modalTitle" @modal-close="onCloseModal" > {% block sw_order_nested_line_item_modal_loader %} <sw-loader v-if="isLoading" class="sw-order-nested-line-items-modal__loader" /> {% endblock %} {% block sw_order_nested_line_item_modal_container %} <div v-else class="sw-order-nested-line-items-modal__container" > {% block sw_order_nested_line_item_modal_header_container %} <div class="sw-order-nested-line-items-modal__header-container"> {% block sw_order_nested_line_item_modal_header_label %} <div class="sw-order-nested-line-items-modal__header-label sw-order-nested-line-items-modal__header-item"> {{ $tc('sw-order.nestedLineItemsModal.headerLabel') }} </div> {% endblock %} {% block sw_order_nested_line_item_modal_header_unit_price %} <div class="sw-order-nested-line-items-modal__header-unit-price sw-order-nested-line-items-modal__header-item"> {{ $tc('sw-order.nestedLineItemsModal.headerUnitPrice') }} </div> {% endblock %} {% block sw_order_nested_line_item_modal_header_quantity %} <div class="sw-order-nested-line-items-modal__header-quantity sw-order-nested-line-items-modal__header-item"> {{ $tc('sw-order.nestedLineItemsModal.headerQuantity') }} </div> {% endblock %} {% block sw_order_nested_line_item_modal_header_total_price %} <div class="sw-order-nested-line-items-modal__header-total-price sw-order-nested-line-items-modal__header-item"> {{ $tc('sw-order.nestedLineItemsModal.headerTotalPrice') }} </div> {% endblock %} {% block sw_order_nested_line_item_modal_header_tax %} <div class="sw-order-nested-line-items-modal__header-tax sw-order-nested-line-items-modal__header-item"> {{ $tc('sw-order.nestedLineItemsModal.headerTax') }} </div> {% endblock %} </div> {% endblock %} {% block sw_order_nested_line_item_modal_content %} <sw-order-nested-line-items-row class="sw-order-nested-line-items-modal__content" :line-item="lineItem" :currency="order.currency" /> {% endblock %} </div> {% endblock %} {% block sw_order_nested_line_item_modal_footer %} <template #modal-footer> {% block sw_order_nested_line_item_modal_footer_content %} <sw-button variant="primary" size="small" @click="onCloseModal" > {{ $tc('global.default.close') }} </sw-button> {% endblock %} </template> {% endblock %} </sw-modal> {% endblock %}`,{Filter:c}=Cicada,{Criteria:r}=Cicada.Data,_={template:s,compatConfig:Cicada.compatConfig,inject:["repositoryFactory"],emits:["modal-close"],props:{lineItem:{type:Object,required:!0},order:{type:Object,required:!0}},data(){return{isLoading:!1}},computed:{lineItemRepository(){return this.repositoryFactory.create("order_line_item")},modalTitle(){const e=c.getByName("currency")(this.lineItem.totalPrice,this.order.currency.isoCode);return this.$tc("sw-order.nestedLineItemsModal.titlePrefix",0,{lineItemLabel:this.lineItem.label,price:e})}},created(){this.createdComponent()},methods:{async createdComponent(){this.lineItem!==null&&(this.isLoading=!0,this.lineItem.nestingLevel=0,await this.enrichNestedLineItems(this.lineItem.children))},async enrichNestedLineItems(e,d=1){if(e===null||e.length<=0){this.isLoading=!1;return}const l=e.map(t=>t.id),i=new r(1,25).addFilter(r.equalsAny("parentId",l));i.getAssociation("children").addSorting(r.naturalSorting("label"));const n=await this.lineItemRepository.search(i,Cicada.Context.api),o=[];e.forEach(t=>{t.nestingLevel=d,t.children=n.filter(a=>a.parentId===t.id),t.children.sort(this.naturalSort),o.push(...t.children)}),await this.enrichNestedLineItems(o,d+1)},naturalSort(e,d){return e.label.localeCompare(d.label,"en-GB",{numeric:!0,ignorePunctuation:!0})},onCloseModal(){this.$emit("modal-close")}}};export{_ as default};
//# sourceMappingURL=index-DXKPhK0z.js.map

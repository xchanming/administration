{"version":3,"file":"index-oLSeYQWh.js","sources":["../../../app/administration/src/module/sw-settings-language/page/sw-settings-language-list/sw-settings-language-list.html.twig","../../../app/administration/src/module/sw-settings-language/page/sw-settings-language-list/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_list %}\n<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_language_index %}\n<sw-page class=\"sw-settings-language-list\">\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_language_list_search_bar %}\n    <template #search-bar>\n        <sw-search-bar\n            initial-search-type=\"language\"\n            :placeholder=\"$tc('sw-settings-language.general.placeholderSearchBar')\"\n            :initial-search=\"term\"\n            @search=\"onSearch\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_language_list_smart_bar_header %}\n    <template #smart-bar-header>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_language_list_smart_bar_header_title %}\n        <h2>\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_smart_bar_header_title_text %}\n            {{ $tc('sw-settings.index.title') }}\n            <sw-icon\n                name=\"regular-chevron-right-xs\"\n                small\n            /> {{ $tc('sw-settings-language.list.textHeadline') }}\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_smart_bar_header_amount %}\n            <span\n                v-if=\"!isLoading\"\n                class=\"sw-page__smart-bar-amount\"\n            >\n                ({{ total }})\n            </span>\n            {% endblock %}\n\n        </h2>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_language_list_smart_bar_actions %}\n    <template #smart-bar-actions>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_language_list_smart_bar_actions_add %}\n        <sw-button\n            v-tooltip.bottom=\"{\n                message: $tc('sw-privileges.tooltip.warning'),\n                disabled: allowCreate,\n                showOnDisabledElements: true\n            }\"\n            class=\"sw-settings-language-list__button-create\"\n            variant=\"primary\"\n            :disabled=\"!allowCreate || undefined\"\n            :router-link=\"{ name: 'sw.settings.language.create' }\"\n        >\n            {{ $tc('sw-settings-language.list.buttonAddLanguage') }}\n        </sw-button>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_language_list_content %}\n    <template #content>\n        <sw-entity-listing\n            key=\"language-listing\"\n            class=\"sw-settings-language-list-grid\"\n            detail-route=\"sw.settings.language.detail\"\n            :is-loading=\"isLoading\"\n            :repository=\"languageRepository\"\n            :columns=\"getColumns\"\n            :items=\"languages\"\n            :sort-by=\"sortBy\"\n            :sort-direction=\"sortDirection\"\n            :disable-data-fetching=\"true\"\n            :allow-view=\"allowView || undefined\"\n            :allow-edit=\"allowEdit || undefined\"\n            :allow-inline-edit=\"allowInlineEdit || undefined\"\n            :allow-delete=\"allowDelete || undefined\"\n            @column-sort=\"onSortColumn\"\n            @page-change=\"onPageChange\"\n        >\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_content %}\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_columns %}\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_column_name %}\n            <template #column-name=\"{ item, column, compact, isInlineEdit }\">\n                <sw-text-field\n                    v-if=\"isInlineEdit\"\n                    v-model:value=\"item.name\"\n                    :size=\"compact ? 'small' : 'default'\"\n                />\n                <router-link\n                    v-else\n                    :title=\"$tc('sw-settings-language.list.contextMenuEdit')\"\n                    :to=\"{ name: 'sw.settings.language.detail', params: { id: item.id } }\"\n                >\n                    {{ item.name }}\n                </router-link>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_column_locale %}\n            <template #column-locale=\"{ item, column, compact, isInlineEdit }\">\n                {{ item.locale.translated.name }}, {{ item.locale.translated.territory }}\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_column_id %}\n            <template #column-id=\"{ item, column, compact, isInlineEdit }\">\n                <sw-icon\n                    v-if=\"isDefault(item.id)\"\n                    name=\"regular-checkmark-xs\"\n                    small\n                    class=\"is--default\"\n                />\n                <div v-else></div>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_column_parent %}\n            <template #column-parent=\"{ item, column, compact, isInlineEdit }\">\n                {{ getParentName(item) }}\n            </template>\n            {% endblock %}\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_delete %}\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_delete_action %}\n            <template #delete-action=\"{ item, showDelete }\">\n                <sw-context-menu-item\n                    v-tooltip.bottom=\"tooltipDelete(item.id)\"\n                    class=\"sw-settings-language-list__delete-action\"\n                    variant=\"danger\"\n                    :disabled=\"isDefault(item.id) || !allowDelete || undefined\"\n                    @click=\"showDelete(item.id)\"\n                >\n                    {{ $tc('global.default.delete') }}\n                </sw-context-menu-item>\n            </template>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_content_list_delete_confirm_action %}\n            <template #delete-confirm-text=\"{ item }\">\n                {{ $tc('sw-settings-language.list.textDeleteConfirm', 1, { name: item.name } ) }}\n            </template>\n            {% endblock %}\n            {% endblock %}\n            {% endblock %}\n\n        </sw-entity-listing>\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_language_list_grid_sidebar %}\n    <template #sidebar>\n        <sw-sidebar :propagate-width=\"true\">\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_settings_language_list_grid_sidebar_filter %}\n            <sw-sidebar-item\n                icon=\"regular-filter\"\n                :title=\"$tc('sw-settings-language.list.titleSidebarFilter')\"\n            >\n                <sw-collapse expand-on-loading>\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_settings_language_list_grid_sidebar_filter_header %}\n                    <template #header=\"{ expanded }\">\n                        <div class=\"sw-settings-language-list__collapse-header\">\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_settings_language_list_grid_sidebar_filter_header_title %}\n                            <h4 class=\"sw-settings-language-list__collapse-title\">\n                                {{ $tc('sw-settings-language.list.titleSidebarQuickFilter') }}\n                            </h4>\n                            {% endblock %}\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_settings_language_list_grid_sidebar_filter_header_icon %}\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_settings_language_list_grid_sidebar_filter_header_icon_expanded %}\n                            <sw-icon\n                                v-if=\"expanded\"\n                                class=\"sw-media-collapse__button\"\n                                name=\"regular-chevron-down-xxs\"\n                                size=\"12px\"\n                            />\n                            {% endblock %}\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_settings_language_list_grid_sidebar_filter_header_icon_not_expanded %}\n                            <sw-icon\n                                v-else\n                                class=\"sw-media-collapse__button\"\n                                name=\"regular-chevron-right-xxs\"\n                                size=\"12px\"\n                            />\n                            {% endblock %}\n                            {% endblock %}\n\n                        </div>\n                    </template>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_settings_language_list_grid_sidebar_filter_content %}\n                    <template #content>\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_language_list_grid_sidebar_filter_content_root_languages %}\n                        <sw-switch-field\n                            v-model:value=\"filterRootLanguages\"\n                            class=\"sw-settings-language-list__filterField\"\n                            :label=\"$tc('sw-settings-language.list.textFilterRootLanguages')\"\n                        />\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_language_list_grid_sidebar_filter_content_inherited_languages %}\n                        <sw-switch-field\n                            v-model:value=\"filterInheritedLanguages\"\n                            class=\"sw-settings-language-list__filterField\"\n                            :label=\"$tc('sw-settings-language.list.textFilterInheritedLanguages')\"\n                        />\n                        {% endblock %}\n\n                    </template>\n                    {% endblock %}\n\n                </sw-collapse>\n            </sw-sidebar-item>\n            {% endblock %}\n\n        </sw-sidebar>\n    </template>\n    {% endblock %}\n\n</sw-page>\n    {% endblock %}\n{% endblock %}\n","/**\n * @package buyers-experience\n */\nimport template from './sw-settings-language-list.html.twig';\nimport './sw-settings-language-list.scss';\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n        'feature',\n    ],\n\n    mixins: [\n        Mixin.getByName('listing'),\n        Mixin.getByName('notification'),\n    ],\n\n    data() {\n        return {\n            languages: null,\n            parentLanguages: null,\n            total: 0,\n            filterRootLanguages: false,\n            filterInheritedLanguages: false,\n            isLoading: true,\n            sortBy: 'name',\n            sortDirection: 'DESC',\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    computed: {\n        listingCriteria() {\n            const criteria = new Criteria(this.page, this.limit);\n            criteria.addAssociation('locale');\n            criteria.addAssociation('translationCode');\n\n            if (this.sortBy) {\n                criteria.addSorting(Criteria.sort(this.sortBy, this.sortDirection));\n            }\n\n            if (this.filterRootLanguages) {\n                criteria.addFilter(Criteria.equals('parentId', null));\n            }\n\n            if (this.filterInheritedLanguages) {\n                criteria.addFilter(Criteria.not('AND', [Criteria.equals('parentId', null)]));\n            }\n\n            return criteria;\n        },\n\n        languageRepository() {\n            return this.repositoryFactory.create('language');\n        },\n\n        getColumns() {\n            return [\n                {\n                    property: 'name',\n                    label: 'sw-settings-language.list.columnName',\n                    dataIndex: 'name',\n                    inlineEdit: true,\n                },\n                {\n                    property: 'locale',\n                    dataIndex: 'locale.id',\n                    label: 'sw-settings-language.list.columnLocaleName',\n                },\n                {\n                    property: 'translationCode.code',\n                    label: 'sw-settings-language.list.columnIsoCode',\n                },\n                {\n                    property: 'parent',\n                    dataIndex: 'parent.id',\n                    label: 'sw-settings-language.list.columnInherit',\n                },\n                {\n                    property: 'id',\n                    label: 'sw-settings-language.list.columnDefault',\n                },\n            ];\n        },\n\n        allowCreate() {\n            return this.acl.can('language.creator');\n        },\n\n        allowView() {\n            return this.acl.can('language.viewer');\n        },\n\n        allowEdit() {\n            return this.acl.can('language.editor');\n        },\n\n        allowInlineEdit() {\n            return this.acl.can('language.editor');\n        },\n\n        allowDelete() {\n            return this.acl.can('language.deleter');\n        },\n    },\n\n    methods: {\n        getList() {\n            this.isLoading = true;\n            return this.languageRepository.search(this.listingCriteria).then((languageResult) => {\n                this.total = languageResult.total || this.total;\n\n                const parentCriteria = new Criteria(1, this.limit);\n                const parentIds = {};\n\n                languageResult.forEach((language) => {\n                    if (language.parentId) {\n                        parentIds[language.parentId] = true;\n                    }\n                });\n\n                parentCriteria.setIds(Object.keys(parentIds));\n                return this.languageRepository.search(parentCriteria).then((parentResult) => {\n                    this.languages = languageResult;\n                    this.parentLanguages = parentResult;\n                    this.isLoading = false;\n                });\n            });\n        },\n\n        getParentName(item) {\n            if (item.parentId === null) {\n                return '-';\n            }\n\n            return this.parentLanguages.get(item.parentId).name;\n        },\n\n        isDefault(languageId) {\n            return Cicada.Context.api.systemLanguageId ? Cicada.Context.api.systemLanguageId.includes(languageId) : false;\n        },\n\n        tooltipDelete(languageId) {\n            if (!this.acl.can('language.deleter') && !this.isDefault(languageId)) {\n                return {\n                    message: this.$tc('sw-privileges.tooltip.warning'),\n                    disabled: this.acl.can('language.deleter'),\n                    showOnDisabledElements: true,\n                };\n            }\n\n            return {\n                message: '',\n                disabled: true,\n            };\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","criteria","languageResult","parentCriteria","parentIds","language","parentResult","item","languageId"],"mappings":"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"}
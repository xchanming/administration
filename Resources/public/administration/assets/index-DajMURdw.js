import"./index-CTqfPQ7H.js";const n='{% block sw_settings_listing_option_edit_smart_bar_actions_grid %} <sw-settings-listing-option-criteria-grid v-if="productSortingEntity" :product-sorting-entity="productSortingEntity" @criteria-delete="onDeleteCriteria" @criteria-add="onAddCriteria" /> {% endblock %} {% block sw_settings_listing_option_base_language_switch %} <template #language-switch> <sw-language-switch :disabled="isNewProductSorting" @on-change="onChangeLanguage" /> </template> {% endblock %}',{Criteria:e}=Shopware.Data,o={template:n,computed:{smartBarHeading(){return this.productSortingEntity&&this.productSortingEntity.label?this.productSortingEntity.label:this.$tc("sw-settings-listing.create.smartBarTitle")},isNewProductSorting(){return!this.productSortingEntity||this.productSortingEntity._isNew},urlKeyCriteria(){const t=new e(1,1);return t.addFilter(e.equals("key",this.productSortingEntity.key)),t}},created(){this.createdComponent()},methods:{createdComponent(){this.fetchCustomFields().then(()=>{this.productSortingEntity=this.createProductSortingEntity(),Shopware.Store.get("context").resetLanguageToDefault()})},createProductSortingEntity(){const t=this.productSortingRepository.create();return t.fields=[],t.priority=1,t.active=!1,t},async onSave(){return this.sortingOptionTechnicalNameError=null,this.sortingOptionLabelError=null,this.transformCustomFieldCriterias(),this.productSortingEntity.fields=this.productSortingEntity.fields.filter(t=>t.field!=="customField"),this.saveProductSorting().then(t=>{const i=JSON.parse(t.config.data);this.$router.push({name:"sw.settings.listing.edit",params:{id:i.id}});const r=this.productSortingEntity.label;this.createNotificationSuccess({message:this.$t("sw-settings-listing.base.notification.saveSuccess",{sortingOptionName:r})})}).catch(()=>{const t=this.productSortingEntity.label;this.createNotificationError({message:this.$t("sw-settings-listing.base.notification.saveError",{sortingOptionName:t})})})},onAddCriteria(t){if(!t)return;const i=this.getCriteriaTemplate(t);this.productSortingEntity.fields||(this.productSortingEntity.fields=[]),this.productSortingEntity.fields.push(i)},onConfirmDeleteCriteria(){this.productSortingEntity.fields=this.productSortingEntity.fields.filter(t=>t.field!==this.toBeDeletedCriteria.field),this.toBeDeletedCriteria=null}}};export{o as default};

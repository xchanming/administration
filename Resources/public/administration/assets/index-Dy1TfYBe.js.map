{"version":3,"file":"index-Dy1TfYBe.js","sources":["../../../app/administration/src/module/sw-settings-cache/component/sw-settings-cache-modal/sw-settings-cache-modal.twig","../../../app/administration/src/module/sw-settings-cache/component/sw-settings-cache-modal/index.js"],"sourcesContent":["{% block sw_settings_cache_modal %}\n    <sw-modal\n        v-if=\"open\"\n        variant=\"small\"\n        :title=\"$t('sw-settings-cache.modal.title')\"\n        @modal-close=\"closeModal\">\n        {{ $tc('sw-settings-cache.modal.message') }}\n\n        <template #modal-footer>\n            <sw-button @click=\"closeModal\"\n                       size=\"small\">\n                {{ $tc('global.default.cancel') }}\n            </sw-button>\n\n            <sw-button @click=\"clearCache\"\n                       variant=\"primary\"\n                       ref=\"button\"\n                       size=\"small\">\n                {{ $tc('sw-settings-cache.modal.actions.clear') }}\n            </sw-button>\n        </template>\n    </sw-modal>\n{% endblock %}\n","/**\n * @package services-settings\n */\nimport template from './sw-settings-cache-modal.twig';\n\nconst { Mixin } = Cicada;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    shortcuts: {\n        'SYSTEMKEY+c': 'openModal',\n    },\n\n    inject: [\n        'cacheApiService',\n        'acl',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    data() {\n        return {\n            open: false,\n        };\n    },\n\n    watch: {\n        open() {\n            if (!this.open) {\n                return;\n            }\n\n            this.$nextTick(() => {\n                this.$refs.button.$el.focus();\n            });\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            document.addEventListener('keydown', (event) => {\n                if (event.key === 'Alt' || (event.key === 'c' && event.altKey)) {\n                    event.preventDefault();\n                }\n            });\n        },\n\n        openModal() {\n            if (!this.acl.can('system.clear_cache')) {\n                return;\n            }\n\n            this.open = true;\n        },\n\n        closeModal() {\n            this.open = false;\n        },\n\n        clearCache() {\n            this.createNotificationInfo({\n                message: this.$tc('sw-settings-cache.notifications.clearCache.started'),\n            });\n\n            this.cacheApiService\n                .clear()\n                .then(() => {\n                    this.createNotificationSuccess({\n                        message: this.$tc('sw-settings-cache.notifications.clearCache.success'),\n                    });\n                })\n                .catch(() => {\n                    this.createNotificationError({\n                        message: this.$tc('sw-settings-cache.notifications.clearCache.error'),\n                    });\n                });\n\n            this.open = false;\n        },\n    },\n};\n"],"names":["template","Mixin","index","event"],"mappings":"AAAA,MAAeA,EAAA,0eCKT,CAAE,MAAAC,CAAO,EAAG,OAGHC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,UAAW,CACP,cAAe,WAClB,EAED,OAAQ,CACJ,kBACA,KACH,EAED,OAAQ,CACJC,EAAM,UAAU,cAAc,CACjC,EAED,MAAO,CACH,MAAO,CACH,KAAM,EAClB,CACK,EAED,MAAO,CACH,MAAO,CACE,KAAK,MAIV,KAAK,UAAU,IAAM,CACjB,KAAK,MAAM,OAAO,IAAI,MAAK,CAC3C,CAAa,CACJ,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,SAAS,iBAAiB,UAAYE,GAAU,EACxCA,EAAM,MAAQ,OAAUA,EAAM,MAAQ,KAAOA,EAAM,SACnDA,EAAM,eAAc,CAExC,CAAa,CACJ,EAED,WAAY,CACH,KAAK,IAAI,IAAI,oBAAoB,IAItC,KAAK,KAAO,GACf,EAED,YAAa,CACT,KAAK,KAAO,EACf,EAED,YAAa,CACT,KAAK,uBAAuB,CACxB,QAAS,KAAK,IAAI,oDAAoD,CACtF,CAAa,EAED,KAAK,gBACA,MAAO,EACP,KAAK,IAAM,CACR,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,oDAAoD,CAC9F,CAAqB,CACrB,CAAiB,EACA,MAAM,IAAM,CACT,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,kDAAkD,CAC5F,CAAqB,CACrB,CAAiB,EAEL,KAAK,KAAO,EACf,CACJ,CACL"}
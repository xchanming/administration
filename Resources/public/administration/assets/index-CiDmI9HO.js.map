{"version":3,"file":"index-CiDmI9HO.js","sources":["../../../app/administration/src/module/sw-bulk-edit/component/sw-bulk-edit-save-modal/sw-bulk-edit-save-modal.html.twig","../../../app/administration/src/module/sw-bulk-edit/component/sw-bulk-edit-save-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_bulk_edit_save_modal %}\n<sw-modal\n    class=\"sw-bulk-edit-save-modal\"\n    variant=\"small\"\n    :title=\"title\"\n    @modal-close=\"onModalClose\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_bulk_edit_save_modal_body %}\n    <div class=\"sw-bulk-edit-save-modal-body\">\n        <router-view\n            v-slot=\"{ Component }\"\n        >\n            <component\n                :is=\"Component\"\n                :item-total=\"itemTotal\"\n                :bulk-edit-data=\"bulkEditData\"\n                class=\"sw-bulk-edit-save-modal__component\"\n                @changes-apply=\"applyChanges\"\n                @buttons-update=\"updateButtons\"\n                @redirect=\"redirect\"\n                @title-set=\"setTitle\"\n            />\n        </router-view>\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_bulk_edit_save_modal_footer %}\n    <template #modal-footer>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_bulk_edit_save_modal_footer_left %}\n        <div class=\"footer-left\">\n            <sw-button\n                v-for=\"button in buttons.left\"\n                :key=\"button.key\"\n                size=\"small\"\n                :variant=\"button.variant\"\n                :disabled=\"button.disabled\"\n                @click=\"onButtonClick(button.action)\"\n            >\n                {{ button.label }}\n            </sw-button>\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_bulk_edit_save_modal_footer_right %}\n        <div class=\"footer-right\">\n            <sw-button\n                v-for=\"button in buttons.right\"\n                :key=\"button.key\"\n                size=\"small\"\n                :variant=\"button.variant\"\n                :disabled=\"button.disabled\"\n                @click=\"onButtonClick(button.action)\"\n            >\n                {{ button.label }}\n            </sw-button>\n        </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n","/**\n * @package services-settings\n */\nimport template from './sw-bulk-edit-save-modal.html.twig';\nimport './sw-bulk-edit-save-modal.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: [\n        'modal-close',\n        'bulk-save',\n    ],\n\n    props: {\n        itemTotal: {\n            required: true,\n            type: Number,\n        },\n        isLoading: {\n            required: true,\n            type: Boolean,\n        },\n        processStatus: {\n            required: true,\n            type: String,\n        },\n        /**\n         * {\n         *     ...\n         *     orderDeliveries: {\n         *         isChanged: true,\n         *         type: 'overwrite',\n         *         value: 'cancel'\n         *     },\n         *     orderTransactions: {\n         *         isChanged: true,\n         *         type: 'overwrite',\n         *         value: 'cancel'\n         *     },\n         *     orders: {\n         *         isChanged: true,\n         *         type: 'overwrite',\n         *         value: 'cancel'\n         *     }\n         *     ...\n         * }\n         */\n        bulkEditData: {\n            type: Object,\n            required: false,\n            default: () => {\n                return {};\n            },\n        },\n    },\n\n    data() {\n        return {\n            title: null,\n            buttonConfig: [],\n        };\n    },\n\n    computed: {\n        currentStep() {\n            if (this.isLoading && !this.processStatus) {\n                return 'process';\n            }\n\n            if (!this.isLoading && this.processStatus === 'success') {\n                return 'success';\n            }\n\n            if (!this.isLoading && this.processStatus === 'fail') {\n                return 'fail';\n            }\n\n            return 'confirm';\n        },\n\n        buttons() {\n            return {\n                right: this.buttonConfig.filter((button) => button.position === 'right'),\n                left: this.buttonConfig.filter((button) => button.position === 'left'),\n            };\n        },\n    },\n\n    watch: {\n        currentStep(value) {\n            if (value === 'success') {\n                this.redirect('success');\n            }\n\n            if (value === 'fail') {\n                this.redirect('error');\n            }\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    beforeUnmount() {\n        this.beforeDestroyComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.addEventListeners();\n        },\n\n        beforeDestroyComponent() {\n            this.removeEventListeners();\n        },\n\n        addEventListeners() {\n            window.addEventListener('beforeunload', (event) => this.beforeUnloadListener(event));\n        },\n\n        removeEventListeners() {\n            window.removeEventListener('beforeunload', (event) => this.beforeUnloadListener(event));\n        },\n\n        beforeUnloadListener(event) {\n            if (!this.isLoading) {\n                return '';\n            }\n\n            event.preventDefault();\n            event.returnValue = this.$tc('sw-bulk-edit.modal.messageBeforeTabLeave');\n\n            return this.$tc('sw-bulk-edit.modal.messageBeforeTabLeave');\n        },\n\n        onModalClose() {\n            this.$emit('modal-close');\n        },\n\n        applyChanges() {\n            this.$emit('bulk-save');\n        },\n\n        redirect(routeName) {\n            if (!routeName) {\n                this.$emit('modal-close');\n                return;\n            }\n\n            this.$router.push({ path: routeName });\n        },\n\n        setTitle(title) {\n            this.title = title;\n        },\n\n        updateButtons(buttonConfig) {\n            this.buttonConfig = buttonConfig;\n        },\n\n        onButtonClick(action) {\n            if (typeof action === 'string') {\n                this.redirect(action);\n                return;\n            }\n\n            if (typeof action !== 'function') {\n                return;\n            }\n\n            action.call();\n        },\n    },\n};\n"],"names":["template","index","button","value","event","routeName","title","buttonConfig","action"],"mappings":"AAAA,MAAeA,EAAA,guCCOAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,MAAO,CACH,cACA,WACH,EAED,MAAO,CACH,UAAW,CACP,SAAU,GACV,KAAM,MACT,EACD,UAAW,CACP,SAAU,GACV,KAAM,OACT,EACD,cAAe,CACX,SAAU,GACV,KAAM,MACT,EAsBD,aAAc,CACV,KAAM,OACN,SAAU,GACV,QAAS,KACE,GAEd,CACJ,EAED,MAAO,CACH,MAAO,CACH,MAAO,KACP,aAAc,CAAE,CAC5B,CACK,EAED,SAAU,CACN,aAAc,CACV,OAAI,KAAK,WAAa,CAAC,KAAK,cACjB,UAGP,CAAC,KAAK,WAAa,KAAK,gBAAkB,UACnC,UAGP,CAAC,KAAK,WAAa,KAAK,gBAAkB,OACnC,OAGJ,SACV,EAED,SAAU,CACN,MAAO,CACH,MAAO,KAAK,aAAa,OAAQE,GAAWA,EAAO,WAAa,OAAO,EACvE,KAAM,KAAK,aAAa,OAAQA,GAAWA,EAAO,WAAa,MAAM,CACrF,CACS,CACJ,EAED,MAAO,CACH,YAAYC,EAAO,CACXA,IAAU,WACV,KAAK,SAAS,SAAS,EAGvBA,IAAU,QACV,KAAK,SAAS,OAAO,CAE5B,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,eAAgB,CACZ,KAAK,uBAAsB,CAC9B,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAiB,CACzB,EAED,wBAAyB,CACrB,KAAK,qBAAoB,CAC5B,EAED,mBAAoB,CAChB,OAAO,iBAAiB,eAAiBC,GAAU,KAAK,qBAAqBA,CAAK,CAAC,CACtF,EAED,sBAAuB,CACnB,OAAO,oBAAoB,eAAiBA,GAAU,KAAK,qBAAqBA,CAAK,CAAC,CACzF,EAED,qBAAqBA,EAAO,CACxB,OAAK,KAAK,WAIVA,EAAM,eAAc,EACpBA,EAAM,YAAc,KAAK,IAAI,0CAA0C,EAEhE,KAAK,IAAI,0CAA0C,GAN/C,EAOd,EAED,cAAe,CACX,KAAK,MAAM,aAAa,CAC3B,EAED,cAAe,CACX,KAAK,MAAM,WAAW,CACzB,EAED,SAASC,EAAW,CAChB,GAAI,CAACA,EAAW,CACZ,KAAK,MAAM,aAAa,EACxB,MACH,CAED,KAAK,QAAQ,KAAK,CAAE,KAAMA,CAAW,CAAA,CACxC,EAED,SAASC,EAAO,CACZ,KAAK,MAAQA,CAChB,EAED,cAAcC,EAAc,CACxB,KAAK,aAAeA,CACvB,EAED,cAAcC,EAAQ,CAClB,GAAI,OAAOA,GAAW,SAAU,CAC5B,KAAK,SAASA,CAAM,EACpB,MACH,CAEG,OAAOA,GAAW,YAItBA,EAAO,KAAI,CACd,CACJ,CACL"}
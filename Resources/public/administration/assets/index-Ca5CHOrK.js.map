{"version":3,"file":"index-Ca5CHOrK.js","sources":["../../../app/administration/src/module/sw-settings-payment/component/sw-settings-payment-sorting-modal/sw-settings-payment-sorting-modal.html.twig","../../../app/administration/src/module/sw-settings-payment/component/sw-settings-payment-sorting-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_payment_sorting_modal %}\n<sw-modal\n    class=\"sw-settings-payment-sorting-modal\"\n    :title=\"$tc('sw-settings-payment.sorting-modal.modalTitle')\"\n    @modal-close=\"closeModal\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_payment_sorting_modal_content %}\n    <template #body>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_payment_sorting_modal_content_subtitle %}\n        <div class=\"sw-modal__body sw-settings-payment-sorting-modal__subtitle\">\n            {{ $tc('sw-settings-payment.sorting-modal.subTitle') }}\n        </div>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_payment_sorting_modal_content_list %}\n        <div class=\"sw-modal__body\">\n            <sw-sortable-list\n                class=\"sw-settings-payment-sorting-modal__payment-method-list\"\n                :items=\"sortedPaymentMethods\"\n                :scroll-on-drag=\"true\"\n                :scroll-on-drag-conf=\"scrollOnDragConf\"\n                @items-sorted=\"onSort\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_settings_payment_sorting_modal_content_payment_method %}\n                <template #item=\"{ item: paymentMethod }\">\n                    <div\n                        class=\"sw-settings-payment-sorting-modal__payment-method-list-item\"\n                        :class=\"!paymentMethod.active ? 'is--disabled' : ''\"\n                    >\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_payment_sorting_modal_content_payment_method_action %}\n                        <sw-icon\n                            class=\"sw-settings-payment-sorting-modal__payment-method-list-item__action\"\n                            name=\"regular-grip-vertical\"\n                        />\n                        {% endblock %}\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_payment_sorting_modal_content_payment_method_icon %}\n                        <img\n                            v-if=\"isCicadaDefaultPaymentMethod(paymentMethod)\"\n                            class=\"sw-settings-payment-sorting-modal__payment-method-list-item__icon\"\n                            :src=\"assetFilter('/administration/static/img/checkout/cicada_payment_method.svg')\"\n                            alt=\"\"\n                        >\n                        <sw-media-preview-v2\n                            v-else\n                            class=\"sw-settings-payment-sorting-modal__payment-method-list-item__icon\"\n                            :source=\"paymentMethod.media ? paymentMethod.media : null\"\n                        />\n                        {% endblock %}\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_settings_payment_sorting_modal_content_payment_method_name %}\n                        <div class=\"sw-settings-payment-sorting-modal__payment-method-list-item__name\">\n                            {{ paymentMethod.translated.distinguishableName }}\n                        </div>\n                        {% endblock %}\n                    </div>\n                </template>\n                {% endblock %}\n            </sw-sortable-list>\n        </div>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_settings_payment_sorting_modal_footer %}\n    <template #modal-footer>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_payment_sorting_modal_footer_cancel_button %}\n        <sw-button\n            class=\"sw-settings-payment-sorting-modal__cancel-button\"\n            @click=\"closeModal\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_settings_payment_sorting_modal_footer_save_button %}\n        <sw-button-process\n            class=\"sw-settings-payment-sorting-modal__save-button\"\n            variant=\"primary\"\n            :is-loading=\"isSaving\"\n            :disabled=\"!acl.can('category.editor')\"\n            :process-success=\"false\"\n            @click=\"applyChanges\"\n        >\n            {{ $tc('global.default.save') }}\n        </sw-button-process>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n</sw-modal>\n{% endblock %}\n","import template from './sw-settings-payment-sorting-modal.html.twig';\nimport './sw-settings-payment-sorting-modal.scss';\n\nconst { Mixin } = Cicada;\n\n/**\n * @package checkout\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'acl',\n        'repositoryFactory',\n        'feature',\n    ],\n\n    emits: [\n        'modal-close',\n        'modal-save',\n    ],\n\n    mixins: [Mixin.getByName('notification')],\n\n    props: {\n        paymentMethods: {\n            type: Array,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            isSaving: false,\n            originalPaymentMethods: [...this.paymentMethods],\n            sortedPaymentMethods: [...this.paymentMethods],\n            scrollOnDragConf: {\n                speed: 50,\n                margin: 130,\n                accelerationMargin: -10,\n            },\n        };\n    },\n\n    computed: {\n        paymentMethodRepository() {\n            return this.repositoryFactory.create('payment_method');\n        },\n\n        assetFilter() {\n            return Cicada.Filter.getByName('asset');\n        },\n    },\n\n    methods: {\n        closeModal() {\n            this.$emit('modal-close');\n        },\n\n        applyChanges() {\n            this.isSaving = true;\n\n            this.sortedPaymentMethods.map((paymentMethod, index) => {\n                paymentMethod.position = index + 1;\n                return paymentMethod;\n            });\n\n            return this.paymentMethodRepository\n                .saveAll(this.sortedPaymentMethods, Cicada.Context.api)\n                .then(() => {\n                    this.isSaving = false;\n                    this.$emit('modal-close');\n                    this.$emit('modal-save');\n\n                    this.createNotificationSuccess({\n                        message: this.$tc('sw-settings-payment.sorting-modal.saveSuccessful'),\n                    });\n                })\n                .catch(() => {\n                    this.createNotificationError({\n                        message: this.$tc('sw-settings-payment.sorting-modal.errorMessage'),\n                    });\n                });\n        },\n\n        onSort(sortedItems) {\n            this.sortedPaymentMethods = sortedItems;\n        },\n\n        isCicadaDefaultPaymentMethod(paymentMethod) {\n            const defaultPaymentMethods = [\n                'Cicada\\\\Core\\\\Checkout\\\\Payment\\\\Cart\\\\PaymentHandler\\\\CashPayment',\n                'Cicada\\\\Core\\\\Checkout\\\\Payment\\\\Cart\\\\PaymentHandler\\\\PrePayment',\n            ];\n\n            return defaultPaymentMethods.includes(paymentMethod.handlerIdentifier);\n        },\n    },\n};\n"],"names":["template","Mixin","index","paymentMethod","sortedItems"],"mappings":"AAAA,MAAeA,EAAA,ipFCGT,CAAE,MAAAC,CAAO,EAAG,OAMHC,EAAA,CACX,SAAAF,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,MACA,oBACA,SACH,EAED,MAAO,CACH,cACA,YACH,EAED,OAAQ,CAACC,EAAM,UAAU,cAAc,CAAC,EAExC,MAAO,CACH,eAAgB,CACZ,KAAM,MACN,SAAU,EACb,CACJ,EAED,MAAO,CACH,MAAO,CACH,SAAU,GACV,uBAAwB,CAAC,GAAG,KAAK,cAAc,EAC/C,qBAAsB,CAAC,GAAG,KAAK,cAAc,EAC7C,iBAAkB,CACd,MAAO,GACP,OAAQ,IACR,mBAAoB,GACvB,CACb,CACK,EAED,SAAU,CACN,yBAA0B,CACtB,OAAO,KAAK,kBAAkB,OAAO,gBAAgB,CACxD,EAED,aAAc,CACV,OAAO,OAAO,OAAO,UAAU,OAAO,CACzC,CACJ,EAED,QAAS,CACL,YAAa,CACT,KAAK,MAAM,aAAa,CAC3B,EAED,cAAe,CACX,YAAK,SAAW,GAEhB,KAAK,qBAAqB,IAAI,CAACE,EAAeD,KAC1CC,EAAc,SAAWD,EAAQ,EAC1BC,EACV,EAEM,KAAK,wBACP,QAAQ,KAAK,qBAAsB,OAAO,QAAQ,GAAG,EACrD,KAAK,IAAM,CACR,KAAK,SAAW,GAChB,KAAK,MAAM,aAAa,EACxB,KAAK,MAAM,YAAY,EAEvB,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,kDAAkD,CAC5F,CAAqB,CACrB,CAAiB,EACA,MAAM,IAAM,CACT,KAAK,wBAAwB,CACzB,QAAS,KAAK,IAAI,gDAAgD,CAC1F,CAAqB,CACrB,CAAiB,CACR,EAED,OAAOC,EAAa,CAChB,KAAK,qBAAuBA,CAC/B,EAED,6BAA6BD,EAAe,CAMxC,MAL8B,CAC1B,qEACA,mEAChB,EAEyC,SAASA,EAAc,iBAAiB,CACxE,CACJ,CACL"}
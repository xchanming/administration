{"version":3,"file":"index-DRZH_bBU.js","sources":["../../../app/administration/src/module/sw-users-permissions/components/sw-users-permissions-additional-permissions/sw-users-permissions-additional-permissions.html.twig","../../../app/administration/src/module/sw-users-permissions/components/sw-users-permissions-additional-permissions/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_users_permissions_additional_permissions %}\n<sw-card\n    class=\"sw-users-permissions-additional-permissions\"\n    position-identifier=\"sw-users-permissions-additional-permissions\"\n    :title=\"$tc('sw-users-permissions.roles.additional-permissions.title')\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_users_permissions_additional_permissions_additional_privileges %}\n    <template\n        v-for=\"privilege in additionalPermissions\"\n        :key=\"`head-${privilege.key}`\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_users_permissions_additional_permissions_additional_privileges_headline %}\n        <h4\n            :class=\"'sw-users-permissions-additional-permissions_' + privilege.key\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_additional_permissions_additional_privileges_headline_content %}\n            <strong>\n                {{ $tc('sw-privileges.additional_permissions.' + privilege.key + '.label') }}\n            </strong>\n            {% endblock %}\n        </h4>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_users_permissions_additional_permissions_additional_privileges_switches %}\n        <div\n            class=\"sw-users-permissions-additional-permissions__switches\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_additional_permissions_additional_privileges_switches_content %}\n            <template\n                v-for=\"(value, roleName) in privilege.roles\"\n                :key=\"roleName\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_users_permissions_additional_permissions_additional_privileges_switches_content_switch %}\n                <sw-switch-field\n                    :disabled=\"disabled\"\n                    :class=\"'sw_users_permissions_additional_permissions_' + privilege.key + '_' + roleName\"\n                    :value=\"isPrivilegeSelected(privilege.key + '.' + roleName)\"\n                    :label=\"$tc('sw-privileges.additional_permissions.' + privilege.key + '.' + roleName)\"\n                    :bordered=\"true\"\n                    @update:value=\"onSelectPrivilege(privilege.key + '.' + roleName, $event)\"\n                />\n                {% endblock %}\n            </template>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_users_permissions_additional_permissions_app_privileges %}\n    <template\n        v-for=\"privilege in appPermissions\"\n        :key=\"privilege.key\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_users_permissions_additional_permissions_app_privileges_headline %}\n        <h4\n            class=\"sw-users-permissions-additional-permissions-app\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_additional_permissions_app_privileges_headline_content %}\n            <strong>\n                {{ $tc('sw-privileges.additional_permissions.app.label') }}\n            </strong>\n            {% endblock %}\n        </h4>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_users_permissions_additional_permissions_app_privileges_switches %}\n        <div\n            class=\"sw-users-permissions-additional-permissions__switches\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_users_permissions_additional_permissions_app_privileges_switches_content %}\n            <template\n                v-for=\"(key, roleName) in privilege.roles\"\n                :key=\"roleName\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_users_permissions_additional_permissions_app_privileges_switches_content_switch %}\n                <sw-switch-field\n                    v-if=\"roleName === 'all'\"\n                    :disabled=\"disabled\"\n                    class=\"sw_users_permissions_additional_permissions_app_all\"\n                    :value=\"isPrivilegeSelected('app.' + roleName)\"\n                    :label=\"$tc('sw-privileges.additional_permissions.app.all')\"\n                    :bordered=\"true\"\n                    @update:value=\"changeAllAppPermissionsForKey('app.' + roleName, $event)\"\n                />\n\n                <sw-switch-field\n                    v-else\n                    v-tooltip=\"{\n                        message: $tc('sw-privileges.additional_permissions.app.disabledCheckboxMessage'),\n                        disabled: !isPrivilegeSelected('app.all') || disabled,\n                        showOnDisabledElements: false\n                    }\"\n                    :disabled=\"isPrivilegeSelected('app.all') || disabled\"\n                    :class=\"'sw_users_permissions_additional_permissions_app_' + roleName\"\n                    :value=\"isPrivilegeSelected('app.' + roleName)\"\n                    :label=\"roleName\"\n                    :bordered=\"true\"\n                    @update:value=\"onSelectPrivilege('app.' + roleName, $event)\"\n                />\n                {% endblock %}\n            </template>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n","/**\n * @package services-settings\n */\nimport template from './sw-users-permissions-additional-permissions.html.twig';\nimport './sw-users-permissions-additional-permissions.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['privileges'],\n\n    props: {\n        role: {\n            type: Object,\n            required: true,\n        },\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {};\n    },\n\n    computed: {\n        additionalPermissions() {\n            const privileges = this.privileges.getPrivilegesMappings();\n\n            return privileges.filter(\n                (privilege) => privilege.category === 'additional_permissions' && privilege.key !== 'app',\n            );\n        },\n\n        appPermissions() {\n            const privileges = this.privileges.getPrivilegesMappings();\n\n            return privileges.filter(\n                (privilege) => privilege.category === 'additional_permissions' && privilege.key === 'app',\n            );\n        },\n    },\n\n    methods: {\n        isPrivilegeSelected(privilegeKey) {\n            if (!this.role.privileges) {\n                return false;\n            }\n\n            return this.role.privileges.includes(privilegeKey);\n        },\n\n        onSelectPrivilege(privilegeKey, isSelected) {\n            if (isSelected) {\n                this.role.privileges.push(privilegeKey);\n            } else {\n                this.role.privileges = this.role.privileges.filter((p) => p !== privilegeKey);\n            }\n        },\n\n        changeAllAppPermissionsForKey(permissionKey, isSelected) {\n            this.appPermissions.forEach((permission) => {\n                Object.keys(permission.roles).forEach((role) => {\n                    const identifier = `app.${role}`;\n\n                    if (isSelected) {\n                        if (this.role.privileges.includes(identifier)) {\n                            return;\n                        }\n\n                        this.role.privileges.push(identifier);\n                    } else {\n                        this.role.privileges = this.role.privileges.filter((p) => p !== identifier);\n                    }\n                });\n            });\n        },\n    },\n};\n"],"names":["template","index","privilege","privilegeKey","isSelected","p","permissionKey","permission","role","identifier"],"mappings":"AAAA,MAAeA,EAAA,47GCOAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,YAAY,EAErB,MAAO,CACH,KAAM,CACF,KAAM,OACN,SAAU,EACb,EACD,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,EACV,EAED,SAAU,CACN,uBAAwB,CAGpB,OAFmB,KAAK,WAAW,sBAAqB,EAEtC,OACbE,GAAcA,EAAU,WAAa,0BAA4BA,EAAU,MAAQ,KACpG,CACS,EAED,gBAAiB,CAGb,OAFmB,KAAK,WAAW,sBAAqB,EAEtC,OACbA,GAAcA,EAAU,WAAa,0BAA4BA,EAAU,MAAQ,KACpG,CACS,CACJ,EAED,QAAS,CACL,oBAAoBC,EAAc,CAC9B,OAAK,KAAK,KAAK,WAIR,KAAK,KAAK,WAAW,SAASA,CAAY,EAHtC,EAId,EAED,kBAAkBA,EAAcC,EAAY,CACpCA,EACA,KAAK,KAAK,WAAW,KAAKD,CAAY,EAEtC,KAAK,KAAK,WAAa,KAAK,KAAK,WAAW,OAAQE,GAAMA,IAAMF,CAAY,CAEnF,EAED,8BAA8BG,EAAeF,EAAY,CACrD,KAAK,eAAe,QAASG,GAAe,CACxC,OAAO,KAAKA,EAAW,KAAK,EAAE,QAASC,GAAS,CAC5C,MAAMC,EAAa,OAAOD,CAAI,GAE9B,GAAIJ,EAAY,CACZ,GAAI,KAAK,KAAK,WAAW,SAASK,CAAU,EACxC,OAGJ,KAAK,KAAK,WAAW,KAAKA,CAAU,CAC5D,MACwB,KAAK,KAAK,WAAa,KAAK,KAAK,WAAW,OAAQJ,GAAMA,IAAMI,CAAU,CAElG,CAAiB,CACjB,CAAa,CACJ,CACJ,CACL"}
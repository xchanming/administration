{"version":3,"file":"index-B4Wra5lE.js","sources":["../../../app/administration/src/module/sw-extension/page/sw-extension-config/sw-extension-config.html.twig","../../../app/administration/src/module/sw-extension/page/sw-extension-config/index.ts"],"sourcesContent":["<sw-meteor-page\n    class=\"sw-extension-config\"\n    :from-link=\"fromLink\"\n>\n    <template #smart-bar-icon>\n        <sw-extension-icon\n            class=\"sw-extension-config__extension-icon\"\n            :src=\"image\"\n            :alt=\"$tc('sw-extension-store.component.sw-extension-config.imageDescription', 0, { extensionName: extensionLabel})\"\n        />\n    </template>\n\n    <template #smart-bar-header>\n        {{ extensionLabel }}\n    </template>\n\n    <template\n        v-if=\"extension\"\n        #smart-bar-header-meta\n    >\n        <span v-if=\"extension.producerWebsite && extension.producerName\">\n            {{ $tc('sw-extension-store.component.sw-extension-config.labelBy') }}\n\n            <sw-external-link\n                small\n                :href=\"extension.producerWebsite\"\n                class=\"sw-extension-config__producer-link\"\n            >\n                {{ extension.producerName }}\n            </sw-external-link>\n        </span>\n\n        <span v-else-if=\"extension.producerName\">\n            {{ $tc('sw-extension-store.component.sw-extension-config.labelBy') }} {{ extension.producerName }}\n        </span>\n    </template>\n\n    <template #smart-bar-actions>\n        <sw-button\n            variant=\"primary\"\n            class=\"sw-extension-config__save-action\"\n            @click.prevent=\"onSave\"\n        >\n            {{ $tc('global.default.save') }}\n        </sw-button>\n    </template>\n\n    <template #default>\n        <sw-system-config\n            ref=\"systemConfig\"\n            :domain=\"domain\"\n            sales-channel-switchable\n            :sales-channel-id=\"salesChannelId\"\n        />\n    </template>\n</sw-meteor-page>\n","import type { RouteLocationNamedRaw } from 'vue-router';\nimport type { Extension } from '../../service/extension-store-action.service';\nimport template from './sw-extension-config.html.twig';\nimport './sw-extension-config.scss';\n\nconst { Mixin } = Cicada;\n\ntype ComponentData = {\n    salesChannelId: string | null;\n    extension: Extension | null;\n    fromLink: RouteLocationNamedRaw | null;\n};\n\n/**\n * @package checkout\n * @private\n */\nexport default Cicada.Component.wrapComponentConfig({\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    beforeRouteEnter(to, from, next) {\n        next((vm) => {\n            // @ts-expect-error\n            vm.fromLink = from;\n        });\n    },\n\n    inject: [\n        'cicadaExtensionService',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        namespace: {\n            type: String,\n            required: true,\n        },\n    },\n\n    data(): ComponentData {\n        return {\n            salesChannelId: null,\n            extension: null,\n            fromLink: null,\n        };\n    },\n\n    computed: {\n        domain(): string {\n            return `${this.namespace}.config`;\n        },\n\n        myExtensions(): Extension[] {\n            return Cicada.State.get('cicadaExtensions').myExtensions.data;\n        },\n\n        defaultThemeAsset(): string {\n            return Cicada.Filter.getByName('asset')('administration/static/img/theme/default_theme_preview.jpg');\n        },\n\n        image(): string {\n            if (this.extension?.icon) {\n                return this.extension.icon;\n            }\n\n            if (this.extension?.iconRaw) {\n                return `data:image/png;base64, ${this.extension.iconRaw}`;\n            }\n\n            return this.defaultThemeAsset;\n        },\n\n        extensionLabel(): string {\n            return this.extension?.label ?? this.namespace;\n        },\n    },\n\n    created() {\n        void this.createdComponent();\n    },\n\n    methods: {\n        async createdComponent(): Promise<void> {\n            if (!this.myExtensions.length) {\n                await this.cicadaExtensionService.updateExtensionData();\n            }\n\n            this.refreshExtension();\n        },\n\n        refreshExtension(): void {\n            this.extension =\n                this.myExtensions.find((ext) => {\n                    return ext.name === this.namespace;\n                }) ?? null;\n        },\n\n        async onSave(): Promise<void> {\n            try {\n                // @ts-expect-error\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n                await this.$refs.systemConfig.saveAll();\n\n                this.createNotificationSuccess({\n                    message: this.$tc('sw-extension-store.component.sw-extension-config.messageSaveSuccess'),\n                });\n            } catch (err) {\n                this.createNotificationError({\n                    message: err as string,\n                });\n            }\n        },\n    },\n});\n"],"names":["template","Mixin","index","to","from","next","vm","_a","_b","ext","err"],"mappings":"AAAA,MAAeA,EAAA,2sCCKT,CAAE,MAAAC,CAAU,EAAA,OAYlBC,EAAe,OAAO,UAAU,oBAAoB,CAChD,SAAAF,EAEA,aAAc,OAAO,aAErB,iBAAiBG,EAAIC,EAAMC,EAAM,CAC7BA,EAAMC,GAAO,CAETA,EAAG,SAAWF,CAAA,CACjB,CACL,EAEA,OAAQ,CACJ,wBACJ,EAEA,OAAQ,CACJH,EAAM,UAAU,cAAc,CAClC,EAEA,MAAO,CACH,UAAW,CACP,KAAM,OACN,SAAU,EACd,CACJ,EAEA,MAAsB,CACX,MAAA,CACH,eAAgB,KAChB,UAAW,KACX,SAAU,IAAA,CAElB,EAEA,SAAU,CACN,QAAiB,CACN,MAAA,GAAG,KAAK,SAAS,SAC5B,EAEA,cAA4B,CACxB,OAAO,OAAO,MAAM,IAAI,kBAAkB,EAAE,aAAa,IAC7D,EAEA,mBAA4B,CACxB,OAAO,OAAO,OAAO,UAAU,OAAO,EAAE,2DAA2D,CACvG,EAEA,OAAgB,CDjExB,IAAAM,EAAAC,ECkEgB,OAAAD,EAAA,KAAK,YAAL,MAAAA,EAAgB,KACT,KAAK,UAAU,MAGtBC,EAAA,KAAK,YAAL,MAAAA,EAAgB,QACT,0BAA0B,KAAK,UAAU,OAAO,GAGpD,KAAK,iBAChB,EAEA,gBAAyB,CD7EjC,IAAAD,EC8EmB,QAAAA,EAAA,KAAK,YAAL,YAAAA,EAAgB,QAAS,KAAK,SACzC,CACJ,EAEA,SAAU,CACD,KAAK,kBACd,EAEA,QAAS,CACL,MAAM,kBAAkC,CAC/B,KAAK,aAAa,QACb,MAAA,KAAK,uBAAuB,sBAGtC,KAAK,iBAAiB,CAC1B,EAEA,kBAAyB,CACrB,KAAK,UACD,KAAK,aAAa,KAAME,GACbA,EAAI,OAAS,KAAK,SAC5B,GAAK,IACd,EAEA,MAAM,QAAwB,CACtB,GAAA,CAGM,MAAA,KAAK,MAAM,aAAa,QAAQ,EAEtC,KAAK,0BAA0B,CAC3B,QAAS,KAAK,IAAI,qEAAqE,CAAA,CAC1F,QACIC,EAAK,CACV,KAAK,wBAAwB,CACzB,QAASA,CAAA,CACZ,CACL,CACJ,CACJ,CACJ,CAAC"}
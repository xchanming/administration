{"version":3,"file":"index-BGwXpI4J.js","sources":["../../../app/administration/src/module/sw-product/component/sw-product-variants/sw-product-modal-delivery/sw-product-modal-delivery.html.twig","../../../app/administration/src/module/sw-product/component/sw-product-variants/sw-product-modal-delivery/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_product_modal_delivery %}\n<sw-modal\n    :title=\"$tc('sw-product.variations.deliveryModal.modalHeadline')\"\n    class=\"sw-product-modal-delivery\"\n    :is-loading=\"isLoading\"\n    @modal-close=\"$emit('modal-close')\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_modal_delivery_sidebar %}\n    <div class=\"sw-product-modal-delivery__sidebar\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_modal_delivery_sidebar_tabs %}\n        <sw-tabs\n            is-vertical\n            position-identifier=\"sw-product-modal-delivery\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_product_modal_delivery_sidebar_tabs_items %}\n            <sw-tabs-item\n                :active=\"activeTab == 'order'\"\n                @click=\"activeTab = 'order'\"\n            >\n                {{ $tc('sw-product.variations.deliveryModal.order') }}\n            </sw-tabs-item>\n            <sw-tabs-item\n                :active=\"activeTab == 'media'\"\n                @click=\"activeTab = 'media'\"\n            >\n                {{ $tc('sw-product.variations.deliveryModal.media') }}\n            </sw-tabs-item>\n            <sw-tabs-item\n                :active=\"activeTab == 'listing'\"\n                @click=\"activeTab = 'listing'\"\n            >\n                {{ $tc('sw-product.variations.deliveryModal.listing') }}\n            </sw-tabs-item>\n            {% endblock %}\n        </sw-tabs>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_modal_delivery_sidebar_descriptions %}\n        <p v-if=\"activeTab == 'order'\">\n            {{ $tc('sw-product.variations.deliveryModal.orderExplanation') }}\n        </p>\n        <p v-if=\"activeTab == 'media'\">\n            {{ $tc('sw-product.variations.deliveryModal.mediaExplanation') }}\n        </p>\n        <p v-if=\"activeTab == 'listing'\">\n            {{ $tc('sw-product.variations.deliveryModal.listingExplanation') }}\n        </p>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_modal_delivery_main %}\n    <div class=\"sw-product-modal-delivery__main\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_modal_delivery_main_order %}\n        <sw-product-variants-delivery-order\n            v-if=\"activeTab == 'order'\"\n            :product=\"product\"\n            :selected-groups=\"selectedGroups\"\n        />\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_modal_delivery_media %}\n        <sw-product-variants-delivery-media\n            v-if=\"activeTab == 'media'\"\n            :product=\"product\"\n            :selected-groups=\"selectedGroups\"\n        />\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_modal_delivery_listing %}\n        <sw-product-variants-delivery-listing\n            v-if=\"activeTab == 'listing'\"\n            :product=\"product\"\n            :selected-groups=\"selectedGroups\"\n        />\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_product_modal_delivery_footer %}\n    <template #modal-footer>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_modal_delivery_footer_button_cancel %}\n        <sw-button\n            size=\"small\"\n            @click=\"cancelDeliveryConfiguration\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n        {% endblock %}\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_product_modal_delivery_footer_button_save %}\n        <sw-button\n            v-tooltip=\"{\n                message: $tc('sw-privileges.tooltip.warning'),\n                disabled: acl.can('product.editor'),\n                showOnDisabledElements: true\n            }\"\n            class=\"sw-product-modal-delivery__save-button\"\n            :disabled=\"!acl.can('product.editor')\"\n            variant=\"primary\"\n            size=\"small\"\n            @click=\"saveDeliveryConfiguration\"\n        >\n            {{ $tc('sw-product.variations.deliveryModal.save') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n</sw-modal>\n{% endblock %}\n","/*\n * @package inventory\n */\n\nimport template from './sw-product-modal-delivery.html.twig';\nimport './sw-product-modal-delivery.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n    ],\n\n    emits: [\n        'modal-close',\n        'configuration-close',\n    ],\n\n    props: {\n        product: {\n            type: Object,\n            required: true,\n        },\n\n        selectedGroups: {\n            type: Array,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            activeTab: 'order',\n            isLoading: false,\n        };\n    },\n\n    computed: {\n        productRepository() {\n            return this.repositoryFactory.create('product');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            if (!this.product.variantListingConfig) {\n                if (this.isCompatEnabled('INSTANCE_SET')) {\n                    this.$set(this.product, 'variantListingConfig', {\n                        displayParent: null,\n                        configuratorGroupConfig: [],\n                        mainVariantId: null,\n                    });\n                } else {\n                    this.product.variantListingConfig = {\n                        displayParent: null,\n                        configuratorGroupConfig: [],\n                    };\n                }\n            }\n        },\n\n        saveDeliveryConfiguration() {\n            this.isLoading = true;\n\n            // Handle variant listing modes (single, expanded) if exists\n            const product = this.handleExpandedListing(this.product);\n\n            // Save the product after generating\n            this.productRepository.save(product).then(() => {\n                this.$emit('configuration-close');\n            });\n        },\n\n        cancelDeliveryConfiguration() {\n            this.$emit('configuration-close');\n        },\n\n        handleExpandedListing(product) {\n            if (product && product.listingMode === 'expanded') {\n                const configuratorGroupConfig = product.variantListingConfig.configuratorGroupConfig ?? [];\n\n                // remove main_variant_id and display_parent from configuratorGroupConfig\n                product.variantListingConfig.mainVariantId = null;\n                product.variantListingConfig.displayParent = null;\n                product.variantListingConfig.configuratorGroupConfig = configuratorGroupConfig;\n            }\n\n            delete product.listingMode;\n\n            return product;\n        },\n    },\n};\n"],"names":["template","index","product","configuratorGroupConfig"],"mappings":"AAAA,MAAeA,EAAA,guFCQAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,KACH,EAED,MAAO,CACH,cACA,qBACH,EAED,MAAO,CACH,QAAS,CACL,KAAM,OACN,SAAU,EACb,EAED,eAAgB,CACZ,KAAM,MACN,SAAU,EACb,CACJ,EAED,MAAO,CACH,MAAO,CACH,UAAW,QACX,UAAW,EACvB,CACK,EAED,SAAU,CACN,mBAAoB,CAChB,OAAO,KAAK,kBAAkB,OAAO,SAAS,CACjD,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACV,KAAK,QAAQ,uBACV,KAAK,gBAAgB,cAAc,EACnC,KAAK,KAAK,KAAK,QAAS,uBAAwB,CAC5C,cAAe,KACf,wBAAyB,CAAE,EAC3B,cAAe,IACvC,CAAqB,EAED,KAAK,QAAQ,qBAAuB,CAChC,cAAe,KACf,wBAAyB,CAAE,CACnD,EAGS,EAED,2BAA4B,CACxB,KAAK,UAAY,GAGjB,MAAME,EAAU,KAAK,sBAAsB,KAAK,OAAO,EAGvD,KAAK,kBAAkB,KAAKA,CAAO,EAAE,KAAK,IAAM,CAC5C,KAAK,MAAM,qBAAqB,CAChD,CAAa,CACJ,EAED,6BAA8B,CAC1B,KAAK,MAAM,qBAAqB,CACnC,EAED,sBAAsBA,EAAS,CAC3B,GAAIA,GAAWA,EAAQ,cAAgB,WAAY,CAC/C,MAAMC,EAA0BD,EAAQ,qBAAqB,yBAA2B,CAAA,EAGxFA,EAAQ,qBAAqB,cAAgB,KAC7CA,EAAQ,qBAAqB,cAAgB,KAC7CA,EAAQ,qBAAqB,wBAA0BC,CAC1D,CAED,cAAOD,EAAQ,YAERA,CACV,CACJ,CACL"}
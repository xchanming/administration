const l=`{% block sw_sales_channel_detail_base %} <div class="sw-sales-channel-detail-product-comparison"> {% block sw_sales_channel_detail_product_comparison %} <sw-card key="edit" position-identifier="sw-sales-channel-detail-product-comparison" :is-loading="isLoading" :title="$tc('sw-sales-channel.detail.titleProductComparisonTemplate')" > {% block sw_sales_channel_detail_product_comparison_header %} <sw-container> {% block sw_sales_channel_detail_product_comparison_input_header %} <sw-code-editor v-model:value="productExport.headerTemplate" :label="$tc('sw-sales-channel.detail.productComparison.inputHeaderLabel')" :completer-function="outerCompleterFunctionHeader" :editor-config="editorConfig" completion-mode="entity" mode="twig" :soft-wraps="true" :set-focus="false" :disabled="!acl.can('sales_channel.editor')" @update:value="resetValid" @blur="resetValid" /> {% endblock %} </sw-container> {% endblock %} {% block sw_sales_channel_detail_product_comparison_body %} <sw-container> {% block sw_sales_channel_detail_product_comparison_input_body %} <sw-code-editor v-model:value="productExport.bodyTemplate" :label="$tc('sw-sales-channel.detail.productComparison.inputBodyLabel')" :completer-function="outerCompleterFunctionBody" :editor-config="editorConfig" completion-mode="entity" mode="twig" :soft-wraps="true" :set-focus="false" :disabled="!acl.can('sales_channel.editor')" @update:value="resetValid" @blur="resetValid" /> {% endblock %} </sw-container> {% endblock %} {% block sw_sales_channel_detail_product_comparison_footer %} <sw-container> {% block sw_sales_channel_detail_product_comparison_input_footer %} <sw-code-editor v-model:value="productExport.footerTemplate" :label="$tc('sw-sales-channel.detail.productComparison.inputFooterLabel')" :completer-function="outerCompleterFunctionFooter" :editor-config="editorConfig" completion-mode="entity" mode="twig" :soft-wraps="true" :set-focus="false" :disabled="!acl.can('sales_channel.editor')" @update:value="resetValid" @blur="resetValid" /> {% endblock %} </sw-container> {% endblock %} {% block sw_sales_channel_detail_product_comparison_actions %} <div class="sw-sales-channel-detail-product-comparison__button-group"> {% block sw_sales_channel_detail_product_comparison_actions_test_button %} <sw-button-process size="small" variant="ghost" class="sw-sales-channel-detail-product-comparison__button sw-sales-channel-detail-product-comparison__test-action" :is-loading="isLoadingValidate" :disabled="isLoadingValidate || (!productExport.headerTemplate && !productExport.bodyTemplate && !productExport.footerTemplate)" :process-success="isValidateSuccessful" @click="validateTemplate" > {{ $tc('sw-sales-channel.detail.productComparison.buttonTestLabel') }} </sw-button-process> {% endblock %} {% block sw_sales_channel_detail_product_comparison_actions_preview_button %} <sw-button-process size="small" variant="ghost" class="sw-sales-channel-detail-product-comparison__button sw-sales-channel-detail-product-comparison__preview-action" :is-loading="isLoadingPreview" :disabled="isLoadingPreview || (!productExport.headerTemplate && !productExport.bodyTemplate && !productExport.footerTemplate)" :process-success="isPreviewSuccessful" @click="preview" > {{ $tc('sw-sales-channel.detail.productComparison.buttonPreviewLabel') }} </sw-button-process> {% endblock %} {% block sw_sales_channel_detail_product_comparison_actions_preview_component %} <sw-sales-channel-detail-product-comparison-preview :content="previewContent" :errors="previewErrors" @close="onPreviewClose" /> {% endblock %} </div> {% endblock %} </sw-card> {% endblock %} </div> {% endblock %}`,{Mixin:o}=Shopware,{Criteria:s}=Shopware.Data,{warn:r}=Shopware.Utils.debug,d={template:l,inject:["salesChannelService","repositoryFactory","productExportService","entityMappingService","acl"],mixins:[o.getByName("notification"),o.getByName("placeholder")],props:{salesChannel:{required:!0},productExport:{required:!0},isLoading:{type:Boolean,default:!1}},data(){return{showDeleteModal:!1,defaultSnippetSetId:"71a916e745114d72abafbfdc51cbd9d0",isLoadingDomains:!1,deleteDomain:null,previewContent:null,previewErrors:null,isLoadingPreview:!1,isPreviewSuccessful:!1,isLoadingValidate:!1,isValidateSuccessful:!1}},computed:{editorConfig(){return{enableBasicAutocompletion:!0}},productExportRepository(){return this.repositoryFactory.create("product_export")},domainRepository(){return this.repositoryFactory.create(this.salesChannel.domains.entity,this.salesChannel.domains.source)},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},mainNavigationCriteria(){return new s(1,10).addFilter(s.equals("type","page"))},outerCompleterFunctionHeader(){return this.outerCompleterFunction({productExport:"product_export"})},outerCompleterFunctionBody(){return this.outerCompleterFunction({productExport:"product_export",product:"product"})},outerCompleterFunctionFooter(){return this.outerCompleterFunction({productExport:"product_export"})}},methods:{validateTemplate(){const e={message:this.$tc("sw-sales-channel.detail.productComparison.notificationMessageValidateSuccessful")};this.isLoadingValidate=!0,this.productExportService.validateProductExportTemplate(this.productExport).then(t=>{if(this.isLoadingValidate=!1,t.errors){this.previewContent=t.content,this.previewErrors=t.errors;return}this.createNotificationSuccess(e),this.isValidateSuccessful=!0}).catch(t=>{this.createNotificationError({message:t.response.data.errors[0].detail}),r(this._name,t.message,t.response),this.isLoadingValidate=!1,this.isValidateSuccessful=!1})},preview(){this.isLoadingPreview=!0,this.productExportService.previewProductExport(this.productExport).then(e=>{if(this.isLoadingPreview=!1,this.previewContent=e.content,e.errors){this.previewErrors=e.errors;return}this.isPreviewSuccessful=!0}).catch(e=>{this.createNotificationError({message:e.response.data.errors[0].detail}),r(this._name,e.message,e.response),this.isLoadingPreview=!1})},outerCompleterFunction(e){const t=this.entityMappingService;return function(a){const i=t.getEntityMapping(a,e);return Object.keys(i).map(n=>({value:n}))}},onPreviewClose(){this.previewContent=null,this.previewErrors=null,this.isPreviewSuccessful=!1},resetValid(){this.isValidateSuccessful=!1}}};export{d as default};

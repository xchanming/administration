{"version":3,"file":"index-BZRhLg1R.js","sources":["../../../app/administration/src/module/sw-cms/elements/cross-selling/config/sw-cms-el-config-cross-selling.html.twig","../../../app/administration/src/module/sw-cms/elements/cross-selling/config/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_element_cross_selling_config %}\n<div class=\"sw-cms-el-config-cross-selling\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_cross_selling_config_tabs %}\n    <sw-tabs\n        position-identifier=\"sw-cms-element-cross-selling\"\n        class=\"sw-cms-el-config-cross-selling__tabs\"\n        default-item=\"content\"\n    >\n        <template #default=\"{ active }\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_element_cross_selling_config_tab_content %}\n            <sw-tabs-item\n                name=\"content\"\n                :title=\"$tc('sw-cms.elements.general.config.tab.content')\"\n                :active-tab=\"active\"\n            >\n                {{ $tc('sw-cms.elements.general.config.tab.content') }}\n            </sw-tabs-item>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_element_cross_selling_config_tab_options %}\n            <sw-tabs-item\n                name=\"options\"\n                :title=\"$tc('sw-cms.elements.general.config.tab.options')\"\n                :active-tab=\"active\"\n            >\n                {{ $tc('sw-cms.elements.general.config.tab.options') }}\n            </sw-tabs-item>\n            {% endblock %}\n        </template>\n\n        <template #content=\"{ active }\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_element_cross_selling_config_content %}\n            <sw-container\n                v-if=\"active === 'content'\"\n                class=\"sw-cms-el-config-cross-selling__tab-content\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_cross_selling_config_content_warning_text %}\n                <sw-alert\n                    v-if=\"isProductPageType\"\n                    class=\"sw-cms-el-config-cross-selling__warning-text\"\n                    variant=\"info\"\n                >\n                    {{ $tc('sw-cms.elements.crossSelling.config.infoText.productDetailElement') }}\n                </sw-alert>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_cross_selling_config_content_products %}\n                <sw-entity-single-select\n                    v-if=\"!isProductPageType\"\n                    ref=\"cmsProductSelection\"\n                    v-model:value=\"element.config.product.value\"\n                    entity=\"product\"\n                    class=\"sw-cms-el-config-cross-selling__products\"\n                    :label=\"$tc('sw-cms.elements.crossSelling.config.label.selection')\"\n                    :placeholder=\"$tc('sw-cms.elements.crossSelling.config.placeholder.selection')\"\n                    :criteria=\"productCriteria\"\n                    :context=\"productSelectContext\"\n                    show-clearable-button\n                    @update:value=\"onProductChange\"\n                >\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_entity_single_select_variant_selected_item %}\n                    <template #selection-label-property=\"{ item }\">\n                        <sw-product-variant-info\n                            :variations=\"item.variation\"\n                        >\n                            {{ item.translated.name || item.name }}\n                        </sw-product-variant-info>\n                    </template>\n                    {% endblock %}\n\n                    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                    {% block sw_entity_single_select_variant_result_item %}\n                    <template #result-item=\"{ item, index }\">\n                        <sw-select-result\n                            v-bind=\"{ item, index }\"\n                        >\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_entity_single_select_base_results_list_result_label %}\n                            <span class=\"sw-select-result__result-item-text\">\n                                <sw-product-variant-info :variations=\"item.variation\">\n                                    {{ item.translated.name || item.name }}\n                                </sw-product-variant-info>\n                            </span>\n                            {% endblock %}\n                        </sw-select-result>\n                    </template>\n                    {% endblock %}\n                </sw-entity-single-select>\n                {% endblock %}\n            </sw-container>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_element_cross_selling_config_options %}\n            <sw-container\n                v-else-if=\"active === 'options'\"\n                class=\"sw-cms-el-config-cross-selling__tab-options\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_cross_selling_config_options_box_layout %}\n                <sw-select-field\n                    v-model:value=\"element.config.boxLayout.value\"\n                    :label=\"$tc('sw-cms.elements.productBox.config.label.layoutType')\"\n                >\n                    <option value=\"standard\">\n                        {{ $tc('sw-cms.elements.productBox.config.label.layoutTypeStandard') }}\n                    </option>\n                    <option value=\"image\">\n                        {{ $tc('sw-cms.elements.productBox.config.label.layoutTypeImage') }}\n                    </option>\n                    <option value=\"minimal\">\n                        {{ $tc('sw-cms.elements.productBox.config.label.layoutTypeMinimal') }}\n                    </option>\n                </sw-select-field>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_cross_selling_config_options_display_mode %}\n                <sw-select-field\n                    v-model:value=\"element.config.displayMode.value\"\n                    :label=\"$tc('sw-cms.elements.general.config.label.displayMode')\"\n                >\n                    <option value=\"standard\">\n                        {{ $tc('sw-cms.elements.general.config.label.displayModeStandard') }}\n                    </option>\n                    <option value=\"cover\">\n                        {{ $tc('sw-cms.elements.general.config.label.displayModeCover') }}\n                    </option>\n                    <option value=\"contain\">\n                        {{ $tc('sw-cms.elements.general.config.label.displayModeContain') }}\n                    </option>\n                </sw-select-field>\n                {% endblock %}\n\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_cross_selling_config_options_min_width %}\n                <sw-text-field\n                    v-model:value=\"element.config.elMinWidth.value\"\n                    :label=\"$tc('sw-cms.elements.crossSelling.config.label.minWidth')\"\n                    :placeholder=\"$tc('sw-cms.elements.crossSelling.config.placeholder.minWidth')\"\n                />\n                {% endblock %}\n            </sw-container>\n            {% endblock %}\n        </template>\n    </sw-tabs>\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-cms-el-config-cross-selling.html.twig';\nimport './sw-cms-el-config-cross-selling.scss';\n\nconst { Mixin } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n/**\n * @private\n * @package discovery\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['repositoryFactory'],\n\n    emits: ['element-update'],\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    computed: {\n        productRepository() {\n            return this.repositoryFactory.create('product');\n        },\n\n        productSelectContext() {\n            return {\n                ...Cicada.Context.api,\n                inheritance: true,\n            };\n        },\n\n        productCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('options.group');\n\n            return criteria;\n        },\n\n        selectedProductCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('crossSellings.assignedProducts.product');\n\n            return criteria;\n        },\n\n        isProductPageType() {\n            return this.cmsPageState?.currentPage?.type === 'product_detail';\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('cross-selling');\n        },\n\n        async onProductChange(productId) {\n            if (productId) {\n                await this.fetchProduct(productId);\n            } else {\n                this.deleteProduct();\n            }\n\n            this.$emit('element-update', this.element);\n        },\n\n        async fetchProduct(productId) {\n            const product = await this.productRepository.get(\n                productId,\n                this.productSelectContext,\n                this.selectedProductCriteria,\n            );\n            this.element.config.product.value = productId;\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                this.$set(this.element.data, 'product', product);\n            } else {\n                this.element.data.product = product;\n            }\n        },\n\n        deleteProduct() {\n            this.element.config.product.value = null;\n\n            if (this.isCompatEnabled('INSTANCE_SET')) {\n                this.$set(this.element.data, 'product', null);\n            } else {\n                this.element.data.product = null;\n            }\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","criteria","_a","_b","productId","product"],"mappings":"AAAA,MAAeA,EAAA,+oICGT,CAAE,MAAAC,CAAO,EAAG,OACZ,CAAE,SAAAC,CAAQ,EAAK,OAAO,KAMbC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,gBAAgB,EAExB,OAAQ,CACJC,EAAM,UAAU,aAAa,CAChC,EAED,SAAU,CACN,mBAAoB,CAChB,OAAO,KAAK,kBAAkB,OAAO,SAAS,CACjD,EAED,sBAAuB,CACnB,MAAO,CACH,GAAG,OAAO,QAAQ,IAClB,YAAa,EAC7B,CACS,EAED,iBAAkB,CACd,MAAMG,EAAW,IAAIF,EAAS,EAAG,EAAE,EACnC,OAAAE,EAAS,eAAe,eAAe,EAEhCA,CACV,EAED,yBAA0B,CACtB,MAAMA,EAAW,IAAIF,EAAS,EAAG,EAAE,EACnC,OAAAE,EAAS,eAAe,wCAAwC,EAEzDA,CACV,EAED,mBAAoB,CDjD5B,IAAAC,EAAAC,ECkDY,QAAOA,GAAAD,EAAA,KAAK,eAAL,YAAAA,EAAmB,cAAnB,YAAAC,EAAgC,QAAS,gBACnD,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAkB,eAAe,CACzC,EAED,MAAM,gBAAgBC,EAAW,CACzBA,EACA,MAAM,KAAK,aAAaA,CAAS,EAEjC,KAAK,cAAa,EAGtB,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,EAED,MAAM,aAAaA,EAAW,CAC1B,MAAMC,EAAU,MAAM,KAAK,kBAAkB,IACzCD,EACA,KAAK,qBACL,KAAK,uBACrB,EACY,KAAK,QAAQ,OAAO,QAAQ,MAAQA,EAEhC,KAAK,gBAAgB,cAAc,EACnC,KAAK,KAAK,KAAK,QAAQ,KAAM,UAAWC,CAAO,EAE/C,KAAK,QAAQ,KAAK,QAAUA,CAEnC,EAED,eAAgB,CACZ,KAAK,QAAQ,OAAO,QAAQ,MAAQ,KAEhC,KAAK,gBAAgB,cAAc,EACnC,KAAK,KAAK,KAAK,QAAQ,KAAM,UAAW,IAAI,EAE5C,KAAK,QAAQ,KAAK,QAAU,IAEnC,CACJ,CACL"}
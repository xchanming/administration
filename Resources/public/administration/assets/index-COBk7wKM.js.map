{"version":3,"file":"index-COBk7wKM.js","sources":["../../../app/administration/src/module/sw-cms/elements/image/component/sw-cms-el-image.html.twig","../../../app/administration/src/module/sw-cms/elements/image/component/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_element_image %}\n<div\n    class=\"sw-cms-el-image\"\n    :style=\"horizontalAlign\"\n>\n    <div\n        class=\"sw-cms-el-image__content\"\n        :class=\"displayModeClass\"\n        :style=\"styles\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_image_content %}\n        <img\n            :src=\"mediaUrl\"\n            :style=\"imgStyles\"\n            alt=\"\"\n        >\n        {% endblock %}\n    </div>\n</div>\n{% endblock %}\n","import CMS from '../../../constant/sw-cms.constant';\nimport template from './sw-cms-el-image.html.twig';\nimport './sw-cms-el-image.scss';\n\nconst { Mixin, Filter } = Cicada;\n\n/**\n * @private\n * @package discovery\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['feature'],\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    computed: {\n        displayModeClass() {\n            if (this.element.config.displayMode.value === 'standard') {\n                return null;\n            }\n\n            return `is--${this.element.config.displayMode.value}`;\n        },\n\n        styles() {\n            return {\n                'min-height':\n                    this.element.config.displayMode.value === 'cover' &&\n                    this.element.config.minHeight.value &&\n                    this.element.config.minHeight.value !== 0\n                        ? this.element.config.minHeight.value\n                        : '340px',\n            };\n        },\n\n        imgStyles() {\n            return {\n                'align-self': this.element.config.verticalAlign.value || null,\n            };\n        },\n\n        horizontalAlign() {\n            return {\n                'justify-content': this.element.config.horizontalAlign?.value || null,\n            };\n        },\n\n        mediaUrl() {\n            const fallBackImageFileName = CMS.MEDIA.previewMountain.slice(CMS.MEDIA.previewMountain.lastIndexOf('/') + 1);\n            const staticFallBackImage = this.assetFilter(`administration/static/img/cms/${fallBackImageFileName}`);\n            const elemData = this.element.data.media;\n            const elemConfig = this.element.config.media;\n\n            if (elemConfig.source === 'mapped') {\n                const demoMedia = this.getDemoValue(elemConfig.value);\n\n                if (demoMedia?.url) {\n                    return demoMedia.url;\n                }\n\n                return staticFallBackImage;\n            }\n\n            if (elemConfig.source === 'default') {\n                // use only the filename\n                const fileName = elemConfig.value?.slice(elemConfig.value.lastIndexOf('/') + 1) ?? '';\n                return this.assetFilter(`/administration/static/img/cms/${fileName}`);\n            }\n\n            if (elemData?.id) {\n                return this.element.data.media.url;\n            }\n\n            if (elemData?.url) {\n                return this.assetFilter(elemConfig.url);\n            }\n\n            return staticFallBackImage;\n        },\n\n        assetFilter() {\n            return Filter.getByName('asset');\n        },\n\n        mediaConfigValue() {\n            return this.element?.config?.media?.value;\n        },\n    },\n\n    watch: {\n        'cmsPageState.currentDemoEntity': {\n            handler() {\n                this.updateDemoValue(this.mediaConfigValue);\n            },\n        },\n\n        mediaConfigValue(value) {\n            this.updateDemoValue(value);\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('image');\n            this.initElementData('image');\n        },\n\n        updateDemoValue(value) {\n            const mediaId = this.element?.data?.media?.id;\n            const isSourceStatic = this.element?.config?.media?.source === 'static';\n\n            if (isSourceStatic && mediaId && value !== mediaId) {\n                this.element.config.media.value = mediaId;\n            }\n        },\n    },\n};\n"],"names":["template","Mixin","Filter","index","_a","fallBackImageFileName","CMS","staticFallBackImage","elemData","elemConfig","demoMedia","fileName","_c","_b","value","mediaId","_f","_e","_d"],"mappings":"mLAAA,MAAeA,EAAA,mTCIT,CAAE,MAAAC,EAAO,OAAAC,CAAQ,EAAG,OAMXC,EAAA,CACX,SAAAH,EAEA,aAAc,OAAO,aAErB,OAAQ,CAAC,SAAS,EAElB,OAAQ,CACJC,EAAM,UAAU,aAAa,CAChC,EAED,SAAU,CACN,kBAAmB,CACf,OAAI,KAAK,QAAQ,OAAO,YAAY,QAAU,WACnC,KAGJ,OAAO,KAAK,QAAQ,OAAO,YAAY,KAAK,EACtD,EAED,QAAS,CACL,MAAO,CACH,aACI,KAAK,QAAQ,OAAO,YAAY,QAAU,SAC1C,KAAK,QAAQ,OAAO,UAAU,OAC9B,KAAK,QAAQ,OAAO,UAAU,QAAU,EAClC,KAAK,QAAQ,OAAO,UAAU,MAC9B,OAC1B,CACS,EAED,WAAY,CACR,MAAO,CACH,aAAc,KAAK,QAAQ,OAAO,cAAc,OAAS,IACzE,CACS,EAED,iBAAkB,OACd,MAAO,CACH,oBAAmBG,EAAA,KAAK,QAAQ,OAAO,kBAApB,YAAAA,EAAqC,QAAS,IACjF,CACS,EAED,UAAW,OACP,MAAMC,EAAwBC,EAAI,MAAM,gBAAgB,MAAMA,EAAI,MAAM,gBAAgB,YAAY,GAAG,EAAI,CAAC,EACtGC,EAAsB,KAAK,YAAY,iCAAiCF,CAAqB,EAAE,EAC/FG,EAAW,KAAK,QAAQ,KAAK,MAC7BC,EAAa,KAAK,QAAQ,OAAO,MAEvC,GAAIA,EAAW,SAAW,SAAU,CAChC,MAAMC,EAAY,KAAK,aAAaD,EAAW,KAAK,EAEpD,OAAIC,GAAA,MAAAA,EAAW,IACJA,EAAU,IAGdH,CACV,CAED,GAAIE,EAAW,SAAW,UAAW,CAEjC,MAAME,IAAWP,EAAAK,EAAW,QAAX,YAAAL,EAAkB,MAAMK,EAAW,MAAM,YAAY,GAAG,EAAI,KAAM,GACnF,OAAO,KAAK,YAAY,kCAAkCE,CAAQ,EAAE,CACvE,CAED,OAAIH,GAAA,MAAAA,EAAU,GACH,KAAK,QAAQ,KAAK,MAAM,IAG/BA,GAAA,MAAAA,EAAU,IACH,KAAK,YAAYC,EAAW,GAAG,EAGnCF,CACV,EAED,aAAc,CACV,OAAOL,EAAO,UAAU,OAAO,CAClC,EAED,kBAAmB,WACf,OAAOU,GAAAC,GAAAT,EAAA,KAAK,UAAL,YAAAA,EAAc,SAAd,YAAAS,EAAsB,QAAtB,YAAAD,EAA6B,KACvC,CACJ,EAED,MAAO,CACH,iCAAkC,CAC9B,SAAU,CACN,KAAK,gBAAgB,KAAK,gBAAgB,CAC7C,CACJ,EAED,iBAAiBE,EAAO,CACpB,KAAK,gBAAgBA,CAAK,CAC7B,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAkB,OAAO,EAC9B,KAAK,gBAAgB,OAAO,CAC/B,EAED,gBAAgBA,EAAO,iBACnB,MAAMC,GAAUH,GAAAC,GAAAT,EAAA,KAAK,UAAL,YAAAA,EAAc,OAAd,YAAAS,EAAoB,QAApB,YAAAD,EAA2B,KACpBI,GAAAC,GAAAC,EAAA,KAAK,UAAL,YAAAA,EAAc,SAAd,YAAAD,EAAsB,QAAtB,YAAAD,EAA6B,UAAW,UAEzCD,GAAWD,IAAUC,IACvC,KAAK,QAAQ,OAAO,MAAM,MAAQA,EAEzC,CACJ,CACL"}
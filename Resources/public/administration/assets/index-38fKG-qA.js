const n=`{% block sw_seo_main_category %} <div class="sw-seo-main-category"> {% block sw_seo_main_category_select %} <sw-single-select :options="categories" label-property="translated.name" value-property="id" show-clearable-button :placeholder="$tc('sw-seo-url.placeholderMainCategory')" :label="overwriteLabel ? undefined : $tc('sw-seo-url.labelMainCategory')" :value="selectedCategory" :disabled="currentSalesChannelId === null || !allowEdit" @update:value="onMainCategorySelected" /> {% endblock %} </div> {% endblock %}`,l={template:n,inject:["repositoryFactory"],emits:["main-category-add"],props:{currentSalesChannelId:{type:String,required:!1,default:null},categories:{type:Array,required:!0},mainCategories:{type:Array,required:!0},isLoading:{type:Boolean,required:!1,default:!1},allowEdit:{type:Boolean,required:!1,default:!0},overwriteLabel:{type:Boolean,required:!1,default:!1}},data(){return{mainCategoryForSalesChannel:null}},computed:{mainCategoryRepository(){return this.repositoryFactory.create("main_category")},isHeadlessSalesChannel(){if(Shopware.Store.get("swSeoUrl").salesChannelCollection===null)return!0;const a=Shopware.Store.get("swSeoUrl").salesChannelCollection.find(e=>e.id===this.currentSalesChannelId);return this.currentSalesChannelId!==null&&a.typeId==="f183ee5650cf4bdb8a774337575067a6"},selectedCategory(){return this.mainCategoryForSalesChannel!==null?this.mainCategoryForSalesChannel.categoryId:null}},watch:{currentSalesChannelId(){this.refreshMainCategoryForSalesChannel()},mainCategories(){this.refreshMainCategoryForSalesChannel()}},created(){this.createdComponent()},methods:{createdComponent(){this.refreshMainCategoryForSalesChannel()},onMainCategorySelected(a){if(a===null)return;const e=this.categories.find(t=>t.id===a);if(this.mainCategoryForSalesChannel!==null){this.mainCategoryForSalesChannel.category=e,this.mainCategoryForSalesChannel.categoryId=e.id;return}const r=this.mainCategoryRepository.create();r.salesChannelId=this.currentSalesChannelId,r.category=e,r.categoryId=e.id,this.$emit("main-category-add",r),this.refreshMainCategoryForSalesChannel()},refreshMainCategoryForSalesChannel(){const a=this.mainCategories.find(e=>e.salesChannelId===this.currentSalesChannelId);if(a===void 0){this.mainCategoryForSalesChannel=null;return}this.mainCategoryForSalesChannel=a}}};export{l as default};

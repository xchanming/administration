{"version":3,"file":"index-DNLOX3dO.js","sources":["../../../app/administration/src/module/sw-first-run-wizard/component/sw-first-run-wizard-modal/sw-first-run-wizard-modal.html.twig","../../../app/administration/src/module/sw-first-run-wizard/component/sw-first-run-wizard-modal/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_first_run_wizard_modal %}\n<sw-modal\n    :title=\"title\"\n    :variant=\"variant\"\n    :closable=\"isClosable\"\n    class=\"sw-first-run-wizard-modal\"\n    @modal-close=\"closeModal\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_first_run_wizard_modal_content %}\n    <div class=\"sw-first-run-wizard-modal-content\">\n        <sw-container\n            :class=\"{'one': !showSteps, 'two': showSteps}\"\n            class=\"sw-first-run-wizard-modal-content__columns\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_first_run_wizard_modal_content_steps %}\n            <div\n                v-if=\"showSteps\"\n                class=\"sw-first-run-wizard-modal-content__steps\"\n            >\n                <sw-step-display\n                    :item-index=\"stepIndex\"\n                    :item-variant=\"stepVariant\"\n                    :initial-item-variants=\"stepInitialItemVariants\"\n                >\n                    <sw-step-item v-if=\"!extensionManagementDisabled\">\n                        {{ $tc('sw-first-run-wizard.stepItemTitle.dataImport') }}\n                    </sw-step-item>\n                    <sw-step-item>\n                        {{ $tc('sw-first-run-wizard.stepItemTitle.defaults') }}\n                    </sw-step-item>\n                    <sw-step-item>\n                        {{ $tc('sw-first-run-wizard.stepItemTitle.mailer') }}\n                    </sw-step-item>\n                    <sw-step-item v-if=\"!extensionManagementDisabled\">\n                        {{ $tc('sw-first-run-wizard.stepItemTitle.setupPaypal') }}\n                    </sw-step-item>\n                    <sw-step-item v-if=\"!extensionManagementDisabled\">\n                        {{ $tc('sw-first-run-wizard.stepItemTitle.plugins') }}\n                    </sw-step-item>\n                    <sw-step-item>\n                        {{ $tc('sw-first-run-wizard.stepItemTitle.cicada') }}\n                    </sw-step-item>\n                    <sw-step-item v-if=\"!extensionManagementDisabled\">\n                        {{ $tc('sw-first-run-wizard.stepItemTitle.store') }}\n                    </sw-step-item>\n                </sw-step-display>\n            </div>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_first_run_wizard_modal_content_page %}\n            <div class=\"sw-first-run-wizard-modal-content__page\">\n                <router-view\n                    v-slot=\"{ Component }\"\n                >\n                    <component\n                        :is=\"Component\"\n                        v-if=\"Component\"\n                        class=\"sw-first-run-wizard-modal__component\"\n                        @buttons-update=\"updateButtons\"\n                        @frw-redirect=\"redirect\"\n                        @frw-set-title=\"setTitle\"\n                        @frw-finish=\"finishFRW\"\n                        @extension-activated=\"onExtensionActivated\"\n                    />\n                </router-view>\n            </div>\n            {% endblock %}\n\n            <sw-loader\n                v-if=\"showLoader\"\n                class=\"sw-first-run-wizard-modal__loader\"\n            />\n        </sw-container>\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_first_run_wizard_modal_footer %}\n    <template #modal-footer>\n        <div class=\"sw-first-run-wizard-modal__footer\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_first_run_wizard_modal_footer_left %}\n            <div class=\"footer-left\">\n                <sw-button\n                    v-for=\"button in buttons.left\"\n                    :key=\"button.action\"\n                    :variant=\"button.variant\"\n                    :disabled=\"button.disabled\"\n                    size=\"small\"\n                    @click=\"onButtonClick(button.action)\"\n                >\n                    {{ button.label }}\n                </sw-button>\n            </div>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_first_run_wizard_modal_footer_right %}\n            <div class=\"footer-right\">\n                <sw-button\n                    v-for=\"button in buttons.right\"\n                    :key=\"button.action\"\n                    :variant=\"button.variant\"\n                    :disabled=\"button.disabled\"\n                    size=\"small\"\n                    @click=\"onButtonClick(button.action)\"\n                >\n                    {{ button.label }}\n                </sw-button>\n            </div>\n            {% endblock %}\n        </div>\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n","import template from './sw-first-run-wizard-modal.html.twig';\nimport './sw-first-run-wizard-modal.scss';\n\n/**\n * @package checkout\n * @private\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['firstRunWizardService'],\n\n    data() {\n        return {\n            title: 'No title defined',\n            buttonConfig: [],\n            showLoader: false,\n            wasNewExtensionActivated: false,\n            stepVariant: 'info',\n            currentStep: {\n                name: '',\n                variant: 'large',\n                navigationIndex: 0,\n            },\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.title,\n        };\n    },\n\n    computed: {\n        columns() {\n            return this.showSteps ? '1fr 4fr' : '1fr';\n        },\n\n        variant() {\n            const { variant } = this.currentStep;\n\n            return variant;\n        },\n\n        showSteps() {\n            const { navigationIndex } = this.currentStep;\n\n            return navigationIndex !== 0;\n        },\n\n        buttons() {\n            return {\n                right: this.buttonConfig.filter((button) => button.position === 'right'),\n                left: this.buttonConfig.filter((button) => button.position === 'left'),\n            };\n        },\n\n        stepIndex() {\n            const { navigationIndex } = this.currentStep;\n\n            if (navigationIndex < 1) {\n                return 0;\n            }\n\n            return navigationIndex - 1;\n        },\n\n        stepInitialItemVariants() {\n            const { navigationIndex } = this.currentStep;\n            const maxIndex = Object.values(this.stepper).reduce(\n                (accumulator, step) => Math.max(accumulator, step.navigationIndex),\n                0,\n            );\n\n            const currentSteps = Array(maxIndex + 1).fill('disabled');\n            currentSteps.every((step, index) => {\n                if (index > navigationIndex) {\n                    return false;\n                }\n\n                currentSteps[index] = 'info';\n\n                if (index > 0) {\n                    currentSteps[index - 1] = 'success';\n                }\n\n                return true;\n            });\n            currentSteps.splice(0, 1);\n\n            return currentSteps;\n        },\n\n        extensionManagementDisabled() {\n            return Cicada.State.get('context').app.config.settings.disableExtensionManagement;\n        },\n\n        isClosable() {\n            return !Cicada.Context.app.firstRunWizard;\n        },\n\n        stepper() {\n            if (Cicada.State.get('context').app.config.settings.disableExtensionManagement) {\n                return {\n                    welcome: {\n                        name: 'sw.first.run.wizard.index.welcome',\n                        variant: 'large',\n                        navigationIndex: 0,\n                    },\n                    defaults: {\n                        name: 'sw.first.run.wizard.index.defaults',\n                        variant: 'large',\n                        navigationIndex: 1,\n                    },\n                    'mailer.selection': {\n                        name: 'sw.first.run.wizard.index.mailer.selection',\n                        variant: 'large',\n                        navigationIndex: 2,\n                    },\n                    'mailer.smtp': {\n                        name: 'sw.first.run.wizard.index.mailer.smtp',\n                        variant: 'large',\n                        navigationIndex: 2,\n                    },\n                    'mailer.local': {\n                        name: 'sw.first.run.wizard.index.mailer.local',\n                        variant: 'large',\n                        navigationIndex: 2,\n                    },\n                    'cicada.account': {\n                        name: 'sw.first.run.wizard.index.cicada.account',\n                        variant: 'large',\n                        navigationIndex: 3,\n                    },\n                    'cicada.domain': {\n                        name: 'sw.first.run.wizard.index.cicada.domain',\n                        variant: 'large',\n                        navigationIndex: 3,\n                    },\n                    finish: {\n                        name: 'sw.first.run.wizard.index.finish',\n                        variant: 'large',\n                        navigationIndex: 4,\n                    },\n                };\n            }\n\n            return {\n                welcome: {\n                    name: 'sw.first.run.wizard.index.welcome',\n                    variant: 'large',\n                    navigationIndex: 0,\n                },\n                'data-import': {\n                    name: 'sw.first.run.wizard.index.data-import',\n                    variant: 'large',\n                    navigationIndex: 1,\n                },\n                defaults: {\n                    name: 'sw.first.run.wizard.index.defaults',\n                    variant: 'large',\n                    navigationIndex: 2,\n                },\n                'mailer.selection': {\n                    name: 'sw.first.run.wizard.index.mailer.selection',\n                    variant: 'large',\n                    navigationIndex: 3,\n                },\n                'mailer.smtp': {\n                    name: 'sw.first.run.wizard.index.mailer.smtp',\n                    variant: 'large',\n                    navigationIndex: 3,\n                },\n                'mailer.local': {\n                    name: 'sw.first.run.wizard.index.mailer.local',\n                    variant: 'large',\n                    navigationIndex: 3,\n                },\n                'paypal.info': {\n                    name: 'sw.first.run.wizard.index.paypal.info',\n                    variant: 'large',\n                    navigationIndex: 4,\n                },\n                'paypal.credentials': {\n                    name: 'sw.first.run.wizard.index.paypal.credentials',\n                    variant: 'large',\n                    navigationIndex: 4,\n                },\n                plugins: {\n                    name: 'sw.first.run.wizard.index.plugins',\n                    variant: 'large',\n                    navigationIndex: 5,\n                },\n                'cicada.account': {\n                    name: 'sw.first.run.wizard.index.cicada.account',\n                    variant: 'large',\n                    navigationIndex: 6,\n                },\n                'cicada.domain': {\n                    name: 'sw.first.run.wizard.index.cicada.domain',\n                    variant: 'large',\n                    navigationIndex: 6,\n                },\n                store: {\n                    name: 'sw.first.run.wizard.index.store',\n                    variant: 'large',\n                    navigationIndex: 7,\n                },\n                finish: {\n                    name: 'sw.first.run.wizard.index.finish',\n                    variant: 'large',\n                    navigationIndex: 8,\n                },\n            };\n        },\n    },\n\n    watch: {\n        $route(to) {\n            this.handleRouteUpdate(to);\n        },\n    },\n\n    mounted() {\n        const step = this.$route.name.replace('sw.first.run.wizard.index.', '');\n\n        this.currentStep = this.stepper[step];\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        handleRouteUpdate(to) {\n            const toName = to.name.replace('sw.first.run.wizard.index.', '');\n\n            this.currentStep = this.stepper[toName];\n        },\n\n        createdComponent() {\n            this.firstRunWizardService.setFRWStart();\n        },\n\n        updateButtons(buttonConfig) {\n            this.buttonConfig = buttonConfig;\n        },\n\n        onButtonClick(action) {\n            if (typeof action === 'string') {\n                this.redirect(action);\n                return;\n            }\n\n            if (typeof action !== 'function') {\n                return;\n            }\n\n            action.call();\n        },\n\n        redirect(routeName) {\n            this.$router.push({ name: routeName });\n        },\n\n        setTitle(title) {\n            this.title = title;\n        },\n\n        finishFRW() {\n            this.firstRunWizardService.setFRWFinish().then(() => {\n                document.location.href = document.location.origin + document.location.pathname;\n            });\n        },\n\n        onExtensionActivated() {\n            this.wasNewExtensionActivated = true;\n        },\n\n        async closeModal() {\n            if (!this.isClosable) {\n                return;\n            }\n\n            this.showLoader = true;\n\n            await this.$nextTick();\n\n            await this.$router.push({ name: 'sw.settings.index.system' });\n\n            // reload page when new extension was activated and modal is closed\n            if (this.wasNewExtensionActivated) {\n                window.location.reload();\n            }\n        },\n    },\n};\n"],"names":["template","index","variant","navigationIndex","button","maxIndex","accumulator","step","currentSteps","to","toName","buttonConfig","action","routeName","title"],"mappings":"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"}
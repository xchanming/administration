{"version":3,"file":"update.api.service-CJ077t7i.js","sources":["../../../app/administration/src/core/service/api/update.api.service.js"],"sourcesContent":["/**\n * @package admin\n * @private\n */\n\nconst ApiService = Cicada.Classes.ApiService;\n\n/**\n * Gateway for the API end point \"update\"\n * @class\n * @extends ApiService\n * @package services-settings\n */\nclass UpdateService extends ApiService {\n    constructor(httpClient, loginService, apiEndpoint = 'update') {\n        super(httpClient, loginService, apiEndpoint);\n        this.name = 'updateService';\n    }\n\n    checkForUpdates() {\n        const headers = this.getBasicHeaders();\n\n        return this.httpClient.get(`/_action/${this.getApiBasePath()}/check`, { headers }).then((response) => {\n            return ApiService.handleResponse(response);\n        });\n    }\n\n    checkRequirements() {\n        const headers = this.getBasicHeaders();\n\n        return this.httpClient\n            .get(`/_action/${this.getApiBasePath()}/check-requirements`, {\n                headers,\n            })\n            .then((response) => {\n                return ApiService.handleResponse(response);\n            });\n    }\n\n    extensionCompatibility() {\n        const headers = this.getBasicHeaders();\n        const params = this.getBasicParams();\n\n        return this.httpClient\n            .get(`/_action/${this.getApiBasePath()}/extension-compatibility`, {\n                params,\n                headers,\n            })\n            .then((response) => {\n                return ApiService.handleResponse(response);\n            });\n    }\n\n    downloadRecovery() {\n        const headers = this.getBasicHeaders();\n\n        return this.httpClient\n            .get(`/_action/${this.getApiBasePath()}/download-recovery`, {\n                headers,\n            })\n            .then((response) => {\n                return ApiService.handleResponse(response);\n            });\n    }\n\n    deactivatePlugins(offset, pluginDeactivationStrategy = '') {\n        const headers = this.getBasicHeaders();\n        const actionUrlPart = `/_action/${this.getApiBasePath()}`;\n        const offsetParam = `offset=${offset}&deactivationFilter=${pluginDeactivationStrategy}`;\n\n        return this.httpClient\n            .get(`${actionUrlPart}/deactivate-plugins?${offsetParam}`, {\n                headers,\n            })\n            .then((response) => {\n                return ApiService.handleResponse(response);\n            });\n    }\n\n    getBasicParams(additionalParams = {}) {\n        const basicParams = {\n            language: localStorage.getItem('sw-admin-locale'),\n        };\n\n        return { ...basicParams, ...additionalParams };\n    }\n}\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default UpdateService;\n"],"names":["ApiService","UpdateService","httpClient","loginService","apiEndpoint","headers","response","params","offset","pluginDeactivationStrategy","actionUrlPart","offsetParam","additionalParams"],"mappings":"AAKA,MAAMA,EAAa,OAAO,QAAQ,WAQlC,MAAMC,UAAsBD,CAAW,CACnC,YAAYE,EAAYC,EAAcC,EAAc,SAAU,CAC1D,MAAMF,EAAYC,EAAcC,CAAW,EAC3C,KAAK,KAAO,eACf,CAED,iBAAkB,CACd,MAAMC,EAAU,KAAK,kBAErB,OAAO,KAAK,WAAW,IAAI,YAAY,KAAK,eAAgB,CAAA,SAAU,CAAE,QAAAA,CAAO,CAAE,EAAE,KAAMC,GAC9EN,EAAW,eAAeM,CAAQ,CAC5C,CACJ,CAED,mBAAoB,CAChB,MAAMD,EAAU,KAAK,kBAErB,OAAO,KAAK,WACP,IAAI,YAAY,KAAK,eAAgB,CAAA,sBAAuB,CACzD,QAAAA,CAChB,CAAa,EACA,KAAMC,GACIN,EAAW,eAAeM,CAAQ,CAC5C,CACR,CAED,wBAAyB,CACrB,MAAMD,EAAU,KAAK,kBACfE,EAAS,KAAK,iBAEpB,OAAO,KAAK,WACP,IAAI,YAAY,KAAK,eAAgB,CAAA,2BAA4B,CAC9D,OAAAA,EACA,QAAAF,CAChB,CAAa,EACA,KAAMC,GACIN,EAAW,eAAeM,CAAQ,CAC5C,CACR,CAED,kBAAmB,CACf,MAAMD,EAAU,KAAK,kBAErB,OAAO,KAAK,WACP,IAAI,YAAY,KAAK,eAAgB,CAAA,qBAAsB,CACxD,QAAAA,CAChB,CAAa,EACA,KAAMC,GACIN,EAAW,eAAeM,CAAQ,CAC5C,CACR,CAED,kBAAkBE,EAAQC,EAA6B,GAAI,CACvD,MAAMJ,EAAU,KAAK,kBACfK,EAAgB,YAAY,KAAK,eAAc,CAAE,GACjDC,EAAc,UAAUH,CAAM,uBAAuBC,CAA0B,GAErF,OAAO,KAAK,WACP,IAAI,GAAGC,CAAa,uBAAuBC,CAAW,GAAI,CACvD,QAAAN,CAChB,CAAa,EACA,KAAMC,GACIN,EAAW,eAAeM,CAAQ,CAC5C,CACR,CAED,eAAeM,EAAmB,GAAI,CAKlC,MAAO,CAAE,GAJW,CAChB,SAAU,aAAa,QAAQ,iBAAiB,CAC5D,EAEiC,GAAGA,EAC/B,CACL"}
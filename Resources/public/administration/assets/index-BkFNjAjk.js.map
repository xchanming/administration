{"version":3,"file":"index-BkFNjAjk.js","sources":["../../../app/administration/src/app/component/utils/sw-inherit-wrapper/sw-inherit-wrapper.html.twig","../../../app/administration/src/app/component/utils/sw-inherit-wrapper/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_inherit_wrapper %}\n<div\n    class=\"sw-inherit-wrapper\"\n    :class=\"{ 'is--inherited': isInherited, 'is--required': required, 'has--parent' : hasParent }\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_inherit_wrapper_toggle %}\n    <template v-if=\"label\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_inherit_wrapper_toggle_wrapper %}\n        <div class=\"sw-inherit-wrapper__toggle-wrapper\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_inherit_wrapper_toggle_wrapper_field %}\n            <sw-inheritance-switch\n                v-if=\"isInheritField\"\n                :disabled=\"disabled\"\n                class=\"sw-inherit-wrapper__inheritance-icon\"\n                :is-inherited=\"isInherited\"\n                @inheritance-restore=\"restoreInheritance\"\n                @inheritance-remove=\"removeInheritance\"\n            />\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_inherit_wrapper_toggle_wrapper_label %}\n            <!-- eslint-disable-next-line vuejs-accessibility/label-has-for -->\n            <label\n                class=\"sw-inherit-wrapper__inheritance-label\"\n                :class=\"labelClasses\"\n            >\n                {{ label }}\n            </label>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_inherit_wrapper_toggle_wrapper_help_text %}\n            <sw-help-text\n                v-if=\"helpText\"\n                class=\"sw-inherit-wrapper__help-text\"\n                :text=\"helpText\"\n            />\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_inherit_wrapper_content %}\n    <slot\n        name=\"content\"\n        v-bind=\"{ currentValue, updateCurrentValue, isInherited, isInheritField, toggleInheritance, restoreInheritance, removeInheritance, error, label }\"\n    ></slot>\n    {% endblock %}\n</div>\n{% endblock %}\n","import './sw-inherit-wrapper.scss';\nimport template from './sw-inherit-wrapper.html.twig';\n\nconst { Component } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n * @description Wrapper for inherited data with toggle\n * @status ready\n * @example-type dynamic\n * @component-example\n * <sw-inherit-wrapper\n *     v-model=\"entity.value\"\n *     :inheritedValue=\"inheritedEntity.value\"\n *     :customInheritationCheckFunction=\"function(value) => {return true;}\"\n *     :customRestoreFunction=\"function(value) => {return null;}\"\n *     :customRemoveInheritanceFunction=\"function(value) => {return null;}\"\n *     :disabled=\"false\"\n *     label=\"Your label\"\n *     :isAssociation=\"false\"\n *     :hasParent=\"false\"\n *     :required=\"true\">\n *\n *     <template #content=\"{\n *          currentValue,\n *          updateCurrentValue,\n *          isInherited,\n *          isInheritField,\n *          toggleInheritance,\n *          restoreInheritance,\n *          removeInheritance\n *      }\"><!-- Your Content --></template>\n *\n * </sw-inherit-wrapper>\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nComponent.register('sw-inherit-wrapper', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: ['feature'],\n\n    emits: [\n        'update:value',\n        'inheritance-restore',\n        'inheritance-remove',\n    ],\n\n    props: {\n        // eslint-disable-next-line vue/require-prop-types\n        value: {\n            required: true,\n        },\n\n        // eslint-disable-next-line vue/require-prop-types\n        inheritedValue: {\n            required: true,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        label: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        required: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        isAssociation: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n\n        hasParent: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: undefined,\n        },\n\n        // custom inheritation check which returns true or false\n        customInheritationCheckFunction: {\n            type: Function,\n            required: false,\n            default: null,\n        },\n\n        // custom reset inheritance function\n        customRestoreInheritanceFunction: {\n            type: Function,\n            required: false,\n            default: null,\n        },\n\n        // custom remove inheritance function\n        customRemoveInheritanceFunction: {\n            type: Function,\n            required: false,\n            default: null,\n        },\n\n        helpText: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        error: {\n            type: Object,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            forceInheritanceRemove: false,\n        };\n    },\n\n    computed: {\n        currentValue: {\n            get() {\n                return this.isInherited ? this.inheritedValue : this.value;\n            },\n\n            set(newValue) {\n                if (this.isInherited && newValue === this.inheritedValue) {\n                    return;\n                }\n\n                if (!this.isInherited && newValue !== this.inheritedValue) {\n                    this.updateValue(newValue, 'restore');\n                    return;\n                }\n\n                this.removeInheritance(newValue);\n            },\n        },\n\n        isInheritField() {\n            // manual check if parent exists\n            if (this.hasParent !== undefined) {\n                return this.hasParent;\n            }\n\n            // automatic check if parent for inheritation exists\n            return !(this.inheritedValue === null || typeof this.inheritedValue === 'undefined');\n        },\n\n        isInherited() {\n            // if parent does not exist or has data or inheritance removing was forced\n            if (!this.isInheritField || this.forceInheritanceRemove) {\n                return false;\n            }\n\n            // if customInheritationCheckFunction exists\n            if (typeof this.customInheritationCheckFunction === 'function') {\n                return this.customInheritationCheckFunction(this.value);\n            }\n\n            // if association or array\n            if ((this.isAssociation || Array.isArray(this.value)) && this.value) {\n                return this.value.length <= 0;\n            }\n\n            return this.value === null || this.value === undefined;\n        },\n\n        labelClasses() {\n            return {\n                'has--error': !!this.error,\n            };\n        },\n    },\n\n    methods: {\n        updateCurrentValue(value) {\n            this.currentValue = value;\n        },\n\n        updateValue(value, inheritanceEventName) {\n            this.$emit('update:value', value);\n            this.$emit(`inheritance-${inheritanceEventName}`);\n        },\n\n        toggleInheritance() {\n            if (this.isInherited) {\n                this.removeInheritance();\n            } else {\n                this.restoreInheritance();\n            }\n        },\n\n        restoreInheritance() {\n            this.forceInheritanceRemove = false;\n\n            // if customRestoreInheritanceFunction exists\n            if (typeof this.customRestoreInheritanceFunction === 'function') {\n                this.updateValue(this.customRestoreInheritanceFunction(this.value), 'restore');\n                return;\n            }\n\n            // if association\n            if (this.isAssociation) {\n                // remove all items from value\n                this.value.getIds().forEach((id) => {\n                    this.value.remove(id);\n                });\n\n                // return new value\n                this.updateValue(this.value, 'restore');\n                return;\n            }\n\n            this.$emit('update:value', null);\n        },\n\n        removeInheritance(newValue = this.currentValue) {\n            // if customRemoveInheritanceFunction exists\n            if (typeof this.customRemoveInheritanceFunction === 'function') {\n                this.updateValue(this.customRemoveInheritanceFunction(newValue, this.value), 'remove');\n                return;\n            }\n\n            // if association\n            if (this.isAssociation && newValue && this.value) {\n                // remove all items\n                this.restoreInheritance();\n\n                if (newValue.length <= 0) {\n                    this.forceInheritanceRemove = true;\n                }\n\n                // add each item from the parentValue to the original value\n                newValue.forEach((item) => {\n                    this.value.add(item);\n                });\n\n                this.updateValue(this.value, 'remove');\n                return;\n            }\n\n            if (!newValue || (Array.isArray(newValue) && newValue.length <= 0)) {\n                this.forceInheritanceRemove = true;\n            }\n\n            this.$emit('update:value', newValue);\n        },\n    },\n});\n"],"names":["template","Component","newValue","value","inheritanceEventName","id","item"],"mappings":"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"}
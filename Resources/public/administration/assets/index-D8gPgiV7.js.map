{"version":3,"file":"index-D8gPgiV7.js","sources":["../../../app/administration/src/module/sw-cms/elements/image-gallery/component/sw-cms-el-image-gallery.html.twig","../../../app/administration/src/module/sw-cms/elements/image-gallery/component/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_cms_element_image_gallery %}\n<div\n    class=\"sw-cms-el-image-gallery\"\n    :class=\"[galleryPositionClass, currentDeviceViewClass]\"\n    :style=\"verticalAlignStyle\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_image_gallery_grid %}\n    <div\n        ref=\"galleryItemHolder\"\n        class=\"sw-cms-el-image-gallery__grid\"\n    >\n\n        <template v-if=\"mediaUrls && mediaUrls.length\">\n            <div class=\"sw-cms-el-image-gallery__item-holder\">\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_cms_element_image_gallery_selection %}\n                <template\n                    v-for=\"(sliderItem, index) in mediaUrls\"\n                    :key=\"index\"\n                >\n                    <sw-media-list-selection-item-v2\n                        v-if=\"index < galleryLimit\"\n                        :item=\"sliderItem.media\"\n                        :class=\"activeMediaClass(sliderItem.media)\"\n                        hide-actions\n                        hide-tooltip\n                        @click=\"onChangeGalleryImage(sliderItem.media, index)\"\n                    />\n                </template>\n                {% endblock %}\n            </div>\n        </template>\n\n        <template v-else>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_cms_element_image_gallery_empty %}\n            <div class=\"sw-cms-el-image-gallery__item-holder\">\n                <img\n                    v-for=\"mediaItem in getPlaceholderItems()\"\n                    :key=\"mediaItem.url\"\n                    class=\"sw-cms-el-image-gallery__item-placeholder\"\n                    :src=\"mediaItem.url\"\n                    alt=\"\"\n                >\n            </div>\n            {% endblock %}\n        </template>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_cms_element_image_gallery_nav_arrow %}\n        <div\n            v-if=\"element.config.sliderItems.value.length > galleryLimit\"\n            class=\"sw-cms-el-image-gallery__grid-arrow\"\n        >\n            <sw-icon\n                name=\"regular-chevron-down\"\n                size=\"20\"\n            />\n        </div>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_cms_element_image_gallery_slider %}\n    <sw-cms-el-image-slider\n        :element=\"element\"\n        :active-media=\"activeMedia\"\n        @active-image-change=\"onChangeGalleryImage\"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n","import CMS from '../../../constant/sw-cms.constant';\nimport template from './sw-cms-el-image-gallery.html.twig';\nimport './sw-cms-el-image-gallery.scss';\n\nconst { Mixin, Filter } = Cicada;\n\n/**\n * @private\n * @package discovery\n */\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    data() {\n        return {\n            galleryLimit: 3,\n            activeMedia: null,\n        };\n    },\n\n    computed: {\n        currentDeviceView() {\n            return this.cmsPageState.currentCmsDeviceView;\n        },\n\n        galleryPositionClass() {\n            return `is--preview-${this.element.config.galleryPosition.value}`;\n        },\n\n        currentDeviceViewClass() {\n            if (this.currentDeviceView) {\n                return `is--${this.currentDeviceView}`;\n            }\n\n            return null;\n        },\n\n        verticalAlignStyle() {\n            if (!this.element.config.verticalAlign.value) {\n                return null;\n            }\n\n            return `align-content: ${this.element.config.verticalAlign.value};`;\n        },\n\n        mediaUrls() {\n            const config = this.element?.config;\n\n            if (!config || config.source === 'default') {\n                return [];\n            }\n\n            if (config.source === 'mapped') {\n                return this.getDemoValue(config.sliderItems.value) || [];\n            }\n\n            return this.element?.data?.sliderItems || [];\n        },\n\n        isProductPage() {\n            return (this.cmsPageState?.currentPage?.type ?? '') === 'product_detail';\n        },\n\n        assetFilter() {\n            return Filter.getByName('asset');\n        },\n    },\n\n    watch: {\n        currentDeviceView() {\n            if (this.currentDeviceView === 'mobile') {\n                this.galleryLimit = 0;\n            }\n\n            // timeout due to css transition 0.4s\n            setTimeout(() => {\n                this.setGalleryLimit();\n            }, 400);\n        },\n\n        'element.config.galleryPosition.value': {\n            deep: true,\n            handler() {\n                this.$nextTick(() => {\n                    this.setGalleryLimit();\n                });\n            },\n        },\n\n        'element.config.sliderItems.value': {\n            handler(value) {\n                if (!value) {\n                    this.element.config.sliderItems.value = [];\n                    return;\n                }\n\n                this.$nextTick(() => {\n                    this.setGalleryLimit();\n                });\n            },\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('image-gallery');\n            this.initElementData('image-gallery');\n\n            if (!this.isProductPage || this.element?.translated?.config?.sliderItems || this.element?.data?.sliderItems) {\n                return;\n            }\n\n            this.element.config.sliderItems.source = 'mapped';\n            this.element.config.sliderItems.value = 'product.media';\n            this.element.config.navigationDots.value = 'inside';\n            this.element.config.zoom.value = true;\n            this.element.config.fullScreen.value = true;\n            this.element.config.displayMode.value = 'contain';\n            this.element.config.minHeight.value = '430px';\n        },\n\n        mountedComponent() {\n            this.setGalleryLimit();\n        },\n\n        getPlaceholderItems() {\n            if (this.element?.config?.source !== 'default') {\n                const previewMountain = CMS.MEDIA.previewMountain.slice(CMS.MEDIA.previewMountain.lastIndexOf('/') + 1);\n                const previewGlasses = CMS.MEDIA.previewGlasses.slice(CMS.MEDIA.previewGlasses.lastIndexOf('/') + 1);\n                const previewPlant = CMS.MEDIA.previewPlant.slice(CMS.MEDIA.previewPlant.lastIndexOf('/') + 1);\n\n                return [\n                    {\n                        url: this.assetFilter(`administration/static/img/cms/${previewMountain}`),\n                    },\n                    {\n                        url: this.assetFilter(`administration/static/img/cms/${previewGlasses}`),\n                    },\n                    {\n                        url: this.assetFilter(`administration/static/img/cms/${previewPlant}`),\n                    },\n                ];\n            }\n\n            return this.element.config.sliderItems.value.map((media) => {\n                const fileName = media.fileName.slice(media.fileName.lastIndexOf('/') + 1);\n\n                return {\n                    url: this.assetFilter(`/administration/static/img/cms/${fileName}`),\n                };\n            });\n        },\n\n        onChangeGalleryImage(mediaItem, index = 0) {\n            mediaItem.sliderIndex = index;\n            this.activeMedia = mediaItem;\n        },\n\n        activeMediaClass(mediaItem) {\n            if (!this.activeMedia) {\n                return null;\n            }\n\n            return {\n                'is--active': mediaItem.id === this.activeMedia.id,\n            };\n        },\n\n        setGalleryLimit() {\n            if (this.element.config.sliderItems.value.length === 0) {\n                return;\n            }\n\n            let boxSpace = 0;\n            let elSpace = 0;\n            const elGap = 8;\n            const arrowAndGapWidth = 36;\n\n            if (this.element.config.galleryPosition.value === 'underneath') {\n                boxSpace = this.$refs.galleryItemHolder.offsetWidth - arrowAndGapWidth;\n                elSpace = 92;\n            } else {\n                boxSpace = this.$refs.galleryItemHolder.offsetHeight;\n                elSpace = 64;\n            }\n\n            this.galleryLimit = Math.floor(boxSpace / (elSpace + elGap));\n        },\n    },\n};\n"],"names":["template","Mixin","Filter","index","config","_a","_c","_b","value","_e","_d","previewMountain","CMS","previewGlasses","previewPlant","media","fileName","mediaItem","boxSpace","elSpace","elGap"],"mappings":"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"}
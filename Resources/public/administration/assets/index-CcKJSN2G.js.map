{"version":3,"file":"index-CcKJSN2G.js","sources":["../../../app/administration/src/app/component/rule/sw-condition-base/sw-condition-base.html.twig","../../../app/administration/src/app/component/rule/sw-condition-base/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_condition_base %}\n<div class=\"sw-condition\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_condition_base_content %}\n    <div\n        class=\"sw-condition__container\"\n        :class=\"conditionClasses\"\n    >\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_condition_base_field_condition %}\n        <sw-condition-type-select\n            v-bind=\"{ condition, availableTypes, hasError, availableGroups }\"\n            :disabled=\"disabled || undefined\"\n        />\n        {% endblock %}\n\n        <div class=\"sw-condition__value-content\">\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_condition_value_before_content %}\n\n            {% endblock %}\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_condition_value_content %}\n            <sw-text-field\n                class=\"sw-condition__placeholder\"\n                size=\"medium\"\n                :placeholder=\"$tc('global.sw-condition.condition.placeholder-warning')\"\n                :disabled=\"disabled || undefined\"\n            />\n            {% endblock %}\n        </div>\n\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_condition_base_field_actions %}\n        <sw-context-button\n            class=\"sw-condition__context-button\"\n            :disabled=\"disabled || undefined\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_condition_base_field_create_before_action %}\n            <sw-context-menu-item\n                class=\"sw-condition__create-before-action\"\n                :disabled=\"disabled || undefined\"\n                @click=\"onCreateBefore\"\n            >\n                {{ $tc('global.sw-condition.condition.createBefore') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_condition_base_field_create_after_action %}\n            <sw-context-menu-item\n                class=\"sw-condition__create-after-action\"\n                :disabled=\"disabled || undefined\"\n                @click=\"onCreateAfter\"\n            >\n                {{ $tc('global.sw-condition.condition.createAfter') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_condition_base_field_delete_action %}\n            <sw-context-menu-item\n                :disabled=\"disabled || undefined\"\n                variant=\"danger\"\n                @click=\"onDeleteCondition\"\n            >\n                {{ $tc('global.default.delete') }}\n            </sw-context-menu-item>\n            {% endblock %}\n        </sw-context-button>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_condition_base_error %}\n    <sw-field-error :error=\"currentError\" />\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './sw-condition-base.html.twig';\nimport './sw-condition-base.scss';\n\nconst { Component } = Cicada;\nconst { mapPropertyErrors } = Component.getComponentHelper();\n\n/**\n * @private\n * @package services-settings\n * @description Base condition for the condition-tree. This component must be a child of sw-condition-tree.\n * @status prototype\n * @example-type code-only\n * @component-example\n * <sw-condition-base :condition=\"condition\"></sw-condition-base>\n */\nComponent.register('sw-condition-base', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inheritAttrs: false,\n\n    inject: [\n        'conditionDataProviderService',\n        'availableTypes',\n        'childAssociationField',\n        'availableGroups',\n    ],\n\n    emits: [\n        'create-before',\n        'create-after',\n        'condition-delete',\n    ],\n\n    props: {\n        condition: {\n            type: Object,\n            required: false,\n            default: null,\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    computed: {\n        conditionClasses() {\n            return {\n                'has--error': this.hasError,\n                'is--disabled': this.hasNoComponent || this.disabled,\n            };\n        },\n\n        ...mapPropertyErrors('condition', ['type']),\n\n        currentError() {\n            return this.conditionTypeError;\n        },\n\n        hasError() {\n            return this.currentError !== null;\n        },\n\n        valueErrorPath() {\n            return `${this.condition.getEntityName()}.${this.condition.id}.value`;\n        },\n\n        value() {\n            return this.condition.value;\n        },\n\n        hasNoComponent() {\n            const component = this.conditionDataProviderService.getComponentByCondition(this.condition);\n\n            return component === 'sw-condition-not-found';\n        },\n\n        operator() {\n            return this.condition.value?.operator ?? null;\n        },\n\n        isEmpty() {\n            return this.operator === this.conditionDataProviderService.getOperatorSet('empty')[0].identifier;\n        },\n    },\n\n    watch: {\n        value() {\n            if (this.hasError) {\n                this.$store.commit('error/removeApiError', {\n                    expression: this.valueErrorPath,\n                });\n            }\n            if (this.isEmpty && !!this.inputKey) {\n                if (this.isCompatEnabled('INSTANCE_DELETE')) {\n                    this.$delete(this.condition.value, this.inputKey);\n                } else {\n                    // eslint-disable-next-line vue/no-mutating-props\n                    delete this.condition.value[this.inputKey];\n                }\n            }\n        },\n    },\n\n    methods: {\n        onCreateBefore() {\n            this.$emit('create-before');\n        },\n\n        onCreateAfter() {\n            this.$emit('create-after');\n        },\n\n        onDeleteCondition() {\n            this.$emit('condition-delete');\n        },\n\n        ensureValueExist() {\n            if (typeof this.condition.value === 'undefined' || this.condition.value === null) {\n                // eslint-disable-next-line vue/no-mutating-props\n                this.condition.value = {};\n            }\n        },\n    },\n});\n"],"names":["template","Component","mapPropertyErrors","_a"],"mappings":"AAAA,MAAeA,EAAA,4uDCGT,CAAE,UAAAC,CAAW,EAAG,OAChB,CAAE,kBAAAC,CAAmB,EAAGD,EAAU,qBAWxCA,EAAU,SAAS,oBAAqB,CACpC,SAAAD,EAEA,aAAc,OAAO,aAErB,aAAc,GAEd,OAAQ,CACJ,+BACA,iBACA,wBACA,iBACH,EAED,MAAO,CACH,gBACA,eACA,kBACH,EAED,MAAO,CACH,UAAW,CACP,KAAM,OACN,SAAU,GACV,QAAS,IACZ,EAED,SAAU,CACN,KAAM,QACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,SAAU,CACN,kBAAmB,CACf,MAAO,CACH,aAAc,KAAK,SACnB,eAAgB,KAAK,gBAAkB,KAAK,QAC5D,CACS,EAED,GAAGE,EAAkB,YAAa,CAAC,MAAM,CAAC,EAE1C,cAAe,CACX,OAAO,KAAK,kBACf,EAED,UAAW,CACP,OAAO,KAAK,eAAiB,IAChC,EAED,gBAAiB,CACb,MAAO,GAAG,KAAK,UAAU,cAAe,CAAA,IAAI,KAAK,UAAU,EAAE,QAChE,EAED,OAAQ,CACJ,OAAO,KAAK,UAAU,KACzB,EAED,gBAAiB,CAGb,OAFkB,KAAK,6BAA6B,wBAAwB,KAAK,SAAS,IAErE,wBACxB,EAED,UAAW,CDjFnB,IAAAC,ECkFY,QAAOA,EAAA,KAAK,UAAU,QAAf,YAAAA,EAAsB,WAAY,IAC5C,EAED,SAAU,CACN,OAAO,KAAK,WAAa,KAAK,6BAA6B,eAAe,OAAO,EAAE,CAAC,EAAE,UACzF,CACJ,EAED,MAAO,CACH,OAAQ,CACA,KAAK,UACL,KAAK,OAAO,OAAO,uBAAwB,CACvC,WAAY,KAAK,cACrC,CAAiB,EAED,KAAK,SAAa,KAAK,WACnB,KAAK,gBAAgB,iBAAiB,EACtC,KAAK,QAAQ,KAAK,UAAU,MAAO,KAAK,QAAQ,EAGhD,OAAO,KAAK,UAAU,MAAM,KAAK,QAAQ,EAGpD,CACJ,EAED,QAAS,CACL,gBAAiB,CACb,KAAK,MAAM,eAAe,CAC7B,EAED,eAAgB,CACZ,KAAK,MAAM,cAAc,CAC5B,EAED,mBAAoB,CAChB,KAAK,MAAM,kBAAkB,CAChC,EAED,kBAAmB,EACX,OAAO,KAAK,UAAU,MAAU,KAAe,KAAK,UAAU,QAAU,QAExE,KAAK,UAAU,MAAQ,GAE9B,CACJ,CACL,CAAC"}
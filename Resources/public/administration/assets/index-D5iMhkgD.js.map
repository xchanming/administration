{"version":3,"file":"index-D5iMhkgD.js","sources":["../../../app/administration/src/module/sw-sales-channel/page/sw-sales-channel-list/sw-sales-channel-list.html.twig","../../../app/administration/src/module/sw-sales-channel/page/sw-sales-channel-list/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_sales_channel_list %}\n<sw-page class=\"sw-sales-channel-list\">\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_list_search_bar %}\n    <template #search-bar>\n        <sw-search-bar\n            initial-search-type=\"sales_channel\"\n            :placeholder=\"$tc('sw-sales-channel.list.placeholderSearchBar')\"\n            :initial-search=\"term\"\n            @search=\"onSearch\"\n        />\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_list_smart_bar_header %}\n    <template #smart-bar-header>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_list_smart_bar_header_title %}\n        <h2>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_sales_channel_list_smart_bar_header_title_text %}\n            {{ $tc('sw-sales-channel.list.title') }}\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_sales_channel_list_smart_bar_header_amount %}\n            <span\n                v-if=\"!isLoading\"\n                class=\"sw-page__smart-bar-amount\"\n            >\n                ({{ total }})\n            </span>\n            {% endblock %}\n        </h2>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_list_actions %}\n    <template #smart-bar-actions>\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_sales_channel_list_smart_bar_actions %}\n        <sw-button\n            v-tooltip.bottom=\"{\n                message: $tc('sw-privileges.tooltip.warning'),\n                disabled: acl.can('sales_channel.creator'),\n                showOnDisabledElements: true\n            }\"\n            :disabled=\"!acl.can('sales_channel.creator')\"\n            variant=\"primary\"\n            @click=\"onAddSalesChannel\"\n        >\n            {{ $tc('sw-sales-channel.list.buttonAddSalesChannel') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_sales_channel_list_content %}\n    <template #content>\n        <sw-card-view>\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_sales_channel_list_content_card %}\n            <sw-card\n                v-if=\"entitySearchable && total > 0\"\n                position-identifier=\"sw-sales-channel-list\"\n                :title=\"$tc('sw-sales-channel.list.title')\"\n                :subtitle=\"$tc('sw-sales-channel.list.subTitle')\"\n            >\n                <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                {% block sw_sales_channel_list_grid %}\n                <template #grid>\n                    <sw-entity-listing\n                        :is-loading=\"isLoading\"\n                        identifier=\"sw-sales-channel-list\"\n                        :columns=\"salesChannelColumns\"\n                        :repository=\"salesChannelRepository\"\n                        :items=\"salesChannels\"\n                        :full-page=\"false\"\n                        :show-selection=\"false\"\n                        :sort-by=\"currentSortBy\"\n                        :sort-direction=\"sortDirection\"\n                        :plain-appearance=\"true\"\n                        :show-settings=\"true\"\n                        :allow-column-edit=\"true\"\n                    >\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_sales_channel_list_grid_column_name %}\n                        <template #column-name=\"{ item }\">\n                            <sw-icon\n                                :name=\"item.type.iconName\"\n                                size=\"18px\"\n                            />\n                            <router-link\n                                :to=\"{\n                                    name: 'sw.sales.channel.detail',\n                                    params: { id: item.id }\n                                }\"\n                            >{{ item.translated.name || item.name }}</router-link>\n                        </template>\n                        {% endblock %}\n\n                        {# @deprecated tag:v6.7.0 - Remove block #}\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_sales_channel_list_grid_column_product_visibilites %}\n                        <template #column-product_visibilities=\"{ item }\">\n                            {{ getCountForSalesChannel(item.id) }}\n                            {{ $tc('sw-sales-channel.list.productsCount', getCountForSalesChannel(item.id)) }}\n                        </template>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_sales_channel_list_grid_column_status %}\n                        <template #column-status=\"{ item }\">\n                            <template v-if=\"item.maintenance\">\n                                <sw-status color=\"orange\">\n                                    {{ $tc('sw-sales-channel.list.status.maintenance') }}\n                                </sw-status>\n                            </template>\n\n                            <template v-else-if=\"item.active\">\n                                <sw-status color=\"green\">\n                                    {{ $tc('sw-sales-channel.list.status.online') }}\n                                </sw-status>\n                            </template>\n\n                            <template v-else>\n                                <sw-status color=\"gray\">\n                                    {{ $tc('sw-sales-channel.list.status.offline') }}\n                                </sw-status>\n                            </template>\n                        </template>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_sales_channel_list_grid_column_created_at %}\n                        <template #column-createdAt=\"{ item }\">\n                            {{ dateFilter(item.createdAt, { hour: '2-digit', minute: '2-digit' }) }}\n                        </template>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_sales_channel_list_grid_column_favorite %}\n                        <template #column-id=\"{ item }\">\n                            <sw-switch-field\n                                v-tooltip.right=\"{ message: $tc('sw-sales-channel.detail.favouriteLabel') }\"\n                                class=\"favorite-switch\"\n                                :disabled=\"!acl.can('user_config:create') || !acl.can('user_config:update')\"\n                                :value=\"isFavorite(item.id)\"\n                                @update:value=\"(isFavorite) => { salesChannelFavoritesService?.update(isFavorite, item.id) }\"\n                            />\n                        </template>\n                        {% endblock %}\n\n                        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                        {% block sw_sales_channel_list_grid_actions %}\n                        <template #actions=\"{ item }\">\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_sales_channel_list_grid_actions_item_detail %}\n                            <sw-context-menu-item\n                                :router-link=\"{\n                                    name: 'sw.sales.channel.detail',\n                                    params: { id: item.id }\n                                }\"\n                            >\n                                {{ $tc('sw-sales-channel.list.contextMenuEdit') }}\n                            </sw-context-menu-item>\n                            {% endblock %}\n\n                            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n                            {% block sw_sales_channel_list_grid_actions_item_open_storefront %}\n                            <sw-context-menu-item\n                                v-if=\"isStorefrontSalesChannel(item)\"\n                                :disabled=\"!item.active || !checkForDomainLink(item)\"\n                                @click.prevent=\"openStorefrontLink(item.domainLink)\"\n                            >\n                                {{ $tc('sw-sales-channel.general.tooltipOpenStorefront') }}\n                            </sw-context-menu-item>\n                            {% endblock %}\n                        </template>\n                        {% endblock %}\n                    </sw-entity-listing>\n                </template>\n                {% endblock %}\n            </sw-card>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_sales_channel_list_empty_state %}\n            <template v-if=\"!isLoading && !total\">\n                <sw-empty-state\n                    v-if=\"isValidTerm(term)\"\n                    :style=\"{ minHeight: '200px' }\"\n                    :title=\"$tc('sw-empty-state.messageNoResultTitle')\"\n                >\n                    <template #default>\n                        {{ $tc('sw-empty-state.messageNoResultSublineBefore') }}\n                        <router-link\n                            class=\"sw-empty-state__description-link\"\n                            :to=\"{ name: 'sw.profile.index.searchPreferences' }\"\n                        >\n                            {{ $tc('sw-empty-state.messageNoResultSublineLink') }}\n                        </router-link>\n                        {{ $tc('sw-empty-state.messageNoResultSublineAfter') }}\n                    </template>\n                </sw-empty-state>\n            </template>\n            {% endblock %}\n        </sw-card-view>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","/**\n * @package discovery\n */\n\nimport template from './sw-sales-channel-list.html.twig';\nimport './sw-sales-channel-list.scss';\n\nconst { Mixin, Defaults } = Cicada;\nconst { Criteria } = Cicada.Data;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n        'domainLinkService',\n    ],\n\n    mixins: [\n        Mixin.getByName('listing'),\n    ],\n\n    data() {\n        return {\n            salesChannels: null,\n            productsForSalesChannel: {},\n            isLoading: true,\n            sortBy: 'name',\n            searchConfigEntity: 'sales_channel',\n            lastSortedColumn: null,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    computed: {\n        salesChannelColumns() {\n            const columns = [\n                {\n                    property: 'name',\n                    dataIndex: 'name',\n                    allowResize: true,\n                    routerLink: 'sw.sales.channel.detail',\n                    label: 'sw-sales-channel.list.columnName',\n                    primary: true,\n                },\n                {\n                    property: 'status',\n                    dataIndex: 'status',\n                    allowResize: true,\n                    sortable: false,\n                    label: 'sw-sales-channel.list.columnStatus',\n                },\n                {\n                    property: 'id',\n                    dataIndex: 'id',\n                    allowResize: true,\n                    sortable: false,\n                    label: 'sw-sales-channel.list.columnFavourite',\n                    align: 'center',\n                },\n                {\n                    property: 'createdAt',\n                    dataIndex: 'createdAt',\n                    allowResize: true,\n                    label: 'sw-sales-channel.list.columnCreatedAt',\n                },\n            ];\n\n            columns.splice(1, 0, {\n                property: 'type.name',\n                dataIndex: 'type.name',\n                allowResize: true,\n                label: 'sw-sales-channel.list.columnType',\n            });\n\n            return columns;\n        },\n\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n\n        salesChannelCriteria() {\n            const salesChannelCriteria = new Criteria(this.page, this.limit);\n\n            salesChannelCriteria.setTerm(this.term);\n            salesChannelCriteria.addSorting(Criteria.sort(this.sortBy, this.sortDirection, this.naturalSorting));\n            salesChannelCriteria.addAssociation('type');\n            salesChannelCriteria.addAssociation('domains');\n\n            return salesChannelCriteria;\n        },\n\n        salesChannelFavoritesService() {\n            return Cicada.Service('salesChannelFavorites');\n        },\n\n        dateFilter() {\n            return Cicada.Filter.getByName('date');\n        },\n    },\n\n    methods: {\n        onAddSalesChannel() {\n            this.$root.$emit('on-add-sales-channel');\n        },\n\n        async getList() {\n            this.isLoading = true;\n\n            const criteria = await this.addQueryScores(this.term, this.salesChannelCriteria);\n            if (!this.entitySearchable) {\n                this.isLoading = false;\n                this.total = 0;\n\n                return false;\n            }\n\n            if (this.freshSearchTerm) {\n                criteria.resetSorting();\n            }\n\n            return this.salesChannelRepository.search(criteria).then((searchResult) => {\n                this.salesChannels = searchResult;\n                this.total = searchResult.total;\n                this.isLoading = false;\n            });\n        },\n\n        /** @deprecated tag:v6.7.0 - Will be removed. */\n        setProductAggregations(buckets) {\n            this.productsForSalesChannel = buckets.reduce(\n                (productsForSalesChannel, bucket) => ({\n                    ...productsForSalesChannel,\n                    [bucket.key]: bucket.visible_products?.count,\n                }),\n                {},\n            );\n        },\n\n        /** @deprecated tag:v6.7.0 - Will be removed. */\n        getCountForSalesChannel(salesChannelId) {\n            return this.productsForSalesChannel[salesChannelId] ?? 0;\n        },\n\n        checkForDomainLink(salesChannel) {\n            const domainLink = this.domainLinkService.getDomainLink(salesChannel);\n\n            if (domainLink === null) {\n                return false;\n            }\n\n            salesChannel.domainLink = domainLink;\n\n            return true;\n        },\n\n        openStorefrontLink(storeFrontLink) {\n            window.open(storeFrontLink, '_blank');\n        },\n\n        isFavorite(salesChannelId) {\n            return this.salesChannelFavoritesService.isFavorite(salesChannelId);\n        },\n\n        isStorefrontSalesChannel(salesChannel) {\n            return salesChannel.type.id === Defaults.storefrontSalesChannelTypeId;\n        },\n    },\n};\n"],"names":["template","Mixin","Defaults","Criteria","index","columns","salesChannelCriteria","criteria","searchResult","buckets","productsForSalesChannel","bucket","_a","salesChannelId","salesChannel","domainLink","storeFrontLink"],"mappings":"AAAA,MAAeA,EAAA,miKCOT,CAAE,MAAAC,EAAO,SAAAC,CAAU,EAAG,OACtB,CAAE,SAAAC,CAAQ,EAAK,OAAO,KAGbC,EAAA,CACX,SAAAJ,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,oBACA,MACA,mBACH,EAED,OAAQ,CACJC,EAAM,UAAU,SAAS,CAC5B,EAED,MAAO,CACH,MAAO,CACH,cAAe,KACf,wBAAyB,CAAE,EAC3B,UAAW,GACX,OAAQ,OACR,mBAAoB,gBACpB,iBAAkB,IAC9B,CACK,EAED,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAc,CACtC,CACK,EAED,SAAU,CACN,qBAAsB,CAClB,MAAMI,EAAU,CACZ,CACI,SAAU,OACV,UAAW,OACX,YAAa,GACb,WAAY,0BACZ,MAAO,mCACP,QAAS,EACZ,EACD,CACI,SAAU,SACV,UAAW,SACX,YAAa,GACb,SAAU,GACV,MAAO,oCACV,EACD,CACI,SAAU,KACV,UAAW,KACX,YAAa,GACb,SAAU,GACV,MAAO,wCACP,MAAO,QACV,EACD,CACI,SAAU,YACV,UAAW,YACX,YAAa,GACb,MAAO,uCACV,CACjB,EAEY,OAAAA,EAAQ,OAAO,EAAG,EAAG,CACjB,SAAU,YACV,UAAW,YACX,YAAa,GACb,MAAO,kCACvB,CAAa,EAEMA,CACV,EAED,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,eAAe,CACvD,EAED,sBAAuB,CACnB,MAAMC,EAAuB,IAAIH,EAAS,KAAK,KAAM,KAAK,KAAK,EAE/D,OAAAG,EAAqB,QAAQ,KAAK,IAAI,EACtCA,EAAqB,WAAWH,EAAS,KAAK,KAAK,OAAQ,KAAK,cAAe,KAAK,cAAc,CAAC,EACnGG,EAAqB,eAAe,MAAM,EAC1CA,EAAqB,eAAe,SAAS,EAEtCA,CACV,EAED,8BAA+B,CAC3B,OAAO,OAAO,QAAQ,uBAAuB,CAChD,EAED,YAAa,CACT,OAAO,OAAO,OAAO,UAAU,MAAM,CACxC,CACJ,EAED,QAAS,CACL,mBAAoB,CAChB,KAAK,MAAM,MAAM,sBAAsB,CAC1C,EAED,MAAM,SAAU,CACZ,KAAK,UAAY,GAEjB,MAAMC,EAAW,MAAM,KAAK,eAAe,KAAK,KAAM,KAAK,oBAAoB,EAC/E,OAAK,KAAK,kBAON,KAAK,iBACLA,EAAS,aAAY,EAGlB,KAAK,uBAAuB,OAAOA,CAAQ,EAAE,KAAMC,GAAiB,CACvE,KAAK,cAAgBA,EACrB,KAAK,MAAQA,EAAa,MAC1B,KAAK,UAAY,EACjC,CAAa,IAdG,KAAK,UAAY,GACjB,KAAK,MAAQ,EAEN,GAYd,EAGD,uBAAuBC,EAAS,CAC5B,KAAK,wBAA0BA,EAAQ,OACnC,CAACC,EAAyBC,IAAY,CD7ItD,IAAAC,EC6IsD,OAClC,GAAGF,EACH,CAACC,EAAO,GAAG,GAAGC,EAAAD,EAAO,mBAAP,YAAAC,EAAyB,KAC3D,GACgB,CAAE,CAClB,CACS,EAGD,wBAAwBC,EAAgB,CACpC,OAAO,KAAK,wBAAwBA,CAAc,GAAK,CAC1D,EAED,mBAAmBC,EAAc,CAC7B,MAAMC,EAAa,KAAK,kBAAkB,cAAcD,CAAY,EAEpE,OAAIC,IAAe,KACR,IAGXD,EAAa,WAAaC,EAEnB,GACV,EAED,mBAAmBC,EAAgB,CAC/B,OAAO,KAAKA,EAAgB,QAAQ,CACvC,EAED,WAAWH,EAAgB,CACvB,OAAO,KAAK,6BAA6B,WAAWA,CAAc,CACrE,EAED,yBAAyBC,EAAc,CACnC,OAAOA,EAAa,KAAK,KAAOZ,EAAS,4BAC5C,CACJ,CACL"}
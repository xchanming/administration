{"version":3,"file":"index-BJdYuK6M.js","sources":["../../../app/administration/src/module/sw-settings-number-range/page/sw-settings-number-range-create/sw-settings-number-range-create.html.twig","../../../app/administration/src/module/sw-settings-number-range/page/sw-settings-number-range-create/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_number_range_detail_language_switch %}\n<!-- eslint-disable-next-line vue/valid-v-slot -->\n<template #language-switch>\n    <sw-language-switch disabled />\n</template>\n{% endblock %}\n\n<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_settings_number_range_detail_content_global_product_warning %}\n<sw-alert\n    v-if=\"isShowProductWarning\"\n    class=\"sw-number_range-quickinfo__alert-global-type sw-number_range-quickinfo__product-alert\"\n    variant=\"warning\"\n    :title=\"$tc('sw-settings-number-range.general.infoGlobalTypeTitle', 0, { typeName: 'Product'})\"\n>\n    {{ $tc('sw-settings-number-range.general.infoGlobalType', 0, { typeName: 'Product' }) }}\n</sw-alert>\n{% endblock %}\n\n{% block sw_settings_number_range_detail_assignment_card_global_warning %}\n{% endblock %}\n","/**\n * @package inventory\n */\nimport template from './sw-settings-number-range-create.html.twig';\n\nconst utils = Cicada.Utils;\n\nconst {\n    Data: { Criteria },\n} = Cicada;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    data() {\n        return {\n            hasProductNumberRange: false,\n            isShowProductWarning: false,\n        };\n    },\n\n    beforeRouteEnter(to, from, next) {\n        if (to.name.includes('sw.settings.number.range.create') && !to.params.id) {\n            to.params.id = utils.createId();\n        }\n\n        next();\n    },\n\n    computed: {\n        productNumberRangeCriteria() {\n            const criteria = new Criteria(1, 1);\n\n            criteria.addAssociation('type');\n            criteria.addFilter(\n                Criteria.multi('and', [\n                    Criteria.equals('type.global', true),\n                    Criteria.equals('type.technicalName', 'product'),\n                ]),\n            );\n\n            return criteria;\n        },\n\n        numberRangeTypeCriteria() {\n            const criteria = new Criteria(1, 25);\n\n            if (this.hasProductNumberRange) {\n                criteria.addFilter(Criteria.equals('global', false));\n            }\n\n            criteria.addSorting(Criteria.sort('typeName', 'ASC'));\n\n            return criteria;\n        },\n\n        disableNumberRangeTypeSelect() {\n            return false;\n        },\n    },\n\n    methods: {\n        async createdComponent() {\n            await this.getProductNumberRanges();\n            if (!Cicada.State.getters['context/isSystemDefaultLanguage']) {\n                Cicada.State.commit('context/resetLanguageToDefault');\n            }\n\n            if (this.$route.params.id) {\n                this.numberRange = this.numberRangeRepository.create(Cicada.Context.api, this.$route.params.id);\n            } else {\n                this.numberRange = this.numberRangeRepository.create();\n            }\n            this.numberRange.start = 1;\n            this.numberRange.global = false;\n            this.numberRange.pattern = '';\n            this.numberRange.isLoading = true;\n            this.numberRange.type = this.numberRangeTypeRepository.create();\n            this.numberRange.type.global = this.hasProductNumberRange;\n\n            this.$super('createdComponent');\n            this.getPreview();\n            this.splitPattern();\n            this.onChangePattern();\n            this.numberRange.isLoading = false;\n        },\n\n        saveFinish() {\n            this.isSaveSuccessful = false;\n            this.$router.push({\n                name: 'sw.settings.number.range.detail',\n                params: { id: this.numberRange.id },\n            });\n        },\n\n        onSave() {\n            this.$super('onSave');\n        },\n\n        async getProductNumberRanges() {\n            this.numberRangeRepository.search(this.productNumberRangeCriteria).then((items) => {\n                this.hasProductNumberRange = !!items.total;\n            });\n        },\n\n        onChangeType(id, numberRange) {\n            this.isShowProductWarning = numberRange && numberRange.technicalName === 'product';\n            this.numberRange.global = this.isShowProductWarning;\n\n            this.loadSalesChannels();\n        },\n    },\n};\n"],"names":["template","utils","Criteria","index","to","from","next","criteria","items","id","numberRange"],"mappings":"AAAA,MAAeA,EAAA,sqBCKTC,EAAQ,OAAO,MAEf,CACF,KAAM,CAAE,SAAAC,CAAU,CACtB,EAAI,OAGWC,EAAA,CACX,SAAAH,EAEA,MAAO,CACH,MAAO,CACH,sBAAuB,GACvB,qBAAsB,EAClC,CACK,EAED,iBAAiBI,EAAIC,EAAMC,EAAM,CACzBF,EAAG,KAAK,SAAS,iCAAiC,GAAK,CAACA,EAAG,OAAO,KAClEA,EAAG,OAAO,GAAKH,EAAM,SAAQ,GAGjCK,GACH,EAED,SAAU,CACN,4BAA6B,CACzB,MAAMC,EAAW,IAAIL,EAAS,EAAG,CAAC,EAElC,OAAAK,EAAS,eAAe,MAAM,EAC9BA,EAAS,UACLL,EAAS,MAAM,MAAO,CAClBA,EAAS,OAAO,cAAe,EAAI,EACnCA,EAAS,OAAO,qBAAsB,SAAS,CACnE,CAAiB,CACjB,EAEmBK,CACV,EAED,yBAA0B,CACtB,MAAMA,EAAW,IAAIL,EAAS,EAAG,EAAE,EAEnC,OAAI,KAAK,uBACLK,EAAS,UAAUL,EAAS,OAAO,SAAU,EAAK,CAAC,EAGvDK,EAAS,WAAWL,EAAS,KAAK,WAAY,KAAK,CAAC,EAE7CK,CACV,EAED,8BAA+B,CAC3B,MAAO,EACV,CACJ,EAED,QAAS,CACL,MAAM,kBAAmB,CACrB,MAAM,KAAK,yBACN,OAAO,MAAM,QAAQ,iCAAiC,GACvD,OAAO,MAAM,OAAO,gCAAgC,EAGpD,KAAK,OAAO,OAAO,GACnB,KAAK,YAAc,KAAK,sBAAsB,OAAO,OAAO,QAAQ,IAAK,KAAK,OAAO,OAAO,EAAE,EAE9F,KAAK,YAAc,KAAK,sBAAsB,OAAM,EAExD,KAAK,YAAY,MAAQ,EACzB,KAAK,YAAY,OAAS,GAC1B,KAAK,YAAY,QAAU,GAC3B,KAAK,YAAY,UAAY,GAC7B,KAAK,YAAY,KAAO,KAAK,0BAA0B,OAAM,EAC7D,KAAK,YAAY,KAAK,OAAS,KAAK,sBAEpC,KAAK,OAAO,kBAAkB,EAC9B,KAAK,WAAU,EACf,KAAK,aAAY,EACjB,KAAK,gBAAe,EACpB,KAAK,YAAY,UAAY,EAChC,EAED,YAAa,CACT,KAAK,iBAAmB,GACxB,KAAK,QAAQ,KAAK,CACd,KAAM,kCACN,OAAQ,CAAE,GAAI,KAAK,YAAY,EAAI,CACnD,CAAa,CACJ,EAED,QAAS,CACL,KAAK,OAAO,QAAQ,CACvB,EAED,MAAM,wBAAyB,CAC3B,KAAK,sBAAsB,OAAO,KAAK,0BAA0B,EAAE,KAAMC,GAAU,CAC/E,KAAK,sBAAwB,CAAC,CAACA,EAAM,KACrD,CAAa,CACJ,EAED,aAAaC,EAAIC,EAAa,CAC1B,KAAK,qBAAuBA,GAAeA,EAAY,gBAAkB,UACzE,KAAK,YAAY,OAAS,KAAK,qBAE/B,KAAK,kBAAiB,CACzB,CACJ,CACL"}
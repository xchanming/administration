{"version":3,"file":"index-DFz5WxDv.js","sources":["../../../app/administration/src/module/sw-category/component/sw-category-detail-menu/sw-category-detail-menu.html.twig","../../../app/administration/src/module/sw-category/component/sw-category-detail-menu/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_category_detail_menu %}\n<sw-card\n    class=\"sw-category-detail-base__menu\"\n    position-identifier=\"sw-category-detail-menu\"\n    :title=\"$tc('sw-category.base.menu.title')\"\n    :is-loading=\"isLoading\"\n>\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_information_visible %}\n    <sw-switch-field\n        v-model:value=\"reversedVisibility\"\n        borderd\n        :disabled=\"!acl.can('category.editor')\"\n        :label=\"$tc('sw-category.base.menu.visible')\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_menu_media %}\n    <sw-upload-listener\n        :key=\"category.id + 'uploadListener'\"\n        :upload-tag=\"category.id\"\n        auto-upload\n        @media-upload-finish=\"onSetMediaItem\"\n    />\n    <sw-media-upload-v2\n        :key=\"category.id + 'upload'\"\n        :label=\"$tc('sw-category.base.menu.imageLabel')\"\n        variant=\"regular\"\n        :disabled=\"!acl.can('category.editor')\"\n        :source=\"mediaItem\"\n        :upload-tag=\"category.id\"\n        :allow-multi-select=\"false\"\n        :default-folder=\"category.getEntityName()\"\n        @media-drop=\"onMediaDropped\"\n        @media-upload-sidebar-open=\"showMediaModal = true\"\n        @media-upload-remove-image=\"onRemoveMediaItem\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_menu_media_modal %}\n    <sw-media-modal-v2\n        v-if=\"showMediaModal\"\n        :allow-multi-select=\"false\"\n        :entity-context=\"category.getEntityName()\"\n        @media-modal-selection-change=\"onMediaSelectionChange\"\n        @modal-close=\"showMediaModal = false\"\n    />\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_category_detail_menu_description %}\n    <sw-text-editor\n        :key=\"category.id + 'description'\"\n        v-model:value=\"category.description\"\n        class=\"sw-category-detail-base__description\"\n        type=\"textarea\"\n        :disabled=\"!acl.can('category.editor')\"\n        sanitize-input\n        sanitize-field-name=\"category_translation.description\"\n        :label=\"$tc('sw-category.base.menu.descriptionLabel')\"\n        :placeholder=\"$tc('sw-category.base.menu.descriptionPlaceholder')\"\n    />\n    {% endblock %}\n</sw-card>\n{% endblock %}\n","import template from './sw-category-detail-menu.html.twig';\n\n/**\n * @package discovery\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    inject: [\n        'acl',\n        'repositoryFactory',\n    ],\n\n    props: {\n        category: {\n            type: Object,\n            required: true,\n        },\n\n        isLoading: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            showMediaModal: false,\n        };\n    },\n\n    computed: {\n        reversedVisibility: {\n            get() {\n                return !this.category.visible;\n            },\n            set(visibility) {\n                this.category.visible = !visibility;\n            },\n        },\n\n        mediaItem() {\n            return this.category !== null ? this.category.media : null;\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n    },\n\n    methods: {\n        onMediaSelectionChange(mediaItems) {\n            const media = mediaItems[0];\n            if (!media) {\n                return;\n            }\n\n            this.mediaRepository.get(media.id).then((updatedMedia) => {\n                this.category.mediaId = updatedMedia.id;\n                this.category.media = updatedMedia;\n            });\n        },\n\n        onSetMediaItem({ targetId }) {\n            this.mediaRepository.get(targetId).then((updatedMedia) => {\n                this.category.mediaId = targetId;\n                this.category.media = updatedMedia;\n            });\n        },\n\n        onRemoveMediaItem() {\n            this.category.mediaId = null;\n            this.category.media = null;\n        },\n\n        onMediaDropped(dropItem) {\n            // to be consistent refetch entity with repository\n            this.onSetMediaItem({ targetId: dropItem.id });\n        },\n    },\n};\n"],"names":["template","index","visibility","mediaItems","media","updatedMedia","targetId","dropItem"],"mappings":"AAAA,MAAeA,EAAA,8tDCMAC,EAAA,CACX,SAAAD,EAEA,aAAc,OAAO,aAErB,OAAQ,CACJ,MACA,mBACH,EAED,MAAO,CACH,SAAU,CACN,KAAM,OACN,SAAU,EACb,EAED,UAAW,CACP,KAAM,QACN,SAAU,GACV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,eAAgB,EAC5B,CACK,EAED,SAAU,CACN,mBAAoB,CAChB,KAAM,CACF,MAAO,CAAC,KAAK,SAAS,OACzB,EACD,IAAIE,EAAY,CACZ,KAAK,SAAS,QAAU,CAACA,CAC5B,CACJ,EAED,WAAY,CACR,OAAO,KAAK,WAAa,KAAO,KAAK,SAAS,MAAQ,IACzD,EAED,iBAAkB,CACd,OAAO,KAAK,kBAAkB,OAAO,OAAO,CAC/C,CACJ,EAED,QAAS,CACL,uBAAuBC,EAAY,CAC/B,MAAMC,EAAQD,EAAW,CAAC,EACrBC,GAIL,KAAK,gBAAgB,IAAIA,EAAM,EAAE,EAAE,KAAMC,GAAiB,CACtD,KAAK,SAAS,QAAUA,EAAa,GACrC,KAAK,SAAS,MAAQA,CACtC,CAAa,CACJ,EAED,eAAe,CAAE,SAAAC,GAAY,CACzB,KAAK,gBAAgB,IAAIA,CAAQ,EAAE,KAAMD,GAAiB,CACtD,KAAK,SAAS,QAAUC,EACxB,KAAK,SAAS,MAAQD,CACtC,CAAa,CACJ,EAED,mBAAoB,CAChB,KAAK,SAAS,QAAU,KACxB,KAAK,SAAS,MAAQ,IACzB,EAED,eAAeE,EAAU,CAErB,KAAK,eAAe,CAAE,SAAUA,EAAS,EAAI,CAAA,CAChD,CACJ,CACL"}
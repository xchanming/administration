import{t as i}from"./sw-extension-permissions-details-modal.html-DZOKBomz.js";const n={template:i,mixins:["sw-extension-error"],props:{extension:{type:Object,required:!0}},computed:{extensionCardClasses(){return{"sw-self-maintained-extension-card":!0,...this.$super("extensionCardClasses")}},permissions(){return Object.keys(this.extension.permissions).length?this.extension.permissions:null},isInstalled(){return this.extension.installedAt!==null}},methods:{async changeExtensionStatus(){if(this.isActive){await this.activateExtension();return}await this.deactivateExtension()},async installAndActivateExtension(){this.isLoading=!0;try{await this.shopwareExtensionService.installAndActivateExtension(this.extension.name,this.extension.type),await this.clearCacheAndReloadPage()}catch(e){this.showExtensionErrors(e)}finally{this.isLoading=!1}},async installExtension(){this.isLoading=!0;try{await this.shopwareExtensionService.installExtension(this.extension.name,this.extension.type),await this.clearCacheAndReloadPage()}catch(e){this.showExtensionErrors(e)}finally{this.isLoading=!1}},async activateExtension(){try{this.isLoading=!0,await this.shopwareExtensionService.activateExtension(this.extension.name,this.extension.type),this.extension.active=!0,await this.clearCacheAndReloadPage()}catch(e){this.extension.active=!1,this.showExtensionErrors(e)}finally{this.isLoading=!1}},async deactivateExtension(){try{this.isLoading=!0,await this.shopwareExtensionService.deactivateExtension(this.extension.name,this.extension.type),this.extension.active=!1,await this.clearCacheAndReloadPage()}catch(e){this.extension.active=!0,this.showExtensionErrors(e)}finally{this.isLoading=!1}},async removeExtension(e){try{this.showRemovalModal=!1,this.isLoading=!0,await this.shopwareExtensionService.removeExtension(this.extension.name,this.extension.type,e),this.extension.active=!1,await this.clearCacheAndReloadPage()}catch(t){this.showExtensionErrors(t)}finally{this.isLoading=!1}}}};export{n as default};

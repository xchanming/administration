import{a as o,X as s,K as n,W as m}from"./channel-DxwX5hMG.js";import{_ as l}from"./_baseIteratee-vB4JeBI0.js";import{_ as d,l as u}from"./_baseUniq-B2mRmqmX.js";import"./administration-BlrHhDOI.js";var _=n,c=l,f=s,g=d,r=m,w=u,b=f(function(t){var e=w(t);return r(e)&&(e=void 0),g(_(t,1,r,!0),c(e))}),y=b;const x=o(y),k=`{% block sw_import_export_new_profile_wizard_mapping_page %} <div class="sw-import-export-new-profile-wizard-mapping-page"> {% block sw_import_export_new_profile_wizard_mapping_page_text %} <p class="sw-import-export-new-profile-wizard-mapping-page__text"> <template v-if="automatedCount < 1"> {{ $tc('sw-import-export.profile.mappingDescription') }} </template> <template v-else> {{ $tc('sw-import-export.profile.mappingAutomatedDescription', 0, { automatedCount }) }} </template> </p> {% endblock %} {% block sw_import_export_new_profile_wizard_mapping_page_mapping %} <sw-import-export-edit-profile-modal-mapping class="sw-import-export-new-profile-wizard-mapping-page__mapping" :profile="profile" :system-required-fields="systemRequiredFields" @update-mapping="updateMapping" /> {% endblock %} </div> {% endblock %}`,j={template:k,compatConfig:Cicada.compatConfig,inject:["repositoryFactory"],emits:["next-allow"],props:{profile:{type:Object,required:!0},systemRequiredFields:{type:Object,required:!0}},data(){return{automatedCount:0}},created(){this.createdComponent()},methods:{createdComponent(){this.automatedCount=this.countAutomatedValues(),this.mergeMappings(),this.$emit("next-allow")},mergeMappings(){const t=Object.entries(this.systemRequiredFields).map(i=>{const[p,a]=i;return{key:p,mappedKey:a}}),e=x(this.profile.mapping,t,"key");e.sort((i,p)=>i.position-p.position),this.profile.mapping=e.map((i,p)=>(i.position||(i.position=p),i))},updateMapping(t){this.profile.mapping=t},countAutomatedValues(){return this.profile.mapping.reduce((t,e)=>(e.key!==void 0&&e.key!==null&&e.key!==""&&(t+=1),t),0)}}};export{j as default};
//# sourceMappingURL=index-BNIItRmO.js.map

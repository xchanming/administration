{"version":3,"file":"index-kBWLkc7r.js","sources":["../../../app/administration/src/app/component/grid/sw-pagination/sw-pagination.html.twig","../../../app/administration/src/app/component/grid/sw-pagination/index.js"],"sourcesContent":["<!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n{% block sw_pagination %}\n<div\n    v-if=\"shouldBeVisible\"\n    class=\"sw-pagination\"\n>\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_pagination_page_prev %}\n    <button\n        :disabled=\"currentPage === 1\"\n        :aria-label=\"$tc('global.sw-pagination.previousPage')\"\n        class=\"sw-pagination__page-button sw-pagination__page-button-prev\"\n        @click=\"prevPage\"\n    >\n        <sw-icon\n            name=\"regular-chevron-left-xs\"\n        />\n    </button>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_pagination_page_list %}\n    <ul class=\"sw-pagination__list\">\n        <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n        {% block sw_pagination_page_list_item %}\n        <li\n            v-for=\"(pageNum, index) in displayedPages\"\n            :key=\"index\"\n            class=\"sw-pagination__list-item\"\n        >\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_pagination_page_list_item_button %}\n            <button\n                v-if=\"typeof(pageNum) === 'number'\"\n                :aria-label=\"$tc('global.sw-pagination.page', { page: pageNum })\"\n                class=\"sw-pagination__list-button\"\n                :class=\"{ 'is-active': currentPage === pageNum }\"\n                @click=\"changePageByPageNumber(pageNum)\"\n            >\n                {{ pageNum }}\n            </button>\n            {% endblock %}\n\n            <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n            {% block sw_pagination_page_list_item_separator %}\n            <span\n                v-else\n                class=\"sw-pagination__list-separator\"\n            >\n                {{ pageNum }}\n            </span>\n            {% endblock %}\n        </li>\n        {% endblock %}\n    </ul>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_pagination_page_next %}\n    <button\n        :disabled=\"currentPage === maxPage\"\n        :aria-label=\"$tc('global.sw-pagination.nextPage')\"\n        class=\"sw-pagination__page-button sw-pagination__page-button-next\"\n        @click=\"nextPage\"\n    >\n        <sw-icon\n            name=\"regular-chevron-right-xs\"\n            small\n        />\n    </button>\n    {% endblock %}\n\n    <!-- eslint-disable-next-line sw-deprecation-rules/no-twigjs-blocks -->\n    {% block sw_pagination_per_page_selection %}\n    <div\n        v-if=\"steps.length > 1\"\n        class=\"sw-pagination__per-page\"\n    >\n        <sw-select-field\n            size=\"small\"\n            name=\"perPage\"\n            :label=\"$tc('global.sw-pagination.labelItemsPerPage')\"\n            :value=\"String(perPage)\"\n            aside\n            @update:value=\"onPageSizeChange\"\n        >\n            <option\n                v-for=\"step in possibleSteps\"\n                :key=\"step\"\n                :value=\"step\"\n            >\n                {{ step }}\n            </option>\n        </sw-select-field>\n    </div>\n    {% endblock %}\n</div>\n{% endblock %}\n","import './sw-pagination.scss';\nimport template from './sw-pagination.html.twig';\n\nconst { Component } = Cicada;\n\n/**\n * @package admin\n *\n * @private\n * @status ready\n * @example-type static\n * @component-example\n * <sw-pagination :total=\"500\" :limit=\"25\" :page=\"1\"></sw-pagination>\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nComponent.register('sw-pagination', {\n    template,\n\n    compatConfig: Cicada.compatConfig,\n\n    emits: ['page-change'],\n\n    props: {\n        total: {\n            type: Number,\n            required: true,\n        },\n\n        limit: {\n            type: Number,\n            required: true,\n        },\n\n        page: {\n            type: Number,\n            required: true,\n        },\n\n        totalVisible: {\n            type: Number,\n            required: false,\n            default: 7,\n        },\n\n        steps: {\n            type: Array,\n            required: false,\n            default() {\n                return [\n                    10,\n                    25,\n                    50,\n                    75,\n                    100,\n                ];\n            },\n        },\n\n        autoHide: {\n            type: Boolean,\n            required: false,\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            currentPage: this.page,\n            perPage: this.limit,\n        };\n    },\n\n    computed: {\n        maxPage() {\n            return Math.ceil(this.total / this.perPage);\n        },\n\n        displayedPages() {\n            const maxLength = this.totalVisible;\n            const currentPage = this.currentPage;\n\n            if (this.maxPage <= maxLength) {\n                return this.range(1, this.maxPage);\n            }\n\n            const even = maxLength % 2 === 0 ? 1 : 0;\n            const left = Math.floor(maxLength / 2);\n            const right = this.maxPage - left + 1 + even;\n\n            if (currentPage === left || (left === 1 && currentPage === left + 1)) {\n                return [\n                    ...this.range(1, left + 1),\n                    '...',\n                    ...this.range(right, this.maxPage),\n                ];\n            }\n\n            if (currentPage === right || (right === this.maxPage && currentPage === this.maxPage - 1)) {\n                return [\n                    ...this.range(1, left),\n                    '...',\n                    ...this.range(right - 1, this.maxPage),\n                ];\n            }\n\n            if (currentPage > left && currentPage < right) {\n                const start = currentPage - left + 2;\n                const end = currentPage + left - 2 - even;\n\n                return [\n                    1,\n                    '...',\n                    ...(start > end ? [currentPage] : this.range(start, end)),\n                    '...',\n                    this.maxPage,\n                ];\n            }\n\n            return [\n                ...this.range(1, left),\n                '...',\n                ...this.range(right, this.maxPage),\n            ];\n        },\n\n        shouldBeVisible() {\n            if (!this.autoHide) {\n                return true;\n            }\n\n            return this.total > Math.min(...this.steps);\n        },\n\n        possibleSteps() {\n            const total = this.total;\n            const stepsSorted = [...this.steps].sort((a, b) => a - b);\n\n            let lastStep;\n            const possibleSteps = stepsSorted.filter((x) => {\n                if (lastStep > total) return false;\n                lastStep = x;\n                return true;\n            });\n\n            return possibleSteps;\n        },\n    },\n\n    watch: {\n        page() {\n            this.currentPage = this.page;\n        },\n\n        limit() {\n            this.perPage = this.limit;\n        },\n\n        maxPage() {\n            if (this.maxPage === 0) {\n                this.currentPage = 1;\n                return;\n            }\n\n            if (this.currentPage > this.maxPage) {\n                this.changePageByPageNumber(this.maxPage);\n            }\n        },\n    },\n\n    methods: {\n        range(from, to) {\n            const range = [];\n\n            from = from > 0 ? from : 1;\n\n            for (let i = from; i <= to; i += 1) {\n                range.push(i);\n            }\n            return range;\n        },\n\n        pageChange() {\n            this.$emit('page-change', {\n                page: this.currentPage,\n                limit: this.perPage,\n            });\n        },\n\n        onPageSizeChange(perPage) {\n            this.perPage = Number(perPage);\n            this.firstPage();\n        },\n\n        firstPage() {\n            this.currentPage = 1;\n            this.pageChange();\n        },\n\n        prevPage() {\n            this.currentPage -= 1;\n            this.pageChange();\n        },\n\n        nextPage() {\n            this.currentPage += 1;\n            this.pageChange();\n        },\n\n        lastPage() {\n            this.currentPage = this.maxPage;\n            this.pageChange();\n        },\n\n        changePageByPageNumber(pageNum) {\n            this.currentPage = pageNum;\n            this.pageChange();\n        },\n\n        refresh() {\n            this.pageChange();\n        },\n    },\n});\n"],"names":["template","Component","maxLength","currentPage","even","left","right","start","end","total","stepsSorted","a","b","lastStep","x","from","to","range","i","perPage","pageNum"],"mappings":"AAAA,MAAeA,EAAA,kwDCGT,CAAE,UAAAC,CAAW,EAAG,OAYtBA,EAAU,SAAS,gBAAiB,CAChC,SAAAD,EAEA,aAAc,OAAO,aAErB,MAAO,CAAC,aAAa,EAErB,MAAO,CACH,MAAO,CACH,KAAM,OACN,SAAU,EACb,EAED,MAAO,CACH,KAAM,OACN,SAAU,EACb,EAED,KAAM,CACF,KAAM,OACN,SAAU,EACb,EAED,aAAc,CACV,KAAM,OACN,SAAU,GACV,QAAS,CACZ,EAED,MAAO,CACH,KAAM,MACN,SAAU,GACV,SAAU,CACN,MAAO,CACH,GACA,GACA,GACA,GACA,GACpB,CACa,CACJ,EAED,SAAU,CACN,KAAM,QACN,SAAU,GAEV,QAAS,EACZ,CACJ,EAED,MAAO,CACH,MAAO,CACH,YAAa,KAAK,KAClB,QAAS,KAAK,KAC1B,CACK,EAED,SAAU,CACN,SAAU,CACN,OAAO,KAAK,KAAK,KAAK,MAAQ,KAAK,OAAO,CAC7C,EAED,gBAAiB,CACb,MAAME,EAAY,KAAK,aACjBC,EAAc,KAAK,YAEzB,GAAI,KAAK,SAAWD,EAChB,OAAO,KAAK,MAAM,EAAG,KAAK,OAAO,EAGrC,MAAME,EAAOF,EAAY,IAAM,EAAI,EAAI,EACjCG,EAAO,KAAK,MAAMH,EAAY,CAAC,EAC/BI,EAAQ,KAAK,QAAUD,EAAO,EAAID,EAExC,GAAID,IAAgBE,GAASA,IAAS,GAAKF,IAAgBE,EAAO,EAC9D,MAAO,CACH,GAAG,KAAK,MAAM,EAAGA,EAAO,CAAC,EACzB,MACA,GAAG,KAAK,MAAMC,EAAO,KAAK,OAAO,CACrD,EAGY,GAAIH,IAAgBG,GAAUA,IAAU,KAAK,SAAWH,IAAgB,KAAK,QAAU,EACnF,MAAO,CACH,GAAG,KAAK,MAAM,EAAGE,CAAI,EACrB,MACA,GAAG,KAAK,MAAMC,EAAQ,EAAG,KAAK,OAAO,CACzD,EAGY,GAAIH,EAAcE,GAAQF,EAAcG,EAAO,CAC3C,MAAMC,EAAQJ,EAAcE,EAAO,EAC7BG,EAAML,EAAcE,EAAO,EAAID,EAErC,MAAO,CACH,EACA,MACA,GAAIG,EAAQC,EAAM,CAACL,CAAW,EAAI,KAAK,MAAMI,EAAOC,CAAG,EACvD,MACA,KAAK,OACzB,CACa,CAED,MAAO,CACH,GAAG,KAAK,MAAM,EAAGH,CAAI,EACrB,MACA,GAAG,KAAK,MAAMC,EAAO,KAAK,OAAO,CACjD,CACS,EAED,iBAAkB,CACd,OAAK,KAAK,SAIH,KAAK,MAAQ,KAAK,IAAI,GAAG,KAAK,KAAK,EAH/B,EAId,EAED,eAAgB,CACZ,MAAMG,EAAQ,KAAK,MACbC,EAAc,CAAC,GAAG,KAAK,KAAK,EAAE,KAAK,CAACC,EAAGC,IAAMD,EAAIC,CAAC,EAExD,IAAIC,EAOJ,OANsBH,EAAY,OAAQI,GAClCD,EAAWJ,EAAc,IAC7BI,EAAWC,EACJ,GACV,CAGJ,CACJ,EAED,MAAO,CACH,MAAO,CACH,KAAK,YAAc,KAAK,IAC3B,EAED,OAAQ,CACJ,KAAK,QAAU,KAAK,KACvB,EAED,SAAU,CACN,GAAI,KAAK,UAAY,EAAG,CACpB,KAAK,YAAc,EACnB,MACH,CAEG,KAAK,YAAc,KAAK,SACxB,KAAK,uBAAuB,KAAK,OAAO,CAE/C,CACJ,EAED,QAAS,CACL,MAAMC,EAAMC,EAAI,CACZ,MAAMC,EAAQ,CAAA,EAEdF,EAAOA,EAAO,EAAIA,EAAO,EAEzB,QAASG,EAAIH,EAAMG,GAAKF,EAAIE,GAAK,EAC7BD,EAAM,KAAKC,CAAC,EAEhB,OAAOD,CACV,EAED,YAAa,CACT,KAAK,MAAM,cAAe,CACtB,KAAM,KAAK,YACX,MAAO,KAAK,OAC5B,CAAa,CACJ,EAED,iBAAiBE,EAAS,CACtB,KAAK,QAAU,OAAOA,CAAO,EAC7B,KAAK,UAAS,CACjB,EAED,WAAY,CACR,KAAK,YAAc,EACnB,KAAK,WAAU,CAClB,EAED,UAAW,CACP,KAAK,aAAe,EACpB,KAAK,WAAU,CAClB,EAED,UAAW,CACP,KAAK,aAAe,EACpB,KAAK,WAAU,CAClB,EAED,UAAW,CACP,KAAK,YAAc,KAAK,QACxB,KAAK,WAAU,CAClB,EAED,uBAAuBC,EAAS,CAC5B,KAAK,YAAcA,EACnB,KAAK,WAAU,CAClB,EAED,SAAU,CACN,KAAK,WAAU,CAClB,CACJ,CACL,CAAC"}
(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[76245],{770023:function(){},576245:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return r}}),t(355370);let{Criteria:s,EntityCollection:o}=Cicada.Data,{mapState:i,mapGetters:l}=Cicada.Component.getComponentHelper();var r={template:'\n{% block sw_product_detail_cross_selling %}\n<div v-if="isLoading">\n    <sw-skeleton />\n    <sw-skeleton />\n</div>\n\n<div\n    v-else\n    class="sw-product-detail-cross-selling"\n>\n    \n    {% block sw_product_detail_cross_selling_items_wrapper %}\n    <template v-if="showCrossSellingCard">\n        \n        {% block sw_product_detail_cross_selling_restore_inheritance %}\n        <sw-button\n            v-if="isChild"\n            class="sw-product-detail-cross-selling__restore-inheritance-btn"\n            :disabled="!acl.can(\'product.editor\')"\n            @click="onShowRestoreInheritanceModal"\n        >\n            <sw-icon\n                key="inherit-icon"\n                name="regular-link-horizontal"\n                size="16px"\n            />\n            {{ $tc(\'sw-product.crossselling.buttonRestoreCrossSellingInheritance\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_product_detail_cross_selling_items %}\n        <ul class="sw-product-detail-cross-selling__cross-selling-list">\n            <sw-product-cross-selling-form\n                v-for="item in product.crossSellings"\n                :key="item.id"\n                :cross-selling="item"\n                :allow-edit="acl.can(\'product.editor\')"\n            />\n        </ul>\n        {% endblock %}\n\n        \n        {% block sw_product_detail_cross_selling_add %}\n        <sw-button\n            v-tooltip="{\n                message: onAddCrossSellingTooltipMessage,\n                disabled: acl.can(\'product.editor\') && isSystemDefaultLanguage,\n                showOnDisabledElements: true\n            }"\n            class="sw-product-detail-cross-selling__add-btn"\n            variant="ghost"\n            :disabled="!acl.can(\'product.editor\') || !isSystemDefaultLanguage"\n            @click="onAddCrossSelling"\n        >\n            {{ $tc(\'sw-product.crossselling.buttonAddCrossSelling\') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_product_detail_cross_selling_empty_state_card %}\n    {# @deprecated tag:v6.7.0 - Block will be removed. Use `sw_product_detail_cross_selling_empty_state_card` instead. #}\n    \n    {% block sw_product_detail_empty_state %}\n    <sw-card\n        v-else\n        position-identifier="sw-product-detail-cross-selling-empty-state"\n    >\n        \n        {% block sw_product_detail_cross_selling_empty_state %}\n        <sw-empty-state\n            :title="$tc(\'sw-product.crossselling.cardTitleCrossSelling\')"\n            :absolute="false"\n            empty-module\n        >\n            \n            {% block sw_product_detail_cross_selling_empty_state_icon %}\n            <template #icon>\n                <img\n                    :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                    :alt="$tc(\'sw-product.crossselling.cardTitleCrossSelling\')"\n                >\n            </template>\n            {% endblock %}\n\n            <template #default>\n                \n                {% block sw_product_detail_cross_selling_empty_state_content %}\n                <template v-if="isChild">\n                    \n                    {% block sw_product_detail_cross_selling_empty_state_content_child %}\n                    <template v-if="isInherited">\n                        \n                        {% block sw_product_detail_cross_selling_empty_state_content_child_inherited %}\n                        <p>{{ $tc(\'sw-product.crossselling.inheritedEmptyStateDescription\') }}</p>\n                        {% endblock %}\n\n                        \n                        {% block sw_product_detail_cross_selling_empty_state_content_child_inherited_link %}\n                        <router-link\n                            v-if="isChild && isInherited"\n                            :to="{ name: \'sw.product.detail.crossSelling\', params: { id: product.parentId } }"\n                            class="sw-product-detail-cross-selling__parent-cross-sellings-link"\n                        >\n                            {{ $tc(\'sw-product.crossselling.linkCrossSellingsOfParent\') }}\n                            <sw-icon\n                                name="regular-long-arrow-right"\n                                small\n                            />\n                        </router-link>\n                        {% endblock %}\n                    </template>\n\n                    <template v-else>\n                        \n                        {% block sw_product_detail_cross_selling_empty_state_content_child_not_inherited %}\n                        <p>{{ $tc(\'sw-product.crossselling.notInheritedEmptyStateDescription\') }}</p>\n                        {% endblock %}\n                    </template>\n                    {% endblock %}\n                </template>\n\n                <template v-else>\n                    \n                    {% block sw_product_detail_cross_selling_empty_state_content_empty %}\n                    <p>{{ $tc(\'sw-product.crossselling.emptyStateDescription\') }}</p>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_detail_cross_selling_empty_state_inherit_switch %}\n                <template v-if="isChild">\n                    <div\n                        class="sw-product-detail-cross-selling__inherit-toggle-wrapper"\n                        :class="{ \'is--inherited\': isInherited }"\n                    >\n                        <sw-switch-field\n                            v-model:value="isInherited"\n                            class="sw-product-detail-cross-selling__inherit-switch"\n                            :disabled="!acl.can(\'product.editor\')"\n                        />\n                        <sw-inheritance-switch\n                            class="sw-product-detail-cross-selling__inheritance-icon"\n                            :is-inherited="isInherited"\n                            :disabled="!acl.can(\'product.editor\')"\n                            @inheritance-restore="restoreInheritance"\n                            @inheritance-remove="removeInheritance"\n                        />\n                        \n                        <label class="sw-product-detail-cross-selling__inheritance-label">\n                            {{ $tc(\'sw-product.crossselling.inheritSwitchLabel\') }}\n                        </label>\n                    </div>\n                </template>\n                {% endblock %}\n            </template>\n\n            \n            {% block sw_product_detail_cross_selling_empty_state_actions %}\n            {# @deprecated tag:v6.7.0 - Block will be removed. Use `sw_product_detail_cross_selling_empty_state_actions` instead. #}\n            \n            {% block sw_product_detail_empty_state_cross_selling_add %}\n            <template #actions>\n                \n                {% block sw_product_detail_cross_selling_empty_state_actions_add %}\n                <sw-button\n                    v-tooltip="{\n                        message: onAddCrossSellingTooltipMessage,\n                        disabled: acl.can(\'product.editor\') && isSystemDefaultLanguage,\n                        showOnDisabledElements: true\n                    }"\n                    variant="ghost"\n                    :disabled="isInherited || !acl.can(\'product.editor\') || !isSystemDefaultLanguage"\n                    @click="onAddCrossSelling"\n                >\n                    {{ $tc(\'sw-product.crossselling.buttonAddCrossSelling\') }}\n                </sw-button>\n                {% endblock %}\n            </template>\n            {% endblock %}\n            {% endblock %}\n        </sw-empty-state>\n        {% endblock %}\n    </sw-card>\n    {% endblock %}\n    {% endblock %}\n\n    \n    {% block sw_product_detail_cross_selling_modal_restore_inheritance %}\n    <sw-modal\n        v-if="showRestoreInheritanceModal"\n        variant="small"\n        :title="$tc(\'sw-product.crossselling.restoreInheritanceConfirmTitle\')"\n        class="sw-product-detail-cross-selling__restore-inheritance-modal"\n        @modal-close="onCloseRestoreInheritanceModal"\n    >\n        \n        {% block sw_product_detail_cross_selling_modal_restore_inheritance_text %}\n        <p>\n            {{ $tc(\'sw-product.crossselling.restoreInheritanceConfirmText\') }}\n        </p>\n        {% endblock %}\n\n        \n        {% block sw_product_detail_cross_selling_modal_restore_inheritance_footer %}\n        <template #modal-footer>\n            \n            {% block sw_product_detail_cross_selling_modal_restore_inheritance_action_cancel %}\n            <sw-button\n                size="small"\n                @click="onCloseRestoreInheritanceModal"\n            >\n                {{ $tc(\'global.default.cancel\') }}\n            </sw-button>\n            {% endblock %}\n\n            \n            {% block sw_product_detail_cross_selling_modal_restore_inheritance_action_restore %}\n            <sw-button\n                class="sw-product-detail-cross-selling__restore-button"\n                size="small"\n                variant="danger"\n                @click="onConfirmRestoreInheritance"\n            >\n                {{ $tc(\'sw-product.crossselling.restoreInheritanceButtonRestore\') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </sw-modal>\n    {% endblock %}\n</div>\n{% endblock %}\n',compatConfig:Cicada.compatConfig,inject:["repositoryFactory","acl"],props:{allowEdit:{type:Boolean,required:!1,default:!0}},data(){return{crossSelling:null,isInherited:!1,showRestoreInheritanceModal:!1}},computed:{...i("swProductDetail",["product"]),...l("swProductDetail",["isLoading","isChild"]),...l("context",["isSystemDefaultLanguage"]),showCrossSellingCard(){return!this.isLoading&&this.product.crossSellings&&this.product.crossSellings.length>0},onAddCrossSellingTooltipMessage(){return this.isSystemDefaultLanguage?this.$tc("sw-privileges.tooltip.warning"):this.$tc("sw-product.crossselling.buttonAddCrossSellingLanguageWarning")},assetFilter(){return Cicada.Filter.getByName("asset")},crossSellingRepository(){return this.repositoryFactory.create(this.product.crossSellings.entity,this.product.crossSellings.source)}},watch:{product(e){e.crossSellings.forEach(e=>{e.assignedProducts.length>0||this.loadAssignedProducts(e)})},"product.crossSellings":{handler(e){e&&(this.isInherited=this.isChild&&!this.product.crossSellings.total)},immediate:!0}},mounted(){this.mountedComponent()},methods:{mountedComponent(){this.isInherited=this.isChild&&!this.product.crossSellings.total},loadAssignedProducts(e){let n=this.repositoryFactory.create(e.assignedProducts.entity,e.assignedProducts.source),t=new s(1,25);return t.addFilter(s.equals("crossSellingId",e.id)).addSorting(s.sort("position","ASC")).addAssociation("product"),n.search(t,{...Cicada.Context.api,inheritance:!0}).then(n=>{e.assignedProducts=n}),e},onAddCrossSelling(){this.crossSelling=this.crossSellingRepository.create(),this.crossSelling.productId=this.product.id,this.crossSelling.position=this.product.crossSellings.length+1,this.crossSelling.type="productStream",this.crossSelling.sortBy="name",this.crossSelling.sortDirection="ASC",this.crossSelling.limit=24,this.product.crossSellings.push(this.crossSelling)},restoreInheritance(){this.isInherited=!0},removeInheritance(){this.isInherited=!1},onShowRestoreInheritanceModal(){this.showRestoreInheritanceModal=!0},onCloseRestoreInheritanceModal(){this.showRestoreInheritanceModal=!1},onConfirmRestoreInheritance(){this.onCloseRestoreInheritanceModal(),this.$nextTick(()=>{this.product.crossSellings=new o(this.crossSellingRepository.route,this.product.crossSellings.entity,Cicada.Context.api),this.restoreInheritance()})}}}},355370:function(e,n,t){var s=t(770023);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),t(745346).Z("038be833",s,!0,{})}}]);
(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[7777],{433739:function(){},907777:function(o,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var e=n(526568);n(651897);let{State:r,Utils:a,Service:i}=Cicada,{format:s}=a;var c={template:'\n{% block sw_order_create_promotion_modal %}\n<sw-modal\n    :title="$tc(\'sw-order.promotionModal.labelTitle\')"\n    class="sw-order-create-promotion-modal"\n    @modal-close="onCancel"\n>\n    \n    {% block sw_order_create_promotion_modal_body %}\n    \n    {% block sw_order_create_promotion_modal_message %}\n    <p>{{ hasNoAutomaticPromotions ? $tc(\'sw-order.promotionModal.messageNoItems\') : $tc(\'sw-order.promotionModal.message\') }}</p>\n    {% endblock %}\n\n    \n    {% block sw_order_create_promotion_modal_promotions %}\n    <div\n        v-for="(item, index) in cartAutomaticPromotionItems"\n        :key="index"\n        class="sw-order-create-promotion-modal__promotion"\n    >\n        \n        {% block sw_order_create_promotion_modal_promotion_name %}\n        <strong class="sw-order-create-promotion-modal__promotion-name">{{ item.label }}</strong>\n        {% endblock %}\n\n        \n        {% block sw_order_create_promotion_modal_promotion_description %}\n        <p>{{ getDescription(item) }}</p>\n        {% endblock %}\n    </div>\n    {% endblock %}\n    {% endblock %}\n\n    \n    {% block sw_order_create_promotion_modal_footer %}\n    <template #modal-footer>\n        \n        {% block sw_order_create_promotion_modal_footer_button_cancel %}\n        <sw-button\n            size="small"\n            @click="onCancel"\n        >\n            {{ $tc(\'global.default.cancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_order_create_promotion_modal_footer_button_save %}\n        <sw-button\n            size="small"\n            variant="primary"\n            :is-loading="isLoading"\n            :disabled="hasNoAutomaticPromotions"\n            @click="onSave"\n        >\n            {{ $tc(\'sw-order.promotionModal.buttonDisable\') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',compatConfig:Cicada.compatConfig,emits:["close","save"],props:{currency:{type:Object,required:!0},salesChannelId:{type:String,required:!1,default:null}},data(){return{isLoading:!1}},computed:{cart(){return r.get("swOrder").cart},cartAutomaticPromotionItems(){return this.cart.lineItems.filter(o=>"promotion"===o.type&&""===o.payload.code)},hasNoAutomaticPromotions(){return 0===this.cartAutomaticPromotionItems.length}},methods:{onCancel(){this.$emit("close")},onSave(){this.disableAutomaticPromotions()},disableAutomaticPromotions(){this.isLoading=!0;let o={salesChannelId:this.salesChannelId};i("cartStoreService").disableAutomaticPromotions(this.cart.token,o).then(()=>{this.isLoading=!1,this.$emit("save")})},getDescription(o){let{totalPrice:t}=o.price,{value:n,discountScope:r,discountType:a,groupId:i}=o.payload,c=`sw-order.createBase.textPromotionDescription.${r}`;if(r===e.nv.CART&&a===e.sC.ABSOLUTE&&Math.abs(t)<n)return this.$tc(`${c}.absoluteUpto`,0,{value:s.currency(Number(n),this.currency.isoCode),totalPrice:s.currency(Math.abs(t),this.currency.isoCode)});let l=a===e.sC.PERCENTAGE?n:s.currency(Number(n),this.currency.isoCode);return this.$tc(`${c}.${a}`,0,{value:l,groupId:i})}}}},651897:function(o,t,n){var e=n(433739);e.__esModule&&(e=e.default),"string"==typeof e&&(e=[[o.id,e,""]]),e.locals&&(o.exports=e.locals),n(745346).Z("431d0c80",e,!0,{})}}]);
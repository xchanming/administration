(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[3561],{688821:function(){},3561:function(i,n,t){"use strict";t.r(n),t.d(n,{default:function(){return e}}),t(938239);var e={template:'\n{% block sw_first_run_wizard_cicada_domain %}\n<div class="sw-first-run-wizard-cicada-domain">\n    <h3 class="headline">\n        {{ $tc(\'sw-first-run-wizard.cicadaDomain.headline\') }}\n    </h3>\n    <p\n        class="message"\n        v-html="$tc(\'sw-first-run-wizard.cicadaDomain.message\')"\n    ></p>\n\n    <sw-switch-field\n        v-model:value="createShopDomain"\n        :label="$tc(\'sw-first-run-wizard.cicadaDomain.labelCreateDomain\')"\n    />\n\n    <div v-if="createShopDomain">\n        <sw-text-field\n            v-model:value="newShopDomain"\n            name="newShopDomain"\n            validation="required"\n            :label="\'Shop domain\'"\n        />\n        <sw-checkbox-field\n            v-model:value="testEnvironment"\n            :label="$tc(\'sw-first-run-wizard.cicadaDomain.testEnvironment\')"\n        />\n    </div>\n    <div v-else-if="licenceDomains.length > 0">\n        <sw-select-field\n            v-model:value="selectedShopDomain"\n            label="Shop domain"\n            placeholder=""\n        >\n            <option\n                v-for="domain in licenceDomains"\n                :key="domain.domain"\n                :value="domain.domain"\n            >\n                {{ domain.domain }}\n            </option>\n        </sw-select-field>\n    </div>\n    <div\n        v-if="domainError"\n        class="sw-first-run-wizard-cicada-domain__error"\n    >\n        <sw-alert\n            :title="domainError.title"\n            variant="error"\n            appearance="notification"\n        >\n            {{ domainError.detail }}\n        </sw-alert>\n    </div>\n\n    <sw-loader v-if="isLoading" />\n</div>\n{% endblock %}\n',compatConfig:Cicada.compatConfig,inject:["firstRunWizardService"],emits:["frw-set-title","buttons-update","frw-redirect"],data(){return{licenceDomains:[],selectedShopDomain:"",createShopDomain:!1,newShopDomain:"",testEnvironment:!1,domainError:null,isLoading:!1}},computed:{domainToVerify(){return this.createShopDomain?this.newShopDomain:this.selectedShopDomain},isDomainEmpty(){return this.domainToVerify.length<=0},nextAction(){return Cicada.State.get("context").app.config.settings.disableExtensionManagement?"sw.first.run.wizard.index.finish":"sw.first.run.wizard.index.store"}},watch:{isDomainEmpty(){this.updateButtons()}},created(){this.createdComponent()},methods:{createdComponent(){this.isLoading=!0,this.updateButtons(),this.setTitle(),this.firstRunWizardService.getLicenseDomains().then(i=>{let{items:n}=i;n&&!(n.length<1)&&(this.licenceDomains=n,this.selectedShopDomain=n[0].domain)}).finally(()=>{this.licenceDomains.length<=0&&(this.createShopDomain=!0),this.isLoading=!1})},setTitle(){this.$emit("frw-set-title",this.$tc("sw-first-run-wizard.cicadaAccount.modalTitle"))},updateButtons(){let i=[{key:"back",label:this.$tc("sw-first-run-wizard.general.buttonBack"),position:"left",variant:null,action:"sw.first.run.wizard.index.cicada.account",disabled:!1},{key:"next",label:this.$tc("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:this.verifyDomain.bind(this),disabled:this.isDomainEmpty}];this.$emit("buttons-update",i)},verifyDomain(){let{testEnvironment:i}=this,n=this.domainToVerify;return this.domainError=null,this.firstRunWizardService.verifyLicenseDomain({domain:n,testEnvironment:i}).then(()=>(this.$emit("frw-redirect",this.nextAction),!1)).catch(i=>{let n=i.response.data.errors.pop();return this.domainError=n,!0})}}}},938239:function(i,n,t){var e=t(688821);e.__esModule&&(e=e.default),"string"==typeof e&&(e=[[i.id,e,""]]),e.locals&&(i.exports=e.locals),t(745346).Z("3cca3176",e,!0,{})}}]);